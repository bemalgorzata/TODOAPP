"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[179],{2011:(Rt,xe,N)=>{N.d(xe,{hO:()=>je,xv:()=>ye,Dh:()=>ce,GT:()=>we,cc:()=>Pe,on:()=>z,pX:()=>ge});var f=N(5e3),j=N(127),P=N(4027);Rt=N.hmd(Rt);const ne=["ngOnDestroy"],ge=(Ie,at,Ke,Ne={})=>new Proxy(Ie,{get:(Me,Ee)=>Ke.runOutsideAngular(()=>{var Je;if(Ie[Ee])return(null===(Je=null==Ne?void 0:Ne.spy)||void 0===Je?void 0:Je.get)&&Ne.spy.get(Ee,Ie[Ee]),Ie[Ee];if(ne.indexOf(Ee)>-1)return()=>{};const J=at.toPromise().then(it=>{const ut=it&&it[Ee];return"function"==typeof ut?ut.bind(it):ut&&ut.then?ut.then(oe=>Ke.run(()=>oe)):Ke.run(()=>ut)});return new Proxy(()=>{},{get:(it,ut)=>J[ut],apply:(it,ut,oe)=>J.then(se=>{var le;const Te=se&&se(...oe);return(null===(le=null==Ne?void 0:Ne.spy)||void 0===le?void 0:le.apply)&&Ne.spy.apply(Ee,oe,Te),Te})})})}),we=(Ie,at)=>{at.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Ne=>{Object.defineProperty(Ie.prototype,Ne,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Ne))})})};class ae{constructor(at){return at}}const ce=new f.OlP("angularfire2.app.options"),ye=new f.OlP("angularfire2.app.name");function z(Ie,at,Ke){const Me="object"==typeof Ke&&Ke||{};Me.name=Me.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const Je=j.Z.apps.filter(J=>J&&J.name===Me.name)[0]||at.runOutsideAngular(()=>j.Z.initializeApp(Ie,Me));try{JSON.stringify(Ie)!==JSON.stringify(Je.options)&&W("error",`${Je.name} Firebase App already initialized with different options${Rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(J){}return new ae(Je)}const W=(Ie,...at)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ie](...at)},Y={provide:ae,useFactory:z,deps:[ce,f.R0b,[new f.FiY,ye]]};let je=(()=>{class Ie{constructor(Ke){j.Z.registerVersion("angularfire",P.q4.full,"core"),j.Z.registerVersion("angularfire",P.q4.full,"app-compat"),j.Z.registerVersion("angular",f.q4F.full,Ke.toString())}static initializeApp(Ke,Ne){return{ngModule:Ie,providers:[{provide:ce,useValue:Ke},{provide:ye,useValue:Ne}]}}}return Ie.\u0275fac=function(Ke){return new(Ke||Ie)(f.LFG(f.Lbi))},Ie.\u0275mod=f.oAB({type:Ie}),Ie.\u0275inj=f.cJS({providers:[Y]}),Ie})();function Pe(Ie,at,Ke,Ne,Me){const[,Ee,Je]=globalThis.\u0275AngularfireInstanceCache.find(J=>J[0]===Ie)||[];if(Ee)return function Oe(Ie,at){try{return Ie.toString()===at.toString()}catch(Ke){return Ie===at}}(Me,Je)||(_e("error",`${at} was already initialized on the ${Ke} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Me,was:Je})),Ee;{const J=Ne();return globalThis.\u0275AngularfireInstanceCache.push([Ie,J,Me]),J}}const Le=!!Rt.hot,_e=(Ie,...at)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ie](...at)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(Rt,xe,N)=>{N.d(xe,{q4:()=>_e,iC:()=>jn,HU:()=>ze,vb:()=>se,JM:()=>oe,nk:()=>ut,n1:()=>J,_J:()=>it,u3:()=>Ot});var f=N(5e3),j=N(5867),P=N(3226),ne=N(2375),ge=N(6148),we=N(4408),ce=N(7565);const z=new class ye extends ce.v{}(class ae extends we.o{constructor(pt,gt){super(pt,gt),this.scheduler=pt,this.work=gt}schedule(pt,gt=0){return gt>0?super.schedule(pt,gt):(this.delay=gt,this.state=pt,this.scheduler.flush(this),this)}execute(pt,gt){return gt>0||this.closed?super.execute(pt,gt):this._execute(pt,gt)}requestAsyncId(pt,gt,Ht=0){return null!=Ht&&Ht>0||null==Ht&&this.delay>0?super.requestAsyncId(pt,gt,Ht):pt.flush(this)}});var Y=N(4986),je=N(8306),Pe=N(8505),Oe=N(9468),Le=N(5363);const _e=new f.GfV("7.3.0"),Ie="__angularfire_symbol__analyticsIsSupportedValue",at="__angularfire_symbol__analyticsIsSupported",Ke="__angularfire_symbol__remoteConfigIsSupportedValue",Ne="__angularfire_symbol__remoteConfigIsSupported",Me="__angularfire_symbol__messagingIsSupportedValue",Ee="__angularfire_symbol__messagingIsSupported";globalThis[at]||(globalThis[at]=(0,ge.Gb)().then(Ge=>globalThis[Ie]=Ge).catch(()=>globalThis[Ie]=!1)),globalThis[Ee]||(globalThis[Ee]=(0,ne.Gb)().then(Ge=>globalThis[Me]=Ge).catch(()=>globalThis[Me]=!1)),globalThis[Ne]||(globalThis[Ne]=(0,P.Gb)().then(Ge=>globalThis[Ke]=Ge).catch(()=>globalThis[Ke]=!1));const Je=Ge=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Ge} in the constructor, first ensure that ${Ge} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Ge})\`.`,J={async:()=>globalThis[Ee],sync:()=>{const Ge=globalThis[Me];if(void 0===Ge)throw new Error(Je("Messaging"));return Ge}},it={async:()=>globalThis[Ne],sync:()=>{const Ge=globalThis[Ke];if(void 0===Ge)throw new Error(Je("RemoteConfig"));return Ge}},ut={async:()=>globalThis[at],sync:()=>{const Ge=globalThis[Ie];if(void 0===Ge)throw new Error(Je("Analytics"));return Ge}};function oe(Ge,pt,gt){if(pt){if(1===pt.length)return pt[0];const hn=pt.filter(Mn=>Mn.app===gt);if(1===hn.length)return hn[0]}return gt.container.getProvider(Ge).getImmediate({optional:!0})}const se=(Ge,pt)=>{const gt=pt?[pt]:(0,j.C6)(),Ht=[];return gt.forEach(Qt=>{Qt.container.getProvider(Ge).instances.forEach(Mn=>{Ht.includes(Mn)||Ht.push(Mn)})}),Ht};function le(){}class Te{constructor(pt,gt=z){this.zone=pt,this.delegate=gt}now(){return this.delegate.now()}schedule(pt,gt,Ht){const Qt=this.zone;return this.delegate.schedule(function(Mn){Qt.runGuarded(()=>{pt.apply(this,[Mn])})},gt,Ht)}}class fe{constructor(pt){this.zone=pt,this.task=null}call(pt,gt){const Ht=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",le,{},le,le)),gt.pipe((0,Pe.b)({next:Ht,complete:Ht,error:Ht})).subscribe(pt).add(Ht)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ze=(()=>{class Ge{constructor(gt){this.ngZone=gt,this.outsideAngular=gt.runOutsideAngular(()=>new Te(Zone.current)),this.insideAngular=gt.run(()=>new Te(Zone.current,Y.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ge.\u0275fac=function(gt){return new(gt||Ge)(f.LFG(f.R0b))},Ge.\u0275prov=f.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})();function bt(){const Ge=globalThis.\u0275AngularFireScheduler;if(!Ge)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ge}function jt(Ge){return bt().ngZone.runOutsideAngular(()=>Ge())}function Vt(Ge){return bt().ngZone.run(()=>Ge())}function jn(Ge){return bt(),function Dn(Ge){return function(gt){return(gt=gt.lift(new fe(Ge.ngZone))).pipe((0,Oe.R)(Ge.outsideAngular),(0,Le.Q)(Ge.insideAngular))}}(bt())(Ge)}const $t=(Ge,pt)=>function(){const Ht=arguments;return pt&&setTimeout(()=>{"scheduled"===pt.state&&pt.invoke()},10),Vt(()=>Ge.apply(void 0,Ht))},Ot=(Ge,pt)=>function(){let gt;const Ht=arguments;for(let hn=0;hn<arguments.length;hn++)"function"==typeof Ht[hn]&&(pt&&(gt||(gt=Vt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",le,{},le,le)))),Ht[hn]=$t(Ht[hn],gt));const Qt=jt(()=>Ge.apply(this,Ht));if(!pt){if(Qt instanceof je.y){const hn=bt();return Qt.pipe((0,Oe.R)(hn.outsideAngular),(0,Le.Q)(hn.insideAngular))}return Vt(()=>Qt)}return Qt instanceof je.y?Qt.pipe(jn):Qt instanceof Promise?Vt(()=>new Promise((hn,Mn)=>Qt.then(Nn=>Vt(()=>hn(Nn)),Nn=>Vt(()=>Mn(Nn))))):"function"==typeof Qt&&gt?function(){return setTimeout(()=>{gt&&"scheduled"===gt.state&&gt.invoke()},10),Qt.apply(this,arguments)}:Vt(()=>Qt)}},573:(Rt,xe,N)=>{N.d(xe,{$:()=>Jp,A:()=>W,E:()=>ee,G:()=>Pt,I:()=>Ns,K:()=>O,L:()=>Zp,M:()=>B_,N:()=>Bl,P:()=>ru,Q:()=>mc,R:()=>Oi,T:()=>Wi,U:()=>Ia,V:()=>j_,W:()=>Iw,X:()=>Qr,Y:()=>wc,Z:()=>li,_:()=>Os,a:()=>kt,a0:()=>W_,a1:()=>G_,a2:()=>Ue,a3:()=>z_,a4:()=>Tc,a5:()=>zi,a6:()=>Eh,a7:()=>Tw,a8:()=>Xp,a9:()=>Ps,aA:()=>yo,aB:()=>$c,aC:()=>St,aG:()=>Mr,aJ:()=>$l,aa:()=>Aa,ab:()=>q_,ae:()=>bh,af:()=>Z_,ag:()=>Ch,aj:()=>Qp,ak:()=>X_,am:()=>Th,an:()=>Mc,ao:()=>xn,ap:()=>ut,aq:()=>Kt,ar:()=>st,as:()=>Ke,at:()=>Xo,au:()=>Ga,av:()=>Ne,aw:()=>J,ax:()=>se,ay:()=>H,az:()=>Qo,b:()=>cr,c:()=>Vc,d:()=>uy,e:()=>Aw,f:()=>dg,g:()=>En,h:()=>hg,i:()=>hs,j:()=>Yo,k:()=>$s,l:()=>wr,m:()=>yy,n:()=>wy,o:()=>ce,r:()=>tu,s:()=>Ko,t:()=>sr,u:()=>_s,z:()=>Pe});var f=N(5861),j=N(2090),P=N(9681),ne=N(655),ge=N(1877),we=N(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function Y(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Oe=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new ge.Yd("@firebase/auth");function at(E,...m){Ie.logLevel<=ge.in.ERROR&&Ie.error(`Auth (${P.SDK_VERSION}): ${E}`,...m)}function Ke(E,...m){throw Je(E,...m)}function Ne(E,...m){return Je(E,...m)}function Me(E,m,_){const b=Object.assign(Object.assign({},Oe()),{[m]:_});return new j.LL("auth","Firebase",b).create(m,{appName:E.name})}function Ee(E,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Ke(E,"argument-error"),Me(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Je(E,...m){if("string"!=typeof E){const _=m[0],b=[...m.slice(1)];return b[0]&&(b[0].appName=E.name),E._errorFactory.create(_,...b)}return Le.create(E,...m)}function J(E,m,..._){if(!E)throw Je(m,..._)}function it(E){const m="INTERNAL ASSERTION FAILED: "+E;throw at(m),new Error(m)}function ut(E,m){E||it(m)}const oe=new Map;function se(E){ut(E instanceof Function,"Expected a class definition");let m=oe.get(E);return m?(ut(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,oe.set(E,m),m)}function fe(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function ze(){return"http:"===bt()||"https:"===bt()}function bt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Be{constructor(m,_){this.shortDelay=m,this.longDelay=_,ut(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function jt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ze()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gn(E,m){ut(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class jn{static initialize(m,_,b){this.fetchImpl=m,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$t=new Be(3e4,6e4);function Ot(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function Ge(E,m,_,b){return pt.apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(E,m,_,b,A={}){return gt(E,A,(0,f.Z)(function*(){let L={},re={};b&&("GET"===m?re=b:L={body:JSON.stringify(b)});const Ve=(0,j.xO)(Object.assign({key:E.config.apiKey},re)).slice(1),Dt=yield E._getAdditionalHeaders();return Dt["Content-Type"]="application/json",E.languageCode&&(Dt["X-Firebase-Locale"]=E.languageCode),jn.fetch()(Mn(E,E.config.apiHost,_,Ve),Object.assign({method:m,headers:Dt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function gt(E,m,_){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,f.Z)(function*(E,m,_){E._canInitEmulator=!1;const b=Object.assign(Object.assign({},Dn),m);try{const A=new Nn(E),L=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const re=yield L.json();if("needConfirmation"in re)throw kn(E,"account-exists-with-different-credential",re);if(L.ok&&!("errorMessage"in re))return re;{const Ve=L.ok?re.errorMessage:re.error.message,[Dt,Bt]=Ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Dt)throw kn(E,"credential-already-in-use",re);if("EMAIL_EXISTS"===Dt)throw kn(E,"email-already-in-use",re);const rn=b[Dt]||Dt.toLowerCase().replace(/[_\s]+/g,"-");if(Bt)throw Me(E,rn,Bt);Ke(E,rn)}}catch(A){if(A instanceof j.ZR)throw A;Ke(E,"network-request-failed")}})).apply(this,arguments)}function Qt(E,m,_,b){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(E,m,_,b,A={}){const L=yield Ge(E,m,_,b,A);return"mfaPendingCredential"in L&&Ke(E,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Mn(E,m,_,b){const A=`${m}${_}?${b}`;return E.config.emulator?gn(E.config,A):`${E.config.apiScheme}://${A}`}class Nn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Ne(this.auth,"network-request-failed")),$t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(E,m,_){const b={appName:E.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const A=Ne(E,m,b);return A.customData._tokenResponse=_,A}function De(){return(De=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function ue(E,m){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ye(E,m){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function zt(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function yn(){return(yn=(0,f.Z)(function*(E,m=!1){const _=(0,j.m9)(E),b=yield _.getIdToken(m),A=vt(b);J(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const L="object"==typeof A.firebase?A.firebase:void 0,re=null==L?void 0:L.sign_in_provider;return{claims:A,token:b,authTime:zt(An(A.auth_time)),issuedAtTime:zt(An(A.iat)),expirationTime:zt(An(A.exp)),signInProvider:re||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function An(E){return 1e3*Number(E)}function vt(E){const[m,_,b]=E.split(".");if(void 0===m||void 0===_||void 0===b)return at("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,j.tV)(_);return A?JSON.parse(A):(at("Failed to decode base64 JWT payload"),null)}catch(A){return at("Caught error parsing JWT payload as JSON",A),null}}function lt(E,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(E,m,_=!1){if(_)return m;try{return yield m}catch(b){throw b instanceof j.ZR&&ur(b)&&E.auth.currentUser===E&&(yield E.auth.signOut()),b}})).apply(this,arguments)}function ur({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class qt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(m);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),b)}iteration(){var m=this;return(0,f.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class Yn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=zt(this.lastLoginAt),this.creationTime=zt(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mn(E){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(E){var m;const _=E.auth,b=yield E.getIdToken(),A=yield lt(E,Ye(_,{idToken:b}));J(null==A?void 0:A.users.length,_,"internal-error");const L=A.users[0];E._notifyReloadListener(L);const re=(null===(m=L.providerUserInfo)||void 0===m?void 0:m.length)?rt(L.providerUserInfo):[],Ve=Xt(E.providerData,re),rn=!!E.isAnonymous&&!(E.email&&L.passwordHash||(null==Ve?void 0:Ve.length)),On={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ve,metadata:new Yn(L.createdAt,L.lastLoginAt),isAnonymous:rn};Object.assign(E,On)})).apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(E){const m=(0,j.m9)(E);yield mn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Xt(E,m){return[...E.filter(b=>!m.some(A=>A.providerId===b.providerId)),...m]}function rt(E){return E.map(m=>{var{providerId:_}=m,b=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function ft(){return(ft=(0,f.Z)(function*(E,m){const _=yield gt(E,{},(0,f.Z)(function*(){const b=(0,j.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:A,apiKey:L}=E.config,re=Mn(E,A,"/v1/token",`key=${L}`),Ve=yield E._getAdditionalHeaders();return Ve["Content-Type"]="application/x-www-form-urlencoded",jn.fetch()(re,{method:"POST",headers:Ve,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){J(m.idToken,"internal-error"),J(void 0!==m.idToken,"internal-error"),J(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function mt(E){const m=vt(E);return J(m,"internal-error"),J(void 0!==m.exp,"internal-error"),J(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var b=this;return(0,f.Z)(function*(){return J(!b.accessToken||b.refreshToken,m,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(m,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var b=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:L,expiresIn:re}=yield function Ae(E,m){return ft.apply(this,arguments)}(m,_);b.updateTokensAndExpiration(A,L,Number(re))})()}updateTokensAndExpiration(m,_,b){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(m,_){const{refreshToken:b,accessToken:A,expirationTime:L}=_,re=new Q;return b&&(J("string"==typeof b,"internal-error",{appName:m}),re.refreshToken=b),A&&(J("string"==typeof A,"internal-error",{appName:m}),re.accessToken=A),L&&(J("number"==typeof L,"internal-error",{appName:m}),re.expirationTime=L),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Q,this.toJSON())}_performRefresh(){return it("not implemented")}}function me(E,m){J("string"==typeof E||void 0===E,"internal-error",{appName:m})}class Se{constructor(m){var{uid:_,auth:b,stsTokenManager:A}=m,L=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Yn(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,f.Z)(function*(){const b=yield lt(_,_.stsTokenManager.getToken(_.auth,m));return J(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(m){return function un(E){return yn.apply(this,arguments)}(this,m)}reload(){return function It(E){return Wn.apply(this,arguments)}(this)}_assign(m){this!==m&&(J(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Se(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var b=this;return(0,f.Z)(function*(){let A=!1;m.idToken&&m.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(m),A=!0),_&&(yield mn(b)),yield b.auth._persistUserIfCurrent(b),A&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var m=this;return(0,f.Z)(function*(){const _=yield m.getIdToken();return yield lt(m,function er(E,m){return De.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var b,A,L,re,Ve,Dt,Bt,rn;const On=null!==(b=_.displayName)&&void 0!==b?b:void 0,js=null!==(A=_.email)&&void 0!==A?A:void 0,bi=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,Za=null!==(re=_.photoURL)&&void 0!==re?re:void 0,Kc=null!==(Ve=_.tenantId)&&void 0!==Ve?Ve:void 0,hu=null!==(Dt=_._redirectEventId)&&void 0!==Dt?Dt:void 0,by=null!==(Bt=_.createdAt)&&void 0!==Bt?Bt:void 0,fu=null!==(rn=_.lastLoginAt)&&void 0!==rn?rn:void 0,{uid:wo,emailVerified:vg,isAnonymous:Ya,providerData:pu,stsTokenManager:Eg}=_;J(wo&&Eg,m,"internal-error");const Zc=Q.fromJSON(this.name,Eg);J("string"==typeof wo,m,"internal-error"),me(On,m.name),me(js,m.name),J("boolean"==typeof vg,m,"internal-error"),J("boolean"==typeof Ya,m,"internal-error"),me(bi,m.name),me(Za,m.name),me(Kc,m.name),me(hu,m.name),me(by,m.name),me(fu,m.name);const ea=new Se({uid:wo,auth:m,email:js,emailVerified:vg,displayName:On,isAnonymous:Ya,photoURL:Za,phoneNumber:bi,tenantId:Kc,stsTokenManager:Zc,createdAt:by,lastLoginAt:fu});return pu&&Array.isArray(pu)&&(ea.providerData=pu.map(Cy=>Object.assign({},Cy))),hu&&(ea._redirectEventId=hu),ea}static _fromIdTokenResponse(m,_,b=!1){return(0,f.Z)(function*(){const A=new Q;A.updateFromServerResponse(_);const L=new Se({uid:_.localId,auth:m,stsTokenManager:A,isAnonymous:b});return yield mn(L),L})()}}const O=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,b){var A=this;return(0,f.Z)(function*(){A.storage[_]=b})()}_get(_){var b=this;return(0,f.Z)(function*(){const A=b.storage[_];return void 0===A?null:A})()}_remove(_){var b=this;return(0,f.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return E.type="NONE",E})();function H(E,m,_){return`firebase:${E}:${m}:${_}`}class X{constructor(m,_,b){this.persistence=m,this.auth=_,this.userKey=b;const{config:A,name:L}=this.auth;this.fullUserKey=H(this.userKey,A.apiKey,L),this.fullPersistenceKey=H("persistence",A.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,f.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Se._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,f.Z)(function*(){if(_.persistence===m)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,b="authUser"){return(0,f.Z)(function*(){if(!_.length)return new X(se(O),m,b);const A=(yield Promise.all(_.map(function(){var Bt=(0,f.Z)(function*(rn){if(yield rn._isAvailable())return rn});return function(rn){return Bt.apply(this,arguments)}}()))).filter(Bt=>Bt);let L=A[0]||se(O);const re=H(b,m.config.apiKey,m.name);let Ve=null;for(const Bt of _)try{const rn=yield Bt._get(re);if(rn){const On=Se._fromJSON(m,rn);Bt!==L&&(Ve=On),L=Bt;break}}catch(rn){}const Dt=A.filter(Bt=>Bt._shouldAllowMigration);return L._shouldAllowMigration&&Dt.length?(L=Dt[0],Ve&&(yield L._set(re,Ve.toJSON())),yield Promise.all(_.map(function(){var Bt=(0,f.Z)(function*(rn){if(rn!==L)try{yield rn._remove(re)}catch(On){}});return function(rn){return Bt.apply(this,arguments)}}())),new X(L,m,b)):new X(L,m,b)})()}}function M(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(qe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(F(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Mt(m))return"Blackberry";if(_t(m))return"Webos";if($(m))return"Safari";if((m.includes("chrome/")||de(m))&&!m.includes("edge/"))return"Chrome";if(st(m))return"Android";{const b=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function F(E=(0,j.z$)()){return/firefox\//i.test(E)}function $(E=(0,j.z$)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function de(E=(0,j.z$)()){return/crios\//i.test(E)}function qe(E=(0,j.z$)()){return/iemobile/i.test(E)}function st(E=(0,j.z$)()){return/android/i.test(E)}function Mt(E=(0,j.z$)()){return/blackberry/i.test(E)}function _t(E=(0,j.z$)()){return/webos/i.test(E)}function Kt(E=(0,j.z$)()){return/iphone|ipad|ipod/i.test(E)}function xn(E=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function K(E=(0,j.z$)()){return Kt(E)||st(E)||_t(E)||Mt(E)||/windows phone/i.test(E)||qe(E)}function Xe(E,m=[]){let _;switch(E){case"Browser":_=M((0,j.z$)());break;case"Worker":_=`${M((0,j.z$)())}-${E}`;break;default:_=E}const b=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${P.SDK_VERSION}/${b}`}class Et{constructor(m,_,b){this.app=m,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U(this),this.idTokenSubscription=new U(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(m,_){var b=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,L;if(!b._deleted&&(b.persistenceManager=yield X.create(b,m),!b._deleted)){if(null===(A=b._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(re){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(L=b.currentUser)||void 0===L?void 0:L.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,f.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_)}})()}initializeCurrentUser(m){var _=this;return(0,f.Z)(function*(){var b;let A=yield _.assertedPersistence.getCurrentUser();if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const L=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,re=null==A?void 0:A._redirectEventId,Ve=yield _.tryRedirectSignIn(m);(!L||L===re)&&(null==Ve?void 0:Ve.user)&&(A=Ve.user)}return A?A._redirectEventId?(J(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===A._redirectEventId?_.directlySetCurrentUser(A):_.reloadAndSetCurrentUserOrClear(A)):_.reloadAndSetCurrentUserOrClear(A):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var _=this;return(0,f.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(A){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,f.Z)(function*(){try{yield mn(m)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Vt(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,f.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,f.Z)(function*(){const b=m?(0,j.m9)(m):null;return b&&J(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(m){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return m&&J(_.tenantId===m.tenantId,_,"tenant-id-mismatch"),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(m),_.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,f.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(se(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new j.LL("auth","Firebase",m())}onAuthStateChanged(m,_,b){return this.registerStateListener(this.authStateSubscription,m,_,b)}onIdTokenChanged(m,_,b){return this.registerStateListener(this.idTokenSubscription,m,_,b)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var b=this;return(0,f.Z)(function*(){const A=yield b.getOrInitRedirectPersistenceManager(_);return null===m?A.removeCurrentUser():A.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const b=m&&se(m)||_._popupRedirectResolver;J(b,_,"argument-error"),_.redirectPersistenceManager=yield X.create(_,[se(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,f.Z)(function*(){var b,A;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===m?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,f.Z)(function*(){if(m===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,b,A){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),re=this._isInitialized?Promise.resolve():this._initializationPromise;return J(re,this,"internal-error"),re.then(()=>L(this.currentUser)),"function"==typeof _?m.addObserver(_,b,A):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,f.Z)(function*(){var _;const b={"X-Client-Version":m.clientVersion};m.app.options.appId&&(b["X-Firebase-gmpid"]=m.app.options.appId);const A=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(b["X-Firebase-Client"]=A),b})()}}function St(E){return(0,j.m9)(E)}class U{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ee(E,m,_){const b=St(E);J(b._canInitEmulator,b,"emulator-config-failed"),J(/^https?:\/\//.test(m),b,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),L=Re(m),{host:re,port:Ve}=function yt(E){const m=Re(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(b);if(A){const L=A[1];return{host:L,port:Sn(b.substr(L.length+1))}}{const[L,re]=b.split(":");return{host:L,port:Sn(re)}}}(m);b.config.emulator={url:`${L}//${re}${null===Ve?"":`:${Ve}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:re,port:Ve,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Zt(){function E(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Re(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function Sn(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class Pt{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return it("not implemented")}_getIdTokenResponse(m){return it("not implemented")}_linkToIdToken(m,_){return it("not implemented")}_getReauthenticationResolver(m){return it("not implemented")}}function _n(E,m){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:resetPassword",Ot(E,m))})).apply(this,arguments)}function Ar(E,m){return tn.apply(this,arguments)}function tn(){return(tn=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function fc(E,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",Ot(E,m))})).apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithPassword",Ot(E,m))})).apply(this,arguments)}function Rr(E,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:sendOobCode",Ot(E,m))})).apply(this,arguments)}function Ll(E,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(E,m){return Rr(E,m)})).apply(this,arguments)}function Gn(E,m){return pc.apply(this,arguments)}function pc(){return(pc=(0,f.Z)(function*(E,m){return Rr(E,m)})).apply(this,arguments)}function dh(E,m){return ai.apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(E,m){return Rr(E,m)})).apply(this,arguments)}function ji(E,m){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,f.Z)(function*(E,m){return Rr(E,m)})).apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithEmailLink",Ot(E,m))})).apply(this,arguments)}function fh(){return(fh=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithEmailLink",Ot(E,m))})).apply(this,arguments)}class gc extends Pt{constructor(m,_,b,A=null){super("password",b),this._email=m,this._password=_,this._tenantId=A}static _fromEmailAndPassword(m,_){return new gc(m,_,"password")}static _fromEmailAndCode(m,_,b=null){return new gc(m,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function ch(E,m){return co.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function hh(E,m){return Bo.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Ke(m,"internal-error")}})()}_linkToIdToken(m,_){var b=this;return(0,f.Z)(function*(){switch(b.signInMethod){case"password":return Ar(m,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Hi(E,m){return fh.apply(this,arguments)}(m,{idToken:_,email:b._email,oobCode:b._password});default:Ke(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function fo(E,m){return wi.apply(this,arguments)}function wi(){return(wi=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithIdp",Ot(E,m))})).apply(this,arguments)}class Ns extends Pt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Ns(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Ke("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:A}=_,L=(0,ne._T)(_,["providerId","signInMethod"]);if(!b||!A)return null;const re=new Ns(b,A);return re.idToken=L.idToken||void 0,re.accessToken=L.accessToken||void 0,re.secret=L.secret,re.nonce=L.nonce,re.pendingToken=L.pendingToken||null,re}_getIdTokenResponse(m){return fo(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,fo(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,fo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,j.xO)(_)}return m}}function yw(E,m){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:sendVerificationCode",Ot(E,m))})).apply(this,arguments)}function zp(){return(zp=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithPhoneNumber",Ot(E,m))})).apply(this,arguments)}function qp(){return(qp=(0,f.Z)(function*(E,m){const _=yield Qt(E,"POST","/v1/accounts:signInWithPhoneNumber",Ot(E,m));if(_.temporaryProof)throw kn(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ew={USER_NOT_FOUND:"user-not-found"};function ph(){return(ph=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithPhoneNumber",Ot(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Ew)})).apply(this,arguments)}class ba extends Pt{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new ba({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new ba({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Gp(E,m){return zp.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function vw(E,m){return qp.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function ww(E,m){return ph.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:b,verificationCode:A}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:b,code:A}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:b,phoneNumber:A,temporaryProof:L}=m;return b||_||A||L?new ba({verificationId:_,verificationCode:b,phoneNumber:A,temporaryProof:L}):null}}class Ca{constructor(m){var _,b,A,L,re,Ve;const Dt=(0,j.zd)((0,j.pd)(m)),Bt=null!==(_=Dt.apiKey)&&void 0!==_?_:null,rn=null!==(b=Dt.oobCode)&&void 0!==b?b:null,On=function bw(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Dt.mode)&&void 0!==A?A:null);J(Bt&&rn&&On,"argument-error"),this.apiKey=Bt,this.operation=On,this.code=rn,this.continueUrl=null!==(L=Dt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(re=Dt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Ve=Dt.tenantId)&&void 0!==Ve?Ve:null}static parseLink(m){const _=function Cw(E){const m=(0,j.zd)((0,j.pd)(E)).link,_=m?(0,j.zd)((0,j.pd)(m)).deep_link_id:null,b=(0,j.zd)((0,j.pd)(E)).deep_link_id;return(b?(0,j.zd)((0,j.pd)(b)).link:null)||b||_||m||E}(m);try{return new Ca(_)}catch(b){return null}}}let Zp=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,b){return gc._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const A=Ca.parseLink(b);return J(A,"argument-error"),gc._fromEmailAndCode(_,A.code,A.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class xs{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Ul extends xs{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Wi extends Ul{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return J("providerId"in _&&"signInMethod"in _,"argument-error"),Ns._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return J(m.idToken||m.accessToken,"argument-error"),Ns._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Wi.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Wi.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:A,pendingToken:L,nonce:re,providerId:Ve}=m;if(!b&&!A&&!_&&!L||!Ve)return null;try{return new Wi(Ve)._credential({idToken:_,accessToken:b,nonce:re,pendingToken:L})}catch(Dt){return null}}}let B_=(()=>{class E extends Ul{constructor(){super("facebook.com")}static credential(_){return Ns._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Bl=(()=>{class E extends Ul{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return Ns._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:A}=_;if(!b&&!A)return null;try{return E.credential(b,A)}catch(L){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),mc=(()=>{class E extends Ul{constructor(){super("github.com")}static credential(_){return Ns._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(b){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class $l extends Pt{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return fo(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,fo(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,fo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:A,pendingToken:L}=_;return b&&A&&L&&b===A?new $l(b,L):null}static _create(m,_){return new $l(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ia extends xs{constructor(m){J(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ia.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ia.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=$l.fromJSON(m);return J(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:b}=m;if(!_||!b)return null;try{return $l._create(b,_)}catch(A){return null}}}let j_=(()=>{class E extends Ul{constructor(){super("twitter.com")}static credential(_,b){return Ns._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:A}=_;if(!b||!A)return null;try{return E.credential(b,A)}catch(L){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function _c(E,m){return gh.apply(this,arguments)}function gh(){return(gh=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signUp",Ot(E,m))})).apply(this,arguments)}class zn{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,b,A=!1){return(0,f.Z)(function*(){const L=yield Se._fromIdTokenResponse(m,b,A),re=jl(b);return new zn({user:L,providerId:re,_tokenResponse:b,operationType:_})})()}static _forOperation(m,_,b){return(0,f.Z)(function*(){yield m._updateTokensIfNecessary(b,!0);const A=jl(b);return new zn({user:m,providerId:A,_tokenResponse:b,operationType:_})})()}}function jl(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Iw(E){return yc.apply(this,arguments)}function yc(){return(yc=(0,f.Z)(function*(E){var m;const _=St(E);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new zn({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield _c(_,{returnSecureToken:!0}),A=yield zn._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class mh extends j.ZR{constructor(m,_,b,A){var L;super(_.code,_.message),this.operationType=b,this.user=A,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:m.name,tenantId:null!==(L=m.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(m,_,b,A){return new mh(m,_,b,A)}}function Yp(E,m,_,b){return("reauthenticate"===m?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?mh._fromErrorAndOperation(E,L,m,b):L})}function vc(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function Qp(E,m){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,f.Z)(function*(E,m){const _=(0,j.m9)(E);yield Wl(!0,_,m);const{providerUserInfo:b}=yield ue(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),A=vc(b||[]);return _.providerData=_.providerData.filter(L=>A.has(L.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function H_(E,m){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(E,m,_=!1){const b=yield lt(E,m._linkToIdToken(E.auth,yield E.getIdToken()),_);return zn._forOperation(E,"link",b)})).apply(this,arguments)}function Wl(E,m,_){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(E,m,_){yield mn(m);const A=!1===E?"provider-already-linked":"no-such-provider";J(vc(m.providerData).has(_)===E,m.auth,A)})).apply(this,arguments)}function Qn(E,m){return _h.apply(this,arguments)}function _h(){return(_h=(0,f.Z)(function*(E,m,_=!1){const{auth:b}=E,A="reauthenticate";try{const L=yield lt(E,Yp(b,A,m,E),_);J(L.idToken,b,"internal-error");const re=vt(L.idToken);J(re,b,"internal-error");const{sub:Ve}=re;return J(E.uid===Ve,b,"user-mismatch"),zn._forOperation(E,A,L)}catch(L){throw"auth/user-not-found"===(null==L?void 0:L.code)&&Ke(b,"user-mismatch"),L}})).apply(this,arguments)}function Ec(E,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(E,m,_=!1){const b="signIn",A=yield Yp(E,b,m),L=yield zn._fromIdTokenResponse(E,b,A);return _||(yield E._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Qr(E,m){return yh.apply(this,arguments)}function yh(){return(yh=(0,f.Z)(function*(E,m){return Ec(St(E),m)})).apply(this,arguments)}function wc(E,m){return ds.apply(this,arguments)}function ds(){return(ds=(0,f.Z)(function*(E,m){const _=(0,j.m9)(E);return yield Wl(!1,_,m.providerId),H_(_,m)})).apply(this,arguments)}function li(E,m){return $o.apply(this,arguments)}function $o(){return($o=(0,f.Z)(function*(E,m){return Qn((0,j.m9)(E),m)})).apply(this,arguments)}function Sa(E,m){return bc.apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(E,m){return Qt(E,"POST","/v1/accounts:signInWithCustomToken",Ot(E,m))})).apply(this,arguments)}function Os(E,m){return po.apply(this,arguments)}function po(){return(po=(0,f.Z)(function*(E,m){const _=St(E),b=yield Sa(_,{token:m,returnSecureToken:!0}),A=yield zn._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class jo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Wt._fromServerResponse(m,_):Ke(m,"internal-error")}}class Wt extends jo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Wt(_)}}function zl(E,m,_){var b;J((null===(b=_.url)||void 0===b?void 0:b.length)>0,E,"invalid-continue-uri"),J(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(J(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(J(_.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Jp(E,m,_){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E),A={requestType:"PASSWORD_RESET",email:m};_&&zl(b,A,_),yield Gn(b,A)})).apply(this,arguments)}function W_(E,m,_){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,f.Z)(function*(E,m,_){yield _n((0,j.m9)(E),{oobCode:m,newPassword:_})})).apply(this,arguments)}function G_(E,m){return vh.apply(this,arguments)}function vh(){return(vh=(0,f.Z)(function*(E,m){yield fc((0,j.m9)(E),{oobCode:m})})).apply(this,arguments)}function Ue(E,m){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(E,m){const _=(0,j.m9)(E),b=yield _n(_,{oobCode:m}),A=b.requestType;switch(J(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(b.mfaInfo,_,"internal-error");default:J(b.email,_,"internal-error")}let L=null;return b.mfaInfo&&(L=jo._fromServerResponse(St(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:A}})).apply(this,arguments)}function z_(E,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(E,m){const{data:_}=yield Ue((0,j.m9)(E),m);return _.email})).apply(this,arguments)}function Tc(E,m,_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(E,m,_){const b=St(E),A=yield _c(b,{returnSecureToken:!0,email:m,password:_}),L=yield zn._fromIdTokenResponse(b,"signIn",A);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function zi(E,m,_){return Qr((0,j.m9)(E),Zp.credential(m,_))}function Eh(E,m,_){return ql.apply(this,arguments)}function ql(){return(ql=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E),A={requestType:"EMAIL_SIGNIN",email:m};J(_.handleCodeInApp,b,"argument-error"),_&&zl(b,A,_),yield dh(b,A)})).apply(this,arguments)}function Tw(E,m){const _=Ca.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Xp(E,m,_){return Da.apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E),A=Zp.credentialWithLink(m,_||fe());return J(A._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Qr(b,A)})).apply(this,arguments)}function Sc(E,m){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:createAuthUri",Ot(E,m))})).apply(this,arguments)}function Ps(E,m){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(E,m){const b={identifier:m,continueUri:ze()?fe():"http://localhost"},{signinMethods:A}=yield Sc((0,j.m9)(E),b);return A||[]})).apply(this,arguments)}function Aa(E,m){return qi.apply(this,arguments)}function qi(){return(qi=(0,f.Z)(function*(E,m){const _=(0,j.m9)(E),A={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&zl(_.auth,A,m);const{email:L}=yield Ll(_.auth,A);L!==E.email&&(yield E.reload())})).apply(this,arguments)}function q_(E,m,_){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};_&&zl(b.auth,L,_);const{email:re}=yield ji(b.auth,L);re!==E.email&&(yield E.reload())})).apply(this,arguments)}function K_(E,m){return wh.apply(this,arguments)}function wh(){return(wh=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function bh(E,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(E,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const b=(0,j.m9)(E),L={idToken:yield b.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},re=yield lt(b,K_(b.auth,L));b.displayName=re.displayName||null,b.photoURL=re.photoUrl||null;const Ve=b.providerData.find(({providerId:Dt})=>"password"===Dt);Ve&&(Ve.displayName=b.displayName,Ve.photoURL=b.photoURL),yield b._updateTokensIfNecessary(re)})).apply(this,arguments)}function Z_(E,m){return Y_((0,j.m9)(E),m,null)}function Ch(E,m){return Y_((0,j.m9)(E),null,m)}function Y_(E,m,_){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,f.Z)(function*(E,m,_){const{auth:b}=E,L={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(L.email=m),_&&(L.password=_);const re=yield lt(E,Ar(b,L));yield E._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Wo{constructor(m,_,b={}){this.isNewUser=m,this.providerId=_,this.profile=b}}class Ih extends Wo{constructor(m,_,b,A){super(m,_,b),this.username=A}}class Q_ extends Wo{constructor(m,_){super(m,"facebook.com",_)}}class J_ extends Ih{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Zl extends Wo{constructor(m,_){super(m,"google.com",_)}}class go extends Ih{constructor(m,_,b){super(m,"twitter.com",_,b)}}function X_(E){const{user:m,_tokenResponse:_}=E;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Kl(E){var m,_;if(!E)return null;const{providerId:b}=E,A=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},L=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!b&&(null==E?void 0:E.idToken)){const re=null===(_=null===(m=vt(E.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(re)return new Wo(L,"anonymous"!==re&&"custom"!==re?re:null)}if(!b)return null;switch(b){case"facebook.com":return new Q_(L,A);case"github.com":return new J_(L,A);case"google.com":return new Zl(L,A);case"twitter.com":return new go(L,A,E.screenName||null);case"custom":case"anonymous":return new Wo(L,null);default:return new Wo(L,b,A)}}(_)}function sr(E,m,_,b){return(0,j.m9)(E).onAuthStateChanged(m,_,b)}class Go{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new Go("enroll",m)}static _fromMfaPendingCredential(m){return new Go("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,b;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Go._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(b=m.multiFactorSession)||void 0===b?void 0:b.idToken)return Go._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Yl{constructor(m,_,b){this.session=m,this.hints=_,this.signInResolver=b}static _fromError(m,_){const b=St(m),A=_.customData._serverResponse,L=(A.mfaInfo||[]).map(Ve=>jo._fromServerResponse(b,Ve));J(A.mfaPendingCredential,b,"internal-error");const re=Go._fromMfaPendingCredential(A.mfaPendingCredential);return new Yl(re,L,function(){var Ve=(0,f.Z)(function*(Dt){const Bt=yield Dt._process(b,re);delete A.mfaInfo,delete A.mfaPendingCredential;const rn=Object.assign(Object.assign({},A),{idToken:Bt.idToken,refreshToken:Bt.refreshToken});switch(_.operationType){case"signIn":const On=yield zn._fromIdTokenResponse(b,_.operationType,rn);return yield b._updateCurrentUser(On.user),On;case"reauthenticate":return J(_.user,b,"internal-error"),zn._forOperation(_.user,_.operationType,rn);default:Ke(b,"internal-error")}});return function(Dt){return Ve.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,f.Z)(function*(){return _.signInResolver(m)})()}}function Th(E,m){var _;const b=(0,j.m9)(E),A=m;return J(m.customData.operationType,b,"argument-error"),J(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),Yl._fromError(b,A)}function Sh(E,m){return Ge(E,"POST","/v2/accounts/mfaEnrollment:start",Ot(E,m))}class tg{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>jo._fromServerResponse(m.auth,b)))})}static _fromUser(m){return new tg(m)}getSession(){var m=this;return(0,f.Z)(function*(){return Go._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var b=this;return(0,f.Z)(function*(){const A=m,L=yield b.getSession(),re=yield lt(b.user,A._process(b.user.auth,L,_));return yield b.user._updateTokensIfNecessary(re),b.user.reload()})()}unenroll(m){var _=this;return(0,f.Z)(function*(){const b="string"==typeof m?m:m.uid,A=yield _.user.getIdToken(),L=yield lt(_.user,function ey(E,m){return Ge(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(E,m))}(_.user.auth,{idToken:A,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:re})=>re!==b),yield _.user._updateTokensIfNecessary(L);try{yield _.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Fs=new WeakMap;function Mc(E){const m=(0,j.m9)(E);return Fs.has(m)||Fs.set(m,tg._fromUser(m)),Fs.get(m)}const Ah="__sak";class ty{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ah,"1"),this.storage.removeItem(Ah),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const cr=(()=>{class E extends ty{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Nc(){const E=(0,j.z$)();return $(E)||Kt(E)}()&&function pe(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const A=this.storage.getItem(b),L=this.localCache[b];A!==L&&_(b,L,A)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((Ve,Dt,Bt)=>{this.notifyListeners(Ve,Bt)});const A=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ve=this.storage.getItem(A);if(_.newValue!==Ve)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!b)return}const L=()=>{const Ve=this.storage.getItem(A);!b&&this.localCache[A]===Ve||this.notifyListeners(A,Ve)},re=this.storage.getItem(A);!function cn(){return(0,j.w1)()&&10===document.documentMode}()||re===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,b){this.localCache[_]=b;const A=this.listeners[_];if(A)for(const L of Array.from(A))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var A=()=>super._set,L=this;return(0,f.Z)(function*(){yield A().call(L,_,b),L.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,A=this;return(0,f.Z)(function*(){const L=yield b().call(A,_);return A.localCache[_]=JSON.stringify(L),L})()}_remove(_){var b=()=>super._remove,A=this;return(0,f.Z)(function*(){yield b().call(A,_),delete A.localCache[_]})()}}return E.type="LOCAL",E})(),kt=(()=>{class E extends ty{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return E.type="SESSION",E})();let ci=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(L=>L.isListeningto(_));if(b)return b;const A=new E(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,f.Z)(function*(){const A=_,{eventId:L,eventType:re,data:Ve}=A.data,Dt=b.handlersMap[re];if(!(null==Dt?void 0:Dt.size))return;A.ports[0].postMessage({status:"ack",eventId:L,eventType:re});const Bt=Array.from(Dt).map(function(){var On=(0,f.Z)(function*(js){return js(A.origin,Ve)});return function(js){return On.apply(this,arguments)}}()),rn=yield function Ki(E){return Promise.all(E.map(function(){var m=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return m.apply(this,arguments)}}()))}(Bt);A.ports[0].postMessage({status:"done",eventId:L,eventType:re,response:rn})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Mr(E="",m=10){let _="";for(let b=0;b<m;b++)_+=Math.floor(10*Math.random());return E+_}class rg{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,b=50){var A=this;return(0,f.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let re,Ve;return new Promise((Dt,Bt)=>{const rn=Mr("",20);L.port1.start();const On=setTimeout(()=>{Bt(new Error("unsupported_event"))},b);Ve={messageChannel:L,onMessage(js){const bi=js;if(bi.data.eventId===rn)switch(bi.data.status){case"ack":clearTimeout(On),re=setTimeout(()=>{Bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),Dt(bi.data.response);break;default:clearTimeout(On),clearTimeout(re),Bt(new Error("invalid_response"))}}},A.handlers.add(Ve),L.port1.addEventListener("message",Ve.onMessage),A.target.postMessage({eventType:m,eventId:rn,data:_},[L.port2])}).finally(()=>{Ve&&A.removeMessageHandler(Ve)})})()}}function vr(){return window}function Rh(){return void 0!==vr().WorkerGlobalScope&&"function"==typeof vr().importScripts}function Ql(){return(Ql=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Mh="firebaseLocalStorageDb",Na="firebaseLocalStorage",Nh="fbase_key";class rr{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function xa(E,m){return E.transaction([Na],m?"readwrite":"readonly").objectStore(Na)}function Oa(){const E=indexedDB.open(Mh,1);return new Promise((m,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const b=E.result;try{b.createObjectStore(Na,{keyPath:Nh})}catch(A){_(A)}}),E.addEventListener("success",(0,f.Z)(function*(){const b=E.result;b.objectStoreNames.contains(Na)?m(b):(b.close(),yield function xh(){const E=indexedDB.deleteDatabase(Mh);return new rr(E).toPromise()}(),m(yield Oa()))}))})}function Pa(E,m,_){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(E,m,_){const b=xa(E,!0).put({[Nh]:m,value:_});return new rr(b).toPromise()})).apply(this,arguments)}function Oc(){return(Oc=(0,f.Z)(function*(E,m){const _=xa(E,!1).get(m),b=yield new rr(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function ka(E,m){const _=xa(E,!0).delete(m);return new rr(_).toPromise()}const hs=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Oa()),_.db})()}_withRetries(_){var b=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const L=yield b._openDb();return yield _(L)}catch(L){if(A++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return Rh()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=ci._getInstance(function ln(){return Rh()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,f.Z)(function*(A,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(A,L){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,f.Z)(function*(A,L){return["keyChanged"]});return function(A,L){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var b,A;if(_.activeServiceWorker=yield function zo(){return Ql.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new rg(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);!L||(null===(b=L[0])||void 0===b?void 0:b.fulfilled)&&(null===(A=L[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,f.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function mo(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Oa();return yield Pa(_,Ah,"1"),yield ka(_,Ah),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,f.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(L=>Pa(L,_,b)),A.localCache[_]=b,A.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,f.Z)(function*(){const A=yield b._withRetries(L=>function Jl(E,m){return Oc.apply(this,arguments)}(L,_));return b.localCache[_]=A,A})()}_remove(_){var b=this;return(0,f.Z)(function*(){return b._withPendingWrite((0,f.Z)(function*(){return yield b._withRetries(A=>ka(A,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const b=yield _._withRetries(re=>{const Ve=xa(re,!1).getAll();return new rr(Ve).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const A=[],L=new Set;for(const{fbase_key:re,value:Ve}of b)L.add(re),JSON.stringify(_.localCache[re])!==JSON.stringify(Ve)&&(_.notifyListeners(re,Ve),A.push(re));for(const re of Object.keys(_.localCache))_.localCache[re]&&!L.has(re)&&(_.notifyListeners(re,null),A.push(re));return A})()}notifyListeners(_,b){this.localCache[_]=b;const A=this.listeners[_];if(A)for(const L of Array.from(A))L(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Fa(E,m){return Ge(E,"POST","/v2/accounts/mfaSignIn:start",Ot(E,m))}function jr(){return(jr=(0,f.Z)(function*(E){return(yield Ge(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oh(E){return new Promise((m,_)=>{const b=document.createElement("script");b.setAttribute("src",E),b.onload=m,b.onerror=A=>{const L=Ne("internal-error");L.customData=A,_(L)},b.type="text/javascript",b.charset="UTF-8",function qo(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(b)})}function Er(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Ls=1e12;class ps{constructor(m){this.auth=m,this.counter=Ls,this._widgets=new Map}render(m,_){const b=this.counter;return this._widgets.set(b,new xi(m,this.auth.name,_||{})),this.counter++,b}reset(m){var _;const b=m||Ls;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Ls))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,f.Z)(function*(){var b;return null===(b=_._widgets.get(m||Ls))||void 0===b||b.execute(),""})()}}class xi{constructor(m,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof m?document.getElementById(m):m;J(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gs(E){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<E;b++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jn=Er("rcb"),kc=new Be(3e4,6e4);class dr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vr().grecaptcha}load(m,_=""){return J(function iy(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(vr().grecaptcha):new Promise((b,A)=>{const L=vr().setTimeout(()=>{A(Ne(m,"network-request-failed"))},kc.get());vr()[Jn]=()=>{vr().clearTimeout(L),delete vr()[Jn];const Ve=vr().grecaptcha;if(!Ve)return void A(Ne(m,"internal-error"));const Dt=Ve.render;Ve.render=(Bt,rn)=>{const On=Dt(Bt,rn);return this.counter++,On},this.hostLanguage=_,b(Ve)},Oh(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Jn,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),A(Ne(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!vr().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sy{load(m){return(0,f.Z)(function*(){return new ps(m)})()}clearedOneInstance(){}}const oy="recaptcha",Ua={theme:"light",type:"image"};class Oi{constructor(m,_=Object.assign({},Ua),b){this.parameters=_,this.type=oy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=St(b),this.isInvisible="invisible"===this.parameters.size,J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof m?document.getElementById(m):m;J(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sy:new dr,this.validateStartingState()}verify(){var m=this;return(0,f.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),b=m.getAssertedRecaptcha();return b.getResponse(_)||new Promise(L=>{const re=Ve=>{!Ve||(m.tokenChangeListeners.delete(re),L(Ve))};m.tokenChangeListeners.add(re),m.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof m)m(_);else if("string"==typeof m){const b=vr()[m];"function"==typeof b&&b(_)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,f.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,f.Z)(function*(){J(ze()&&!Rh(),m.auth,"internal-error"),yield function Dw(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Pc(E){return jr.apply(this,arguments)}(m.auth);J(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ms{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=ba._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Ko(E,m,_){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,f.Z)(function*(E,m,_){const b=St(E),A=yield Fc(b,m,(0,j.m9)(_));return new ms(A,L=>Qr(b,L))})).apply(this,arguments)}function wr(E,m,_){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E);yield Wl(!1,b,"phone");const A=yield Fc(b.auth,m,(0,j.m9)(_));return new ms(A,L=>wc(b,L))})).apply(this,arguments)}function tu(E,m,_){return og.apply(this,arguments)}function og(){return(og=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E),A=yield Fc(b.auth,m,(0,j.m9)(_));return new ms(A,L=>li(b,L))})).apply(this,arguments)}function Fc(E,m,_){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(E,m,_){var b;const A=yield _.verify();try{let L;if(J("string"==typeof A,E,"argument-error"),J(_.type===oy,E,"argument-error"),L="string"==typeof m?{phoneNumber:m}:m,"session"in L){const re=L.session;if("phoneNumber"in L)return J("enroll"===re.type,E,"internal-error"),(yield Sh(E,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{J("signin"===re.type,E,"internal-error");const Ve=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return J(Ve,E,"missing-multi-factor-info"),(yield Fa(E,{mfaPendingCredential:re.credential,mfaEnrollmentId:Ve,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield yw(E,{phoneNumber:L.phoneNumber,recaptchaToken:A});return re}}finally{_._reset()}})).apply(this,arguments)}function _s(E,m){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(E,m){yield H_((0,j.m9)(E),m)})).apply(this,arguments)}let ru=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=St(_)}verifyPhoneNumber(_,b){return Fc(this.auth,_,(0,j.m9)(b))}static credential(_,b){return ba._fromVerification(_,b)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:A}=_;return b&&A?ba._fromTokenResponse(b,A):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Zi(E,m){return m?se(m):(J(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Lc extends Pt{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return fo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return fo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return fo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function ay(E){return Ec(E.auth,new Lc(E),E.bypassAuthState)}function ag(E){const{auth:m,user:_}=E;return J(_,m,"internal-error"),Qn(_,new Lc(E),E.bypassAuthState)}function ly(E){return fn.apply(this,arguments)}function fn(){return(fn=(0,f.Z)(function*(E){const{auth:m,user:_}=E;return J(_,m,"internal-error"),H_(_,new Lc(E),E.bypassAuthState)})).apply(this,arguments)}class kh{constructor(m,_,b,A,L=!1){this.auth=m,this.resolver=b,this.user=A,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,f.Z)(function*(b,A){m.pendingPromise={resolve:b,reject:A};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(L){m.reject(L)}});return function(b,A){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,f.Z)(function*(){const{urlResponse:b,sessionId:A,postBody:L,tenantId:re,error:Ve,type:Dt}=m;if(Ve)return void _.reject(Ve);const Bt={auth:_.auth,requestUri:b,sessionId:A,tenantId:re||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Dt)(Bt))}catch(rn){_.reject(rn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return ay;case"linkViaPopup":case"linkViaRedirect":return ly;case"reauthViaPopup":case"reauthViaRedirect":return ag;default:Ke(this.auth,"internal-error")}}resolve(m){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vr=new Be(2e3,1e4);function Vc(E,m,_){return ys.apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(E,m,_){const b=St(E);Ee(E,m,xs);const A=Zi(b,_);return new Bc(b,"signInViaPopup",m,A).executeNotNull()})).apply(this,arguments)}function Aw(E,m,_){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E);Ee(b.auth,m,xs);const A=Zi(b.auth,_);return new Bc(b.auth,"reauthViaPopup",m,A,b).executeNotNull()})).apply(this,arguments)}function uy(E,m,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E);Ee(b.auth,m,xs);const A=Zi(b.auth,_);return new Bc(b.auth,"linkViaPopup",m,A,b).executeNotNull()})).apply(this,arguments)}let Bc=(()=>{class E extends kh{constructor(_,b,A,L,re){super(_,b,L,re),this.provider=A,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const b=yield _.execute();return J(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,f.Z)(function*(){ut(1===_.filter.length,"Popup operations only handle one event");const b=Mr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Ne(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,A;this.pollId=(null===(A=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Vr.get())};_()}}return E.currentPopupAction=null,E})();const iu=new Map;class cy extends kh{constructor(m,_,b=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,f.Z)(function*(){let b=iu.get(_.auth._key());if(!b){try{const L=(yield function Nr(E,m){return ni.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;b=()=>Promise.resolve(L)}catch(A){b=()=>Promise.reject(A)}iu.set(_.auth._key(),b)}return _.bypassAuthState||iu.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,b=this;return(0,f.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(b,m);if("unknown"!==m.type){if(m.eventId){const A=yield b.auth._redirectUserForId(m.eventId);if(A)return b.user=A,_().call(b,m);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ni(){return(ni=(0,f.Z)(function*(E,m){const _=cg(m),b=$a(E);if(!(yield b._isAvailable()))return!1;const A="true"===(yield b._get(_));return yield b._remove(_),A})).apply(this,arguments)}function ug(E,m){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,f.Z)(function*(E,m){return $a(E)._set(cg(m),"true")})).apply(this,arguments)}function $c(){iu.clear()}function $a(E){return se(E._redirectPersistence)}function cg(E){return H("pendingRedirect",E.config.apiKey,E.name)}function dg(E,m,_){return function dy(E,m,_){return su.apply(this,arguments)}(E,m,_)}function su(){return(su=(0,f.Z)(function*(E,m,_){const b=St(E);Ee(E,m,xs);const A=Zi(b,_);return yield ug(A,b),A._openRedirect(b,m,"signInViaRedirect")})).apply(this,arguments)}function hg(E,m,_){return function _o(E,m,_){return vs.apply(this,arguments)}(E,m,_)}function vs(){return(vs=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E);Ee(b.auth,m,xs);const A=Zi(b.auth,_);yield ug(A,b.auth);const L=yield fg(b);return A._openRedirect(b.auth,m,"reauthViaRedirect",L)})).apply(this,arguments)}function En(E,m,_){return function hr(E,m,_){return jc.apply(this,arguments)}(E,m,_)}function jc(){return(jc=(0,f.Z)(function*(E,m,_){const b=(0,j.m9)(E);Ee(b.auth,m,xs);const A=Zi(b.auth,_);yield Wl(!1,b,m.providerId),yield ug(A,b.auth);const L=yield fg(b);return A._openRedirect(b.auth,m,"linkViaRedirect",L)})).apply(this,arguments)}function Yo(E,m){return ou.apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(E,m){return yield St(E)._initializationPromise,yo(E,m,!1)})).apply(this,arguments)}function yo(E,m){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,f.Z)(function*(E,m,_=!1){const b=St(E),A=Zi(b,m),re=yield new cy(b,A,_).execute();return re&&!_&&(delete re.user._redirectEventId,yield b._persistUserIfCurrent(re.user),yield b._setRedirectUser(null,m)),re})).apply(this,arguments)}function fg(E){return ja.apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(E){const m=Mr(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class Qo{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(m,b)&&(_=!0,this.sendToConsumer(m,b),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Fh(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wa(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var b;if(m.error&&!Wa(m)){const A=(null===(b=m.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Ne(this.auth,A))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const b=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&b}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ha(m))}saveEventToCache(m){this.cachedEventUids.add(Ha(m)),this.lastProcessedEventTime=Date.now()}}function Ha(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function Wa({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Ga(E){return za.apply(this,arguments)}function za(){return(za=(0,f.Z)(function*(E,m={}){return Ge(E,"GET","/v1/projects",m)})).apply(this,arguments)}const au=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pg=/^https?/;function Lh(){return(Lh=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield Ga(E);for(const _ of m)try{if(Vs(_))return}catch(b){}Ke(E,"unauthorized-domain")})).apply(this,arguments)}function Vs(E){const m=fe(),{protocol:_,hostname:b}=new URL(m);if(E.startsWith("chrome-extension://")){const re=new URL(E);return""===re.hostname&&""===b?"chrome-extension:"===_&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&re.hostname===b}if(!pg.test(_))return!1;if(au.test(E))return b===E;const A=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(b)}const lu=new Be(3e4,6e4);function gg(){const E=vr().___jsl;if(null==E?void 0:E.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let uu=null;function fy(E){return uu=uu||function Rw(E){return new Promise((m,_)=>{var b,A,L;function re(){gg(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{gg(),_(Ne(E,"network-request-failed"))},timeout:lu.get()})}if(null===(A=null===(b=vr().gapi)||void 0===b?void 0:b.iframes)||void 0===A?void 0:A.Iframe)m(gapi.iframes.getContext());else{if(!(null===(L=vr().gapi)||void 0===L?void 0:L.load)){const Ve=Er("iframefcb");return vr()[Ve]=()=>{gapi.load?re():_(Ne(E,"network-request-failed"))},Oh(`https://apis.google.com/js/api.js?onload=${Ve}`).catch(Dt=>_(Dt))}re()}}).catch(m=>{throw uu=null,m})}(E),uu}const py=new Be(5e3,15e3),Us={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wc(E){const m=E.config;J(m.authDomain,E,"auth-domain-config-required");const _=m.emulator?gn(m,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,b={apiKey:m.apiKey,appName:E.name,v:P.SDK_VERSION},A=Bs.get(E.config.apiHost);A&&(b.eid=A);const L=E._getFrameworks();return L.length&&(b.fw=L.join(",")),`${_}?${(0,j.xO)(b).slice(1)}`}function Bh(){return Bh=(0,f.Z)(function*(E){const m=yield fy(E),_=vr().gapi;return J(_,E,"internal-error"),m.open({where:document.body,url:Wc(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Us,dontclear:!0},b=>new Promise(function(){var A=(0,f.Z)(function*(L,re){yield b.restyle({setHideOnLeave:!1});const Ve=Ne(E,"network-request-failed"),Dt=vr().setTimeout(()=>{re(Ve)},py.get());function Bt(){vr().clearTimeout(Dt),L(b)}b.ping(Bt).then(Bt,()=>{re(Ve)})});return function(L,re){return A.apply(this,arguments)}}()))}),Bh.apply(this,arguments)}const qa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cu{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function Xo(E,m,_,b,A,L){J(E.config.authDomain,E,"auth-domain-config-required"),J(E.config.apiKey,E,"invalid-api-key");const re={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:b,v:P.SDK_VERSION,eventId:A};if(m instanceof xs){m.setDefaultLanguage(E.languageCode),re.providerId=m.providerId||"",(0,j.xb)(m.getCustomParameters())||(re.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Dt,Bt]of Object.entries(L||{}))re[Dt]=Bt}if(m instanceof Ul){const Dt=m.getScopes().filter(Bt=>""!==Bt);Dt.length>0&&(re.scopes=Dt.join(","))}E.tenantId&&(re.tid=E.tenantId);const Ve=re;for(const Dt of Object.keys(Ve))void 0===Ve[Dt]&&delete Ve[Dt];return`${function _y({config:E}){return E.emulator?gn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,j.xO)(Ve).slice(1)}`}const Wh="webStorageSupport",$s=class Eo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kt,this._completeRedirectFn=yo}_openPopup(m,_,b,A){var L=this;return(0,f.Z)(function*(){var re;ut(null===(re=L.eventManagers[m._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Ve=Xo(m,_,b,fe(),A);return function jh(E,m,_,b=500,A=600){const L=Math.max((window.screen.availHeight-A)/2,0).toString(),re=Math.max((window.screen.availWidth-b)/2,0).toString();let Ve="";const Dt=Object.assign(Object.assign({},qa),{width:b.toString(),height:A.toString(),top:L,left:re}),Bt=(0,j.z$)().toLowerCase();_&&(Ve=de(Bt)?"_blank":_),F(Bt)&&(m=m||"http://localhost",Dt.scrollbars="yes");const rn=Object.entries(Dt).reduce((js,[bi,Za])=>`${js}${bi}=${Za},`,"");if(function Dr(E=(0,j.z$)()){var m;return Kt(E)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Bt)&&"_self"!==Ve)return function zc(E,m){const _=document.createElement("a");_.href=E,_.target=m;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(m||"",Ve),new cu(null);const On=window.open(m||"",Ve,rn);J(On,E,"popup-blocked");try{On.focus()}catch(js){}return new cu(On)}(m,Ve,Mr())})()}_openRedirect(m,_,b,A){var L=this;return(0,f.Z)(function*(){return yield L._originValidation(m),function Ma(E){vr().location.href=E}(Xo(m,_,b,fe(),A)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:A,promise:L}=this.eventManagers[_];return A?Promise.resolve(A):(ut(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(m);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(m){var _=this;return(0,f.Z)(function*(){const b=yield function Jo(E){return Bh.apply(this,arguments)}(m),A=new Qo(m);return b.register("authEvent",L=>(J(null==L?void 0:L.authEvent,m,"invalid-auth-event"),{status:A.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:A},_.iframes[m._key()]=b,A})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Wh,{type:Wh},A=>{var L;const re=null===(L=null==A?void 0:A[0])||void 0===L?void 0:L[Wh];void 0!==re&&_(!!re),Ke(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function hy(E){return Lh.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return K()||$()||Kt()}};class qc extends class du{constructor(m){this.factorId=m}_process(m,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,b);case"signin":return this._finalizeSignIn(m,_.credential);default:return it("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new qc(m)}_finalizeEnroll(m,_,b){return function Dh(E,m){return Ge(E,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(E,m))}(m,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function La(E,m){return Ge(E,"POST","/v2/accounts/mfaSignIn:finalize",Ot(E,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let yy=(()=>{class E{constructor(){}static assertion(_){return qc._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var mg="@firebase/auth",vy="0.19.12";class _g{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(b=>{var A;m((null===(A=b)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wy(E=(0,P.getApp)()){const m=(0,P._getProvider)(E,"auth");return m.isInitialized()?m.getImmediate():function le(E,m){const _=(0,P._getProvider)(E,"auth");if(_.isInitialized()){const A=_.getImmediate(),L=_.getOptions();if((0,j.vZ)(L,null!=m?m:{}))return A;Ke(A,"already-initialized")}return _.initialize({options:m})}(E,{popupRedirectResolver:$s,persistence:[hs,cr,kt]})}!function Ey(E){(0,P._registerComponent)(new we.wA("auth",(m,{options:_})=>{const b=m.getProvider("app").getImmediate(),A=m.getProvider("heartbeat"),{apiKey:L,authDomain:re}=b.options;return((Ve,Dt)=>{J(L&&!L.includes(":"),"invalid-api-key",{appName:Ve.name}),J(!(null==re?void 0:re.includes(":")),"argument-error",{appName:Ve.name});const Bt={apiKey:L,authDomain:re,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(E)},rn=new Et(Ve,Dt,Bt);return function Te(E,m){const _=(null==m?void 0:m.persistence)||[],b=(Array.isArray(_)?_:[_]).map(se);(null==m?void 0:m.errorMap)&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(b,null==m?void 0:m.popupRedirectResolver)}(rn,_),rn})(b,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,b)=>{m.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new we.wA("auth-internal",m=>{const _=St(m.getProvider("auth").getImmediate());return new _g(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(mg,vy,function yg(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,P.registerVersion)(mg,vy,"esm2017")}("Browser")},2090:(Rt,xe,N)=>{N.d(xe,{BH:()=>Pe,LL:()=>ze,ZR:()=>fe,gQ:()=>er,zI:()=>se,hu:()=>P,g5:()=>ne,US:()=>ae,tV:()=>z,h$:()=>ce,L:()=>ye,$s:()=>Yn,r3:()=>Ge,Sg:()=>Oe,ne:()=>De,p$:()=>W,vZ:()=>Qt,ZB:()=>Y,Lj:()=>me,gK:()=>Gt,pd:()=>kn,m9:()=>It,z$:()=>Le,GJ:()=>Ot,jU:()=>at,ru:()=>Ke,d:()=>Me,xb:()=>gt,w1:()=>Ee,hl:()=>ut,uI:()=>_e,UG:()=>Ie,Yr:()=>J,b$:()=>Ne,G6:()=>it,Mn:()=>Je,w9:()=>$t,cI:()=>Vt,UI:()=>Ht,X3:()=>Q,xO:()=>Mn,zd:()=>Nn,DV:()=>pt,ug:()=>mt,dS:()=>vt,Pz:()=>Be,eu:()=>oe});var f=N(5861);const P=function(B,O){if(!B)throw ne(O)},ne=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},ge=function(B){const O=[];let H=0;for(let X=0;X<B.length;X++){let M=B.charCodeAt(X);M<128?O[H++]=M:M<2048?(O[H++]=M>>6|192,O[H++]=63&M|128):55296==(64512&M)&&X+1<B.length&&56320==(64512&B.charCodeAt(X+1))?(M=65536+((1023&M)<<10)+(1023&B.charCodeAt(++X)),O[H++]=M>>18|240,O[H++]=M>>12&63|128,O[H++]=M>>6&63|128,O[H++]=63&M|128):(O[H++]=M>>12|224,O[H++]=M>>6&63|128,O[H++]=63&M|128)}return O},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,O){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=O?this.byteToCharMapWebSafe_:this.byteToCharMap_,X=[];for(let M=0;M<B.length;M+=3){const F=B[M],$=M+1<B.length,de=$?B[M+1]:0,qe=M+2<B.length,st=qe?B[M+2]:0;let Kt=(15&de)<<2|st>>6,xn=63&st;qe||(xn=64,$||(Kt=64)),X.push(H[F>>2],H[(3&F)<<4|de>>4],H[Kt],H[xn])}return X.join("")},encodeString(B,O){return this.HAS_NATIVE_SUPPORT&&!O?btoa(B):this.encodeByteArray(ge(B),O)},decodeString(B,O){return this.HAS_NATIVE_SUPPORT&&!O?atob(B):function(B){const O=[];let H=0,X=0;for(;H<B.length;){const M=B[H++];if(M<128)O[X++]=String.fromCharCode(M);else if(M>191&&M<224){const F=B[H++];O[X++]=String.fromCharCode((31&M)<<6|63&F)}else if(M>239&&M<365){const qe=((7&M)<<18|(63&B[H++])<<12|(63&B[H++])<<6|63&B[H++])-65536;O[X++]=String.fromCharCode(55296+(qe>>10)),O[X++]=String.fromCharCode(56320+(1023&qe))}else{const F=B[H++],$=B[H++];O[X++]=String.fromCharCode((15&M)<<12|(63&F)<<6|63&$)}}return O.join("")}(this.decodeStringToByteArray(B,O))},decodeStringToByteArray(B,O){this.init_();const H=O?this.charToByteMapWebSafe_:this.charToByteMap_,X=[];for(let M=0;M<B.length;){const F=H[B.charAt(M++)],de=M<B.length?H[B.charAt(M)]:0;++M;const st=M<B.length?H[B.charAt(M)]:64;++M;const _t=M<B.length?H[B.charAt(M)]:64;if(++M,null==F||null==de||null==st||null==_t)throw Error();X.push(F<<2|de>>4),64!==st&&(X.push(de<<4&240|st>>2),64!==_t&&X.push(st<<6&192|_t))}return X},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ce=function(B){const O=ge(B);return ae.encodeByteArray(O,!0)},ye=function(B){return ce(B).replace(/\./g,"")},z=function(B){try{return ae.decodeString(B,!0)}catch(O){console.error("base64Decode failed: ",O)}return null};function W(B){return Y(void 0,B)}function Y(B,O){if(!(O instanceof Object))return O;switch(O.constructor){case Date:return new Date(O.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return O}for(const H in O)!O.hasOwnProperty(H)||!je(H)||(B[H]=Y(B[H],O[H]));return B}function je(B){return"__proto__"!==B}class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((O,H)=>{this.resolve=O,this.reject=H})}wrapCallback(O){return(H,X)=>{H?this.reject(H):this.resolve(X),"function"==typeof O&&(this.promise.catch(()=>{}),1===O.length?O(H):O(H,X))}}}function Oe(B,O){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const X=O||"demo-project",M=B.iat||0,F=B.sub||B.user_id;if(!F)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $=Object.assign({iss:`https://securetoken.google.com/${X}`,aud:X,iat:M,exp:M+3600,auth_time:M,sub:F,user_id:F,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify($)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function Ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function at(){return"object"==typeof self&&self.self===self}function Ke(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Le().indexOf("Electron/")>=0}function Ee(){const B=Le();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Je(){return Le().indexOf("MSAppHost/")>=0}function J(){return!1}function it(){return!Ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ut(){return"object"==typeof indexedDB}function oe(){return new Promise((B,O)=>{try{let H=!0;const X="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(X);M.onsuccess=()=>{M.result.close(),H||self.indexedDB.deleteDatabase(X),B(!0)},M.onupgradeneeded=()=>{H=!1},M.onerror=()=>{var F;O((null===(F=M.error)||void 0===F?void 0:F.message)||"")}}catch(H){O(H)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class fe extends Error{constructor(O,H,X){super(H),this.code=O,this.customData=X,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ze.prototype.create)}}class ze{constructor(O,H,X){this.service=O,this.serviceName=H,this.errors=X}create(O,...H){const X=H[0]||{},M=`${this.service}/${O}`,F=this.errors[O],$=F?function bt(B,O){return B.replace(jt,(H,X)=>{const M=O[X];return null!=M?String(M):`<${X}?>`})}(F,X):"Error";return new fe(M,`${this.serviceName}: ${$} (${M}).`,X)}}const jt=/\{\$([^}]+)}/g;function Vt(B){return JSON.parse(B)}function Be(B){return JSON.stringify(B)}const gn=function(B){let O={},H={},X={},M="";try{const F=B.split(".");O=Vt(z(F[0])||""),H=Vt(z(F[1])||""),M=F[2],X=H.d||{},delete H.d}catch(F){}return{header:O,claims:H,data:X,signature:M}},$t=function(B){const H=gn(B).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},Ot=function(B){const O=gn(B).claims;return"object"==typeof O&&!0===O.admin};function Ge(B,O){return Object.prototype.hasOwnProperty.call(B,O)}function pt(B,O){if(Object.prototype.hasOwnProperty.call(B,O))return B[O]}function gt(B){for(const O in B)if(Object.prototype.hasOwnProperty.call(B,O))return!1;return!0}function Ht(B,O,H){const X={};for(const M in B)Object.prototype.hasOwnProperty.call(B,M)&&(X[M]=O.call(H,B[M],M,B));return X}function Qt(B,O){if(B===O)return!0;const H=Object.keys(B),X=Object.keys(O);for(const M of H){if(!X.includes(M))return!1;const F=B[M],$=O[M];if(hn(F)&&hn($)){if(!Qt(F,$))return!1}else if(F!==$)return!1}for(const M of X)if(!H.includes(M))return!1;return!0}function hn(B){return null!==B&&"object"==typeof B}function Mn(B){const O=[];for(const[H,X]of Object.entries(B))Array.isArray(X)?X.forEach(M=>{O.push(encodeURIComponent(H)+"="+encodeURIComponent(M))}):O.push(encodeURIComponent(H)+"="+encodeURIComponent(X));return O.length?"&"+O.join("&"):""}function Nn(B){const O={};return B.replace(/^\?/,"").split("&").forEach(X=>{if(X){const[M,F]=X.split("=");O[decodeURIComponent(M)]=decodeURIComponent(F)}}),O}function kn(B){const O=B.indexOf("?");if(!O)return"";const H=B.indexOf("#",O);return B.substring(O,H>0?H:void 0)}class er{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let O=1;O<this.blockSize;++O)this.pad_[O]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(O,H){H||(H=0);const X=this.W_;if("string"==typeof O)for(let _t=0;_t<16;_t++)X[_t]=O.charCodeAt(H)<<24|O.charCodeAt(H+1)<<16|O.charCodeAt(H+2)<<8|O.charCodeAt(H+3),H+=4;else for(let _t=0;_t<16;_t++)X[_t]=O[H]<<24|O[H+1]<<16|O[H+2]<<8|O[H+3],H+=4;for(let _t=16;_t<80;_t++){const Kt=X[_t-3]^X[_t-8]^X[_t-14]^X[_t-16];X[_t]=4294967295&(Kt<<1|Kt>>>31)}let st,Mt,M=this.chain_[0],F=this.chain_[1],$=this.chain_[2],de=this.chain_[3],qe=this.chain_[4];for(let _t=0;_t<80;_t++){_t<40?_t<20?(st=de^F&($^de),Mt=1518500249):(st=F^$^de,Mt=1859775393):_t<60?(st=F&$|de&(F|$),Mt=2400959708):(st=F^$^de,Mt=3395469782);const Kt=(M<<5|M>>>27)+st+qe+Mt+X[_t]&4294967295;qe=de,de=$,$=4294967295&(F<<30|F>>>2),F=M,M=Kt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+F&4294967295,this.chain_[2]=this.chain_[2]+$&4294967295,this.chain_[3]=this.chain_[3]+de&4294967295,this.chain_[4]=this.chain_[4]+qe&4294967295}update(O,H){if(null==O)return;void 0===H&&(H=O.length);const X=H-this.blockSize;let M=0;const F=this.buf_;let $=this.inbuf_;for(;M<H;){if(0===$)for(;M<=X;)this.compress_(O,M),M+=this.blockSize;if("string"==typeof O){for(;M<H;)if(F[$]=O.charCodeAt(M),++$,++M,$===this.blockSize){this.compress_(F),$=0;break}}else for(;M<H;)if(F[$]=O[M],++$,++M,$===this.blockSize){this.compress_(F),$=0;break}}this.inbuf_=$,this.total_+=H}digest(){const O=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&H,H/=256;this.compress_(this.buf_);let X=0;for(let M=0;M<5;M++)for(let F=24;F>=0;F-=8)O[X]=this.chain_[M]>>F&255,++X;return O}}function De(B,O){const H=new ue(B,O);return H.subscribe.bind(H)}class ue{constructor(O,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{O(this)}).catch(X=>{this.error(X)})}next(O){this.forEachObserver(H=>{H.next(O)})}error(O){this.forEachObserver(H=>{H.error(O)}),this.close(O)}complete(){this.forEachObserver(O=>{O.complete()}),this.close()}subscribe(O,H,X){let M;if(void 0===O&&void 0===H&&void 0===X)throw new Error("Missing Observer.");M=function Ye(B,O){if("object"!=typeof B||null===B)return!1;for(const H of O)if(H in B&&"function"==typeof B[H])return!0;return!1}(O,["next","error","complete"])?O:{next:O,error:H,complete:X},void 0===M.next&&(M.next=wt),void 0===M.error&&(M.error=wt),void 0===M.complete&&(M.complete=wt);const F=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch($){}}),this.observers.push(M),F}unsubscribeOne(O){void 0===this.observers||void 0===this.observers[O]||(delete this.observers[O],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(O){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,O)}sendOne(O,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[O])try{H(this.observers[O])}catch(X){"undefined"!=typeof console&&console.error&&console.error(X)}})}close(O){this.finalized||(this.finalized=!0,void 0!==O&&(this.finalError=O),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wt(){}function Gt(B,O){return`${B} failed: ${O} argument `}const vt=function(B){const O=[];let H=0;for(let X=0;X<B.length;X++){let M=B.charCodeAt(X);if(M>=55296&&M<=56319){const F=M-55296;X++,P(X<B.length,"Surrogate pair missing trail surrogate."),M=65536+(F<<10)+(B.charCodeAt(X)-56320)}M<128?O[H++]=M:M<2048?(O[H++]=M>>6|192,O[H++]=63&M|128):M<65536?(O[H++]=M>>12|224,O[H++]=M>>6&63|128,O[H++]=63&M|128):(O[H++]=M>>18|240,O[H++]=M>>12&63|128,O[H++]=M>>6&63|128,O[H++]=63&M|128)}return O},mt=function(B){let O=0;for(let H=0;H<B.length;H++){const X=B.charCodeAt(H);X<128?O++:X<2048?O+=2:X>=55296&&X<=56319?(O+=4,H++):O+=3}return O};function Yn(B,O=1e3,H=2){const X=O*Math.pow(H,B),M=Math.round(.5*X*(Math.random()-.5)*2);return Math.min(144e5,X+M)}function It(B){return B&&B._delegate?B._delegate:B}function Wn(B,O){return new Promise((H,X)=>{B.onsuccess=M=>{H(M.target.result)},B.onerror=M=>{var F;X(`${O}: ${null===(F=M.target.error)||void 0===F?void 0:F.message}`)}})}class Xt{constructor(O){this._db=O,this.objectStoreNames=this._db.objectStoreNames}transaction(O,H="readonly"){return new rt(this._db.transaction.call(this._db,O,H))}createObjectStore(O,H){return new Ae(this._db.createObjectStore(O,H))}close(){this._db.close()}}class rt{constructor(O){this._transaction=O,this.complete=new Promise((H,X)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{X(this._transaction.error)},this._transaction.onabort=()=>{X(this._transaction.error)}})}objectStore(O){return new Ae(this._transaction.objectStore(O))}}class Ae{constructor(O){this._store=O}index(O){return new ft(this._store.index(O))}createIndex(O,H,X){return new ft(this._store.createIndex(O,H,X))}get(O){return Wn(this._store.get(O),"Error reading from IndexedDB")}put(O,H){return Wn(this._store.put(O,H),"Error writing to IndexedDB")}delete(O){return Wn(this._store.delete(O),"Error deleting from IndexedDB")}clear(){return Wn(this._store.clear(),"Error clearing IndexedDB object store")}}class ft{constructor(O){this._index=O}get(O){return Wn(this._index.get(O),"Error reading from IndexedDB")}}function Q(B,O,H){return new Promise((X,M)=>{try{const F=indexedDB.open(B,O);F.onsuccess=$=>{X(new Xt($.target.result))},F.onerror=$=>{var de;M(`Error opening indexedDB: ${null===(de=$.target.error)||void 0===de?void 0:de.message}`)},F.onupgradeneeded=$=>{H(new Xt(F.result),$.oldVersion,$.newVersion,new rt(F.transaction))}}catch(F){M(`Error opening indexedDB: ${F.message}`)}})}function me(B){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(B){return new Promise((O,H)=>{try{const X=indexedDB.deleteDatabase(B);X.onsuccess=()=>{O()},X.onerror=M=>{var F;H(`Error deleting indexedDB database "${B}": ${null===(F=M.target.error)||void 0===F?void 0:F.message}`)}}catch(X){H(`Error deleting indexedDB database "${B}": ${X.message}`)}})})).apply(this,arguments)}},7313:(Rt,xe,N)=>{var f=N(5e3);let j=null;function P(){return j}const ae=new f.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ye(){return(0,f.LFG)(W)}()},providedIn:"platform"}),n})();const z=new f.OlP("Location Initialized");let W=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function je(){return new W((0,f.LFG)(ae))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,f.LFG)(ae).location;return new Ke((0,f.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const at=new f.OlP("appBaseHref");let Ke=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+Le(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+Le(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(at,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+Le(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+Le(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(at,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(J(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,J(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Pe,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(f.LFG(_e),f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,f.LFG)(_e),(0,f.LFG)(ce))}()},providedIn:"root"}),n})();function J(n){return n.replace(/\/index.html$/,"")}var se=(()=>((se=se||{})[se.Format=0]="Format",se[se.Standalone=1]="Standalone",se))(),le=(()=>((le=le||{})[le.Narrow=0]="Narrow",le[le.Abbreviated=1]="Abbreviated",le[le.Wide=2]="Wide",le[le.Short=3]="Short",le))(),Te=(()=>((Te=Te||{})[Te.Short=0]="Short",Te[Te.Medium=1]="Medium",Te[Te.Long=2]="Long",Te[Te.Full=3]="Full",Te))(),fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Group=1]="Group",fe[fe.List=2]="List",fe[fe.PercentSign=3]="PercentSign",fe[fe.PlusSign=4]="PlusSign",fe[fe.MinusSign=5]="MinusSign",fe[fe.Exponential=6]="Exponential",fe[fe.SuperscriptingExponent=7]="SuperscriptingExponent",fe[fe.PerMille=8]="PerMille",fe[fe.Infinity=9]="Infinity",fe[fe.NaN=10]="NaN",fe[fe.TimeSeparator=11]="TimeSeparator",fe[fe.CurrencyDecimal=12]="CurrencyDecimal",fe[fe.CurrencyGroup=13]="CurrencyGroup",fe))();function $t(n,e){return ke((0,f.cg1)(n)[f.wAp.DateFormat],e)}function Ot(n,e){return ke((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function Ge(n,e){return ke((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function pt(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(void 0===r){if(e===fe.CurrencyDecimal)return t[f.wAp.NumberSymbols][fe.Decimal];if(e===fe.CurrencyGroup)return t[f.wAp.NumberSymbols][fe.Group]}return r}function kn(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ke(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Ye(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const un=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yn={},An=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var vt=(()=>((vt=vt||{})[vt.Short=0]="Short",vt[vt.ShortGMT=1]="ShortGMT",vt[vt.Long=2]="Long",vt[vt.Extended=3]="Extended",vt))(),mt=(()=>((mt=mt||{})[mt.FullYear=0]="FullYear",mt[mt.Month=1]="Month",mt[mt.Date=2]="Date",mt[mt.Hours=3]="Hours",mt[mt.Minutes=4]="Minutes",mt[mt.Seconds=5]="Seconds",mt[mt.FractionalSeconds=6]="FractionalSeconds",mt[mt.Day=7]="Day",mt))(),lt=(()=>((lt=lt||{})[lt.DayPeriods=0]="DayPeriods",lt[lt.Days=1]="Days",lt[lt.Months=2]="Months",lt[lt.Eras=3]="Eras",lt))();function Hn(n,e,t,r){let i=function de(n){if(st(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,u=1]=n.split("-").map(d=>+d);return ur(i,a-1,u)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(un))return function qe(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const u=Number(n[4]||0)-t,d=Number(n[5]||0)-r,p=Number(n[6]||0),y=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,u,d,p,y),e}(r)}const e=new Date(n);if(!st(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=qt(t,e)||e;let d,u=[];for(;e;){if(d=An.exec(e),!d){u.push(e);break}{u=u.concat(d.slice(1));const C=u.pop();if(!C)break;e=C}}let p=i.getTimezoneOffset();r&&(p=M(r,p),i=function $(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function F(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(M(e,i)-i))}(i,r,!0));let y="";return u.forEach(C=>{const T=function X(n){if(H[n])return H[n];let e;switch(n){case"G":case"GG":case"GGG":e=Xt(lt.Eras,le.Abbreviated);break;case"GGGG":e=Xt(lt.Eras,le.Wide);break;case"GGGGG":e=Xt(lt.Eras,le.Narrow);break;case"y":e=It(mt.FullYear,1,0,!1,!0);break;case"yy":e=It(mt.FullYear,2,0,!0,!0);break;case"yyy":e=It(mt.FullYear,3,0,!1,!0);break;case"yyyy":e=It(mt.FullYear,4,0,!1,!0);break;case"Y":e=O(1);break;case"YY":e=O(2,!0);break;case"YYY":e=O(3);break;case"YYYY":e=O(4);break;case"M":case"L":e=It(mt.Month,1,1);break;case"MM":case"LL":e=It(mt.Month,2,1);break;case"MMM":e=Xt(lt.Months,le.Abbreviated);break;case"MMMM":e=Xt(lt.Months,le.Wide);break;case"MMMMM":e=Xt(lt.Months,le.Narrow);break;case"LLL":e=Xt(lt.Months,le.Abbreviated,se.Standalone);break;case"LLLL":e=Xt(lt.Months,le.Wide,se.Standalone);break;case"LLLLL":e=Xt(lt.Months,le.Narrow,se.Standalone);break;case"w":e=B(1);break;case"ww":e=B(2);break;case"W":e=B(1,!0);break;case"d":e=It(mt.Date,1);break;case"dd":e=It(mt.Date,2);break;case"c":case"cc":e=It(mt.Day,1);break;case"ccc":e=Xt(lt.Days,le.Abbreviated,se.Standalone);break;case"cccc":e=Xt(lt.Days,le.Wide,se.Standalone);break;case"ccccc":e=Xt(lt.Days,le.Narrow,se.Standalone);break;case"cccccc":e=Xt(lt.Days,le.Short,se.Standalone);break;case"E":case"EE":case"EEE":e=Xt(lt.Days,le.Abbreviated);break;case"EEEE":e=Xt(lt.Days,le.Wide);break;case"EEEEE":e=Xt(lt.Days,le.Narrow);break;case"EEEEEE":e=Xt(lt.Days,le.Short);break;case"a":case"aa":case"aaa":e=Xt(lt.DayPeriods,le.Abbreviated);break;case"aaaa":e=Xt(lt.DayPeriods,le.Wide);break;case"aaaaa":e=Xt(lt.DayPeriods,le.Narrow);break;case"b":case"bb":case"bbb":e=Xt(lt.DayPeriods,le.Abbreviated,se.Standalone,!0);break;case"bbbb":e=Xt(lt.DayPeriods,le.Wide,se.Standalone,!0);break;case"bbbbb":e=Xt(lt.DayPeriods,le.Narrow,se.Standalone,!0);break;case"B":case"BB":case"BBB":e=Xt(lt.DayPeriods,le.Abbreviated,se.Format,!0);break;case"BBBB":e=Xt(lt.DayPeriods,le.Wide,se.Format,!0);break;case"BBBBB":e=Xt(lt.DayPeriods,le.Narrow,se.Format,!0);break;case"h":e=It(mt.Hours,1,-12);break;case"hh":e=It(mt.Hours,2,-12);break;case"H":e=It(mt.Hours,1);break;case"HH":e=It(mt.Hours,2);break;case"m":e=It(mt.Minutes,1);break;case"mm":e=It(mt.Minutes,2);break;case"s":e=It(mt.Seconds,1);break;case"ss":e=It(mt.Seconds,2);break;case"S":e=It(mt.FractionalSeconds,1);break;case"SS":e=It(mt.FractionalSeconds,2);break;case"SSS":e=It(mt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ae(vt.Short);break;case"ZZZZZ":e=Ae(vt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ae(vt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ae(vt.Long);break;default:return null}return H[n]=e,e}(C);y+=T?T(i,t,p):"''"===C?"'":C.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),y}function ur(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function qt(n,e){const t=function bt(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(yn[t]=yn[t]||{},yn[t][e])return yn[t][e];let r="";switch(e){case"shortDate":r=$t(n,Te.Short);break;case"mediumDate":r=$t(n,Te.Medium);break;case"longDate":r=$t(n,Te.Long);break;case"fullDate":r=$t(n,Te.Full);break;case"shortTime":r=Ot(n,Te.Short);break;case"mediumTime":r=Ot(n,Te.Medium);break;case"longTime":r=Ot(n,Te.Long);break;case"fullTime":r=Ot(n,Te.Full);break;case"short":const i=qt(n,"shortTime"),a=qt(n,"shortDate");r=Yn(Ge(n,Te.Short),[i,a]);break;case"medium":const u=qt(n,"mediumTime"),d=qt(n,"mediumDate");r=Yn(Ge(n,Te.Medium),[u,d]);break;case"long":const p=qt(n,"longTime"),y=qt(n,"longDate");r=Yn(Ge(n,Te.Long),[p,y]);break;case"full":const C=qt(n,"fullTime"),T=qt(n,"fullDate");r=Yn(Ge(n,Te.Full),[C,T])}return r&&(yn[t][e]=r),r}function Yn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function mn(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let u=String(n);for(;u.length<e;)u="0"+u;return r&&(u=u.substr(u.length-e)),a+u}function It(n,e,t=0,r=!1,i=!1){return function(a,u){let d=function Wn(n,e){switch(n){case mt.FullYear:return e.getFullYear();case mt.Month:return e.getMonth();case mt.Date:return e.getDate();case mt.Hours:return e.getHours();case mt.Minutes:return e.getMinutes();case mt.Seconds:return e.getSeconds();case mt.FractionalSeconds:return e.getMilliseconds();case mt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||d>-t)&&(d+=t),n===mt.Hours)0===d&&-12===t&&(d=12);else if(n===mt.FractionalSeconds)return function an(n,e){return mn(n,3).substr(0,e)}(d,e);const p=pt(u,fe.MinusSign);return mn(d,e,p,r,i)}}function Xt(n,e,t=se.Format,r=!1){return function(i,a){return function rt(n,e,t,r,i,a){switch(t){case lt.Months:return function Be(n,e,t){const r=(0,f.cg1)(n),a=ke([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return ke(a,t)}(e,i,r)[n.getMonth()];case lt.Days:return function Vt(n,e,t){const r=(0,f.cg1)(n),a=ke([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return ke(a,t)}(e,i,r)[n.getDay()];case lt.DayPeriods:const u=n.getHours(),d=n.getMinutes();if(a){const y=function er(n){const e=(0,f.cg1)(n);return kn(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ye(r):[Ye(r[0]),Ye(r[1])])}(e),C=function De(n,e,t){const r=(0,f.cg1)(n);kn(r);const a=ke([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return ke(a,t)||[]}(e,i,r),T=y.findIndex(D=>{if(Array.isArray(D)){const[x,k]=D,q=u>=x.hours&&d>=x.minutes,ie=u<k.hours||u===k.hours&&d<k.minutes;if(x.hours<k.hours){if(q&&ie)return!0}else if(q||ie)return!0}else if(D.hours===u&&D.minutes===d)return!0;return!1});if(-1!==T)return C[T]}return function jt(n,e,t){const r=(0,f.cg1)(n),a=ke([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return ke(a,t)}(e,i,r)[u<12?0:1];case lt.Eras:return function gn(n,e){return ke((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function Ae(n){return function(e,t,r){const i=-1*r,a=pt(t,fe.MinusSign),u=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case vt.Short:return(i>=0?"+":"")+mn(u,2,a)+mn(Math.abs(i%60),2,a);case vt.ShortGMT:return"GMT"+(i>=0?"+":"")+mn(u,1,a);case vt.Long:return"GMT"+(i>=0?"+":"")+mn(u,2,a)+":"+mn(Math.abs(i%60),2,a);case vt.Extended:return 0===r?"Z":(i>=0?"+":"")+mn(u,2,a)+":"+mn(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Se(n){return ur(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function B(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,u=t.getDate();i=1+Math.floor((u+a)/7)}else{const a=Se(t),u=function me(n){const e=ur(n,0,1).getDay();return ur(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),d=a.getTime()-u.getTime();i=1+Math.round(d/6048e5)}return mn(i,n,pt(r,fe.MinusSign))}}function O(n,e=!1){return function(t,r){return mn(Se(t).getFullYear(),n,pt(r,fe.MinusSign),e)}}const H={};function M(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function st(n){return n instanceof Date&&!isNaN(n.valueOf())}let Ms=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class co{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new co(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,u),ho(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ho(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ho(n,e){n.context.$implicit=e.item}let ti=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Gn{constructor(){this.$implicit=null,this.ngIf=null}}function pc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}function wi(n,e){return new f.vHH(2100,"")}class _w{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ns{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const yw=new Ns,Wp=new _w;let Gp=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return yw;if((0,f.F4k)(t))return Wp;throw wi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})();const ww=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let ph=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var u;if(null==t||""===t||t!=t)return null;try{return Hn(t,r,a||this.locale,null!==(u=null!=i?i:this.defaultTimezone)&&void 0!==u?u:void 0)}catch(d){throw wi()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(ww,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0}),n})(),Gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Ia="browser";function zn(n){return n===Ia}function jl(n){return"server"===n}let Yp=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new vc((0,f.LFG)(ae),window)}),n})();class vc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Qp(this.window.history)||Qp(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Qp(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gl extends class Wl extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ge(n){j||(j=n)}(new Gl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _h(){return Qn=Qn||document.querySelector("base"),Qn?Qn.getAttribute("href"):null}();return null==t?null:function Ta(n){Ec=Ec||document.createElement("a"),Ec.setAttribute("href",n);const e=Ec.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ec,Qn=null;const Qr=new f.OlP("TRANSITION_ID"),wc=[{provide:f.ip1,useFactory:function yh(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Qr,ae,f.zs3],multi:!0}];class ds{static init(){(0,f.VLi)(new ds)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const d=function(p){u=u||p,a--,0==a&&r(u)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let li=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const $o=new f.OlP("EventManagerPlugins");let Sa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($o),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class bc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Os=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),po=(()=>{class n extends Os{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(jo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jo))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function jo(n){P().remove(n)}const Wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zl=/%COMP%/g;function Ue(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ue(n,i,t):(i=i.replace(zl,n),t.push(i))}return t}function vn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let nr=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Tc(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Eh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new ql(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ue(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sa),f.LFG(po),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Tc{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Wt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Wt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Wt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vn(r)):this.eventManager.addEventListener(e,t,vn(r))}}class Eh extends Tc{constructor(e,t,r,i){super(e),this.component=r;const a=Ue(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function G_(n){return"_ngcontent-%COMP%".replace(zl,n)}(i+"-"+r.id),this.hostAttr=function vh(n){return"_nghost-%COMP%".replace(zl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ql extends Tc{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ue(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const d=document.createElement("style");d.textContent=a[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Tw=(()=>{class n extends bc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Xp=["alt","control","meta","shift"],Sc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ps={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Dc=(()=>{class n extends bc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(Xp.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),u+=p+".")}),u+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=u,d}static getEventFullKey(t){let r="",i=function Aa(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Lr.hasOwnProperty(e)&&(e=Lr[e]))}return Sc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Xp.forEach(a=>{a!=i&&Ps[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const wh=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Ia},{provide:f.g9A,useValue:function qi(){Gl.makeCurrent(),ds.init()},multi:!0},{provide:ae,useFactory:function Ac(){return(0,f.RDi)(document),document},deps:[]}]),bh=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function q_(){return new f.qLn},deps:[]},{provide:$o,useClass:Tw,multi:!0,deps:[ae,f.R0b,f.Lbi]},{provide:$o,useClass:Dc,multi:!0,deps:[ae]},{provide:nr,useClass:nr,deps:[Sa,po,f.AFp]},{provide:f.FYo,useExisting:nr},{provide:Os,useExisting:po},{provide:po,useClass:po,deps:[ae]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Sa,useClass:Sa,deps:[$o,f.R0b]},{provide:class tr{},useClass:li,deps:[]}];let Ra=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Qr,useExisting:f.AFp},wc]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:bh,imports:[Gi,f.hGG]}),n})(),Kl=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Rc(){return new Kl((0,f.LFG)(ae))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var cr=N(8996),xc=N(7669);function kt(...n){const e=(0,xc.yG)(n);return(0,cr.D)(n,e)}var Ki=N(7579);class ci extends Ki.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Mr=N(8306);const{isArray:rg}=Array,{getPrototypeOf:vr,prototype:Ma,keys:Rh}=Object;function zo(n){if(1===n.length){const e=n[0];if(rg(e))return{args:e,keys:null};if(function Ql(n){return n&&"object"==typeof n&&vr(n)===Ma}(e)){const t=Rh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var mo=N(4671),ln=N(4004);const{isArray:Mh}=Array;function Na(n){return(0,ln.U)(e=>function ig(n,e){return Mh(e)?n(...e):n(e)}(n,e))}function Nh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var rr=N(5403),xa=N(9672);function Pa(n,e,t){n?(0,xa.f)(t,n,e):e()}var Ni=N(576);function Jl(n,e){const t=(0,Ni.m)(n)?n:()=>n,r=i=>i.error(t());return new Mr.y(e?i=>e.schedule(r,0,i):r)}const ka=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xl=N(8189);function sg(...n){return function ry(){return(0,Xl.J)(1)}()((0,cr.D)(n,(0,xc.yG)(n)))}var hs=N(8421);function Fa(n){return new Mr.y(e=>{(0,hs.Xf)(n()).subscribe(e)})}var La=N(515),Pc=N(727),jr=N(4482);function qo(){return(0,jr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,rr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Oh extends Mr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,rr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pc.w0.EMPTY)}return e}refCount(){return qo()(this)}}function Er(n,e){return(0,jr.e)((t,r)=>{let i=null,a=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,rr.x)(r,p=>{null==i||i.unsubscribe();let y=0;const C=a++;(0,hs.Xf)(n(p,C)).subscribe(i=(0,rr.x)(r,T=>r.next(e?e(p,T,C,y++):T),()=>{i=null,d()}))},()=>{u=!0,d()}))})}var Va=N(5698);function fs(...n){const e=(0,xc.yG)(n);return(0,jr.e)((t,r)=>{(e?sg(n,t,e):sg(n,t)).subscribe(r)})}function Ls(n,e,t,r,i){return(a,u)=>{let d=t,p=e,y=0;a.subscribe((0,rr.x)(u,C=>{const T=y++;p=d?n(p,C,T):(d=!0,C),r&&u.next(p)},i&&(()=>{d&&u.next(p),u.complete()})))}}function ps(n,e){return(0,jr.e)(Ls(n,e,arguments.length>=2,!0))}function xi(n,e){return(0,jr.e)((t,r)=>{let i=0;t.subscribe((0,rr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function gs(n){return(0,jr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,rr.x)(t,void 0,void 0,u=>{a=(0,hs.Xf)(n(u,gs(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var Jn=N(5577);function kc(n,e){return(0,Ni.m)(e)?(0,Jn.z)(n,e,1):(0,Jn.z)(n,1)}function Ph(n){return n<=0?()=>La.E:(0,jr.e)((e,t)=>{let r=[];e.subscribe((0,rr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dr(n=iy){return(0,jr.e)((e,t)=>{let r=!1;e.subscribe((0,rr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function iy(){return new ka}function sy(n){return(0,jr.e)((e,t)=>{let r=!1;e.subscribe((0,rr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ua(n,e){const t=arguments.length>=2;return r=>r.pipe(n?xi((i,a)=>n(i,a,r)):mo.y,(0,Va.q)(1),t?sy(e):dr(()=>new ka))}var Oi=N(8505);class ms{constructor(e,t){this.id=e,this.url=t}}class Ko extends ms{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ba extends ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wr extends ms{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eu extends ms{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tu extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class og extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fc extends ms{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class di extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _s extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ru{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lc{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ay{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ag{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ly{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const fn="primary";class kh{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vr(n){return new kh(n)}const Vc="ngNavigationCancelingError";function ys(n){const e=Error("NavigationCancelingError: "+n);return e[Vc]=!0,e}function Uc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],d=n[a];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Pi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Bc(n[i],e[i]))return!1;return!0}function Bc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function lg(n){return Array.prototype.concat.apply([],n)}function iu(n){return n.length>0?n[n.length-1]:null}function Nr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ni(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,cr.D)(Promise.resolve(n)):kt(n)}const Zo={exact:function dg(n,e,t){if(!Yo(n.segments,e.segments)||!_o(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!dg(n.children[r],e.children[r],t))return!1;return!0},subset:su},$c={exact:function cg(n,e){return Pi(n,e)},subset:function dy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Bc(n[t],e[t]))},ignored:()=>!0};function $a(n,e,t){return Zo[t.paths](n.root,e.root,t.matrixParams)&&$c[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function su(n,e,t){return hg(n,e,e.segments,t)}function hg(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Yo(i,t)||e.hasChildren()||!_o(i,t,r))}if(n.segments.length===t.length){if(!Yo(n.segments,t)||!_o(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!su(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Yo(n.segments,i)&&_o(n.segments,i,r)&&n.children[fn])&&hg(n.children[fn],e,a,r)}}function _o(n,e,t){return e.every((r,i)=>$c[t](n[i].parameters,r.parameters))}class vs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vr(this.queryParams)),this._queryParamMap}toString(){return fg.serialize(this)}}class En{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Nr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ja(this)}}class hr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vr(this.parameters)),this._parameterMap}toString(){return au(this)}}function Yo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class yo{}class Hc{parse(e){const t=new fy(e);return new vs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${vo(e.root,!0)}`,r=function hy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ha(t)}=${Ha(i)}`).join("&"):`${Ha(t)}=${Ha(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Wa(n){return encodeURI(n)}(e.fragment)}`:""}`}}const fg=new Hc;function ja(n){return n.segments.map(e=>au(e)).join("/")}function vo(n,e){if(!n.hasChildren())return ja(n);if(e){const t=n.children[fn]?vo(n.children[fn],!1):"",r=[];return Nr(n.children,(i,a)=>{a!==fn&&r.push(`${a}:${vo(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ou(n,e){let t=[];return Nr(n.children,(r,i)=>{i===fn&&(t=t.concat(e(r,i)))}),Nr(n.children,(r,i)=>{i!==fn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===fn?[vo(n.children[fn],!1)]:[`${i}:${vo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[fn]?`${ja(n)}/${t[0]}`:`${ja(n)}/(${t.join("//")})`}}function Qo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ha(n){return Qo(n).replace(/%3B/gi,";")}function Fh(n){return Qo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ga(n){return decodeURIComponent(n)}function za(n){return Ga(n.replace(/\+/g,"%20"))}function au(n){return`${Fh(n.path)}${function pg(n){return Object.keys(n).map(e=>`;${Fh(e)}=${Fh(n[e])}`).join("")}(n.parameters)}`}const Lh=/^[^\/()?;=#]+/;function Vs(n){const e=n.match(Lh);return e?e[0]:""}const lu=/^[^=?&#]+/,Rw=/^[^&#]+/;class fy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new En([],{}):new En([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fn]=new En(e,t)),r}parseSegment(){const e=Vs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new hr(Ga(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Vs(this.remaining);i&&(r=i,this.capture(r))}e[Ga(t)]=Ga(r)}parseQueryParam(e){const t=function gg(n){const e=n.match(lu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function uu(n){const e=n.match(Rw);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=za(t),a=za(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=fn);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[fn]:new En([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class py{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Vh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Vh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Uh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Uh(e,this._root).map(t=>t.value)}}function Vh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Vh(n,t);if(r)return r}return null}function Uh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Uh(n,t);if(r.length)return r.unshift(e),r}return[]}class Us{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Wc extends py{constructor(e,t){super(e),this.snapshot=t,cu(this,e)}toString(){return this.snapshot.toString()}}function Jo(n,e){const t=function Bh(n,e){const u=new Ka([],{},{},"",{},fn,e,null,n.root,-1,{});return new $h("",new Us(u,[]))}(n,e),r=new ci([new hr("",{})]),i=new ci({}),a=new ci({}),u=new ci({}),d=new ci(""),p=new qa(r,i,u,d,a,fn,e,t.root);return p.snapshot=t.root,new Wc(new Us(p,[]),t)}class qa{constructor(e,t,r,i,a,u,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ln.U)(e=>Vr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ln.U)(e=>Vr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Gc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ka{constructor(e,t,r,i,a,u,d,p,y,C,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $h extends py{constructor(e,t){super(t),this.url=e,cu(this,t)}toString(){return jh(this._root)}}function cu(n,e){e.value._routerState=n,e.children.forEach(t=>cu(n,t))}function jh(n){const e=n.children.length>0?` { ${n.children.map(jh).join(", ")} } `:"";return`${n.value}${e}`}function zc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Pi(e.params,t.params)||n.params.next(t.params),function uy(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Pi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hh(n,e){const t=Pi(n.params,e.params)&&function jc(n,e){return Yo(n,e)&&n.every((t,r)=>Pi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hh(n.parent,e.parent))}function Xo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function _y(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xo(n,r,i);return Xo(n,r)})}(n,e,t);return new Us(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Xo(n,d)),u}}const r=function Wh(n){return new qa(new ci(n.url),new ci(n.params),new ci(n.queryParams),new ci(n.fragment),new ci(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Xo(n,a));return new Us(r,i)}}function $s(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function du(n){return"object"==typeof n&&null!=n&&n.outlets}function qc(n,e,t,r,i){let a={};if(r&&Nr(r,(d,p)=>{a[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new vs(t,a,i);const u=yy(n,e,t);return new vs(u,a,i)}function yy(n,e,t){const r={};return Nr(n.children,(i,a)=>{r[a]=i===e?t:yy(i,e,t)}),new En(n.segments,r)}class mg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$s(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(du);if(i&&i!==iu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _g{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function E(n,e,t){if(n||(n=new En([],{})),0===n.segments.length&&n.hasChildren())return m(n,e,t);const r=function _(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],d=t[r];if(du(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!re(p,y,u))return a;r+=2}else{if(!re(p,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new En(n.segments.slice(0,r.pathIndex),{});return a.children[fn]=new En(n.segments.slice(r.pathIndex),n.children),m(a,0,i)}return r.match&&0===i.length?new En(n.segments,{}):r.match&&!n.hasChildren()?b(n,e,t):r.match?m(n,0,i):b(n,e,t)}function m(n,e,t){if(0===t.length)return new En(n.segments,{});{const r=function wy(n){return du(n[0])?n[0].outlets:{[fn]:n}}(t),i={};return Nr(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=E(n.children[u],e,a))}),Nr(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new En(n.segments,i)}}function b(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(du(a)){const p=A(a.outlets);return new En(r,p)}if(0===i&&$s(t[0])){r.push(new hr(n.segments[e].path,L(t[0]))),i++;continue}const u=du(a)?a.outlets[fn]:`${a}`,d=i<t.length-1?t[i+1]:null;u&&d&&$s(d)?(r.push(new hr(u,L(d))),i+=2):(r.push(new hr(u,{})),i++)}return new En(r,{})}function A(n){const e={};return Nr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=b(new En([],{}),0,t))}),e}function L(n){const e={};return Nr(n,(t,r)=>e[r]=`${t}`),e}function re(n,e,t){return n==t.path&&Pi(e,t.parameters)}class Dt{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),zc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Bs(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Nr(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Bs(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Bs(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Bs(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new ag(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Lc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(zc(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),zc(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=function Bt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=d?d.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=p,u.outlet&&u.outlet.activateWith(i,p),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class rn{constructor(e,t){this.routes=e,this.module=t}}function On(n){return"function"==typeof n}function bi(n){return n instanceof vs}const fu=Symbol("INITIAL_VALUE");function wo(){return Er(n=>function xh(...n){const e=(0,xc.yG)(n),t=(0,xc.jO)(n),{args:r,keys:i}=zo(n);if(0===r.length)return(0,cr.D)([],e);const a=new Mr.y(function Oa(n,e,t=mo.y){return r=>{Pa(e,()=>{const{length:i}=n,a=new Array(i);let u=i,d=i;for(let p=0;p<i;p++)Pa(e,()=>{const y=(0,cr.D)(n[p],e);let C=!1;y.subscribe((0,rr.x)(r,T=>{a[p]=T,C||(C=!0,d--),d||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Nh(i,u):mo.y));return t?a.pipe(Na(t)):a}(n.map(e=>e.pipe((0,Va.q)(1),fs(fu)))).pipe(ps((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==fu?i:(a===fu&&(r=!0),r||!1!==a&&u!==t.length-1&&!bi(a)?i:a),e)},fu),xi(e=>e!==fu),(0,ln.U)(e=>bi(e)?e:!0===e),(0,Va.q)(1)))}class vg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ya,this.attachRef=null}}class Ya{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new vg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let pu=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=a||fn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new Eg(t,d,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ya),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Eg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qa?this.route:e===Ya?this.childContexts:this.parent.get(e,t)}}let Zc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[pu],encapsulation:2}),n})();function ea(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Cy(r,Iy(e,r))}}function Cy(n,e){n.children&&ea(n.children,e)}function Iy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ty(n){const e=n.children&&n.children.map(Ty),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fn&&(t.component=Zc),t}function Fn(n){return n.outlet||fn}function Mw(n,e){const t=n.filter(r=>Fn(r)===e);return t.push(...n.filter(r=>Fn(r)!==e)),t}const Nw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Nw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Uc)(t,n,e);if(!a)return Object.assign({},Nw);const u={};Nr(a.posParams,(p,y)=>{u[y]=p.path});const d=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Gh(n,e,t,r,i="corrected"){if(t.length>0&&function pD(n,e,t){return t.some(r=>wg(n,e,r)&&Fn(r)!==fn)}(n,t,r)){const u=new En(e,function fD(n,e,t,r){const i={};i[fn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Fn(a)!==fn){const u=new En([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Fn(a)]=u}return i}(n,e,r,new En(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function gD(n,e,t){return t.some(r=>wg(n,e,r))}(n,t,r)){const u=new En(n.segments,function hD(n,e,t,r,i,a){const u={};for(const d of r)if(wg(n,t,d)&&!i[Fn(d)]){const p=new En([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[Fn(d)]=p}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new En(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function wg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mD(n,e,t,r){return!!(Fn(n)===r||r!==fn&&wg(e,t,n))&&("**"===n.path||Yc(e,n,t).matched)}function _D(n,e,t){return 0===e.length&&!n.children[t]}class Qa{constructor(e){this.segmentGroup=e||null}}class hi{constructor(e){this.urlTree=e}}function gu(n){return Jl(new Qa(n))}function Sy(n){return Jl(new hi(n))}class Dy{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Gh(this.urlTree.root,[],[],this.config).segmentGroup,t=new En(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,fn).pipe((0,ln.U)(a=>this.createUrlTree(Ay(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gs(a=>{if(a instanceof hi)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Qa?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,fn).pipe((0,ln.U)(i=>this.createUrlTree(Ay(i),e.queryParams,e.fragment))).pipe(gs(i=>{throw i instanceof Qa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new En([],{[fn]:e}):e;return new vs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ln.U)(a=>new En([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,cr.D)(i).pipe(kc(a=>{const u=r.children[a],d=Mw(t,a);return this.expandSegmentGroup(e,d,u,a).pipe((0,ln.U)(p=>({segment:p,outlet:a})))}),ps((a,u)=>(a[u.outlet]=u.segment,a),{}),function oy(n,e){const t=arguments.length>=2;return r=>r.pipe(n?xi((i,a)=>n(i,a,r)):mo.y,Ph(1),t?sy(e):dr(()=>new ka))}())}expandSegment(e,t,r,i,a,u){return(0,cr.D)(r).pipe(kc(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,u).pipe(gs(y=>{if(y instanceof Qa)return kt(null);throw y}))),Ua(d=>!!d),gs((d,p)=>{if(d instanceof ka||"EmptyError"===d.name)return _D(t,i,a)?kt(new En([],{})):gu(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,u,d){return mD(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):gu(t):gu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Sy(a):this.lineralizeSegments(r,a).pipe((0,Jn.z)(u=>{const d=new En(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:C}=Yc(t,i,a);if(!d)return gu(t);const T=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?Sy(T):this.lineralizeSegments(i,T).pipe((0,Jn.z)(D=>this.expandSegment(e,t,r,D.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?kt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ln.U)(T=>(r._loadedConfig=T,new En(i,{})))):kt(new En(i,{}));const{matched:u,consumedSegments:d,remainingSegments:p}=Yc(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Jn.z)(C=>{const T=C.module,D=C.routes,{segmentGroup:x,slicedSegments:k}=Gh(t,d,p,D),q=new En(x.segments,x.children);if(0===k.length&&q.hasChildren())return this.expandChildren(T,D,q).pipe((0,ln.U)(We=>new En(d,We)));if(0===D.length&&0===k.length)return kt(new En(d,{}));const ie=Fn(r)===a;return this.expandSegment(T,q,D,k,ie?fn:a,!0).pipe((0,ln.U)(Ze=>new En(d.concat(Ze.segments),Ze.children)))})):gu(t)}getChildConfig(e,t,r){return t.children?kt(new rn(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?kt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Jn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ln.U)(a=>(t._loadedConfig=a,a))):function fi(n){return Jl(ys(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):kt(new rn([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?kt(i.map(u=>{const d=e.get(u);let p;if(function Za(n){return n&&On(n.canLoad)}(d))p=d.canLoad(t,r);else{if(!On(d))throw new Error("Invalid CanLoad guard");p=d(t,r)}return ni(p)})).pipe(wo(),(0,Oi.b)(u=>{if(!bi(u))return;const d=ys(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw d.url=u,d}),(0,ln.U)(u=>!0===u)):kt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return kt(r);if(i.numberOfChildren>1||!i.children[fn])return Jl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[fn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new vs(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Nr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Nr(t.children,(d,p)=>{u[p]=this.createSegmentGroup(e,d,r,i)}),new En(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ay(n){const e={};for(const r of Object.keys(n.children)){const a=Ay(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function yD(n){if(1===n.numberOfChildren&&n.children[fn]){const e=n.children[fn];return new En(n.segments.concat(e.segments),e.children)}return n}(new En(n.segments,e))}class Pw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qh{constructor(e,t){this.component=e,this.route=t}}function vD(n,e,t){const r=n._root;return mu(r,e?e._root:null,t,[r.value])}function bg(n,e,t){const r=function ED(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function mu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Bs(e);return n.children.forEach(u=>{(function wD(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const p=function bD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yo(n.url,e.url)||!Pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hh(n,e)||!Pi(n.queryParams,e.queryParams);default:return!Hh(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Pw(r)):(a.data=u.data,a._resolvedData=u._resolvedData),mu(n,e,a.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new qh(d.outlet.component,u))}else u&&_u(e,d,i),i.canActivateChecks.push(new Pw(r)),mu(n,null,a.component?d?d.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Nr(a,(u,d)=>_u(u,t.getContext(d),i)),i}function _u(n,e,t){const r=Bs(n),i=n.value;Nr(r,(a,u)=>{_u(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new qh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Fw{}function Lw(n){return new Mr.y(e=>e.error(n))}class ND{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=Gh(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,fn);if(null===t)return null;const r=new Ka([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Us(r,t),a=new $h(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=gy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],d=Mw(e,a),p=this.processSegmentGroup(d,u,a);if(null===p)return null;r.push(...p)}const i=Uw(r);return function xD(n){n.sort((e,t)=>e.value.outlet===fn?-1:t.value.outlet===fn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return _D(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!mD(e,t,r,i))return null;let a,u=[],d=[];if("**"===e.path){const x=r.length>0?iu(r).parameters:{};a=new Ka(r,x,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,PD(e),Fn(e),e.component,e,yu(t),Hs(t)+r.length,kD(e))}else{const x=Yc(t,e,r);if(!x.matched)return null;u=x.consumedSegments,d=x.remainingSegments,a=new Ka(u,x.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,PD(e),Fn(e),e.component,e,yu(t),Hs(t)+u.length,kD(e))}const p=function OD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:C}=Gh(t,u,d,p.filter(x=>void 0===x.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const x=this.processChildren(p,y);return null===x?null:[new Us(a,x)]}if(0===p.length&&0===C.length)return[new Us(a,[])];const T=Fn(e)===i,D=this.processSegment(p,y,C,T?fn:i);return null===D?null:[new Us(a,D)]}}function Vw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Uw(n){const e=[],t=new Set;for(const r of n){if(!Vw(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Uw(r.children);e.push(new Us(r.value,i))}return e.filter(r=>!t.has(r))}function yu(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Hs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function PD(n){return n.data||{}}function kD(n){return n.resolve||{}}function Ig(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Tg(n){return Er(e=>{const t=n(e);return t?(0,cr.D)(t).pipe((0,ln.U)(()=>e)):kt(e)})}class jw extends class $w{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Zh=new f.OlP("ROUTES");class Sg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ln.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new rn(lg(u.injector.get(Zh,void 0,f.XFs.Self|f.XFs.Optional)).map(Ty),u)}),gs(a=>{throw t._loader$=void 0,a}));return t._loader$=new Oh(i,()=>new Ki.x).pipe(qo()),t._loader$}loadModuleFactory(e){return ni(e()).pipe((0,Jn.z)(t=>t instanceof f.YKP?kt(t):(0,cr.D)(this.compiler.compileModuleAsync(t))))}}class GO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Qc(n){throw n}function My(n,e,t){return e.parse("/")}function Ny(n,e){return kt(null)}const LD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ci=(()=>{class n{constructor(t,r,i,a,u,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ki.x,this.errorHandler=Qc,this.malformedUriErrorHandler=My,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ny,afterPreactivation:Ny},this.urlHandlingStrategy=new GO,this.routeReuseStrategy=new jw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(f.h0i),this.console=u.get(f.c2e);const T=u.get(f.R0b);this.isNgZoneEnabled=T instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function ug(){return new vs(new En([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Sg(u,d,D=>this.triggerEvent(new nu(D)),D=>this.triggerEvent(new ru(D))),this.routerState=Jo(this.currentUrlTree,this.rootComponentType),this.transitions=new ci({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(xi(i=>0!==i.id),(0,ln.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Er(i=>{let a=!1,u=!1;return kt(i).pipe((0,Oi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Er(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Ww(d.source)&&(this.browserUrlTree=d.extractedUrl),kt(d).pipe(Er(T=>{const D=this.transitions.getValue();return r.next(new Ko(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),D!==this.transitions.getValue()?La.E:Promise.resolve(T)}),function Ow(n,e,t,r){return Er(i=>function zh(n,e,t,r,i){return new Dy(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ln.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Oi.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function Bw(n,e,t,r,i){return(0,Jn.z)(a=>function MD(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new ND(n,e,t,r,i,a).recognize();return null===u?Lw(new Fw):kt(u)}catch(u){return Lw(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,ln.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Oi.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const x=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(x,T)}this.browserUrlTree=T.urlAfterRedirects}const D=new tu(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(D)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:D,extractedUrl:x,source:k,restoredState:q,extras:ie}=d,Qe=new Ko(D,this.serializeUrl(x),k,q);r.next(Qe);const Ze=Jo(x,this.rootComponentType).snapshot;return kt(Object.assign(Object.assign({},d),{targetSnapshot:Ze,urlAfterRedirects:x,extras:Object.assign(Object.assign({},ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),La.E}),Tg(d=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:T,extras:{skipLocationChange:D,replaceUrl:x}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:T,skipLocationChange:!!D,replaceUrl:!!x})}),(0,Oi.b)(d=>{const p=new og(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,ln.U)(d=>Object.assign(Object.assign({},d),{guards:vD(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function CD(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?kt(Object.assign(Object.assign({},t),{guardsResult:!0})):function ID(n,e,t,r){return(0,cr.D)(n).pipe((0,Jn.z)(i=>function RD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?kt(a.map(d=>{const p=bg(d,e,i);let y;if(function by(n){return n&&On(n.canDeactivate)}(p))y=ni(p.canDeactivate(n,e,t,r));else{if(!On(p))throw new Error("Invalid CanDeactivate guard");y=ni(p(n,e,t,r))}return y.pipe(Ua())})).pipe(wo()):kt(!0)}(i.component,i.route,t,e,r)),Ua(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Jn.z)(d=>d&&function js(n){return"boolean"==typeof n}(d)?function Cg(n,e,t,r){return(0,cr.D)(e).pipe(kc(i=>sg(function SD(n,e){return null!==n&&e&&e(new Zi(n)),kt(!0)}(i.route.parent,r),function TD(n,e){return null!==n&&e&&e(new ay(n)),kt(!0)}(i.route,r),function AD(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function kw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Fa(()=>kt(u.guards.map(p=>{const y=bg(p,u.node,t);let C;if(function hu(n){return n&&On(n.canActivateChild)}(y))C=ni(y.canActivateChild(r,n));else{if(!On(y))throw new Error("Invalid CanActivateChild guard");C=ni(y(r,n))}return C.pipe(Ua())})).pipe(wo())));return kt(a).pipe(wo())}(n,i.path,t),function DD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return kt(!0);const i=r.map(a=>Fa(()=>{const u=bg(a,e,t);let d;if(function Kc(n){return n&&On(n.canActivate)}(u))d=ni(u.canActivate(e,n));else{if(!On(u))throw new Error("Invalid CanActivate guard");d=ni(u(e,n))}return d.pipe(Ua())}));return kt(i).pipe(wo())}(n,i.route,t))),Ua(i=>!0!==i,!0))}(r,a,n,e):kt(d)),(0,ln.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Oi.b)(d=>{if(bi(d.guardsResult)){const y=ys(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new Fc(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),xi(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Tg(d=>{if(d.guards.canActivateChecks.length)return kt(d).pipe((0,Oi.b)(p=>{const y=new di(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Er(p=>{let y=!1;return kt(p).pipe(function WO(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return kt(t);let a=0;return(0,cr.D)(i).pipe(kc(u=>function bo(n,e,t,r){return function Ry(n,e,t,r){const i=Ig(n);if(0===i.length)return kt({});const a={};return(0,cr.D)(i).pipe((0,Jn.z)(u=>function FD(n,e,t,r){const i=bg(n,e,r);return ni(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Oi.b)(d=>{a[u]=d}))),Ph(1),(0,Jn.z)(()=>Ig(a).length===i.length?kt(a):La.E))}(n._resolve,n,e,r).pipe((0,ln.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),gy(n,t).resolve),null)))}(u.route,r,n,e)),(0,Oi.b)(()=>a++),Ph(1),(0,Jn.z)(u=>a===i.length?kt(t):La.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Oi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Oi.b)(p=>{const y=new _s(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Tg(d=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:T,extras:{skipLocationChange:D,replaceUrl:x}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:T,skipLocationChange:!!D,replaceUrl:!!x})}),(0,ln.U)(d=>{const p=function my(n,e,t){const r=Xo(n,e._root,t?t._root:void 0);return new Wc(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,Oi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ln.U)(r=>(new Dt(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Oi.b)({next(){a=!0},complete(){a=!0}}),function Dw(n){return(0,jr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),gs(d=>{if(u=!0,function Aw(n){return n&&n[Vc]}(d)){const p=bi(d.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new wr(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(y),p?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ww(i.source)};this.scheduleNavigation(C,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new eu(i.id,this.serializeUrl(i.extractedUrl),d);r.next(p);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return La.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const p=Object.assign({},u);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(a.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ea(t),this.config=t.map(Ty),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:d,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:u;let T=null;switch(d){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),function Eo(n,e,t,r,i){if(0===t.length)return qc(e.root,e.root,e.root,r,i);const a=function vy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return Nr(a.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new mg(t,e,r)}(t);if(a.toRoot())return qc(e.root,e.root,new En([],{}),r,i);const u=function yg(n,e,t){if(n.isAbsolute)return new _g(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new _g(a,a===e.root,0)}const r=$s(n.commands[0])?0:1;return function Ey(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new _g(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=u.processChildren?m(u.segmentGroup,u.index,a.commands):E(u.segmentGroup,u.index,a.commands);return qc(e.root,u.segmentGroup,d,r,i)}(y,this.currentUrlTree,t,T,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bi(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function VD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},LD):!1===r?Object.assign({},xy):r,bi(t))return $a(this.currentUrlTree,t,i);const a=this.parseUrl(t);return $a(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ba(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var d,p;if(this.disposed)return Promise.resolve(!1);let y,C,T;u?(y=u.resolve,C=u.reject,T=u.promise):T=new Promise((k,q)=>{y=k,C=q});const D=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):x=0,this.setTransition({id:D,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:y,reject:C,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new wr(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ww(n){return"imperative"!==n}let Dg=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this.commands=null,this.onChanges=new Ki.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Jc(this.skipLocationChange),replaceUrl:Jc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ci),f.Y36(qa),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})(),Yh=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ki.x,this.subscription=t.events.subscribe(a=>{a instanceof Ba&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:Jc(this.skipLocationChange),replaceUrl:Jc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Jc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ci),f.Y36(qa),f.Y36(_e))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Jc(n){return""===n||!!n}class Py{}class zw{preload(e,t){return kt(null)}}let qw=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Sg(i,r,p=>t.triggerEvent(new nu(p)),p=>t.triggerEvent(new ru(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(xi(t=>t instanceof Ba),kc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,cr.D)(i).pipe((0,Xl.J)(),(0,ln.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?kt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Jn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ci),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Py))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ag=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ko?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ba&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ly&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ly(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Yi=new f.OlP("ROUTER_CONFIGURATION"),Fy=new f.OlP("ROUTER_FORROOT_GUARD"),Kw=[Me,{provide:yo,useClass:Hc},{provide:Ci,useFactory:function Vy(n,e,t,r,i,a,u={},d,p){const y=new Ci(null,n,e,t,r,i,lg(a));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function Qw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(C=>{var T,D;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(D=console.groupEnd)||void 0===D||D.call(console)}),y},deps:[yo,Ya,Me,f.zs3,f.Sil,Zh,Yi,[class Hw{},new f.FiY],[class Kh{},new f.FiY]]},Ya,{provide:qa,useFactory:function Rg(n){return n.routerState.root},deps:[Ci]},qw,zw,class ky{preload(e,t){return t().pipe(gs(()=>kt(null)))}},{provide:Yi,useValue:{enableTracing:!1}}];function BD(){return new f.PXZ("Router",Ci)}let Co=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Kw,Ly(t),{provide:Fy,useFactory:Yw,deps:[[Ci,new f.FiY,new f.tp0]]},{provide:Yi,useValue:r||{}},{provide:_e,useFactory:Zw,deps:[ce,[new f.tBr(at),new f.FiY],Yi]},{provide:Ag,useFactory:$D,deps:[Ci,Yp,Yi]},{provide:Py,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:zw},{provide:f.PXZ,multi:!0,useFactory:BD},[Xc,{provide:f.ip1,multi:!0,useFactory:Jw,deps:[Xc]},{provide:By,useFactory:Uy,deps:[Xc]},{provide:f.tb,multi:!0,useExisting:By}]]}}static forChild(t){return{ngModule:n,providers:[Ly(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fy,8),f.LFG(Ci,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function $D(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ag(n,e,t)}function Zw(n,e,t={}){return t.useHash?new Ne(n,e):new Ke(n,e)}function Yw(n){return"guarded"}function Ly(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Zh,multi:!0,useValue:n}]}let Xc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ki.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(Ci),u=this.injector.get(Yi);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?kt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Yi),i=this.injector.get(qw),a=this.injector.get(Ag),u=this.injector.get(Ci),d=this.injector.get(f.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Jw(n){return n.appInitializer.bind(n)}function Uy(n){return n.bootstrapListener.bind(n)}const By=new f.OlP("Router Initializer"),Xw=new f.OlP("GETS_ALL_IMAGE_DTO");function eb(n,e){if(1&n&&(f.TgZ(0,"div",3)(1,"div",4),f._UZ(2,"img",5),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.imageUrl,f.LSH)}}let jy=(()=>{class n{constructor(t){this._getsAllImageDto=t,this.images$=this._getsAllImageDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xw))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-images"]],decls:4,vars:3,consts:[[1,"container"],[1,"row",2,"margin","50px","padding","10px"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"card","text-center"],[1,"card-img-top",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f.YNc(2,eb,3,1,"div",2),f.ALo(3,"async"),f.qZA()()),2&t&&(f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,r.images$)))},directives:[Rr],pipes:[Gp],encapsulation:2,changeDetection:0}),n})(),jD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page"]],decls:12,vars:0,consts:[[1,"grid"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"fw-bold","fs-1"],[1,"fs-5"],[1,"d-flex","justify-content-center"],["type","button","routerLink","/add-task",1,"btn","text-white","fw-bold",2,"margin","10px","padding","10px"],["type","button","routerLink","/tasks",1,"btn","text-white","fw-bold",2,"margin","10px","padding","10px"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"p",2),f._uU(3,"Get a clear view of the day ahead"),f.qZA(),f.TgZ(4,"p",3),f._uU(5,"All your tasks that are due today will show up here."),f.qZA(),f.TgZ(6,"div",4)(7,"div",5),f._uU(8," Add task "),f.qZA(),f.TgZ(9,"div",6),f._uU(10," My tasks "),f.qZA()()()(),f._UZ(11,"lib-images"))},directives:[Dg,jy],encapsulation:2,changeDetection:0}),n})(),Qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gi]]}),n})(),Jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gi]]}),n})();var tb=N(4986),ct=N(4027);function Xh(){return(0,jr.e)((n,e)=>{let t,r=!1;n.subscribe((0,rr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function nb(n,e=mo.y){return n=null!=n?n:rb,(0,jr.e)((t,r)=>{let i,a=!0;t.subscribe((0,rr.x)(r,u=>{const d=e(u);(a||!n(i,d))&&(a=!1,i=d,r.next(u))}))})}function rb(n,e){return n===e}var Tt,Ws=N(2011),Gs=(N(5881),N(3942)),Ce=N(5861),Pn=N(9681),Ja=N(4859),Es=N(1877),Z=N(2090),HD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Io={},Hy=Hy||{},sn=HD||self;function en(){}function Ng(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ed(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var td="closure_uid_"+(1e9*Math.random()>>>0),zs=0;function sb(n,e,t){return n.call.apply(n.bind,arguments)}function WD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hr(n,e,t){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sb:WD).apply(null,arguments)}function ws(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Wr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function ta(){this.s=this.s,this.o=this.o}var qO={};ta.prototype.s=!1,ta.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ib(n){return Object.prototype.hasOwnProperty.call(n,td)&&n[td]||(n[td]=++zs)}(this);delete qO[n]}},ta.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},GD=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function ef(n){return Array.prototype.concat.apply([],arguments)}function tf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function nd(n){return/^[\s\xa0]*$/.test(n)}var Ii,Og=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ki(n,e){return-1!=n.indexOf(e)}function zy(n,e){return n<e?-1:n>e?1:0}e:{var ob=sn.navigator;if(ob){var ab=ob.userAgent;if(ab){Ii=ab;break e}}Ii=""}function Pg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function zD(n){const e={};for(const t in n)e[t]=n[t];return e}var lb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qD(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<lb.length;a++)t=lb[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function kg(n){return kg[" "](n),n}kg[" "]=en;var qy,n,KD=ki(Ii,"Opera"),Xa=ki(Ii,"Trident")||ki(Ii,"MSIE"),ZD=ki(Ii,"Edge"),cb=ZD||Xa,YD=ki(Ii,"Gecko")&&!(ki(Ii.toLowerCase(),"webkit")&&!ki(Ii,"Edge"))&&!(ki(Ii,"Trident")||ki(Ii,"MSIE"))&&!ki(Ii,"Edge"),KO=ki(Ii.toLowerCase(),"webkit")&&!ki(Ii,"Edge");function QD(){var n=sn.document;return n?n.documentMode:void 0}e:{var db="",hb=(n=Ii,YD?/rv:([^\);]+)(\)|;)/.exec(n):ZD?/Edge\/([\d\.]+)/.exec(n):Xa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):KO?/WebKit\/(\S+)/.exec(n):KD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(hb&&(db=hb?hb[1]:""),Xa){var fb=QD();if(null!=fb&&fb>parseFloat(db)){qy=String(fb);break e}}qy=db}var ZO={};var gb=sn.document&&Xa&&(QD()||parseInt(qy,10))||void 0,Ky=function(){if(!sn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{sn.addEventListener("test",en,e),sn.removeEventListener("test",en,e)}catch(t){}return n}();function ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function vu(n,e){if(ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(YD){e:{try{kg(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:JD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vu.Z.h.call(this)}}ri.prototype.h=function(){this.defaultPrevented=!0},Wr(vu,ri);var JD={2:"touch",3:"pen",4:"mouse"};vu.prototype.h=function(){vu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),mb=0;function XD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++mb,this.ca=this.fa=!1}function rd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Fg(n){this.src=n,this.g={},this.h=0}function Lg(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Gy(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(rd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Zy(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Fg.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=Zy(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new XD(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Yy="closure_lm_"+(1e6*Math.random()|0),Eu={};function wu(n,e,t,r,i){if(r&&r.once)return sd(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)wu(n,e[a],t,r,i);return null}return t=Ug(t),n&&n[bs]?n.N(e,t,ed(r)?!!r.capture:!!r,i):Vg(n,e,t,!1,r,i)}function Vg(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=ed(i)?!!i.capture:!!i,d=rf(n);if(d||(n[Yy]=d=new Fg(n)),(t=d.add(e,t,r,u,a)).proxy)return t;if(r=function id(){var e=_b;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ky||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Jy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sd(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)sd(n,e[a],t,r,i);return null}return t=Ug(t),n&&n[bs]?n.O(e,t,ed(r)?!!r.capture:!!r,i):Vg(n,e,t,!0,r,i)}function bu(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)bu(n,e[a],t,r,i);else r=ed(r)?!!r.capture:!!r,t=Ug(t),n&&n[bs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Zy(a=n.g[e],t,r,i))&&(rd(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=rf(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Zy(e,t,r,i)),(t=-1<n?e[n]:null)&&Qy(t))}function Qy(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[bs])Lg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Jy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rf(e))?(Lg(t,n),0==t.h&&(t.src=null,e[Yy]=null)):rd(n)}}}function Jy(n){return n in Eu?Eu[n]:Eu[n]="on"+n}function _b(n,e){if(n.ca)n=!0;else{e=new vu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Qy(n),n=t.call(r,e)}return n}function rf(n){return(n=n[Yy])instanceof Fg?n:null}var sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ug(n){return"function"==typeof n?n:(n[sf]||(n[sf]=function(e){return n.handleEvent(e)}),n[sf])}function xr(){ta.call(this),this.i=new Fg(this),this.P=this,this.I=null}function ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ri(e,n);else if(e instanceof ri)e.target=e.target||n;else{var i=e;qD(e=new ri(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=af(u,r,!0,e)&&i}if(i=af(u=e.g=n,r,!0,e)&&i,i=af(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=af(u=e.g=t[a],r,!1,e)&&i}function af(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var d=u.listener,p=u.ia||u.src;u.fa&&Lg(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}Wr(xr,ta),xr.prototype[bs]=!0,xr.prototype.removeEventListener=function(n,e,t,r){bu(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)rd(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var yb=sn.JSON.stringify;function vb(){var n=nA;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ti,wb=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bb,n=>n.reset());class bb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function eA(n){sn.setTimeout(()=>{throw n},0)}function Xy(n,e){Ti||function tA(){var n=sn.Promise.resolve(void 0);Ti=function(){n.then(YO)}}(),ev||(Ti(),ev=!0),nA.add(n,e)}var ev=!1,nA=new class Eb{constructor(){this.h=this.g=null}add(e,t){const r=wb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function YO(){for(var n;n=vb();){try{n.h.call(n.g)}catch(t){eA(t)}var e=wb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ev=!1}function lf(n,e){xr.call(this),this.h=n||1,this.g=e||sn,this.j=Hr(this.kb,this),this.l=Date.now()}function Cb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function tv(n,e,t){if("function"==typeof n)t&&(n=Hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:sn.setTimeout(n,e||0)}function Bg(n){n.g=tv(()=>{n.g=null,n.i&&(n.i=!1,Bg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Wr(lf,xr),(Tt=lf.prototype).da=!1,Tt.S=null,Tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ii(this,"tick"),this.da&&(Cb(this),this.start()))}},Tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){lf.Z.M.call(this),Cb(this),delete this.g};class Ib extends ta{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Bg(this)}M(){super.M(),this.g&&(sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uf(n){ta.call(this),this.h=n,this.g={}}Wr(uf,ta);var Tb=[];function Sb(n,e,t,r){Array.isArray(t)||(t&&(Tb[0]=t.toString()),t=Tb);for(var i=0;i<t.length;i++){var a=wu(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function nv(n){Pg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Qy(e)},n),n.g={}}function $g(){this.g=!0}function od(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Rb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return yb(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}uf.prototype.M=function(){uf.Z.M.call(this),nv(this)},uf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$g.prototype.Aa=function(){this.g=!1},$g.prototype.info=function(){};var Cu={},qs=null;function ad(){return qs=qs||new xr}function Mb(n){ri.call(this,Cu.Ma,n)}function cf(n){const e=ad();ii(e,new Mb(e,n))}function iA(n,e){ri.call(this,Cu.STAT_EVENT,n),this.stat=e}function pi(n){const e=ad();ii(e,new iA(e,n))}function Nb(n,e){ri.call(this,Cu.Na,n),this.size=e}function df(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return sn.setTimeout(function(){n()},e)}Cu.Ma="serverreachability",Wr(Mb,ri),Cu.STAT_EVENT="statevent",Wr(iA,ri),Cu.Na="timingevent",Wr(Nb,ri);var jg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rv(){}function hf(){}rv.prototype.h=null;var pf,Iu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function iv(){ri.call(this,"d")}function ff(){ri.call(this,"c")}function gf(){}function mf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new uf(this),this.P=sv,this.W=new lf(n=cb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ob}function Ob(){this.i=null,this.g="",this.h=!1}Wr(iv,ri),Wr(ff,ri),Wr(gf,rv),gf.prototype.g=function(){return new XMLHttpRequest},gf.prototype.i=function(){return{}},pf=new gf;var sv=45e3,Pb={},Wg={};function Gg(n,e,t){n.K=1,n.v=wf(ra(e)),n.s=t,n.U=!0,ov(n,null)}function ov(n,e){n.F=Date.now(),Qi(n),n.A=ra(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),$b(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ob,n.g=bv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ib(Hr(n.Ia,n,n.g),n.O)),Sb(n.V,n.g,"readystatechange",n.gb),e=n.H?zD(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),cf(1),function Db(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",d=a.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var C=y[0];y=y[1];var T=C.split("_");u=2<=T.length&&"type"==T[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function av(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function lv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=kb(n,t),i==Wg){4==e&&(n.o=4,pi(14),r=!1),od(n.j,n.m,null,"[Incomplete Response]");break}if(i==Pb){n.o=4,pi(15),od(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}od(n.j,n.m,i,null),vf(n,i)}av(n)&&i!=Wg&&i!=Pb&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),il(e),e.L=!0,pi(11))):(od(n.j,n.m,t,"[Invalid Chunked Response]"),ld(n),yf(n))}function kb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Wg:(t=Number(e.substring(t,r)),isNaN(t)?Pb:(r+=1)+t>e.length?Wg:(e=e.substr(r,t),n.C=r+t,e))}function Qi(n){n.Y=Date.now()+n.P,_f(n,n.P)}function _f(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=df(Hr(n.eb,n),e)}function zg(n){n.B&&(sn.clearTimeout(n.B),n.B=null)}function yf(n){0==n.l.G||n.I||Ou(n.l,n)}function ld(n){zg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Cb(n.W),nv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function vf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||zb(t.i,n)))if(t.I=n.N,!n.J&&zb(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=df(Hr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;oa(t),Gr(t)}rl(t),pi(18)}if(1>=Gb(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else sl(t,11)}else if((n.J||t.g==n)&&oa(t),!nd(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const D=y[5];null!=D&&"number"==typeof D&&0<D&&(t.K=r=1.5*D,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const x=n.g;if(x){const k=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(k){var a=r.i;!a.g&&(ki(k,"spdy")||ki(k,"quic")||ki(k,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(qb(a,a.h),a.h=null))}if(r.D){const q=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;q&&(r.sa=q,$n(r.F,r.D,q))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=wv(r,r.H?r.la:null,r.W),u.J){Zg(r.i,u);var d=u,p=r.K;p&&d.setTimeout(p),d.B&&(zg(d),Qi(d)),r.g=u}else Nu(r);0<t.l.length&&Si(t)}else"stop"!=y[0]&&"close"!=y[0]||sl(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?sl(t,7):Au(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}cf(4)}catch(y){}}function Ef(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ng(n)||"string"==typeof n)GD(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ng(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Fb(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ng(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function To(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof To)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function uv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];na(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)na(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function na(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Tt=mf.prototype).setTimeout=function(n){this.P=n},Tt.gb=function(n){n=n.target;const e=this.L;e&&3==sa(n)?e.l():this.Ia(n)},Tt.Ia=function(n){try{if(n==this.g)e:{const C=sa(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>C)&&(3!=C||cb||this.g&&(this.h.h||this.g.ga()||hd(this.g)))){this.I||4!=C||7==e||cf(8==e||0>=T?3:2),zg(this);var t=this.g.ba();this.N=t;t:if(av(this)){var r=hd(this.g);n="";var i=r.length,a=4==sa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ld(this),yf(this);var u="";break t}this.h.i=new sn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function rA(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nd(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,pi(12),ld(this),yf(this);break e}od(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vf(this,t)}this.U?(lv(this,C,u),cb&&this.i&&3==C&&(Sb(this.V,this.W,"tick",this.fb),this.W.start())):(od(this.j,this.m,u,null),vf(this,u)),4==C&&ld(this),this.i&&!this.I&&(4==C?Ou(this.l,this):(this.i=!1,Qi(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),ld(this),yf(this)}}}catch(C){}},Tt.fb=function(){if(this.g){var n=sa(this.g),e=this.g.ga();this.C<e.length&&(zg(this),lv(this,n,e),this.i&&4!=n&&Qi(this))}},Tt.cancel=function(){this.I=!0,ld(this)},Tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ab(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cf(3),pi(17)),ld(this),this.o=2,yf(this)):_f(this,this.Y-n)},(Tt=To.prototype).R=function(){uv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Tt.T=function(){return uv(this),this.g.concat()},Tt.get=function(n,e){return na(this.h,n)?this.h[n]:e},Tt.set=function(n,e){na(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var cv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof tl){this.g=void 0!==e?e:n.g,ud(this,n.j),this.s=n.s,qg(this,n.i),Kg(this,n.m),this.l=n.l,e=n.h;var t=new cd;t.i=e.i,e.g&&(t.g=new To(e.g),t.h=e.h),dv(this,t),this.o=n.o}else n&&(t=String(n).match(cv))?(this.g=!!e,ud(this,t[1]||"",!0),this.s=So(t[2]||""),qg(this,t[3]||"",!0),Kg(this,t[4]),this.l=So(t[5]||"",!0),dv(this,t[6]||"",!0),this.o=So(t[7]||"")):(this.g=!!e,this.h=new cd(null,this.g))}function ra(n){return new tl(n)}function ud(n,e,t){n.j=t?So(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function qg(n,e,t){n.i=t?So(e,!0):e}function Kg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dv(n,e,t){e instanceof cd?(n.h=e,function uA(n,e){e&&!n.j&&(ia(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(fv(this,r),$b(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=bf(e,hv)),n.h=new cd(e,n.g))}function $n(n,e,t){n.h.set(e,t)}function wf(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function So(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,aA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function aA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}tl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bf(e,Vb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bf(e,Vb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(bf(t,"/"==t.charAt(0)?Ks:lA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bf(t,Ub)),n.join("")};var Vb=/[#\/\?@]/g,lA=/[#\?:]/g,Ks=/[#\?]/g,hv=/[#\?@]/g,Ub=/#/g;function cd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ia(n){n.g||(n.g=new To,n.h=0,n.i&&function Lb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fv(n,e){ia(n),e=dd(n,e),na(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,na((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&uv(n)))}function Bb(n,e){return ia(n),e=dd(n,e),na(n.g.h,e)}function $b(n,e,t){fv(n,e),0<t.length&&(n.i=null,n.g.set(dd(n,e),tf(t)),n.h+=t.length)}function dd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function cA(n){this.l=n||Hb,n=sn.PerformanceNavigationTiming?0<(n=sn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(sn.g&&sn.g.Ea&&sn.g.Ea()&&sn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=cd.prototype).add=function(n,e){ia(this),this.i=null,n=dd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Tt.forEach=function(n,e){ia(this),this.g.forEach(function(t,r){GD(t,function(i){n.call(e,i,r,this)},this)},this)},Tt.T=function(){ia(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Tt.R=function(n){ia(this);var e=[];if("string"==typeof n)Bb(this,n)&&(e=ef(e,this.g.get(dd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ef(e,n[t])}return e},Tt.set=function(n,e){return ia(this),this.i=null,Bb(this,n=dd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var Hb=10;function Wb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Gb(n){return n.h?1:n.g?n.g.size:0}function zb(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function qb(n,e){n.g?n.g.add(e):n.h=e}function Zg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Kb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return tf(n.i)}function Yg(){}function Zb(){this.g=new Yg}function QO(n,e,t){const r=t||"";try{Ef(n,function(i,a){let u=i;ed(i)&&(u=yb(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Qg(n){this.l=n.$b||null,this.j=n.ib||!1}function Cf(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Jg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cA.prototype.cancel=function(){if(this.i=Kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Yg.prototype.stringify=function(n){return sn.JSON.stringify(n,void 0)},Yg.prototype.parse=function(n){return sn.JSON.parse(n,void 0)},Wr(Qg,rv),Qg.prototype.g=function(){return new Cf(this.l,this.j)},Qg.prototype.i=function(n){return function(){return n}}({}),Wr(Cf,xr);var Jg=0;function gv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function If(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xg(n)}function Xg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=Cf.prototype).open=function(n,e){if(this.readyState!=Jg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xg(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||sn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,If(this)),this.readyState=Jg},Tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xg(this)),this.g&&(this.readyState=3,Xg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==sn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?If(this):Xg(this),3==this.readyState&&gv(this)}},Tt.Ua=function(n){this.g&&(this.response=this.responseText=n,If(this))},Tt.Ta=function(n){this.g&&(this.response=n,If(this))},Tt.ha=function(){this.g&&If(this)},Tt.setRequestHeader=function(n,e){this.v.append(n,e)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Yb=sn.JSON.parse;function br(n){xr.call(this),this.headers=new To,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Qb,this.K=this.L=!1}Wr(br,xr);var Qb="",mv=/^https?$/i,dA=["POST","PUT"];function fA(n){return"content-type"==n.toLowerCase()}function Jb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Xb(n),Tu(n)}function Xb(n){n.D||(n.D=!0,ii(n,"complete"),ii(n,"error"))}function eC(n){if(n.h&&void 0!==Hy&&(!n.C[1]||4!=sa(n)||2!=n.ba()))if(n.v&&4==sa(n))tv(n.Fa,0,n);else if(ii(n,"readystatechange"),4==sa(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(cv)[1]||null;if(!i&&sn.self&&sn.self.location){var a=sn.self.location.protocol;i=a.substr(0,a.length-1)}r=!mv.test(i?i.toLowerCase():"")}t=r}if(t)ii(n,"complete"),ii(n,"success");else{n.m=6;try{var u=2<sa(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.ba()+"]",Xb(n)}}finally{Tu(n)}}}function Tu(n,e){if(n.g){Su(n);const t=n.g,r=n.C[0]?en:null;n.g=null,n.C=null,e||ii(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Su(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(sn.clearTimeout(n.A),n.A=null)}function sa(n){return n.g?n.g.readyState:0}function hd(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Qb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _v(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function pA(n){let e="";return Pg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function Du(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ys(n){this.za=0,this.l=[],this.h=new $g,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Du("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Du("baseRetryDelayMs",5e3,n),this.$a=Du("retryDelaySeedMs",1e4,n),this.Ya=Du("forwardChannelMaxRetries",2,n),this.ra=Du("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new cA(n&&n.concurrentRequestLimit),this.Ca=new Zb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Au(n){if(nl(n),3==n.G){var e=n.V++,t=ra(n.F);$n(t,"SID",n.J),$n(t,"RID",e),$n(t,"TYPE","terminate"),Do(n,t),(e=new mf(n,n.h,e,void 0)).K=2,e.v=wf(ra(t)),t=!1,sn.navigator&&sn.navigator.sendBeacon&&(t=sn.navigator.sendBeacon(e.v.toString(),"")),!t&&sn.Image&&((new Image).src=e.v,t=!0),t||(e.g=bv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Qi(e)}Ev(n)}function Gr(n){n.g&&(il(n),n.g.cancel(),n.g=null)}function nl(n){Gr(n),n.u&&(sn.clearTimeout(n.u),n.u=null),oa(n),n.i.cancel(),n.m&&("number"==typeof n.m&&sn.clearTimeout(n.m),n.m=null)}function fd(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Si(n)}function Si(n){Wb(n.i)||n.m||(n.m=!0,Xy(n.Ha,n),n.C=0)}function Ru(n,e){var t;t=e?e.m:n.V++;const r=ra(n.F);$n(r,"SID",n.J),$n(r,"RID",t),$n(r,"AID",n.U),Do(n,r),n.o&&n.s&&_v(r,n.o,n.s),t=new mf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Mu(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),qb(n.i,t),Gg(t,r,e)}function Do(n,e){n.j&&Ef({},function(t,r){$n(e,r,t)})}function Mu(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let d=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=a,0>y)a=Math.max(0,i[p].h-100),d=!1;else try{QO(C,u,"req"+y+"_")}catch(T){r&&r(C)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Nu(n){n.g||n.u||(n.Y=1,Xy(n.Ga,n),n.A=0)}function rl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=df(Hr(n.Ga,n),vv(n,n.A)),n.A++,0))}function il(n){null!=n.B&&(sn.clearTimeout(n.B),n.B=null)}function xu(n){n.g=new mf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ra(n.oa);$n(e,"RID","rpc"),$n(e,"SID",n.J),$n(e,"CI",n.N?"0":"1"),$n(e,"AID",n.U),Do(n,e),$n(e,"TYPE","xmlhttp"),n.o&&n.s&&_v(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=wf(ra(e)),t.s=null,t.U=!0,ov(t,n)}function oa(n){null!=n.v&&(sn.clearTimeout(n.v),n.v=null)}function Ou(n,e){var t=null;if(n.g==e){oa(n),il(n),n.g=null;var r=2}else{if(!zb(n.i,e))return;t=e.D,Zg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ii(r=ad(),new Nb(r,t,e,i)),Si(n)}else Nu(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function yv(n,e){return!(Gb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=df(Hr(n.Ha,n,e),vv(n,n.C)),n.C++,0)))}(n,e)||2==r&&rl(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:sl(n,5);break;case 4:sl(n,10);break;case 3:sl(n,6);break;default:sl(n,2)}}function vv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function sl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hr(n.jb,n);t||(t=new tl("//www.google.com/images/cleardot.gif"),sn.location&&"http"==sn.location.protocol||ud(t,"https"),wf(t)),function Zs(n,e){const t=new $g;if(sn.Image){const r=new Image;r.onload=ws(pv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ws(pv,t,r,"TestLoadImage: error",!1,e),r.onabort=ws(pv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ws(pv,t,r,"TestLoadImage: timeout",!1,e),sn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.j&&n.j.va(e),Ev(n),nl(n)}function Ev(n){n.G=0,n.I=-1,n.j&&((0!=Kb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,tf(n.l),n.l.length=0),n.j.ua())}function wv(n,e,t){let r=function sA(n){return n instanceof tl?ra(n):new tl(n,void 0)}(t);if(""!=r.i)e&&qg(r,e+"."+r.i),Kg(r,r.m);else{const i=sn.location;r=function oA(n,e,t,r){var i=new tl(null,void 0);return n&&ud(i,n),e&&qg(i,e),t&&Kg(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Pg(n.aa,function(i,a){$n(r,a,i)}),t=n.sa,(e=n.D)&&t&&$n(r,e,t),$n(r,"VER",n.ma),Do(n,r),r}function bv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new br(t&&n.Ba&&!n.qa?new Qg({ib:!0}):n.qa)).L=n.H,e}function Cv(){}function Tf(){if(Xa&&!(10<=Number(gb)))throw Error("Environmental error: no available transport.")}function Fi(n,e){xr.call(this),this.g=new Ys(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!nd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Pu(this)}function Iv(n){iv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tC(){ff.call(this),this.status=1}function Pu(n){this.g=n}(Tt=br.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pf.g(),this.C=function xb(n){return n.h||(n.h=n.i())}(this.u?this.u:pf),this.g.onreadystatechange=Hr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Jb(this,a)}n=t||"";const i=new To(this.headers);r&&Ef(r,function(a,u){i.set(u,a)}),r=function xg(n){e:{var e=fA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=sn.FormData&&n instanceof sn.FormData,!(0<=Gy(dA,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Su(this),0<this.B&&((this.K=function hA(n){return Xa&&function el(){return function ub(n){var e=ZO;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Og(String(qy)).split("."),t=Og("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=zy(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||zy(0==i[2].length,0==a[2].length)||zy(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.pa,this)):this.A=tv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Jb(this,a)}},Tt.pa=function(){void 0!==Hy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ii(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ii(this,"complete"),ii(this,"abort"),Tu(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tu(this,!0)),br.Z.M.call(this)},Tt.Fa=function(){this.s||(this.F||this.v||this.l?eC(this):this.cb())},Tt.cb=function(){eC(this)},Tt.ba=function(){try{return 2<sa(this)?this.g.status:-1}catch(n){return-1}},Tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Yb(e)}},Tt.Da=function(){return this.m},Tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=Ys.prototype).ma=8,Tt.G=1,Tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new mf(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=zD(a),qD(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Mu(this,i,e),$n(t=ra(this.F),"RID",n),$n(t,"CVER",22),this.D&&$n(t,"X-HTTP-Session-Id",this.D),Do(this,t),this.o&&a&&_v(t,this.o,a),qb(this.i,i),this.Ra&&$n(t,"TYPE","init"),this.ja?($n(t,"$req",e),$n(t,"SID","null"),i.$=!0,Gg(i,t,null)):Gg(i,t,e),this.G=2}}else 3==this.G&&(n?Ru(this,n):0==this.l.length||Wb(this.i)||Ru(this))},Tt.Ga=function(){if(this.u=null,xu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=df(Hr(this.bb,this),n)}},Tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pi(10),Gr(this),xu(this))},Tt.ab=function(){null!=this.v&&(this.v=null,Gr(this),rl(this),pi(19))},Tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),pi(2)):(this.h.info("Failed to ping google.com"),pi(1))},(Tt=Cv.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Oa=function(){},Tf.prototype.g=function(n,e){return new Fi(n,e)},Wr(Fi,xr),Fi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Xy(Hr(n.hb,n,e))),pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=wv(n,null,n.W),Si(n)},Fi.prototype.close=function(){Au(this.g)},Fi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,fd(this.g,e)}else this.v?((e={}).__data__=yb(n),fd(this.g,e)):fd(this.g,n)},Fi.prototype.M=function(){this.g.j=null,delete this.j,Au(this.g),delete this.g,Fi.Z.M.call(this)},Wr(Iv,iv),Wr(tC,ff),Wr(Pu,Cv),Pu.prototype.xa=function(){ii(this.g,"a")},Pu.prototype.wa=function(n){ii(this.g,new Iv(n))},Pu.prototype.va=function(n){ii(this.g,new tC(n))},Pu.prototype.ua=function(){ii(this.g,"b")},Tf.prototype.createWebChannel=Tf.prototype.g,Fi.prototype.send=Fi.prototype.u,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,jg.NO_ERROR=0,jg.TIMEOUT=8,jg.HTTP_ERROR=6,Hg.COMPLETE="complete",hf.EventType=Iu,Iu.OPEN="a",Iu.CLOSE="b",Iu.ERROR="c",Iu.MESSAGE="d",xr.prototype.listen=xr.prototype.N,br.prototype.listenOnce=br.prototype.O,br.prototype.getLastError=br.prototype.La,br.prototype.getLastErrorCode=br.prototype.Da,br.prototype.getStatus=br.prototype.ba,br.prototype.getResponseJson=br.prototype.Qa,br.prototype.getResponseText=br.prototype.ga,br.prototype.send=br.prototype.ea;var gA=Io.createWebChannelTransport=function(){return new Tf},nC=Io.getStatEventTarget=function(){return ad()},em=Io.ErrorCode=jg,mA=Io.EventType=Hg,_A=Io.Event=Cu,Tv=Io.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yA=Io.FetchXmlHttpFactory=Qg,Sf=Io.WebChannel=hf,vA=Io.XhrIo=br;const rC="@firebase/firestore";class gi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");let pd="9.6.11";const Ao=new Es.Yd("@firebase/firestore");function Df(){return Ao.logLevel}function et(n,...e){if(Ao.logLevel<=Es.in.DEBUG){const t=e.map(Sv);Ao.debug(`Firestore (${pd}): ${n}`,...t)}}function zr(n,...e){if(Ao.logLevel<=Es.in.ERROR){const t=e.map(Sv);Ao.error(`Firestore (${pd}): ${n}`,...t)}}function tm(n,...e){if(Ao.logLevel<=Es.in.WARN){const t=e.map(Sv);Ao.warn(`Firestore (${pd}): ${n}`,...t)}}function Sv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function At(n="Unexpected state"){const e=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function nn(n,e){n||At()}function ht(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Dv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class bA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iC{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},p=y=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Jr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn("string"==typeof r.accessToken),new Dv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nn(null===e||"string"==typeof e),new gi(e)}}class CA{constructor(e,t,r){this.type="FirstParty",this.user=gi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class IA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new CA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,et("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn("string"==typeof t.token),this.p=t.token,new sC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Li{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function SA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Li.A=-1;class Av{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=SA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function dn(n,e){return n<e?-1:n>e?1:0}function ol(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function DA(n){return n+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?dn(this.nanoseconds,e.nanoseconds):dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new _r(0,0))}static max(){return new Yt(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function AA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ku{constructor(e,t,r){void 0===t?t=0:t>e.length&&At(),void 0===r?r=e.length-t:r>e.length-t&&At(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ku.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ku?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends ku{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const RA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends ku{construct(e,t,r){return new Or(e,t,r)}static isValidIdentifier(e){return RA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new He(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new He(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new He(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(a(),i++)}if(a(),u)throw new He(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class aa{constructor(e){this.fields=e,e.sort(Or.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const MA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(n){if(nn(!!n),"string"==typeof n){let e=0;const t=MA.exec(n);if(nn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function al(n){return"string"==typeof n?Xr.fromBase64String(n):Xr.fromUint8Array(n)}function rm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function im(n){const e=n.mapValue.fields.__previous_value__;return rm(e)?im(e):e}function gd(n){const e=Ro(n.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}class oC{constructor(e,t,r,i,a,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Js{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Js("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Js&&e.projectId===this.projectId&&e.database===this.database}}function ll(n){return null==n}function Af(n){return 0===n&&1/n==-1/0}function Nv(n){return"number"==typeof n&&Number.isInteger(n)&&!Af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class dt{constructor(e){this.path=e}static fromPath(e){return new dt(In.fromString(e))}static fromName(e){return new dt(In.fromString(e).popFirst(5))}static empty(){return new dt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new In(e.slice()))}}const sm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xv={nullValue:"NULL_VALUE"};function Fu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rm(n)?4:aC(n)?9:10:At()}function Xs(n,e){if(n===e)return!0;const t=Fu(n);if(t!==Fu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gd(n).isEqual(gd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ro(r.timestampValue),u=Ro(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,al(n.bytesValue).isEqual(al(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=fr(r.doubleValue),u=fr(i.doubleValue);return a===u?Af(a)===Af(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return ol(n.arrayValue.values||[],e.arrayValue.values||[],Xs);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(AA(a)!==AA(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===u[d]||!Xs(a[d],u[d])))return!1;return!0}(n,e);default:return At()}var i}function md(n,e){return void 0!==(n.values||[]).find(t=>Xs(t,e))}function la(n,e){if(n===e)return 0;const t=Fu(n),r=Fu(e);if(t!==r)return dn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return dn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=fr(i.integerValue||i.doubleValue),d=fr(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return om(n.timestampValue,e.timestampValue);case 4:return om(gd(n),gd(e));case 5:return dn(n.stringValue,e.stringValue);case 6:return function(i,a){const u=al(i),d=al(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),d=a.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=dn(u[p],d[p]);if(0!==y)return y}return dn(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=dn(fr(i.latitude),fr(a.latitude));return 0!==u?u:dn(fr(i.longitude),fr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],d=a.values||[];for(let p=0;p<u.length&&p<d.length;++p){const y=la(u[p],d[p]);if(y)return y}return dn(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},d=Object.keys(u),p=a.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let C=0;C<d.length&&C<y.length;++C){const T=dn(d[C],y[C]);if(0!==T)return T;const D=la(u[d[C]],p[y[C]]);if(0!==D)return D}return dn(d.length,y.length)}(n.mapValue,e.mapValue);default:throw At()}}function om(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return dn(n,e);const t=Ro(n),r=Ro(e),i=dn(t.seconds,r.seconds);return 0!==i?i:dn(t.nanos,r.nanos)}function Lu(n){return am(n)}function am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ro(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?al(n.bytesValue).toBase64():"referenceValue"in n?dt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=am(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const d of i)u?u=!1:a+=",",a+=`${d}:${am(r.fields[d])}`;return a+"}"}(n.mapValue):At();var e}function ul(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lm(n){return!!n&&"integerValue"in n}function _d(n){return!!n&&"arrayValue"in n}function Ov(n){return!!n&&"nullValue"in n}function Pv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function um(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=um(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=um(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function NA(n){return"nullValue"in n?xv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ul(Js.empty(),dt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:At()}function lC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ul(Js.empty(),dt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?sm:At()}function uC(n,e){return void 0===n?e:void 0===e||la(n,e)>0?n:e}function Ur(n,e){return void 0===n?e:void 0===e||la(n,e)<0?n:e}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=um(t)}setAll(e){let t=Or.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=um(u):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qs(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new si(um(this.value))}}function cC(n){const e=[];return Qs(n.fields,(t,r)=>{const i=new Or([t]);if(Rf(r)){const a=cC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new aa(e)}class or{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new or(e,0,Yt.min(),Yt.min(),si.empty(),0)}static newFoundDocument(e,t,r){return new or(e,1,t,Yt.min(),r,0)}static newNoDocument(e,t){return new or(e,2,t,Yt.min(),si.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,Yt.min(),si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function kv(n){return n.fields.find(e=>2===e.kind)}function cl(n){return n.fields.filter(e=>2!==e.kind)}Mf.UNKNOWN_ID=-1;class Nf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mo{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mo(0,No.min())}}function dC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Yt.fromTimestamp(1e9===r?new _r(t+1,0):new _r(t,r));return new No(i,dt.empty(),e)}function xA(n){return new No(n.readTime,n.key,-1)}class No{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new No(Yt.min(),dt.empty(),-1)}static max(){return new No(Yt.max(),dt.empty(),-1)}}function OA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=dt.comparator(n.documentKey,e.documentKey),0!==t?t:dn(n.largestBatchId,e.largestBatchId))}class hC{constructor(e,t=null,r=[],i=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=d,this.P=null}}function PA(n,e=null,t=[],r=[],i=null,a=null,u=null){return new hC(n,e,t,r,i,a,u)}function dl(n){const e=ht(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Lu(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ll(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lu(r)).join(",")),e.P=t}return e.P}function Vi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!VA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Xs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uv(n.startAt,e.startAt)&&Uv(n.endAt,e.endAt)}function cm(n){return dt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function xf(n,e){return n.filters.filter(t=>t instanceof Xn&&t.field.isEqual(e))}function eo(n,e,t){let r,i=!0;for(const a of xf(n,e)){let u,d=!0;switch(a.op){case"<":case"<=":u=NA(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=xv}uC(r,u)===u&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];uC(r,u)===u&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function Cs(n,e,t){let r,i=!0;for(const a of xf(n,e)){let u,d=!0;switch(a.op){case">=":case">":u=lC(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=sm}Ur(r,u)===u&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Ur(r,u)===u&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Xn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new fC(e,t,r):"array-contains"===t?new FA(e,r):"in"===t?new LA(e,r):"not-in"===t?new Lv(e,r):"array-contains-any"===t?new Of(e,r):new Xn(e,t,r)}static V(e,t,r){return"in"===t?new pC(e,r):new kA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(la(t,this.value)):null!==t&&Fu(this.value)===Fu(t)&&this.v(la(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return At()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fC extends Xn{constructor(e,t,r){super(e,t,r),this.key=dt.fromName(r.referenceValue)}matches(e){const t=dt.comparator(e.key,this.key);return this.v(t)}}class pC extends Xn{constructor(e,t){super(e,"in",t),this.keys=gC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kA extends Xn{constructor(e,t){super(e,"not-in",t),this.keys=gC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>dt.fromName(r.referenceValue))}class FA extends Xn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _d(t)&&md(t.arrayValue,this.value)}}class LA extends Xn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&md(this.value.arrayValue,t)}}class Lv extends Xn{constructor(e,t){super(e,"not-in",t)}matches(e){if(md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!md(this.value.arrayValue,t)}}class Of extends Xn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_d(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>md(this.value.arrayValue,r))}}class hl{constructor(e,t){this.position=e,this.inclusive=t}}class Vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function VA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Vv(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?dt.comparator(dt.fromName(u.referenceValue),t.key):la(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Uv(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xs(n.position[t],e.position[t]))return!1;return!0}class Is{constructor(e,t=null,r=[],i=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.D=null,this.C=null}}function mC(n,e,t,r,i,a,u,d){return new Is(n,e,t,r,i,a,u,d)}function Uu(n){return new Is(n)}function Pf(n){return!ll(n.limit)&&"F"===n.limitType}function kf(n){return!ll(n.limit)&&"L"===n.limitType}function yd(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dm(n){for(const e of n.filters)if(e.S())return e.field;return null}function hm(n){return null!==n.collectionGroup}function Bu(n){const e=ht(n);if(null===e.D){e.D=[];const t=dm(e),r=yd(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Vu(t)),e.D.push(new Vu(Or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Vu(Or.keyField(),a))}}}return e.D}function Ji(n){const e=ht(n);if(!e.C)if("F"===e.limitType)e.C=PA(e.path,e.collectionGroup,Bu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Bu(e))t.push(new Vu(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new hl(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new hl(e.startAt.position,!e.startAt.inclusive):null;e.C=PA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Bv(n,e,t){return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vd(n,e){return Vi(Ji(n),Ji(e))&&n.limitType===e.limitType}function $v(n){return`${dl(Ji(n))}|lt:${n.limitType}`}function fm(n){return`Query(target=${function Fv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Lu(r.value)}`;var r}).join(", ")}]`),ll(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Lu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Lu(t)).join(",")),`Target(${e})`}(Ji(n))}; limitType=${n.limitType})`}function jv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):dt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const d=Vv(i,a,u);return i.inclusive?d<=0:d<0}(t.startAt,Bu(t),r)||t.endAt&&!function(i,a,u){const d=Vv(i,a,u);return i.inclusive?d>=0:d>0}(t.endAt,Bu(t),r)));var t,r}function _C(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yC(n){return(e,t)=>{let r=!1;for(const i of Bu(n)){const a=UA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function UA(n,e,t){const r=n.field.isKeyField()?dt.comparator(e.key,t.key):function(i,a,u){const d=a.data.field(i),p=u.data.field(i);return null!==d&&null!==p?la(d,p):At()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return At()}}function vC(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(e)?"-0":e}}function EC(n){return{integerValue:""+n}}function wC(n,e){return Nv(e)?EC(e):vC(n,e)}class pm{constructor(){this._=void 0}}function BA(n,e,t){return n instanceof Ed?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof $u?CC(n,e):n instanceof ju?IC(n,e):function(r,i){const a=bC(r,i),u=TC(a)+TC(r.k);return lm(a)&&lm(r.k)?EC(u):vC(r.M,u)}(n,e)}function $A(n,e,t){return n instanceof $u?CC(n,e):n instanceof ju?IC(n,e):t}function bC(n,e){return n instanceof wd?lm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ed extends pm{}class $u extends pm{constructor(e){super(),this.elements=e}}function CC(n,e){const t=Hv(e);for(const r of n.elements)t.some(i=>Xs(i,r))||t.push(r);return{arrayValue:{values:t}}}class ju extends pm{constructor(e){super(),this.elements=e}}function IC(n,e){let t=Hv(e);for(const r of n.elements)t=t.filter(i=>!Xs(i,r));return{arrayValue:{values:t}}}class wd extends pm{constructor(e,t){super(),this.M=e,this.k=t}}function TC(n){return fr(n.integerValue||n.doubleValue)}function Hv(n){return _d(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bd{constructor(e,t){this.field=e,this.transform=t}}class DC{constructor(e,t){this.version=e,this.transformResults=t}}class Pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ff(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Lf{}function AC(n,e,t){n instanceof Vf?function(r,i,a){const u=r.value.clone(),d=jA(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Hu?function(r,i,a){if(!Ff(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=jA(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(Wu(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gm(n,e,t){var i;n instanceof Vf?function(r,i,a){if(!Ff(r.precondition,i))return;const u=r.value.clone(),d=mm(r.fieldTransforms,a,i);u.setAll(d),i.convertToFoundDocument(fl(i),u).setHasLocalMutations()}(n,e,t):n instanceof Hu?function(r,i,a){if(!Ff(r.precondition,i))return;const u=mm(r.fieldTransforms,a,i),d=i.data;d.setAll(Wu(r)),d.setAll(u),i.convertToFoundDocument(fl(i),d).setHasLocalMutations()}(n,e,t):Ff(n.precondition,i=e)&&i.convertToNoDocument(Yt.min())}function RC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=bC(r.transform,i||null);null!=a&&(null==t&&(t=si.empty()),t.set(r.field,a))}return t||null}function Wv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ol(t,r,(i,a)=>function SC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $u&&r instanceof $u||t instanceof ju&&r instanceof ju?ol(t.elements,r.elements,Xs):t instanceof wd&&r instanceof wd?Xs(t.k,r.k):t instanceof Ed&&r instanceof Ed);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function fl(n){return n.isFoundDocument()?n.version:Yt.min()}class Vf extends Lf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Hu extends Lf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Wu(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jA(n,e,t){const r=new Map;nn(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,d=e.data.field(a.field);r.set(a.field,$A(u,d,t[i]))}return r}function mm(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,BA(a,u,e))}return r}class _m extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ym extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class MC{constructor(e){this.count=e}}var qr,ot;function NC(n){switch(n){default:return At();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function xC(n){if(void 0===n)return zr("GRPC error has no .code"),ve.UNKNOWN;switch(n){case qr.OK:return ve.OK;case qr.CANCELLED:return ve.CANCELLED;case qr.UNKNOWN:return ve.UNKNOWN;case qr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case qr.INTERNAL:return ve.INTERNAL;case qr.UNAVAILABLE:return ve.UNAVAILABLE;case qr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case qr.NOT_FOUND:return ve.NOT_FOUND;case qr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case qr.ABORTED:return ve.ABORTED;case qr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case qr.DATA_LOSS:return ve.DATA_LOSS;default:return At()}}(ot=qr||(qr={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";class pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Rv(this.inner)}size(){return this.innerSize}}class pr{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vm(this.root,e,this.comparator,!1)}getReverseIterator(){return new vm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vm(this.root,e,this.comparator,!0)}}class vm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Br.RED,this.left=null!=i?i:Br.EMPTY,this.right=null!=a?a:Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Br(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Br.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yr(this.data.getIterator())}getIteratorFrom(e){return new yr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class yr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Uf(n){return n.hasNext()?n.getNext():void 0}const OC=new pr(dt.comparator);function Ts(){return OC}const HA=new pr(dt.comparator);function Em(){return HA}function Cd(){return new pl(n=>n.toString(),(n,e)=>n.isEqual(e))}const PC=new pr(dt.comparator),kC=new qn(dt.comparator);function Un(...n){let e=kC;for(const t of n)e=e.add(t);return e}const WA=new qn(dn);function wm(){return WA}class ua{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Bf.createSynthesizedTargetChangeForCurrentChange(e,t)),new ua(Yt.min(),r,wm(),Ts(),Un())}}class Bf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Bf(Xr.EMPTY_BYTE_STRING,t,Un(),Un(),Un())}}class bm{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class FC{constructor(e,t){this.targetId=e,this.$=t}}class $f{constructor(e,t,r=Xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Gv{constructor(){this.B=0,this.L=VC(),this.U=Xr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Un(),t=Un(),r=Un();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:At()}}),new Bf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=VC()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class LC{constructor(e){this.nt=e,this.st=new Map,this.it=Ts(),this.rt=zv(),this.ot=new qn(dn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:At()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(cm(a))if(0===r){const u=new dt(a.path);this.ct(t,u,or.newNoDocument(u,Yt.min()))}else nn(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,u)=>{const d=this.wt(u);if(d){if(a.current&&cm(d.target)){const p=new dt(d.target.path);null!==this.it.get(p)||this.It(u,p)||this.ct(u,p,or.newNoDocument(p,e))}a.j&&(t.set(u,a.H()),a.J())}});let r=Un();this.rt.forEach((a,u)=>{let d=!0;u.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.it.forEach((a,u)=>u.setReadTime(e));const i=new ua(e,t,this.ot,this.it,r);return this.it=Ts(),this.rt=zv(),this.ot=new qn(dn),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Gv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new qn(dn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||et("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Gv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function zv(){return new pr(dt.comparator)}function VC(){return new pr(dt.comparator)}const jf={asc:"ASCENDING",desc:"DESCENDING"},Hf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class GA{constructor(e,t){this.databaseId=e,this.N=t}}function Wf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UC(n,e){return n.N?e.toBase64():e.toUint8Array()}function BC(n,e){return Wf(n,e.toTimestamp())}function Kr(n){return nn(!!n),Yt.fromTimestamp(function(e){const t=Ro(e);return new _r(t.seconds,t.nanos)}(n))}function Cm(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $C(n){const e=In.fromString(n);return nn(Zv(e)),e}function Id(n,e){return Cm(n.databaseId,e.path)}function xo(n,e){const t=$C(e);if(t.get(1)!==n.databaseId.projectId)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new dt(qA(t))}function qv(n,e){return Cm(n.databaseId,e)}function zA(n){const e=$C(n);return 4===e.length?In.emptyPath():qA(e)}function Im(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qA(n){return nn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function KA(n,e,t){return{name:Id(n,e),fields:t.value.mapValue.fields}}function Kv(n,e,t){const r=xo(n,e.name),i=Kr(e.updateTime),a=new si({mapValue:{fields:e.fields}}),u=or.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Gf(n,e){let t;if(e instanceof Vf)t={update:KA(n,e.key,e.value)};else if(e instanceof _m)t={delete:Id(n,e.key)};else if(e instanceof Hu)t={update:KA(n,e.key,e.data),updateMask:XA(e.fieldMask)};else{if(!(e instanceof ym))return At();t={verify:Id(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof Ed)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $u)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ju)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wd)return{fieldPath:a.field.canonicalString(),increment:u.k};throw At()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:BC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:At()),t;var i}function Sm(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Pr.updateTime(Kr(i.updateTime)):void 0!==i.exists?Pr.exists(i.exists):Pr.none():Pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let d=null;"setToServerValue"in u?(nn("REQUEST_TIME"===u.setToServerValue),d=new Ed):"appendMissingElements"in u?d=new $u(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new ju(u.removeAllFromArray.values||[]):"increment"in u?d=new wd(a,u.increment):At();const p=Or.fromServerFormat(u.fieldPath);return new bd(p,d)}(n,i)):[];var i;if(e.update){const i=xo(n,e.update.name),a=new si({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new aa((e.updateMask.fieldPaths||[]).map(y=>Or.fromServerFormat(y)));return new Hu(i,a,u,t,r)}return new Vf(i,a,t,r)}if(e.delete){const i=xo(n,e.delete);return new _m(i,t)}if(e.verify){const i=xo(n,e.verify);return new ym(i,t)}return At()}function jC(n,e){return{documents:[qv(n,e.path)]}}function HC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=qv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=qv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(T){if("=="===T.op){if(Pv(T.value))return{unaryFilter:{field:Td(T.field),op:"IS_NAN"}};if(Ov(T.value))return{unaryFilter:{field:Td(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(Pv(T.value))return{unaryFilter:{field:Td(T.field),op:"IS_NOT_NAN"}};if(Ov(T.value))return{unaryFilter:{field:Td(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Td(T.field),op:QA(T.op),value:T.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(p){if(0!==p.length)return p.map(y=>{return{field:Td((C=y).field),direction:zC(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(y=e.limit,n.N||ll(y)?y:{value:y});var y,d,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function WC(n){let e=zA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nn(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=GC(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new Vu(to((T=C).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(C){let T;return T="object"==typeof C?C.value:C,ll(T)?null:T}(t.limit));let p=null;var C;t.startAt&&(p=new hl((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new hl(C.values||[],!C.before)}(t.endAt)),mC(e,i,u,a,d,"F",p,y)}function GC(n){return n?void 0!==n.unaryFilter?[qC(n)]:void 0!==n.fieldFilter?[JA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>GC(e)).reduce((e,t)=>e.concat(t)):At():[]}function zC(n){return jf[n]}function QA(n){return Hf[n]}function Td(n){return{fieldPath:n.canonicalString()}}function to(n){return Or.fromServerFormat(n.fieldPath)}function JA(n){return Xn.create(to(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}}(n.fieldFilter.op),n.fieldFilter.value)}function qC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=to(n.unaryFilter.field);return Xn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=to(n.unaryFilter.field);return Xn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=to(n.unaryFilter.field);return Xn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=to(n.unaryFilter.field);return Xn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return At()}}function XA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZC(e)),e=KC(n.get(t),e);return ZC(e)}function KC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function ZC(n){return n+"\x01\x01"}function Ss(n){const e=n.length;if(nn(e>=2),2===e)return nn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&At(),n.charAt(u+1)){case"\x01":const d=n.substring(a,u);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:At()}a=u+2}return new In(r)}const YC=["userId","batchId"];function qf(n,e){return[n,Di(e)]}function Yv(n,e,t){return[n,Di(e),t]}const eR={},tR=["prefixPath","collectionGroup","readTime","documentId"],nR=["prefixPath","collectionGroup","documentId"],Qv=["collectionGroup","readTime","prefixPath","documentId"],rR=["canonicalId","targetId"],QC=["targetId","path"],iR=["path","targetId"],sR=["collectionId","parent"],oR=["indexId","uid"],aR=["uid","sequenceNumber"],lR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uR=["indexId","uid","orderedDocumentKey"],cR=["userId","collectionPath","documentId"],dR=["userId","collectionPath","largestBatchId"],JC=["userId","collectionGroup","largestBatchId"],Jv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hR=[...Jv,"documentOverlays"],XC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eI=[...XC,"indexConfiguration","indexState","indexEntries"],tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(t){return be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,r)=>{t(e)})}static reject(e){return new be((t,r)=>{r(e)})}static waitFor(e){return new be((t,r)=>{let i=0,a=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++a,u&&a===i&&t()},p=>r(p))}),u=!0,a===i&&t()})}static or(e){let t=be.resolve(!1);for(const r of e)t=t.next(i=>i?be.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Sd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Jr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Gu(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Dm(r.target.error);this.At.reject(new Gu(e,i))}}static open(e,t,r,i){try{return new Sd(t,e.transaction(i,r))}catch(a){throw new Gu(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fR(t)}}class Xi{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Xi.Vt((0,Z.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return et("SimpleDb","Removing database:",e),ca(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Z.hl)())return!1;if(Xi.St())return!0;const e=(0,Z.z$)(),t=Xi.Vt(e),r=0<t&&t<10,i=Xi.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(et("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new Gu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new He(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new He(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Gu(e,d))},a.onupgradeneeded=u=>{et("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.bt.kt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{et("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.Nt(e);const p=Sd.open(a.db,e,u?"readonly":"readwrite",r),y=i(p).next(C=>(p.Pt(),C)).catch(C=>(p.abort(C),be.reject(C))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&d<3;if(et("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),a.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ca(this.Ft.delete())}}class Gu extends He{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zu(n){return"IndexedDbTransactionError"===n.name}class fR{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(et("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(et("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ca(r)}add(e){return et("SimpleDb","ADD",this.store.name,e,e),ca(this.store.add(e))}get(e){return ca(this.store.get(e)).next(t=>(void 0===t&&(t=null),et("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return et("SimpleDb","DELETE",this.store.name,e),ca(this.store.delete(e))}count(){return et("SimpleDb","COUNT",this.store.name),ca(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(u,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new be((a,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new be((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,u,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new be((r,i)=>{t.onerror=a=>{const u=Dm(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new be((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const p=new rI(d),y=t(d.primaryKey,d.value,p);if(y instanceof be){const C=y.catch(T=>(p.done(),be.reject(T)));r.push(C)}p.isDone?i():null===p.Lt?d.continue():d.continue(p.Lt)}}).next(()=>be.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ca(n){return new be((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Dm(r.target.error);t(i)}})}let iI=!1;function Dm(n){const e=Xi.Vt((0,Z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iI||(iI=!0,setTimeout(()=>{throw r},0)),r}}return n}class sI extends nI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=ht(n);return Xi.xt(t.Ht,e)}class Xv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&AC(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&gm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&gm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Un())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(t,r)=>Wv(t,r))&&ol(this.baseMutations,e.baseMutations,(t,r)=>Wv(t,r))}}class Am{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nn(e.mutations.length===r.length);let i=PC;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Am(e,t,r,i)}}class oI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gl{constructor(e,t,r,i,a=Yt.min(),u=Yt.min(),d=Xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Kf{constructor(e){this.Jt=e}}function qu(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ml(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Id(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Wf(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ku(e.version)};else{if(!e.isUnknownDocument())return At();r.unknownDocument={path:t.path.toArray(),version:Ku(e.version)}}var i,a;return r}function ml(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ku(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dd(n){const e=new _r(n.seconds,n.nanoseconds);return Yt.fromTimestamp(e)}function Zu(n,e){const t=(e.baseMutations||[]).map(a=>Sm(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Sm(n.Jt,a)),i=_r.fromMillis(e.localWriteTimeMs);return new Xv(e.batchId,i,t,r)}function Zf(n){const e=Dd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Dd(n.lastLimboFreeSnapshotVersion):Yt.min();let r;var i;return void 0!==n.query.documents?(nn(1===(i=n.query).documents.length),r=Ji(Uu(zA(i.documents[0])))):r=Ji(WC(n.query)),new gl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Xr.fromBase64String(n.resumeToken))}function aI(n,e){const t=Ku(e.snapshotVersion),r=Ku(e.lastLimboFreeSnapshotVersion);let i;i=cm(e.target)?jC(n.Jt,e.target):HC(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eE(n){const e=WC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Bv(e,e.limit,"L"):e}function tE(n,e){return new oI(e.largestBatchId,Sm(n.Jt,e.overlayMutation))}function nE(n,e){const t=e.path.lastSegment();return[n,Di(e.path.popLast()),t]}class lI{getBundleMetadata(e,t){return Rm(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Dd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Rm(e).put({bundleId:(r=t).id,createTime:Ku(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Yf(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:eE(i.bundledQuery),readTime:Dd(i.readTime)};var i})}saveNamedQuery(e,t){return Yf(e).put({name:(r=t).name,readTime:Ku(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Rm(n){return Zr(n,"bundles")}function Yf(n){return Zr(n,"namedQueries")}class Yu{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Yu(e,t.uid||"")}getOverlay(e,t){return Qf(e).get(nE(this.userId,t)).next(r=>r?tE(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const d=new oI(t,u);i.push(this.Xt(e,d))}),be.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Di(u.getCollectionPath())));const a=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Qf(e).Qt("collectionPathOverlayIndex",d))}),be.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Cd(),a=Di(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qf(e).qt("collectionPathOverlayIndex",u).next(d=>{for(const p of d){const y=tE(this.M,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Cd();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qf(e).Wt({index:"collectionGroupOverlayIndex",range:d},(p,y,C)=>{const T=tE(this.M,y);a.size()<i||T.largestBatchId===u?(a.set(T.getKey(),T),u=T.largestBatchId):C.done()}).next(()=>a)}Xt(e,t){return Qf(e).put(function(r,i,a){const[u,d,p]=nE(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Gf(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Qf(n){return Zr(n,"documentOverlays")}class _l{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Af(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(al(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?aC(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):At()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),dt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function uI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function cI(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=uI(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}_l.fe=new _l;class gR{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=cI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=cI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rE{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class mR{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Mm{constructor(){this.De=new gR,this.Ce=new rE(this.De),this.xe=new mR(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class yl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new yl(this.indexId,this.documentKey,this.arrayValue,r)}}function Qu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ju(n.arrayValue,e.arrayValue),0!==t?t:(t=Ju(n.directionalValue,e.directionalValue),0!==t?t:dt.comparator(n.documentKey,e.documentKey)))}function Ju(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=kv(e);if(void 0!==t&&!this.Be(t))return!1;const r=cl(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ad{constructor(){this.qe=new hI}addToCollectionParentIndex(e,t){return this.qe.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getFieldIndex(e,t){return be.resolve(null)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}updateCollectionGroup(e,t,r){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class hI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qn(In.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(In.comparator)).toArray()}}const Xu=new Uint8Array(0);class _R{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new hI,this.Ge=new pl(r=>dl(r),(r,i)=>Vi(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Di(i)};return yR(e).put(a)}return be.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[DA(t),""],!1,!0);return yR(e).qt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Ss(u.parent))}return r})}addFieldIndex(e,t){const r=iE(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=iE(e),i=Jf(e),a=Rd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rd(e);let i=!0;const a=new Map;return be.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(d=>{i&&(i=!!d),a.set(u,d)})).next(()=>{if(i){let u=Un();const d=[];return be.forEach(a,(p,y)=>{var C;et("IndexedDbIndexManager",`Using index ${C=p,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(We=>`${We.fieldPath}:${We.kind}`).join(",")}`} to execute ${dl(t)}`);const T=function(We,tt){const xt=kv(tt);if(void 0===xt)return null;for(const Lt of xf(We,xt.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(y,p),D=function(We,tt){const xt=new Map;for(const Lt of cl(tt))for(const on of xf(We,Lt.fieldPath))switch(on.op){case"==":case"in":xt.set(Lt.fieldPath.canonicalString(),on.value);break;case"not-in":case"!=":return xt.set(Lt.fieldPath.canonicalString(),on.value),Array.from(xt.values())}return null}(y,p),x=function(We,tt){const xt=[];let Lt=!0;for(const on of cl(tt)){const Zn=0===on.kind?eo(We,on.fieldPath,We.startAt):Cs(We,on.fieldPath,We.startAt);if(!Zn.value)return null;xt.push(Zn.value),Lt&&(Lt=Zn.inclusive)}return new hl(xt,Lt)}(y,p),k=function(We,tt){const xt=[];let Lt=!0;for(const on of cl(tt)){const Zn=0===on.kind?Cs(We,on.fieldPath,We.endAt):eo(We,on.fieldPath,We.endAt);if(!Zn.value)return null;xt.push(Zn.value),Lt&&(Lt=Zn.inclusive)}return new hl(xt,Lt)}(y,p),q=this.je(p,y,x),ie=this.je(p,y,k),Qe=this.We(p,y,D),Ze=this.ze(p.indexId,T,q,!!x&&x.inclusive,ie,!!k&&k.inclusive,Qe);return be.forEach(Ze,We=>r.Gt(We,t.limit).next(tt=>{tt.forEach(xt=>{const Lt=dt.fromSegments(xt.documentKey);u.has(Lt)||(u=u.add(Lt),d.push(Lt))})}))}).next(()=>d)}return be.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,a,u,d){const p=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),y=p/(null!=t?t.length:1),C=[];for(let T=0;T<p;++T){const D=t?this.He(t[T/y]):Xu,x=r?this.Je(e,D,r[T%y],i):this.Ye(e),k=a?this.Xe(e,D,a[T%y],u):this.Ye(e+1);C.push(...this.createRange(x,k,d.map(q=>this.Je(e,D,q,!0))))}return C}Je(e,t,r,i){const a=new yl(e,dt.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new yl(e,dt.empty(),t,r);return i?a.ke():a}Ye(e){return new yl(e,dt.empty(),Xu,Xu)}getFieldIndex(e,t){const r=new dI(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const u=a.filter(d=>r.$e(d));return u.sort((d,p)=>p.fields.length-d.fields.length),u.length>0?u[0]:null})}Ze(e,t){const r=new Mm;for(const i of cl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Ne(i.kind);_l.fe.Zt(a,u)}return r.Se()}He(e){const t=new Mm;return _l.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Mm;return _l.fe.Zt(ul(this.databaseId,t),r.Ne(function(i){const a=cl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Mm);let a=0;for(const u of cl(e)){const d=r[a++];for(const p of i)if(this.en(t,u.fieldPath)&&_d(d))i=this.nn(i,u,d);else{const y=p.Ne(u.kind);_l.fe.Zt(d,y)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const d of i){const p=new Mm;p.seed(d.Se()),_l.fe.Zt(u,p.Ne(t.kind)),a.push(p)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Xn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iE(e),i=Jf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const u=[];return be.forEach(a,d=>i.get([d.indexId,this.uid]).next(p=>{u.push(function(y,C){const T=C?new Mo(C.sequenceNumber,new No(Dd(C.readTime),new dt(Ss(C.documentKey)),C.largestBatchId)):Mo.empty(),D=y.fields.map(([x,k])=>new Nf(Or.fromServerFormat(x),k));return new Mf(y.indexId,y.collectionGroup,D,T)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:dn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iE(e),a=Jf(e);return this.rn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>be.forEach(d,p=>{return a.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Ku((D=r).readTime),documentKey:Di(D.documentKey.path),largestBatchId:D.largestBatchId});var D})))}updateIndexEntries(e,t){const r=new Map;return be.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?be.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),be.forEach(d,p=>this.on(e,i,p).next(y=>{const C=this.un(a,p);return y.isEqual(C)?be.resolve():this.an(e,a,p,y,C)}))))})}cn(e,t,r,i){return Rd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Rd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Rd(e);let a=new qn(Qu);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(u,d)=>{a=a.add(new yl(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}un(e,t){let r=new qn(Qu);const i=this.Ze(t,e);if(null==i)return r;const a=kv(t);if(null!=a){const u=e.data.field(a.fieldPath);if(_d(u))for(const d of u.arrayValue.values||[])r=r.add(new yl(t.indexId,e.key,this.He(d),i))}else r=r.add(new yl(t.indexId,e.key,Xu,i));return r}an(e,t,r,i,a){et("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,C,T){const D=d.getIterator(),x=p.getIterator();let k=Uf(D),q=Uf(x);for(;k||q;){let ie=!1,Qe=!1;if(k&&q){const Ze=y(k,q);Ze<0?Qe=!0:Ze>0&&(ie=!0)}else null!=k?Qe=!0:ie=!0;ie?(C(q),q=Uf(x)):Qe?(T(k),k=Uf(D)):(k=Uf(D),q=Uf(x))}}(i,a,Qu,d=>{u.push(this.cn(e,t,r,d))},d=>{u.push(this.hn(e,t,r,d))}),be.waitFor(u)}rn(e){let t=1;return Jf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Qu(u,d)).filter((u,d,p)=>!d||0!==Qu(u,p[d-1]));const i=[];i.push(e);for(const u of r){const d=Qu(u,e),p=Qu(u,t);if(0===d)i[0]=e.ke();else if(d>0&&p<0)i.push(u),i.push(u.ke());else if(p>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Xu,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Xu,[]]));return a}}function yR(n){return Zr(n,"collectionParents")}function Rd(n){return Zr(n,"indexEntries")}function iE(n){return Zr(n,"indexConfiguration")}function Jf(n){return Zr(n,"indexState")}const Nm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ui{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ui(e,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fI(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=r.Wt({range:u},(C,T,D)=>(d++,D.delete()));a.push(p.next(()=>{nn(1===d)}));const y=[];for(const C of t.mutations){const T=Yv(e,C.key.path,t.batchId);a.push(i.delete(T)),y.push(C.key)}return be.waitFor(a).next(()=>y)}function xm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw At();e=n.noDocument}return JSON.stringify(e).length}Ui.DEFAULT_COLLECTION_PERCENTILE=10,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ui.DEFAULT=new Ui(41943040,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ui.DISABLED=new Ui(-1,0,0);class sE{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){nn(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new sE(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).Wt({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Md(e),u=vl(e);return u.add({}).next(d=>{nn("number"==typeof d);const p=new Xv(d,t,r,i),y=function(D,x,k){const q=k.baseMutations.map(Qe=>Gf(D.Jt,Qe)),ie=k.mutations.map(Qe=>Gf(D.Jt,Qe));return{userId:x,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:q,mutations:ie}}(this.M,this.userId,p),C=[];let T=new qn((D,x)=>dn(D.canonicalString(),x.canonicalString()));for(const D of i){const x=Yv(this.userId,D.key.path,d);T=T.add(D.key.path.popLast()),C.push(u.put(y)),C.push(a.put(x,eR))}return T.forEach(D=>{C.push(this.indexManager.addToCollectionParentIndex(e,D))}),e.addOnCommittedListener(()=>{this.ln[d]=p.keys()}),be.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return vl(e).get(t).next(r=>r?(nn(r.userId===this.userId),Zu(this.M,r)):null)}fn(e,t){return this.ln[t]?be.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return vl(e).Wt({index:"userMutationsIndex",range:i},(u,d,p)=>{d.userId===this.userId&&(nn(d.batchId>=r),a=Zu(this.M,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Zu(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Md(e).Wt({range:i},(u,d,p)=>{const[y,C,T]=u,D=Ss(C);if(y===this.userId&&t.path.isEqual(D))return vl(e).get(T).next(x=>{if(!x)throw At();nn(x.userId===this.userId),a.push(Zu(this.M,x))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(dn);const i=[];return t.forEach(a=>{const u=qf(this.userId,a.path),d=IDBKeyRange.lowerBound(u),p=Md(e).Wt({range:d},(y,C,T)=>{const[D,x,k]=y,q=Ss(x);D===this.userId&&a.path.isEqual(q)?r=r.add(k):T.done()});i.push(p)}),be.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=qf(this.userId,r),u=IDBKeyRange.lowerBound(a);let d=new qn(dn);return Md(e).Wt({range:u},(p,y,C)=>{const[T,D,x]=p,k=Ss(D);T===this.userId&&r.isPrefixOf(k)?k.length===i&&(d=d.add(x)):C.done()}).next(()=>this.dn(e,d))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(vl(e).get(a).next(u=>{if(null===u)throw At();nn(u.userId===this.userId),r.push(Zu(this.M,u))}))}),be.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),be.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Md(e).Wt({range:r},(a,u,d)=>{if(a[0]===this.userId){const p=Ss(a[1]);i.push(p)}else d.done()}).next(()=>{nn(0===i.length)})})}containsKey(e,t){return pI(e,this.userId,t)}wn(e){return gI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pI(n,e,t){const r=qf(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Md(n).Wt({range:a,jt:!0},(d,p,y)=>{const[C,T,D]=d;C===e&&T===i&&(u=!0),y.done()}).next(()=>u)}function vl(n){return Zr(n,"mutations")}function Md(n){return Zr(n,"documentMutations")}function gI(n){return Zr(n,"mutationQueues")}class ec{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ec(0)}static yn(){return new ec(-1)}}class vR{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ec(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Yt.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oo(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(nn(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Oo(e).Wt((u,d)=>{const p=Zf(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,a.push(this.removeTargetData(e,p)))}).next(()=>be.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Oo(e).Wt((r,i)=>{const a=Zf(i);t(a)})}pn(e){return oE(e).get("targetGlobalKey").next(t=>(nn(null!==t),t))}In(e,t){return oE(e).put("targetGlobalKey",t)}Tn(e,t){return Oo(e).put(aI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=dl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Oo(e).Wt({range:i,index:"queryTargetsIndex"},(u,d,p)=>{const y=Zf(d);Vi(t,y.target)&&(a=y,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=da(e);return t.forEach(u=>{const d=Di(u.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),be.waitFor(i)}removeMatchingKeys(e,t,r){const i=da(e);return be.forEach(t,a=>{const u=Di(a.path);return be.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=da(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=da(e);let a=Un();return i.Wt({range:r,jt:!0},(u,d,p)=>{const y=Ss(u[1]),C=new dt(y);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Di(t.path),i=IDBKeyRange.bound([r],[DA(r)],!1,!0);let a=0;return da(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,d],p,y)=>{0!==u&&(a++,y.done())}).next(()=>a>0)}Et(e,t){return Oo(e).get(t).next(r=>r?Zf(r):null)}}function Oo(n){return Zr(n,"targets")}function oE(n){return Zr(n,"targetGlobal")}function da(n){return Zr(n,"targetDocuments")}function El(n){return Om.apply(this,arguments)}function Om(){return Om=(0,Ce.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==tI)throw n;et("LocalStore","Unexpectedly lost primary lease")}),Om.apply(this,arguments)}function aE([n,e],[t,r]){const i=dn(n,t);return 0===i?dn(e,r):i}class mI{constructor(e){this.An=e,this.buffer=new qn(aE),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();aE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ER{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;et("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){zu(i)?et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield El(i)}yield t.Sn(e)}))}}class _I{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return be.resolve(Li.A);const r=new mI(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Nm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nm):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,u,d,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),Df()<=Es.in.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${a} targets in `+(p-d)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class yI{constructor(e,t){this.db=e,this.garbageCollector=new _I(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Pm(e,r)}removeReference(e,t,r){return Pm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Pm(e,t)}On(e,t){return function(r,i){let a=!1;return gI(r).zt(u=>pI(r,u,i).next(d=>(d&&(a=!0),be.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(u,d)=>{if(d<=t){const p=this.On(e,u).next(y=>{if(!y)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Yt.min()),da(e).delete([0,Di(u.path)])))});i.push(p)}}).next(()=>be.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Pm(e,t)}Mn(e,t){const r=da(e);let i,a=Li.A;return r.Wt({index:"documentTargetsIndex"},([u,d],{path:p,sequenceNumber:y})=>{0===u?(a!==Li.A&&t(new dt(Ss(i)),a),a=y,i=p):a=Li.A}).next(()=>{a!==Li.A&&t(new dt(Ss(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pm(n,e){return da(n).put((r=n.currentSequenceNumber,{targetId:0,path:Di(e.path),sequenceNumber:r}));var r}class vI{constructor(){this.changes=new pl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?be.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wR{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ha(e).put(r)}removeEntry(e,t,r){return ha(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],ml(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=or.newInvalidDocument(t);return ha(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bi(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:or.newInvalidDocument(t)};return ha(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Bi(t))},(i,a)=>{r={document:this.$n(t,a),size:xm(a)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.Ln(e,t,(i,a)=>{const u=this.$n(i,a);r=r.insert(i,u)}).next(()=>r)}Un(e,t){let r=Ts(),i=new pr(dt.comparator);return this.Ln(e,t,(a,u)=>{const d=this.$n(a,u);r=r.insert(a,d),i=i.insert(a,xm(u))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return be.resolve();let i=new qn(km);t.forEach(p=>i=i.add(p));const a=IDBKeyRange.bound(Bi(i.first()),Bi(i.last())),u=i.getIterator();let d=u.getNext();return ha(e).Wt({index:"documentKeyIndex",range:a},(p,y,C)=>{const T=dt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&km(d,T)<0;)r(d,null),d=u.getNext();d&&d.isEqual(T)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?C.Ut(Bi(d)):C.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),ml(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ha(e).qt(IDBKeyRange.bound(i,a,!0)).next(u=>{let d=Ts();for(const p of u){const y=this.$n(dt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=Ts();const u=wI(t,r),d=wI(t,No.max());return ha(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(p,y,C)=>{const T=this.$n(dt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new Xf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return EI(e).get("remoteDocumentGlobalKey").next(t=>(nn(!!t),t))}Fn(e,t){return EI(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function pR(n,e){let t;if(e.document)t=Kv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=dt.fromSegments(e.noDocument.path),i=Dd(e.noDocument.readTime);t=or.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return At();{const r=dt.fromSegments(e.unknownDocument.path),i=Dd(e.unknownDocument.version);t=or.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new _r(r[0],r[1]);return Yt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Yt.min()))return r}return or.newInvalidDocument(e)}}class Xf extends vI{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new pl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new qn((a,u)=>dn(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const d=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,d.readTime)),u.isValidDocument()){const p=qu(this.Kn.M,u);i=i.add(a.path.popLast()),r+=xm(p)-d.size,t.push(this.Kn.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=qu(this.Kn.M,u.convertToNoDocument(Yt.min()));t.push(this.Kn.addEntry(e,a,p))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),be.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,u)=>{this.Gn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function EI(n){return Zr(n,"remoteDocumentGlobal")}function ha(n){return Zr(n,"remoteDocumentsV14")}function Bi(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wI(n,e){const t=e.documentKey.path.toArray();return[n,ml(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function km(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=dn(t[a],r[a]),i)return i;return i=dn(t.length,r.length),i||(i=dn(t[t.length-2],r[r.length-2]),i||dn(t[t.length-1],r[r.length-1]))}class ep{constructor(e){this.M=e}kt(e,t,r,i){const a=new Sd("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YC,{unique:!0}),d.createObjectStore("documentMutations"),bI(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=be.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),bI(e)),u=u.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,p){return p.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YC,{unique:!0});const C=p.store("mutations"),T=y.map(D=>C.put(D));return be.waitFor(T)})}(e,a))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Qn(a))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(u=u.next(()=>this.Wn(a))),r<8&&i>=8&&(u=u.next(()=>this.zn(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Hn(a))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:cR});p.createIndex("collectionPathOverlayIndex",dR,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",JC,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:tR});p.createIndex("documentKeyIndex",nR),p.createIndex("collectionGroupIndex",Qv)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:oR}).createIndex("sequenceNumberIndex",aR,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:lR}).createIndex("documentKeyIndex",uR,{unique:!1})}(e)})),u}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=xm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>be.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(d=>be.forEach(d,p=>{nn(p.userId===a.userId);const y=Zu(this.M,p);return fI(e,a.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((u,d)=>{const p=new In(u),y=[0,Di(p)];a.push(t.get(y).next(C=>C?be.resolve():t.put({targetId:0,path:Di(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>be.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:sR});const r=t.store("collectionParents"),i=new hI,a=u=>{if(i.add(u)){const d=u.lastSegment(),p=u.popLast();return r.put({collectionId:d,parent:Di(p)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,d)=>{const p=new In(u);return a(p.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,d,p],y)=>{const C=Ss(d);return a(C.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Zf(i),u=aI(this.M,a);return t.put(u)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,u)=>{const d=t.store("remoteDocumentsV14"),p=(y=u,y.document?new dt(In.fromString(y.document.name).popFirst(5)):y.noDocument?dt.fromSegments(y.noDocument.path):y.unknownDocument?dt.fromSegments(y.unknownDocument.path):At()).path.toArray();var y;const C={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(C))}).next(()=>be.waitFor(i))}}function bI(n){n.createObjectStore("targetDocuments",{keyPath:QC}).createIndex("documentTargetsIndex",iR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rR,{unique:!0}),n.createObjectStore("targetGlobal")}const lE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uE{constructor(e,t,r,i,a,u,d,p,y,C,T=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=u,this.document=d,this.Xn=y,this.Zn=C,this.ts=T,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=D=>Promise.resolve(),!uE.vt())throw new He(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yI(this,i),this.hs=t+"main",this.M=new Kf(p),this.ls=new Xi(this.hs,this.ts,new ep(this.M)),this.fs=new vR(this.referenceDelegate,this.M),this.ds=new wR(this.M),this._s=new lI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(ve.FAILED_PRECONDITION,lE);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Li(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(zu(e))return et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return wl(e).get("owner").next(t=>be.resolve(this.bs(t)))}Vs(e){return tc(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Zr(r,"clientMetadata");return i.qt().next(a=>{const u=e.Ds(a,18e5),d=a.filter(p=>-1===u.indexOf(p));return be.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?be.resolve(!0):wl(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new He(ve.FAILED_PRECONDITION,lE);return!1}}return!(!this.networkEnabled||!this.inForeground)||tc(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&et("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new sI(t,Li.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>tc(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return sE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new _R(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Yu.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){et("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(u=this.ts)?eI:13===u?XC:12===u?hR:11===u?Jv:void At();var u;let d;return this.ls.runTransaction(e,i,a,p=>(d=new sI(p,this.es?this.es.next():Li.A),"readwrite-primary"===t?this.Es(d).next(y=>!!y||this.As(d)).next(y=>{if(!y)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new He(ve.FAILED_PRECONDITION,tI);return r(d)}).next(y=>this.Ps(d).next(()=>y)):this.$s(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}$s(e){return wl(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new He(ve.FAILED_PRECONDITION,lE)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wl(e).put("owner",t)}static vt(){return Xi.vt()}Rs(e){const t=wl(e);return t.get("owner").next(r=>this.bs(r)?(et("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):be.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Z.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return et("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wl(n){return Zr(n,"owner")}function tc(n){return Zr(n,"clientMetadata")}function cE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class bR{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return dt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):hm(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new dt(t)).next(r=>{let i=Em();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=Em();return this.indexManager.getCollectionParents(e,i).next(u=>be.forEach(u,d=>{const p=(y=t,C=d.child(i),new Is(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.zs(e,p,r).next(y=>{y.forEach((C,T)=>{a=a.insert(C,T)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const u of a)for(const d of u.mutations){const p=d.key;let y=i.get(p);null==y&&(y=or.newInvalidDocument(p),i=i.insert(p,y)),gm(d,y,u.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((a,u)=>{jv(t,u)||(i=i.remove(a))}),i))}}class Fm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Un(),i=Un();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Fm(e,t.fromCache,r,i)}}class dE{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Yt.min())?this.ti(e,t):this.Zs.Ks(e,i).next(a=>{const u=this.ei(t,a);return(Pf(t)||kf(t))&&this.ni(t.limitType,u,i,r)?this.ti(e,t):(Df()<=Es.in.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fm(t)),this.Zs.Qs(e,t,dC(r,-1)).next(d=>(u.forEach(p=>{d=d.insert(p.key,p)}),d)))});var a}ei(e,t){let r=new qn(yC(e));return t.forEach((i,a)=>{jv(e,a)&&(r=r.add(a))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(e,t){return Df()<=Es.in.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",fm(t)),this.Zs.Qs(e,t,No.min())}}class hE{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new pr(dn),this.ri=new pl(a=>dl(a),Vi),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new bR(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function fE(n,e,t,r){return new hE(n,e,t,r)}function CI(n,e){return pE.apply(this,arguments)}function pE(){return pE=(0,Ce.Z)(function*(n,e){const t=ht(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.ai(e),t.Bs.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let p=Un();for(const y of i){u.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of a){d.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.ci.Ks(r,p).next(y=>({hi:y,removedBatchIds:u,addedBatchIds:d}))})})}),pE.apply(this,arguments)}function XO(n,e){const t=ht(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ui.newChangeBuffer({trackRemovals:!0});return function(u,d,p,y){const C=p.batch,T=C.keys();let D=be.resolve();return T.forEach(x=>{D=D.next(()=>y.getEntry(d,x)).next(k=>{const q=p.docVersions.get(x);nn(null!==q),k.version.compareTo(q)<0&&(C.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),y.addEntry(k)))})}),D.next(()=>u.Bs.removeMutationBatch(d,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function Lm(n){const e=ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function gE(n,e){const t=ht(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const d=[];e.targetChanges.forEach((y,C)=>{const T=i.get(C);if(!T)return;d.push(t.fs.removeMatchingKeys(a,y.removedDocuments,C).next(()=>t.fs.addMatchingKeys(a,y.addedDocuments,C)));let D=T.withSequenceNumber(a.currentSequenceNumber);var x,k,q;e.targetMismatches.has(C)?D=D.withResumeToken(Xr.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,r)),i=i.insert(C,D),k=D,q=y,(0===(x=T).resumeToken.approximateByteSize()||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(a,D))});let p=Ts();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),d.push(mE(a,u,e.documentUpdates).next(y=>{p=y})),!r.isEqual(Yt.min())){const y=t.fs.getLastRemoteSnapshotVersion(a).next(C=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(y)}return be.waitFor(d).next(()=>u.apply(a)).next(()=>t.ci.Gs(a,p)).next(()=>p)}).then(a=>(t.ii=i,a))}function mE(n,e,t){let r=Un();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Ts();return t.forEach((u,d)=>{const p=i.get(u);d.isNoDocument()&&d.version.isEqual(Yt.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||0===d.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):et("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)}),a})}function _E(n,e){const t=ht(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function bl(n,e){const t=ht(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,be.resolve(i)):t.fs.allocateTargetId(r).next(u=>(i=new gl(e,u,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Nd(n,e,t){return yE.apply(this,arguments)}function yE(){return yE=(0,Ce.Z)(function*(n,e,t){const r=ht(n),i=r.ii.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!zu(u))throw u;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),yE.apply(this,arguments)}function Vm(n,e,t){const r=ht(n);let i=Yt.min(),a=Un();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,p,y){const C=ht(d),T=C.ri.get(y);return void 0!==T?be.resolve(C.ii.get(T)):C.fs.getTargetData(p,y)}(r,u,Ji(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{a=p})}).next(()=>r.si.Qs(u,e,t?i:Yt.min(),t?a:Un())).next(d=>(Um(r,_C(e),d),{documents:d,li:a})))}function II(n,e){const t=ht(n),r=ht(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function vE(n,e){const t=ht(n),r=t.oi.get(e)||Yt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,dC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Um(t,e,i),i))}function Um(n,e,t){let r=Yt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(e,r)}function EE(){return EE=(0,Ce.Z)(function*(n,e,t,r){const i=ht(n);let a=Un(),u=Ts();for(const y of t){const C=e.fi(y.metadata.name);y.document&&(a=a.add(C));const T=e.di(y);T.setReadTime(e._i(y.metadata.readTime)),u=u.insert(C,T)}const d=i.ui.newChangeBuffer({trackRemovals:!0}),p=yield bl(i,(y=r,Ji(Uu(In.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>mE(y,d,u).next(C=>(d.apply(y),C)).next(C=>i.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.fs.addMatchingKeys(y,a,p.targetId)).next(()=>i.ci.Gs(y,C)).next(()=>C)))}),EE.apply(this,arguments)}function SI(n,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,Ce.Z)(function*(n,e,t=Un()){const r=yield bl(n,Ji(eE(e.bundledQuery))),i=ht(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Kr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i._s.saveNamedQuery(a,e);const d=r.withResumeToken(Xr.EMPTY_BYTE_STRING,u);return i.ii=i.ii.insert(d.targetId,d),i.fs.updateTargetData(a,d).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),Bm.apply(this,arguments)}class CR{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return be.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),be.resolve()}getNamedQuery(e,t){return be.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:eE(r.bundledQuery),readTime:Kr(r.readTime)}),be.resolve();var r}}class DI{constructor(){this.overlays=new pr(dt.comparator),this.gi=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),be.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),be.resolve()}getOverlaysForCollection(e,t,r){const i=Cd(),a=t.length+1,u=new dt(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>r&&i.set(p.getKey(),p)}return be.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new pr((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=a.get(y.largestBatchId);null===C&&(C=Cd(),a=a.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const d=Cd(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>d.set(y,C)),!(d.size()>=i)););return be.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new oI(t,r));let a=this.gi.get(t);void 0===a&&(a=Un(),this.gi.set(t,a)),this.gi.set(t,a.add(r.key))}}class $m{constructor(){this.yi=new qn(ei.pi),this.Ii=new qn(ei.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new ei(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new ei(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new dt(new In([])),r=new ei(t,e),i=new ei(t,e+1),a=[];return this.Ii.forEachInRange([r,i],u=>{this.Ai(u),a.push(u.key)}),a}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new dt(new In([])),r=new ei(t,e),i=new ei(t,e+1);let a=Un();return this.Ii.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new ei(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ei{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return dt.comparator(e.key,t.key)||dn(e.vi,t.vi)}static Ti(e,t){return dn(e.vi,t.vi)||dt.comparator(e.key,t.key)}}class AI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new qn(ei.pi)}checkEmpty(e){return be.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.Si;this.Si++;const u=new Xv(a,t,r,i);this.Bs.push(u);for(const d of i)this.Di=this.Di.add(new ei(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return be.resolve(u)}lookupMutationBatch(e,t){return be.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),a=i<0?0:i;return be.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return be.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ei(t,0),i=new ei(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],u=>{const d=this.Ci(u.vi);a.push(d)}),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(dn);return t.forEach(i=>{const a=new ei(i,0),u=new ei(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,u],d=>{r=r.add(d.vi)})}),be.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;dt.isDocumentKey(a)||(a=a.child(""));const u=new ei(new dt(a),0);let d=new qn(dn);return this.Di.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p.vi)),!0)},u),be.resolve(this.Ni(d))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nn(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return be.forEach(t.mutations,i=>{const a=new ei(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new ei(t,0),i=this.Di.firstAfterOrEqual(r);return be.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return be.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class RI{constructor(e){this.Mi=e,this.docs=new pr(dt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return be.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():or.newInvalidDocument(i))}),be.resolve(r)}getAllFromCollection(e,t,r){let i=Ts();const a=new dt(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||OA(xA(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return be.resolve(i)}getAllFromCollectionGroup(e,t,r,i){At()}Oi(e,t){return be.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ai(this)}getSize(e){return be.resolve(this.size)}}class Ai extends vI{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),be.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class xd{constructor(e){this.persistence=e,this.Fi=new pl(t=>dl(t),Vi),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new $m,this.targetCount=0,this.Li=ec.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),be.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ec(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Tn(t),be.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Fi.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Fi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),be.waitFor(a).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return be.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),be.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),be.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),be.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return be.resolve(r)}containsKey(e,t){return be.resolve(this.Bi.containsKey(t))}}class IR{constructor(e,t){this.Ui={},this.overlays={},this.es=new Li(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new xd(this),this.indexManager=new Ad,this.ds=new RI(r=>this.referenceDelegate.qi(r)),this.M=new Kf(t),this._s=new CR(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new AI(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){et("MemoryPersistence","Starting transaction:",e);const i=new TR(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(e,t){return be.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class TR extends nI{constructor(e){super(),this.currentSequenceNumber=e}}class MI{constructor(e){this.persistence=e,this.ji=new $m,this.Wi=null}static zi(e){return new MI(e)}get Hi(){if(this.Wi)return this.Wi;throw At()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),be.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),be.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Hi,r=>{const i=dt.fromPath(r);return this.Ji(e,i).next(a=>{a||t.removeEntry(i,Yt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return be.or([()=>be.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Od(n,e){return`firestore_clients_${n}_${e}`}function NI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tp(n,e){return`firestore_targets_${n}_${e}`}class jm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new He(i.error.code,i.error.message))),u?new jm(e,t,i.state,a):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new He(r.error.code,r.error.message))),a?new Pd(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=wm();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=Nv(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new Hm(e,a):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wE{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wE(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class np{constructor(){this.activeTargetIds=wm()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wm{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new pr(dn),this.started=!1,this.rr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=Od(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new np),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const a=e.getItem(Od(e.persistenceKey,i));if(a){const u=Hm.Yi(i,a);u&&(e.ir=e.ir.insert(u.clientId,u))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tp(this.persistenceKey,e));if(r){const i=Pd.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tp(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return et("SharedClientState","READ",e,t),t}setItem(e,t){et("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(a){let u=Li.A;if(null!=a)try{const d=JSON.parse(a);nn("number"==typeof d),u=d}catch(d){zr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==Li.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.kr(a)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new jm(this.currentUser,e,t,r),a=NI(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Ir(e){const t=NI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=tp(this.persistenceKey,e),a=new Pd(e,t,r);this.setItem(i,a.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Hm.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return jm.Yi(new gi(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return Pd.Yi(i,t)}mr(e){return wE.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),u=[],d=[];return a.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{a.has(p)||d.push(p)}),this.syncEngine.Fr(u,d).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=wm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class bE{constructor(){this.$r=new np,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new np,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gm{Lr(e){}shutdown(){}}class zm{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class xI{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class SR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,a){const u=this.uo(e,t);et("RestConnection","Sending: ",u,r);const d={};return this.ao(d,i,a),this.co(e,u,d,r).then(p=>(et("RestConnection","Received: ",p),p),p=>{throw tm("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}ho(e,t,r,i,a){return this.oo(e,t,r,i,a)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}uo(e,t){return`${this.io}/v1/${t}:${eP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,u)=>{const d=new vA;d.listenOnce(mA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case em.NO_ERROR:const y=d.getResponseJson();et("Connection","XHR received:",JSON.stringify(y)),a(y);break;case em.TIMEOUT:et("Connection",'RPC "'+e+'" timed out'),u(new He(ve.DEADLINE_EXCEEDED,"Request time out"));break;case em.HTTP_ERROR:const C=d.getStatus();if(et("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const T=d.getResponseJson().error;if(T&&T.status&&T.message){const D=function(x){const k=x.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(k)>=0?k:ve.UNKNOWN}(T.status);u(new He(D,T.message))}else u(new He(ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new He(ve.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{et("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gA(),u=nC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new yA({})),this.ao(d.initMessageHeaders,t,r),(0,Z.uI)()||(0,Z.b$)()||(0,Z.d)()||(0,Z.w1)()||(0,Z.Mn)()||(0,Z.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");et("Connection","Creating WebChannel: "+p,d);const y=a.createWebChannel(p,d);let C=!1,T=!1;const D=new xI({Wr:k=>{T?et("Connection","Not sending because WebChannel is closed:",k):(C||(et("Connection","Opening WebChannel transport."),y.open(),C=!0),et("Connection","WebChannel sending:",k),y.send(k))},zr:()=>y.close()}),x=(k,q,ie)=>{k.listen(q,Qe=>{try{ie(Qe)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return x(y,Sf.EventType.OPEN,()=>{T||et("Connection","WebChannel transport opened.")}),x(y,Sf.EventType.CLOSE,()=>{T||(T=!0,et("Connection","WebChannel transport closed"),D.no())}),x(y,Sf.EventType.ERROR,k=>{T||(T=!0,tm("Connection","WebChannel transport errored:",k),D.no(new He(ve.UNAVAILABLE,"The operation could not be completed")))}),x(y,Sf.EventType.MESSAGE,k=>{var q;if(!T){const ie=k.data[0];nn(!!ie);const Qe=ie,Ze=Qe.error||(null===(q=Qe[0])||void 0===q?void 0:q.error);if(Ze){et("Connection","WebChannel received error:",Ze);const We=Ze.status;let tt=function(Lt){const on=qr[Lt];if(void 0!==on)return xC(on)}(We),xt=Ze.message;void 0===tt&&(tt=ve.INTERNAL,xt="Unknown error status: "+We+" with message "+Ze.message),T=!0,D.no(new He(tt,xt)),y.close()}else et("Connection","WebChannel received:",ie),D.so(ie)}}),x(u,_A.STAT_EVENT,k=>{k.stat===Tv.PROXY?et("Connection","Detected buffering proxy"):k.stat===Tv.NOPROXY&&et("Connection","Detected no buffering proxy")}),setTimeout(()=>{D.eo()},0),D}}function CE(){return"undefined"!=typeof window?window:null}function nc(){return"undefined"!=typeof document?document:null}function kd(n){return new GA(n,!0)}class IE{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class qm{constructor(e,t,r,i,a,u,d,p){this.Yn=e,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new IE(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new He(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,Ce.Z)(function*(){e.state=0,e.start()}))}Ko(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TE extends qm{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=a}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function ZA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:At(),i=e.targetChange.targetIds||[],a=function(p,y){return p.N?(nn(void 0===y||"string"==typeof y),Xr.fromBase64String(y||"")):(nn(void 0===y||y instanceof Uint8Array),Xr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const y=void 0===p.code?ve.UNKNOWN:xC(p.code);return new He(y,p.message||"")}(u);t=new $f(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=xo(n,r.document.name),a=Kr(r.document.updateTime),u=new si({mapValue:{fields:r.document.fields}}),d=or.newFoundDocument(i,a,u);t=new bm(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=xo(n,r.document),a=r.readTime?Kr(r.readTime):Yt.min(),u=or.newNoDocument(i,a);t=new bm([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=xo(n,r.document);t=new bm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return At();{const r=e.filter,a=new MC(r.count||0);t=new FC(r.targetId,a)}}var p;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Yt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Yt.min():a.readTime?Kr(a.readTime):Yt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Im(this.M),t.addTarget=function(i,a){let u;const d=a.target;return u=cm(d)?{documents:jC(i,d)}:{query:HC(i,d)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=UC(i,a.resumeToken):a.snapshotVersion.compareTo(Yt.min())>0&&(u.readTime=Wf(i,a.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function YA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return At()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Im(this.M),t.removeTarget=e,this.Fo(t)}}class tP extends qm{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(nn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function zf(n,e){return n&&n.length>0?(nn(void 0!==e),n.map(t=>function(r,i){let a=Kr(r.updateTime?r.updateTime:i);return a.isEqual(Yt.min())&&(a=Kr(i)),new DC(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.Yo(r,t)}return nn(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Im(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gf(this.M,r))};this.Fo(t)}}class DR extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(ve.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(ve.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class AR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(zr(t),this.iu=!1):et("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class OI{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(d=>{r.enqueueAndForget((0,Ce.Z)(function*(){var p;fa(u)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ce.Z)(function*(y){const C=ht(y);C.fu.add(4),yield rc(C),C.wu.set("Unknown"),C.fu.delete(4),yield Fd(C)}),function(y){return p.apply(this,arguments)})(u))}))}),this.wu=new AR(r,i)}}function Fd(n){return SE.apply(this,arguments)}function SE(){return SE=(0,Ce.Z)(function*(n){if(fa(n))for(const e of n.du)yield e(!0)}),SE.apply(this,arguments)}function rc(n){return Km.apply(this,arguments)}function Km(){return Km=(0,Ce.Z)(function*(n){for(const e of n.du)yield e(!1)}),Km.apply(this,arguments)}function Zm(n,e){const t=ht(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Jm(t)?Qm(t):Ld(t).xo()&&Ym(t,e))}function rp(n,e){const t=ht(n),r=Ld(t);t.lu.delete(e),r.xo()&&PI(t,e),0===t.lu.size&&(r.xo()?r.Mo():fa(t)&&t.wu.set("Unknown"))}function Ym(n,e){n.mu.Z(e.targetId),Ld(n).jo(e)}function PI(n,e){n.mu.Z(e),Ld(n).Wo(e)}function Qm(n){n.mu=new LC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Ld(n).start(),n.wu.ru()}function Jm(n){return fa(n)&&!Ld(n).Co()&&n.lu.size>0}function fa(n){return 0===ht(n).fu.size}function DE(n){n.mu=void 0}function RR(n){return AE.apply(this,arguments)}function AE(){return AE=(0,Ce.Z)(function*(n){n.lu.forEach((e,t)=>{Ym(n,e)})}),AE.apply(this,arguments)}function nP(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ce.Z)(function*(n,e){DE(n),Jm(n)?(n.wu.au(e),Qm(n)):n.wu.set("Unknown")}),Xm.apply(this,arguments)}function rP(n,e,t){return kI.apply(this,arguments)}function kI(){return kI=(0,Ce.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof $f&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const u=a.cause;for(const d of a.targetIds)i.lu.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.lu.delete(d),i.mu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield RE(n,r)}else if(e instanceof bm?n.mu.ut(e):e instanceof FC?n.mu._t(e):n.mu.ht(e),!t.isEqual(Yt.min()))try{const r=yield Lm(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.mu.yt(a);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.lu.get(p);y&&i.lu.set(p,y.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach(d=>{const p=i.lu.get(d);if(!p)return;i.lu.set(d,p.withResumeToken(Xr.EMPTY_BYTE_STRING,p.snapshotVersion)),PI(i,d);const y=new gl(p.target,d,1,p.sequenceNumber);Ym(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){et("RemoteStore","Failed to raise snapshot:",r),yield RE(n,r)}var r}),kI.apply(this,arguments)}function RE(n,e,t){return FI.apply(this,arguments)}function FI(){return FI=(0,Ce.Z)(function*(n,e,t){if(!zu(e))throw e;n.fu.add(1),yield rc(n),n.wu.set("Offline"),t||(t=()=>Lm(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Fd(n)}))}),FI.apply(this,arguments)}function MR(n,e){return e().catch(t=>RE(n,t,e))}function ip(n){return LI.apply(this,arguments)}function LI(){return LI=(0,Ce.Z)(function*(n){const e=ht(n),t=ic(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;iP(e);)try{const i=yield _E(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,e_(e,i)}catch(i){yield RE(e,i)}NR(e)&&ME(e)}),LI.apply(this,arguments)}function iP(n){return fa(n)&&n.hu.length<10}function e_(n,e){n.hu.push(e);const t=ic(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function NR(n){return fa(n)&&!ic(n).Co()&&n.hu.length>0}function ME(n){ic(n).start()}function NE(n){return t_.apply(this,arguments)}function t_(){return t_=(0,Ce.Z)(function*(n){ic(n).Zo()}),t_.apply(this,arguments)}function VI(n){return UI.apply(this,arguments)}function UI(){return UI=(0,Ce.Z)(function*(n){const e=ic(n);for(const t of n.hu)e.Jo(t.mutations)}),UI.apply(this,arguments)}function xE(n,e,t){return n_.apply(this,arguments)}function n_(){return n_=(0,Ce.Z)(function*(n,e,t){const r=n.hu.shift(),i=Am.from(r,e,t);yield MR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ip(n)}),n_.apply(this,arguments)}function BI(n,e){return r_.apply(this,arguments)}function r_(){return r_=(0,Ce.Z)(function*(n,e){var t;e&&ic(n).Ho&&(yield(t=(0,Ce.Z)(function*(r,i){if(NC(a=i.code)&&a!==ve.ABORTED){const u=r.hu.shift();ic(r).ko(),yield MR(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield ip(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),NR(n)&&ME(n)}),r_.apply(this,arguments)}function xR(n,e){return i_.apply(this,arguments)}function i_(){return i_=(0,Ce.Z)(function*(n,e){const t=ht(n);t.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=fa(t);t.fu.add(3),yield rc(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Fd(t)}),i_.apply(this,arguments)}function OE(n,e){return sp.apply(this,arguments)}function sp(){return sp=(0,Ce.Z)(function*(n,e){const t=ht(n);e?(t.fu.delete(2),yield Fd(t)):e||(t.fu.add(2),yield rc(t),t.wu.set("Unknown"))}),sp.apply(this,arguments)}function Ld(n){return n.gu||(n.gu=function(e,t,r){const i=ht(e);return i.eu(),new TE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:RR.bind(null,n),Yr:nP.bind(null,n),Qo:rP.bind(null,n)}),n.du.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.gu.ko(),Jm(n)?Qm(n):n.wu.set("Unknown")):(yield n.gu.stop(),DE(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function ic(n){return n.yu||(n.yu=function(e,t,r){const i=ht(e);return i.eu(),new tP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:NE.bind(null,n),Yr:BI.bind(null,n),Xo:VI.bind(null,n),Yo:xE.bind(null,n)}),n.du.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.yu.ko(),yield ip(n)):(yield n.yu.stop(),n.hu.length>0&&(et("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class $I{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,d=new $I(e,t,u,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(n,e){if(zr("AsyncQueue",`${e}: ${n}`),zu(n))return new He(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Vd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||dt.comparator(t.key,r.key):(t,r)=>dt.comparator(t.key,r.key),this.keyedMap=Em(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new Vd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jI{constructor(){this.pu=new pr(dt.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):At():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ud{constructor(e,t,r,i,a,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Ud(e,t,Vd.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class sP{constructor(){this.Tu=void 0,this.listeners=[]}}class OR{constructor(){this.queries=new pl(e=>$v(e),vd),this.onlineState="Unknown",this.Eu=new Set}}function ap(n,e){return PE.apply(this,arguments)}function PE(){return PE=(0,Ce.Z)(function*(n,e){const t=ht(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new sP),i)try{a.Tu=yield t.onListen(r)}catch(u){const d=op(u,`Initialization of query '${fm(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Au(t.onlineState),a.Tu&&e.Ru(a.Tu)&&LE(t)}),PE.apply(this,arguments)}function es(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,Ce.Z)(function*(n,e){const t=ht(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kE.apply(this,arguments)}function FE(n,e){const t=ht(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Ru(i)&&(r=!0);u.Tu=i}}r&&LE(t)}function PR(n,e,t){const r=ht(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function LE(n){n.Eu.forEach(e=>{e.next()})}class lp{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class HI{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class VE{constructor(e){this.M=e}fi(e){return xo(this.M,e)}di(e){return e.metadata.exists?Kv(this.M,e.document,!1):or.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Kr(e)}}class kR{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UE(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=In.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new VE(this.M);for(const i of e)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||Un()).add(a);t.set(u,d)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function TI(n,e,t,r){return EE.apply(this,arguments)}(e.localStore,new VE(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield SI(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function UE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class BE{constructor(e){this.key=e}}class WI{constructor(e){this.key=e}}class GI{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Un(),this.mutatedKeys=Un(),this.Uu=yC(e),this.qu=new Vd(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new jI,i=t?t.qu:this.qu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p=Pf(this.query)&&i.size===this.query.limit?i.last():null,y=kf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,T)=>{const D=i.get(C),x=jv(this.query,T)?T:null,k=!!D&&this.mutatedKeys.has(D.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let ie=!1;D&&x?D.data.isEqual(x.data)?k!==q&&(r.track({type:3,doc:x}),ie=!0):this.ju(D,x)||(r.track({type:2,doc:x}),ie=!0,(p&&this.Uu(x,p)>0||y&&this.Uu(x,y)<0)&&(d=!0)):!D&&x?(r.track({type:0,doc:x}),ie=!0):D&&!x&&(r.track({type:1,doc:D}),ie=!0,(p||y)&&(d=!0)),ie&&(x?(u=u.add(x),a=q?a.add(C):a.delete(C)):(u=u.delete(C),a=a.delete(C)))}),Pf(this.query)||kf(this.query))for(;u.size>this.query.limit;){const C=Pf(this.query)?u.last():u.first();u=u.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{qu:u,Qu:r,ni:d,mutatedKeys:a}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const a=e.Qu.Iu();a.sort((y,C)=>function(T,D){const x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return x(T)-x(D)}(y.type,C.type)||this.Uu(y.doc,C.doc)),this.Wu(r);const u=t?this.zu():[],d=0===this.Lu.size&&this.current?1:0,p=d!==this.Bu;return this.Bu=d,0!==a.length||p?{snapshot:new Ud(this.query,e.qu,i,a,e.mutatedKeys,0===d,p,!1),Hu:u}:{Hu:u}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new jI,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Un(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new WI(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new BE(r))}),t}Yu(e){this.$u=e.li,this.Lu=Un();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Ud.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class $E{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class no{constructor(e){this.key=e,this.Zu=!1}}class FR{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.ta={},this.ea=new pl(d=>$v(d),vd),this.na=new Map,this.sa=new Set,this.ia=new pr(dt.comparator),this.ra=new Map,this.oa=new $m,this.ua={},this.aa=new Map,this.ca=ec.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function oP(n,e){return jE.apply(this,arguments)}function jE(){return jE=(0,Ce.Z)(function*(n,e){const t=eT(n);let r,i;const a=t.ea.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const u=yield bl(t.localStore,Ji(e));t.isPrimaryClient&&Zm(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield s_(t,e,r,"current"===d)}return i}),jE.apply(this,arguments)}function s_(n,e,t,r){return HE.apply(this,arguments)}function HE(){return HE=(0,Ce.Z)(function*(n,e,t,r){n.la=(C,T,D)=>{return(x=(0,Ce.Z)(function*(k,q,ie,Qe){let Ze=q.view.Gu(ie);Ze.ni&&(Ze=yield Vm(k.localStore,q.query,!1).then(({documents:xt})=>q.view.Gu(xt,Ze)));const We=Qe&&Qe.targetChanges.get(q.targetId),tt=q.view.applyChanges(Ze,k.isPrimaryClient,We);return c_(k,q.targetId,tt.Hu),tt.snapshot}),function(k,q,ie,Qe){return x.apply(this,arguments)})(n,C,T,D);var x};const i=yield Vm(n.localStore,e,!0),a=new GI(e,i.li),u=a.Gu(i.documents),d=Bf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=a.applyChanges(u,n.isPrimaryClient,d);c_(n,t,p.Hu);const y=new $E(e,t,a);return n.ea.set(e,y),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),p.snapshot}),HE.apply(this,arguments)}function LR(n,e){return o_.apply(this,arguments)}function o_(){return o_=(0,Ce.Z)(function*(n,e){const t=ht(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(a=>!vd(a,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rp(t.remoteStore,r.targetId),cp(t,r.targetId)}).catch(El))):(cp(t,r.targetId),yield Nd(t.localStore,r.targetId,!0))}),o_.apply(this,arguments)}function zI(){return zI=(0,Ce.Z)(function*(n,e,t){const r=tT(n);try{const i=yield function(a,u){const d=ht(a),p=_r.now(),y=u.reduce((T,D)=>T.add(D.key),Un());let C;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>d.ci.Ks(T,y).next(D=>{C=D;const x=[];for(const k of u){const q=RC(k,C.get(k.key));null!=q&&x.push(new Hu(k.key,q,cC(q.value.mapValue),Pr.exists(!0)))}return d.Bs.addMutationBatch(T,p,x,u)})).then(T=>(T.applyToLocalDocumentSet(C),{batchId:T.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,d){let p=a.ua[a.currentUser.toKey()];p||(p=new pr(dn)),p=p.insert(u,d),a.ua[a.currentUser.toKey()]=p}(r,i.batchId,t),yield pa(r,i.changes),yield ip(r.remoteStore)}catch(i){const a=op(i,"Failed to persist write");t.reject(a)}}),zI.apply(this,arguments)}function WE(n,e){return a_.apply(this,arguments)}function a_(){return a_=(0,Ce.Z)(function*(n,e){const t=ht(n);try{const r=yield gE(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.ra.get(a);u&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Zu=!0:i.modifiedDocuments.size>0?nn(u.Zu):i.removedDocuments.size>0&&(nn(u.Zu),u.Zu=!1))}),yield pa(t,r,e)}catch(r){yield El(r)}}),a_.apply(this,arguments)}function qI(n,e,t){const r=ht(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((a,u)=>{const d=u.view.Au(e);d.snapshot&&i.push(d.snapshot)}),function(a,u){const d=ht(a);d.onlineState=u;let p=!1;d.queries.forEach((y,C)=>{for(const T of C.listeners)T.Au(u)&&(p=!0)}),p&&LE(d)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UR(n,e,t){return l_.apply(this,arguments)}function l_(){return l_=(0,Ce.Z)(function*(n,e,t){const r=ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),a=i&&i.key;if(a){let u=new pr(dt.comparator);u=u.insert(a,or.newNoDocument(a,Yt.min()));const d=Un().add(a),p=new ua(Yt.min(),new Map,new qn(dn),u,d);yield WE(r,p),r.ia=r.ia.remove(a),r.ra.delete(e),ZE(r)}else yield Nd(r.localStore,e,!1).then(()=>cp(r,e,t)).catch(El)}),l_.apply(this,arguments)}function GE(n,e){return up.apply(this,arguments)}function up(){return up=(0,Ce.Z)(function*(n,e){const t=ht(n),r=e.batch.batchId;try{const i=yield XO(t.localStore,e);KE(t,r,null),qE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield pa(t,i)}catch(i){yield El(i)}}),up.apply(this,arguments)}function KI(n,e,t){return zE.apply(this,arguments)}function zE(){return zE=(0,Ce.Z)(function*(n,e,t){const r=ht(n);try{const i=yield function(a,u){const d=ht(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.Bs.lookupMutationBatch(p,u).next(C=>(nn(null!==C),y=C.keys(),d.Bs.removeMutationBatch(p,C))).next(()=>d.Bs.performConsistencyCheck(p)).next(()=>d.ci.Ks(p,y))})}(r.localStore,e);KE(r,e,t),qE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield pa(r,i)}catch(i){yield El(i)}}),zE.apply(this,arguments)}function u_(){return u_=(0,Ce.Z)(function*(n,e){const t=ht(n);fa(t.remoteStore)||et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=ht(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=op(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),u_.apply(this,arguments)}function qE(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function KE(n,e,t){const r=ht(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||BR(n,r)})}function BR(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(rp(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),ZE(n))}function c_(n,e,t){for(const r of t)r instanceof BE?(n.oa.addReference(r.key,e),$R(n,r)):r instanceof WI?(et("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||BR(n,r.key)):At()}function $R(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(et("SyncEngine","New document in limbo: "+t),n.sa.add(r),ZE(n))}function ZE(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new dt(In.fromString(e)),r=n.ca.next();n.ra.set(r,new no(t)),n.ia=n.ia.insert(t,r),Zm(n.remoteStore,new gl(Ji(Uu(t.path)),r,2,Li.A))}}function pa(n,e,t){return YI.apply(this,arguments)}function YI(){return YI=(0,Ce.Z)(function*(n,e,t){const r=ht(n),i=[],a=[],u=[];var d;r.ea.isEmpty()||(r.ea.forEach((d,p)=>{u.push(r.la(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=Fm.Ys(p.targetId,y);a.push(C)}}))}),yield Promise.all(u),r.ta.Qo(i),yield(d=(0,Ce.Z)(function*(p,y){const C=ht(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>be.forEach(y,D=>be.forEach(D.Hs,x=>C.persistence.referenceDelegate.addReference(T,D.targetId,x)).next(()=>be.forEach(D.Js,x=>C.persistence.referenceDelegate.removeReference(T,D.targetId,x)))))}catch(T){if(!zu(T))throw T;et("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const D=T.targetId;if(!T.fromCache){const x=C.ii.get(D),q=x.withLastLimboFreeSnapshotVersion(x.snapshotVersion);C.ii=C.ii.insert(D,q)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,a))}),YI.apply(this,arguments)}function aP(n,e){return QI.apply(this,arguments)}function QI(){return QI=(0,Ce.Z)(function*(n,e){const t=ht(n);if(!t.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=yield CI(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(u=>{u.forEach(d=>{d.reject(new He(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pa(t,r.hi)}var i}),QI.apply(this,arguments)}function lP(n,e){const t=ht(n),r=t.ra.get(e);if(r&&r.Zu)return Un().add(r.key);{let i=Un();const a=t.na.get(e);if(!a)return i;for(const u of a){const d=t.ea.get(u);i=i.unionWith(d.view.Ku)}return i}}function uP(n,e){return YE.apply(this,arguments)}function YE(){return YE=(0,Ce.Z)(function*(n,e){const t=ht(n),r=yield Vm(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&c_(t,e.targetId,i.Hu),i}),YE.apply(this,arguments)}function d_(n,e){return QE.apply(this,arguments)}function QE(){return QE=(0,Ce.Z)(function*(n,e){const t=ht(n);return vE(t.localStore,e).then(r=>pa(t,r))}),QE.apply(this,arguments)}function jR(n,e,t,r){return h_.apply(this,arguments)}function h_(){return h_=(0,Ce.Z)(function*(n,e,t,r){const i=ht(n),a=yield function(u,d){const p=ht(u),y=ht(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.fn(C,d).next(T=>T?p.ci.Ks(C,T):be.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield ip(i.remoteStore):"acknowledged"===t||"rejected"===t?(KE(i,e,r||null),qE(i,e),d=e,ht(ht(i.localStore).Bs)._n(d)):At(),yield pa(i,a)):et("SyncEngine","Cannot apply mutation batch with id: "+e)}),h_.apply(this,arguments)}function f_(){return f_=(0,Ce.Z)(function*(n,e){const t=ht(n);if(eT(t),tT(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield p_(t,r.toArray());t.ha=!0,yield OE(t.remoteStore,!0);for(const a of i)Zm(t.remoteStore,a)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(cp(t,u),Nd(t.localStore,u,!0))),rp(t.remoteStore,u)}),yield i,yield p_(t,r),function(a){const u=ht(a);u.ra.forEach((d,p)=>{rp(u.remoteStore,p)}),u.oa.bi(),u.ra=new Map,u.ia=new pr(dt.comparator)}(t),t.ha=!1,yield OE(t.remoteStore,!1)}}),f_.apply(this,arguments)}function p_(n,e,t){return dp.apply(this,arguments)}function dp(){return dp=(0,Ce.Z)(function*(n,e,t){const r=ht(n),i=[],a=[];for(const u of e){let d;const p=r.na.get(u);if(p&&0!==p.length){d=yield bl(r.localStore,Ji(p[0]));for(const y of p){const C=r.ea.get(y),T=yield uP(r,C);T.snapshot&&a.push(T.snapshot)}}else{const y=yield II(r.localStore,u);d=yield bl(r.localStore,y),yield s_(r,JI(y),u,!1)}i.push(d)}return r.ta.Qo(a),i}),dp.apply(this,arguments)}function JI(n){return mC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JE(n){const e=ht(n);return ht(ht(e.localStore).persistence).Fs()}function XE(n,e,t,r){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,Ce.Z)(function*(n,e,t,r){const i=ht(n);if(i.ha)return void et("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield vE(i.localStore,_C(a[0])),d=ua.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield pa(i,u,d);break}case"rejected":yield Nd(i.localStore,e,!0),cp(i,e,r);break;default:At()}}),Bd.apply(this,arguments)}function cP(n,e,t){return XI.apply(this,arguments)}function XI(){return XI=(0,Ce.Z)(function*(n,e,t){const r=eT(n);if(r.ha){for(const i of e){if(r.na.has(i)){et("SyncEngine","Adding an already active target "+i);continue}const a=yield II(r.localStore,i),u=yield bl(r.localStore,a);yield s_(r,JI(a),u.targetId,!1),Zm(r.remoteStore,u)}for(const i of t)r.na.has(i)&&(yield Nd(r.localStore,i,!1).then(()=>{rp(r.remoteStore,i),cp(r,i)}).catch(El))}}),XI.apply(this,arguments)}function eT(n){const e=ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UR.bind(null,e),e.ta.Qo=FE.bind(null,e.eventManager),e.ta.fa=PR.bind(null,e.eventManager),e}function tT(n){const e=ht(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KI.bind(null,e),e}class rT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=kd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return fE(this.persistence,new dE,e.initialUser,this.M)}wa(e){return new IR(MI.zi,this.M)}_a(e){return new bE}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class iT extends rT{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield tT(r.ya.syncEngine),yield ip(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return fE(this.persistence,new dE,e.initialUser,this.M)}ma(e){return new ER(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=cE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new uE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CE(),nc(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new bE}}class HR extends iT{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof Wm&&(r.sharedClientState.syncEngine={Mr:jR.bind(null,i),Or:XE.bind(null,i),Fr:cP.bind(null,i),Fs:JE.bind(null,i),kr:d_.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,Ce.Z)(function*(u){yield function sc(n,e){return f_.apply(this,arguments)}(r.ya.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}_a(e){const t=CE();if(!Wm.vt(t))throw new He(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class e0{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qI(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=aP.bind(null,r.syncEngine),yield OE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OR}createDatastore(e){const t=kd(e.databaseInfo.databaseId),r=new SR(e.databaseInfo);return new DR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>qI(this.syncEngine,d,0),u=zm.vt()?new zm:new Gm,new OI(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,d,p,y){const C=new FR(r,i,a,u,d,p);return y&&(C.ha=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=ht(t);et("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield rc(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function t0(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sT{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new HI(JSON.parse(a),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ce.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class WR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new He(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,u){const d=ht(a),p=Im(d.M)+"/documents",y={documents:u.map(x=>Id(d.M,x))},C=yield d.ho("BatchGetDocuments",p,y),T=new Map;C.forEach(x=>{const k=function Tm(n,e){return"found"in e?function(t,r){nn(!!r.found);const i=xo(t,r.found.name),a=Kr(r.found.updateTime),u=new si({mapValue:{fields:r.found.fields}});return or.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){nn(!!r.missing),nn(!!r.readTime);const i=xo(t,r.missing),a=Kr(r.readTime);return or.newNoDocument(i,a)}(n,e):At()}(d.M,x);T.set(k.key.toString(),k)});const D=[];return u.forEach(x=>{const k=T.get(x.toString());nn(!!k),D.push(k)}),D}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=dt.fromPath(i);e.mutations.push(new ym(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const u=ht(i),d=Im(u.M)+"/documents",p={writes:a.map(y=>Gf(u.M,y))};yield u.oo("Commit",d,p)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw At();t=Yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new He(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Pr.updateTime(t):Pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Yt.min()))throw new He(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pr.updateTime(t)}return Pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class GR{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new IE(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ce.Z)(function*(){const t=new WR(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.xa(a)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!ll(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!NC(t)}return!1}}class oT{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=Av.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ce.Z)(function*(d){et("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(et("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=op(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function g_(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield CI(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),aT.apply(this,arguments)}function n0(n,e){return fp.apply(this,arguments)}function fp(){return fp=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield r0(n);et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>xR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>xR(e.remoteStore,a)),n.onlineComponents=e}),fp.apply(this,arguments)}function r0(n){return s0.apply(this,arguments)}function s0(){return s0=(0,Ce.Z)(function*(n){return n.offlineComponents||(et("FirestoreClient","Using default OfflineComponentProvider"),yield g_(n,new rT)),n.offlineComponents}),s0.apply(this,arguments)}function o0(n){return lT.apply(this,arguments)}function lT(){return lT=(0,Ce.Z)(function*(n){return n.onlineComponents||(et("FirestoreClient","Using default OnlineComponentProvider"),yield n0(n,new e0)),n.onlineComponents}),lT.apply(this,arguments)}function zR(n){return r0(n).then(e=>e.persistence)}function a0(n){return r0(n).then(e=>e.localStore)}function uT(n){return o0(n).then(e=>e.remoteStore)}function cT(n){return o0(n).then(e=>e.syncEngine)}function pp(n){return dT.apply(this,arguments)}function dT(){return dT=(0,Ce.Z)(function*(n){const e=yield o0(n),t=e.eventManager;return t.onListen=oP.bind(null,e.syncEngine),t.onUnlisten=LR.bind(null,e.syncEngine),t}),dT.apply(this,arguments)}function KR(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,u,d,p){const y=new hp({next:T=>{a.enqueueAndForget(()=>es(i,C));const D=T.docs.has(u);!D&&T.fromCache?p.reject(new He(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&T.fromCache&&d&&"server"===d.source?p.reject(new He(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),C=new lp(Uu(u.path),y,{includeMetadataChanges:!0,Cu:!0});return ap(i,C)}(yield pp(n),n.asyncQueue,e,t,r)})),r.promise}function ZR(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,u,d,p){const y=new hp({next:T=>{a.enqueueAndForget(()=>es(i,C)),T.fromCache&&"server"===d.source?p.reject(new He(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),C=new lp(u,y,{includeMetadataChanges:!0,Cu:!0});return ap(i,C)}(yield pp(n),n.asyncQueue,e,t,r)})),r.promise}const c=new Map;function h(n,e,t){if(!t)throw new He(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function g(n,e,t,r){if(!0===e&&!0===r)throw new He(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function v(n){if(!dt.isDocumentKey(n))throw new He(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w(n){if(dt.isDocumentKey(n))throw new He(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function I(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":At()}function S(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=I(n);throw new He(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function R(n,e){if(e<=0)throw new He(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class V{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new He(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,g("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class G{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V({}),this._settingsFrozen=!1,e instanceof Js?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new He(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Js(i.options.projectId)}(e))}get app(){if(!this._app)throw new He(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nm;switch(t.type){case"gapi":const r=t.client;return nn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new IA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new He(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=c.get(e);t&&(et("ComponentProvider","Removing Datastore"),c.delete(e),t.terminate())}(this),Promise.resolve()}}class he{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new he(this.firestore,e,this._key)}}class $e{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $e(this.firestore,e,this._query)}}class nt extends $e{constructor(e,t,r){super(e,t,Uu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new he(this.firestore,null,new dt(e))}withConverter(e){return new nt(this.firestore,e,this._path)}}function Ct(n,e,...t){if(n=(0,Z.m9)(n),h("collection","path",e),n instanceof G){const r=In.fromString(e,...t);return w(r),new nt(n,null,r)}{if(!(n instanceof he||n instanceof nt))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return w(r),new nt(n.firestore,null,r)}}function Ft(n,e,...t){if(n=(0,Z.m9)(n),1===arguments.length&&(e=Av.R()),h("doc","path",e),n instanceof G){const r=In.fromString(e,...t);return v(r),new he(n,null,new dt(r))}{if(!(n instanceof he||n instanceof nt))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return v(r),new he(n.firestore,n instanceof nt?n.converter:null,new dt(r))}}function wn(n,e){return n=(0,Z.m9)(n),e=(0,Z.m9)(e),(n instanceof he||n instanceof nt)&&(e instanceof he||e instanceof nt)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ln(n,e){return n=(0,Z.m9)(n),e=(0,Z.m9)(e),n instanceof $e&&e instanceof $e&&n.firestore===e.firestore&&vd(n._query,e._query)&&n.converter===e.converter}class ts{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new IE(this,"async_queue_retry"),this.qa=()=>{const t=nc();t&&et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=nc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=nc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Jr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!zu(t))throw t;et("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,zr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=$I.createAndSchedule(this,e,t,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&At()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function ga(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class l0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ir extends G{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ts,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||m_(this),this._firestoreClient.terminate()}}function c0(n=(0,Pn.getApp)()){return(0,Pn._getProvider)(n,"firestore").getImmediate()}function Cr(n){return n._firestoreClient||m_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function m_(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oC(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new oT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gP(n,e,t){const r=new Jr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield g_(n,t),yield n0(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function mP(n){if(n._initialized||n._terminated)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cl(Xr.fromBase64String(e))}catch(t){throw new He(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cl(Xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class gp{constructor(e){this._methodName=e}}class fT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dn(this._lat,e._lat)||dn(this._long,e._long)}}const NB=/^__.*__$/;class xB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vf(e,this.data,t,this.fieldTransforms)}}class _P{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class pT{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new pT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return _T(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(yP(this.Xa)&&NB.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class OB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||kd(e)}ac(e,t,r,i=!1){return new pT({Xa:e,methodName:t,uc:r,path:Or.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function mp(n){const e=n._freezeSettings(),t=kd(n._databaseId);return new OB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gT(n,e,t,r,i,a={}){const u=n.ac(a.merge||a.mergeFields?2:0,e,t,i);XR("Data must be an object, but it was:",u,r);const d=wP(r,u);let p,y;if(a.merge)p=new aa(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const C=[];for(const T of a.mergeFields){const D=eM(e,T,t);if(!u.contains(D))throw new He(ve.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);CP(C,D)||C.push(D)}p=new aa(C),y=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=u.fieldTransforms;return new xB(new si(d),p,y)}class f0 extends gp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof f0}}function vP(n,e,t){return new pT({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class YR extends gp{_toFieldTransform(e){return new bd(e.path,new Ed)}isEqual(e){return e instanceof YR}}class PB extends gp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=vP(this,e,!0),r=this.cc.map(a=>_p(a,t)),i=new $u(r);return new bd(e.path,i)}isEqual(e){return this===e}}class kB extends gp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=vP(this,e,!0),r=this.cc.map(a=>_p(a,t)),i=new ju(r);return new bd(e.path,i)}isEqual(e){return this===e}}class FB extends gp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new wd(e.M,wC(e.M,this.hc));return new bd(e.path,t)}isEqual(e){return this===e}}function QR(n,e,t,r){const i=n.ac(1,e,t);XR("Data must be an object, but it was:",i,r);const a=[],u=si.empty();Qs(r,(p,y)=>{const C=mT(e,p,t);y=(0,Z.m9)(y);const T=i.sc(C);if(y instanceof f0)a.push(C);else{const D=_p(y,T);null!=D&&(a.push(C),u.set(C,D))}});const d=new aa(a);return new _P(u,d,i.fieldTransforms)}function JR(n,e,t,r,i,a){const u=n.ac(1,e,t),d=[eM(e,r,t)],p=[i];if(a.length%2!=0)throw new He(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<a.length;D+=2)d.push(eM(e,a[D])),p.push(a[D+1]);const y=[],C=si.empty();for(let D=d.length-1;D>=0;--D)if(!CP(y,d[D])){const x=d[D];let k=p[D];k=(0,Z.m9)(k);const q=u.sc(x);if(k instanceof f0)y.push(x);else{const ie=_p(k,q);null!=ie&&(y.push(x),C.set(x,ie))}}const T=new aa(y);return new _P(C,T,u.fieldTransforms)}function EP(n,e,t,r=!1){return _p(t,n.ac(r?4:3,e))}function _p(n,e){if(bP(n=(0,Z.m9)(n)))return XR("Unsupported field value:",e,n),wP(n,e);if(n instanceof gp)return function(t,r){if(!yP(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let d=_p(u,r.ic(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wC(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=_r.fromDate(t);return{timestampValue:Wf(r.M,i)}}if(t instanceof _r){const i=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wf(r.M,i)}}if(t instanceof fT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cl)return{bytesValue:UC(r.M,t._byteString)};if(t instanceof he){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Cm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${I(t)}`)}(n,e)}function wP(n,e){const t={};return Rv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(n,(r,i)=>{const a=_p(i,e.tc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function bP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _r||n instanceof fT||n instanceof Cl||n instanceof he||n instanceof gp)}function XR(n,e,t){if(!bP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=I(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function eM(n,e,t){if((e=(0,Z.m9)(e))instanceof oc)return e._internalPath;if("string"==typeof e)return mT(n,e);throw _T("Field path arguments must be of type string or ",n,!1,void 0,t)}const LB=new RegExp("[~\\*/\\[\\]]");function mT(n,e,t){if(e.search(LB)>=0)throw _T(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oc(...e.split("."))._internalPath}catch(r){throw _T(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _T(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new He(ve.INVALID_ARGUMENT,d+n+p)}function CP(n,e){return n.some(t=>t.isEqual(e))}class p0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new VB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class VB extends p0{data(){return super.data()}}function yT(n,e){return"string"==typeof e?mT(n,e):e instanceof oc?e._internalPath:e._delegate._internalPath}class yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ac extends p0{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new g0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class g0 extends ac{data(e={}){return super.data(e)}}class $d{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new g0(this._firestore,this._userDataWriter,r.key,r,new yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new g0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new yp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new g0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new yp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),y=a.indexOf(u.doc.key)),{type:UB(u.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}function IP(n,e){return n instanceof ac&&e instanceof ac?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $d&&e instanceof $d&&n._firestore===e._firestore&&Ln(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function TP(n){if(kf(n)&&0===n.explicitOrderBy.length)throw new He(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m0{}function jd(n,...e){for(const t of e)n=t._apply(n);return n}class BB extends m0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=mp(e.firestore),r=function(i,a,u,d,p,y,C){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){NP(C,y);const x=[];for(const k of C)x.push(MP(d,i,k));T={arrayValue:{values:x}}}else T=MP(d,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||NP(C,y),T=EP(u,"where",C,"in"===y||"not-in"===y);const D=Xn.create(p,y,T);return function(x,k){if(k.S()){const ie=dm(x);if(null!==ie&&!ie.isEqual(k.field))throw new He(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ie.toString()}' and '${k.field.toString()}'`);const Qe=yd(x);null!==Qe&&xP(0,k.field,Qe)}const q=function(ie,Qe){for(const Ze of ie.filters)if(Qe.indexOf(Ze.op)>=0)return Ze.op;return null}(x,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(k.op));if(null!==q)throw new He(ve.INVALID_ARGUMENT,q===k.op?`Invalid query. You cannot use more than one '${k.op.toString()}' filter.`:`Invalid query. You cannot use '${k.op.toString()}' filters with '${q.toString()}' filters.`)}(i,D),D}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new $e(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Is(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class jB extends m0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Vu(i,a);return function(d,p){if(null===yd(d)){const y=dm(d);null!==y&&xP(0,y,p.field)}}(r,u),u}(e._query,this.lc,this._c);return new $e(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Is(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class SP extends m0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new $e(e.firestore,e.converter,Bv(e._query,this.wc,this.mc))}}class DP extends m0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=RP(e,this.type,this.gc,this.yc);return new $e(e.firestore,e.converter,(i=t,new Is((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class AP extends m0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=RP(e,this.type,this.gc,this.yc);return new $e(e.firestore,e.converter,(i=t,new Is((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function RP(n,e,t,r){if(t[0]=(0,Z.m9)(t[0]),t[0]instanceof p0)return function(i,a,u,d,p){if(!d)throw new He(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of Bu(i))if(C.field.isKeyField())y.push(ul(a,d.key));else{const T=d.data.field(C.field);if(rm(T))throw new He(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const D=C.field.canonicalString();throw new He(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}y.push(T)}return new hl(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=mp(n.firestore);return function(a,u,d,p,y,C){const T=a.explicitOrderBy;if(y.length>T.length)throw new He(ve.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let x=0;x<y.length;x++){const k=y[x];if(T[x].field.isKeyField()){if("string"!=typeof k)throw new He(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof k}`);if(!hm(a)&&-1!==k.indexOf("/"))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${k}' contains a slash.`);const q=a.path.child(In.fromString(k));if(!dt.isDocumentKey(q))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${q}' is not because it contains an odd number of segments.`);const ie=new dt(q);D.push(ul(u,ie))}else{const q=EP(d,p,k);D.push(q)}}return new hl(D,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function MP(n,e,t){if("string"==typeof(t=(0,Z.m9)(t))){if(""===t)throw new He(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hm(e)&&-1!==t.indexOf("/"))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!dt.isDocumentKey(r))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ul(n,new dt(r))}if(t instanceof he)return ul(n,t._key);throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${I(t)}.`)}function NP(n,e){if(!Array.isArray(n)||0===n.length)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xP(n,e,t){if(!t.isEqual(e))throw new He(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class tM{convertValue(e,t="none"){switch(Fu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw At()}}convertObject(e,t){const r={};return Qs(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new fT(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=im(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gd(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);nn(Zv(r));const i=new Js(r.get(1),r.get(3)),a=new dt(r.popFirst(5));return i.isEqual(t)||zr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function vT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class YB extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,t)}}class OP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mp(e)}set(e,t,r){this._verifyNotCommitted();const i=Hd(e,this._firestore),a=vT(i.converter,t,r),u=gT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Hd(e,this._firestore);let u;return u="string"==typeof(t=(0,Z.m9)(t))||t instanceof oc?JR(this._dataReader,"WriteBatch.update",a._key,t,r,i):QR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hd(e,this._firestore);return this._mutations=this._mutations.concat(new _m(t._key,Pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hd(n,e){if((n=(0,Z.m9)(n)).firestore!==e)throw new He(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class vp extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new he(this.firestore,null,t)}}function PP(n,e,t){n=S(n,he);const r=S(n.firestore,ir),i=vT(n.converter,e,t);return __(r,[gT(mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pr.none())])}function kP(n,e,t,...r){n=S(n,he);const i=S(n.firestore,ir),a=mp(i);let u;return u="string"==typeof(e=(0,Z.m9)(e))||e instanceof oc?JR(a,"updateDoc",n._key,e,t,r):QR(a,"updateDoc",n._key,e),__(i,[u.toMutation(n._key,Pr.exists(!0))])}function FP(n,...e){var t,r,i;n=(0,Z.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||ga(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges};if(ga(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let p,y,C;if(n instanceof he)y=S(n.firestore,ir),C=Uu(n._key.path),p={next:T=>{e[u]&&e[u](nM(y,n,T))},error:e[u+1],complete:e[u+2]};else{const T=S(n,$e);y=S(T.firestore,ir),C=T._query;const D=new vp(y);p={next:x=>{e[u]&&e[u](new $d(y,D,T,x))},error:e[u+1],complete:e[u+2]},TP(n._query)}return function(T,D,x,k){const q=new hp(k),ie=new lp(D,q,x);return T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return ap(yield pp(T),ie)})),()=>{q.Ia(),T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return es(yield pp(T),ie)}))}}(Cr(y),C,d,p)}function __(n,e){return function(t,r){const i=new Jr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function VR(n,e,t){return zI.apply(this,arguments)}(yield cT(t),r,i)})),i.promise}(Cr(n),e)}function nM(n,e,t){const r=t.docs.get(e._key),i=new vp(n);return new ac(n,i,e._key,r,new yp(t.hasPendingWrites,t.fromCache),e.converter)}class o2 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mp(e)}get(e){const t=Hd(e,this._firestore),r=new YB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return At();const a=i[0];if(a.isFoundDocument())return new p0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new p0(this._firestore,r,t._key,null,t.converter);throw At()})}set(e,t,r){const i=Hd(e,this._firestore),a=vT(i.converter,t,r),u=gT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Hd(e,this._firestore);let u;return u="string"==typeof(t=(0,Z.m9)(t))||t instanceof oc?JR(this._dataReader,"Transaction.update",a._key,t,r,i):QR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Hd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hd(e,this._firestore),r=new vp(this._firestore);return super.get(e).then(i=>new ac(this._firestore,r,t._key,i._document,new yp(!1,!1),t.converter))}}function rM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VP(){if("undefined"==typeof Uint8Array)throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function UP(){if(!function Mv(){return"undefined"!=typeof atob}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pd=Pn.SDK_VERSION,(0,Pn._registerComponent)(new Ja.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new ir(i,new iC(t.getProvider("auth-internal")),new TA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Pn.registerVersion)(rC,"3.4.8",n),(0,Pn.registerVersion)(rC,"3.4.8","esm2017")}();class _0{constructor(e){this._delegate=e}static fromBase64String(e){return UP(),new _0(Cl.fromBase64String(e))}static fromUint8Array(e){return VP(),new _0(Cl.fromUint8Array(e))}toBase64(){return UP(),this._delegate.toBase64()}toUint8Array(){return VP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iM(n){return function g2(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class m2{enableIndexedDbPersistence(e,t){return function d0(n,e){mP(n=S(n,ir));const t=Cr(n),r=n._freezeSettings(),i=new e0;return gP(t,i,new iT(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function h0(n){mP(n=S(n,ir));const e=Cr(n),t=n._freezeSettings(),r=new e0;return gP(e,r,new HR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function TB(n){if(n._initialized&&!n._terminated)throw new He(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Xi.vt())return Promise.resolve();const i=r+"main";yield Xi.delete(i)}),function(r){return t.apply(this,arguments)})(cE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Js||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function te(n,e,t,r={}){var i;const a=(n=S(n,G))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&tm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=gi.MOCK_USER;else{u=(0,Z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new He(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gi(p)}n._authCredentials=new bA(new Dv(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function DB(n){return function dP(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield zR(n),t=yield uT(n);return e.setNetworkEnabled(!0),function(r){const i=ht(r);return i.fu.delete(0),Fd(i)}(t)}))}(Cr(n=S(n,ir)))}(this._delegate)}disableNetwork(){return function AB(n){return function hP(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield zR(n),t=yield uT(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=ht(i);a.fu.add(0),yield rc(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Cr(n=S(n,ir)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,g("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function SB(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function ZI(n,e){return u_.apply(this,arguments)}(yield cT(e),t)})),t.promise}(Cr(n=S(n,ir)))}(this._delegate)}onSnapshotsInSync(e){return function s2(n,e){return function pP(n,e){const t=new hp(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield pp(n),i=t,ht(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield pp(n),i=t,void ht(r).Eu.delete(i);var r,i}))}}(Cr(n=S(n,ir)),ga(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new y_(this,Ct(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Po(this,Ft(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function Fe(n,e){if(n=S(n,G),h("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $e(n,null,(t=e,new Is(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function a2(n,e){return function s(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const r=yield(i=n,o0(i).then(a=>a.datastore));var i;new GR(n.asyncQueue,r,e,t).run()})),t.promise}(Cr(n=S(n,ir)),t=>e(new o2(n,t)))}(this._delegate,t=>e(new $P(this,t)))}batch(){return Cr(this._delegate),new jP(new OP(this._delegate,e=>__(this._delegate,e)))}loadBundle(e){return function RB(n,e){const t=Cr(n=S(n,ir)),r=new l0;return function o(n,e,t,r){const i=function(a,u){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,p=function(p,y){if(p instanceof Uint8Array)return t0(p,y);if(p instanceof ArrayBuffer)return t0(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new sT(p,u);var p}(t,kd(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function nT(n,e,t){const r=ht(n);var i;(i=(0,Ce.Z)(function*(a,u,d){try{const p=yield u.getMetadata();if(yield function(D,x){const k=ht(D),q=Kr(x.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",ie=>k._s.getBundleMetadata(ie,x.id)).then(ie=>!!ie&&ie.createTime.compareTo(q)>=0)}(a.localStore,p))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(D=p).totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}),Promise.resolve(new Set);d._updateProgress(UE(p));const y=new kR(p,a.localStore,u.M);let C=yield u.da();for(;C;){const D=yield y.ku(C);D&&d._updateProgress(D),C=yield u.da()}const T=yield y.complete();return yield pa(a,T.Fu,void 0),yield function(D,x){const k=ht(D);return k.persistence.runTransaction("Save bundle","readwrite",q=>k._s.saveBundleMetadata(q,x))}(a.localStore,p),d._completeWith(T.progress),Promise.resolve(T.Ou)}catch(p){return tm("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var D}),function(a,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield cT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function MB(n,e){return function l(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=ht(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield a0(n),e)}))}(Cr(n=S(n,ir)),e).then(t=>t?new $e(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class ET extends tM{constructor(e){super(),this.firestore=e}convertBytes(e){return new _0(new Cl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Po.forKey(t,this.firestore,null)}}class $P{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ET(e)}get(e){const t=wp(e);return this._delegate.get(t).then(r=>new y0(this._firestore,new ac(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=wp(e);return r?(rM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=wp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}}class jP{constructor(e){this._delegate=e}set(e,t,r){const i=wp(e);return r?(rM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=wp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new g0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new v0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Ep(e,new ET(e),t),i.set(t,a)),a}}Ep.INSTANCES=new WeakMap;class Po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ET(e)}static forPath(e,t,r){if(e.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Po(t,new he(t._delegate,r,new dt(e)))}static forKey(e,t,r){return new Po(t,new he(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new y_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new y_(this.firestore,Ct(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Z.m9)(e))instanceof he&&wn(this._delegate,e)}set(e,t){t=rM("DocumentReference.set",t);try{return t?PP(this._delegate,e,t):PP(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kP(this._delegate,e):kP(this._delegate,e,t,...r)}catch(i){throw ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return function r2(n){return __(S(n.firestore,ir),[new _m(n._key,Pr.none())])}(this._delegate)}onSnapshot(...e){const t=HP(e),r=WP(e,i=>new y0(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function JB(n){n=S(n,he);const e=S(n.firestore,ir),t=Cr(e),r=new vp(e);return function qR(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,u){try{const d=yield function(p,y){const C=ht(p);return C.persistence.runTransaction("read document","readonly",T=>C.ci.Ls(T,y))}(i,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new He(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=op(d,`Failed to get document '${a} from cache`);u.reject(p)}}),function(i,a,u){return r.apply(this,arguments)})(yield a0(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ac(e,r,n._key,i,new yp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function XB(n){n=S(n,he);const e=S(n.firestore,ir);return KR(Cr(e),n._key,{source:"server"}).then(t=>nM(e,n,t))}(this._delegate):function QB(n){n=S(n,he);const e=S(n.firestore,ir);return KR(Cr(e),n._key).then(t=>nM(e,n,t))}(this._delegate),t.then(r=>new y0(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Po(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function HP(n){for(const e of n)if("object"==typeof e&&!iM(e))return e;return{}}function WP(n,e){var t,r;let i;return i=iM(n[0])?n[0]:iM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class y0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Po(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IP(this._delegate,e._delegate)}}class v0 extends y0{data(e){const t=this._delegate.data(e);return function wA(n,e){n||At()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ET(e)}where(e,t,r){try{return new rs(this.firestore,jd(this._delegate,function $B(n,e,t){const r=e,i=yT("where",n);return new BB(i,r,t)}(e,t,r)))}catch(i){throw ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,jd(this._delegate,function HB(n,e="asc"){const t=e,r=yT("orderBy",n);return new jB(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,jd(this._delegate,function WB(n){return R("limit",n),new SP("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,jd(this._delegate,function GB(n){return R("limitToLast",n),new SP("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,jd(this._delegate,function zB(...n){return new DP("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,jd(this._delegate,function qB(...n){return new DP("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,jd(this._delegate,function KB(...n){return new AP("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,jd(this._delegate,function ZB(...n){return new AP("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return Ln(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function t2(n){n=S(n,$e);const e=S(n.firestore,ir),t=Cr(e),r=new vp(e);return function fP(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,u){try{const d=yield Vm(i,a,!0),p=new GI(a,d.li),y=p.Gu(d.documents),C=p.applyChanges(y,!1);u.resolve(C.snapshot)}catch(d){const p=op(d,`Failed to execute query '${a} against cache`);u.reject(p)}}),function(i,a,u){return r.apply(this,arguments)})(yield a0(n),e,t);var r})),t.promise}(t,n._query).then(i=>new $d(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function n2(n){n=S(n,$e);const e=S(n.firestore,ir),t=Cr(e),r=new vp(e);return ZR(t,n._query,{source:"server"}).then(i=>new $d(e,r,n,i))}(this._delegate):function e2(n){n=S(n,$e);const e=S(n.firestore,ir),t=Cr(e),r=new vp(e);return TP(n._query),ZR(t,n._query).then(i=>new $d(e,r,n,i))}(this._delegate),t.then(r=>new sM(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HP(e),r=WP(e,i=>new sM(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FP(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class y2{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new v0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new v0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new y2(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new v0(this._firestore,r))})}isEqual(e){return IP(this._delegate,e._delegate)}}class y_ extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Po(this.firestore,e):null}doc(e){try{return new Po(this.firestore,void 0===e?Ft(this._delegate):Ft(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function i2(n,e){const t=S(n.firestore,ir),r=Ft(n),i=vT(n.converter,e);return __(t,[gT(mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Po(this.firestore,t))}isEqual(e){return wn(this._delegate,e._delegate)}withConverter(e){return new y_(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function wp(n){return S(n,he)}class oM{constructor(...e){this._delegate=new oc(...e)}static documentId(){return new oM(Or.keyField().canonicalString())}isEqual(e){return(e=(0,Z.m9)(e))instanceof oc&&this._delegate._internalPath.isEqual(e._internalPath)}}class bp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function u2(){return new YR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bp(e)}static delete(){const e=function l2(){return new f0("deleteField")}();return e._methodName="FieldValue.delete",new bp(e)}static arrayUnion(...e){const t=function c2(...n){return new PB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bp(t)}static arrayRemove(...e){const t=function d2(...n){return new kB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bp(t)}static increment(e){const t=function h2(n){return new FB("increment",n)}(e);return t._methodName="FieldValue.increment",new bp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const v2={Firestore:BP,GeoPoint:fT,Timestamp:_r,Blob:_0,Transaction:$P,WriteBatch:jP,DocumentReference:Po,DocumentSnapshot:y0,Query:rs,QueryDocumentSnapshot:v0,QuerySnapshot:sM,CollectionReference:y_,FieldPath:oM,FieldValue:bp,setLogLevel:function _2(n){!function EA(n){Ao.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function w2(n){(function E2(n,e){n.INTERNAL.registerComponent(new Ja.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},v2)))})(n,(e,t)=>new BP(e,t,new m2)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Gs.Z);var GP=N(6451),wT=N(5363),b2=N(6063);class C2 extends Ki.x{constructor(e=1/0,t=1/0,r=b2.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)d=p;d&&r.splice(0,d+1)}}}var I2=N(3099);function zP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,I2.B)({connector:()=>new C2(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function qP(n,e){return(0,Ni.m)(e)?Er(()=>n,e):Er(()=>n)}var aM=N(9468),Ri=N(5867);class ro{constructor(e){return e}}class Il{constructor(){return(0,Ri.C6)()}}const lM=new f.OlP("angularfire2._apps"),S2={provide:ro,useFactory:function T2(n){return n&&1===n.length?n[0]:new ro((0,Ri.Mq)())},deps:[[new f.FiY,lM]]},D2={provide:Il,deps:[[new f.FiY,lM]]};function A2(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ro(r)}}let R2=(()=>{class n{constructor(t){(0,Ri.KN)("angularfire",ct.q4.full,"core"),(0,Ri.KN)("angularfire",ct.q4.full,"app"),(0,Ri.KN)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[S2,D2]}),n})();function M2(n,...e){return{ngModule:R2,providers:[{provide:lM,useFactory:A2(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,...e]}]}}const N2=(0,ct.u3)(Ri.ZF,!0),KP=new Map,x2={activated:!1,tokenObservers:[]},O2={initialized:!1,enabled:!1};function mi(n){return KP.get(n)||x2}function ma(n,e){KP.set(n,e)}function bT(){return O2}class V2{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new Z.BH,yield function U2(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const is=new Z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function YP(n){if(!mi(n).activated)throw is.create("use-before-activation",{appName:n.name})}function dM(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,a)}catch(T){throw is.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==u.status)throw is.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(T){throw is.create("fetch-parse-error",{originalErrorMessage:T.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:d.attestationToken,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),hM.apply(this,arguments)}function W2(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const E0="firebase-app-check-store";let TT=null;function JP(){return TT||(TT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(is.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(E0,{keyPath:"compositeKey"})}}catch(t){e(is.create("storage-open",{originalErrorMessage:t.message}))}}),TT)}function fM(){return fM=(0,Ce.Z)(function*(n,e){const r=(yield JP()).transaction(E0,"readwrite"),a=r.objectStore(E0).put({compositeKey:n,value:e});return new Promise((u,d)=>{a.onsuccess=p=>{u()},r.onerror=p=>{var y;d(is.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),fM.apply(this,arguments)}const w0=new Es.Yd("@firebase/app-check");function nk(n,e){return(0,Z.hl)()?function K2(n,e){return function XP(n,e){return fM.apply(this,arguments)}(function tk(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{w0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rk(){return bT().enabled}function ik(){return _M.apply(this,arguments)}function _M(){return _M=(0,Ce.Z)(function*(){const n=bT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),_M.apply(this,arguments)}const e$={error:"UNKNOWN_ERROR"};function t$(n){return Z.US.encodeString(JSON.stringify(n),!1)}function ST(n){return yM.apply(this,arguments)}function yM(){return yM=(0,Ce.Z)(function*(n,e=!1){const t=n.app;YP(t);const r=mi(t);let a,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&DT(p)&&(i=p)}if(!e&&i&&DT(i))return{token:i.token};let d,u=!1;if(rk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=dM(W2(t,yield ik()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const p=yield r.exchangeTokenPromise;return yield nk(t,p),ma(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?w0.warn(p.message):w0.error(p),a=p}return i?(d={token:i.token},ma(t,Object.assign(Object.assign({},r),{token:i})),yield nk(t,i)):d=r$(a),u&&ok(t,d),d}),yM.apply(this,arguments)}function EM(n,e){const t=mi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ma(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function sk(n){const{app:e}=n,t=mi(e);let r=t.tokenRefresher;r||(r=function n$(n){const{app:e}=n;return new V2((0,Ce.Z)(function*(){let r;if(r=mi(e).token?yield ST(n,!0):yield ST(n),r.error)throw r.error}),()=>!0,()=>{const t=mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ma(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ok(n,e){const t=mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function DT(n){return n.expireTimeMillis-Date.now()>0}function r$(n){return{token:t$(e$),error:n}}class i${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=mi(this.app);for(const t of e)EM(this.app,t.next);return Promise.resolve()}}const pk="app-check-internal";!function y$(){(0,Pn._registerComponent)(new Ja.wA("app-check",n=>function s$(n,e){return new i$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pk).initialize()})),(0,Pn._registerComponent)(new Ja.wA(pk,n=>function o$(n){return{getToken:e=>ST(n,e),addTokenListener:e=>function vM(n,e,t,r){const{app:i}=n,a=mi(i),u={next:t,error:r,type:e};if(ma(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&DT(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),sk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>sk(n))}(n,"INTERNAL",e),removeTokenListener:e=>EM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pn.registerVersion)("@firebase/app-check","0.5.6")}();class Wd{constructor(){return(0,ct.vb)("app-check")}}"undefined"!=typeof window&&window;var C$=N(127);const mk=new f.OlP("angularfire2.auth.use-emulator"),_k=new f.OlP("angularfire2.auth.settings"),yk=new f.OlP("angularfire2.auth.tenant-id"),vk=new f.OlP("angularfire2.auth.langugage-code"),Ek=new f.OlP("angularfire2.auth.use-device-language"),wk=new f.OlP("angularfire.auth.persistence"),bk=(n,e,t,r,i,a,u,d)=>(0,Ws.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,a&&p.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))p.settings[y]=C;return d&&p.setPersistence(d),p},[t,r,i,a,u,d]);let Ck=(()=>{class n{constructor(t,r,i,a,u,d,p,y,C,T,D,x){const k=new Ki.x,q=kt(void 0).pipe((0,wT.Q)(u.outsideAngular),Er(()=>a.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,ln.U)(()=>(0,Ws.on)(t,a,r)),(0,ln.U)(ie=>bk(ie,a,d,y,C,T,p,D)),zP({bufferSize:1,refCount:!1}));if(jl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=kt(null);else{q.pipe(Ua()).subscribe();const Qe=q.pipe(Er(tt=>tt.getRedirectResult().then(xt=>xt,()=>null)),ct.iC,zP({bufferSize:1,refCount:!1})),Ze=q.pipe(Er(tt=>new Mr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>tt.onAuthStateChanged(Lt=>xt.next(Lt),Lt=>xt.error(Lt),()=>xt.complete()))})))),We=q.pipe(Er(tt=>new Mr.y(xt=>({unsubscribe:a.runOutsideAngular(()=>tt.onIdTokenChanged(Lt=>xt.next(Lt),Lt=>xt.error(Lt),()=>xt.complete()))}))));this.authState=Qe.pipe(qP(Ze),(0,aM.R)(u.outsideAngular),(0,wT.Q)(u.insideAngular)),this.user=Qe.pipe(qP(We),(0,aM.R)(u.outsideAngular),(0,wT.Q)(u.insideAngular)),this.idToken=this.user.pipe(Er(tt=>tt?(0,cr.D)(tt.getIdToken()):kt(null))),this.idTokenResult=this.user.pipe(Er(tt=>tt?(0,cr.D)(tt.getIdTokenResult()):kt(null))),this.credential=(0,GP.T)(Qe,k,this.authState.pipe(xi(tt=>!tt))).pipe((0,ln.U)(tt=>(null==tt?void 0:tt.user)?tt:null),(0,aM.R)(u.outsideAngular),(0,wT.Q)(u.insideAngular))}return(0,Ws.pX)(this,q,a,{spy:{apply:(ie,Qe,Ze)=>{(ie.startsWith("signIn")||ie.startsWith("createUser"))&&Ze.then(We=>k.next(We))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ws.Dh),f.LFG(Ws.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ct.HU),f.LFG(mk,8),f.LFG(_k,8),f.LFG(yk,8),f.LFG(vk,8),f.LFG(Ek,8),f.LFG(wk,8),f.LFG(Wd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ik(n,e){return function T$(n,e=tb.z){return new Mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function TM(n,e){return Ik(n,e).pipe((0,ln.U)(t=>({payload:t,type:"query"})))}function RT(n,e){return TM(n,e).pipe(fs(void 0),Xh(),(0,ln.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const p=i.find(C=>C.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),a}))}function Tk(n,e,t){return RT(n,t).pipe(ps((r,i)=>function D$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function A$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return SM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return SM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),nb(),(0,ln.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function SM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Sk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Dk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ln.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fs(void 0),Xh(),xi(([r,i])=>i.length>0||!r),(0,ln.U)(([r,i])=>i),ct.iC)}auditTrail(e){return this.stateChanges(e).pipe(ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Sk(e);return Tk(this.query,t,this.afs.schedulers.outsideAngular).pipe(ct.iC)}valueChanges(e={}){return TM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ln.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ct.iC)}get(e){return(0,cr.D)(this.query.get(e)).pipe(ct.iC)}add(e){return this.ref.add(e)}doc(e){return new Ak(this.ref.doc(e),this.afs)}}class Ak{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Nk(r,t);return new Dk(i,a,this.afs)}snapshotChanges(){return function S$(n,e){return Ik(n,e).pipe(fs(void 0),Xh(),(0,ln.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ct.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ln.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cr.D)(this.ref.get(e)).pipe(ct.iC)}}class R${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ln.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),xi(t=>t.length>0),ct.iC):RT(this.query,this.afs.schedulers.outsideAngular).pipe(ct.iC)}auditTrail(e){return this.stateChanges(e).pipe(ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Sk(e);return Tk(this.query,t,this.afs.schedulers.outsideAngular).pipe(ct.iC)}valueChanges(e={}){return TM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ln.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ct.iC)}get(e){return(0,cr.D)(this.query.get(e)).pipe(ct.iC)}}const Rk=new f.OlP("angularfire2.enableFirestorePersistence"),Mk=new f.OlP("angularfire2.firestore.persistenceSettings"),M$=new f.OlP("angularfire2.firestore.settings"),N$=new f.OlP("angularfire2.firestore.use-emulator");function Nk(n,e=(t=>t)){return{query:e(n),ref:n}}let DM=(()=>{class n{constructor(t,r,i,a,u,d,p,y,C,T,D,x,k,q,ie,Qe,Ze){this.schedulers=p;const We=(0,Ws.on)(t,d,r),tt=C;T&&bk(We,d,D,k,q,ie,x,Qe),[this.firestore,this.persistenceEnabled$]=(0,Ws.cc)(`${We.name}.firestore`,"AngularFirestore",We.name,()=>{const xt=d.runOutsideAngular(()=>We.firestore());if(a&&xt.settings(a),tt&&xt.useEmulator(...tt),i&&!jl(u)){const Lt=()=>{try{return(0,cr.D)(xt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(on){return"undefined"!=typeof console&&console.warn(on),kt(!1)}};return[xt,d.runOutsideAngular(Lt)]}return[xt,kt(!1)]},[a,tt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=Nk(i,r),d=this.schedulers.ngZone.run(()=>a);return new Dk(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new R$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Ak(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ws.Dh),f.LFG(Ws.xv,8),f.LFG(Rk,8),f.LFG(M$,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ct.HU),f.LFG(Mk,8),f.LFG(N$,8),f.LFG(Ck,8),f.LFG(mk,8),f.LFG(_k,8),f.LFG(yk,8),f.LFG(vk,8),f.LFG(Ek,8),f.LFG(wk,8),f.LFG(Wd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xk=(()=>{class n{constructor(){C$.Z.registerVersion("angularfire",ct.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Rk,useValue:!0},{provide:Mk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[DM]}),n})();const Ok=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,a,u)=>void 0===i.find(d=>a[d]!==u[d]))(t,i,e))};let Pk=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("images").valueChanges({idField:"id"}).pipe((0,ln.U)(r=>Ok(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(DM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),AM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Pk,{provide:Xw,useExisting:Pk}],imports:[[xk]]}),n})(),x$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gi,Co.forChild([{path:"",component:jD}]),Qh,Jh,AM]]}),n})();const kk=new f.OlP("GETS_ALL_TASK_DTO"),Fk=new f.OlP("SETS_TASK_DTO"),Lk=new f.OlP("REMOVES_TASK_DTO");class O${constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const P$={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const Ir="undefined"!=typeof window&&window||{};var MT=(()=>(function(n){n.isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5"}(MT||(MT={})),MT))();let io;function RM(){if(void 0===Ir.document)return"bs4";const n=Ir.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),Ir.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=Ir.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(Ir.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(Ir.document.head.removeChild(n),"bs4"):(Ir.document.head.removeChild(n),"bs5")}function v_(){return void 0===Ir||(void 0===Ir.__theme?(io||(io=RM()),"bs3"===io):"bs3"===Ir.__theme)}function Uk(){return!v_()&&(io||(io=RM()),"bs4"===io)}function b0(){return{isBs3:v_(),isBs4:Uk(),isBs5:!v_()&&!Uk()&&(io||(io=RM()),"bs5"===io)}}function B$(){const n="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(a){const u=this[i];this[i]=a,u!==a&&this[r+n]&&this[r+n].emit(a)}})}}"undefined"==typeof console||console;let MM,H$=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{MM="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){MM=!1}let $k=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?zn(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!MM)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jk=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function G$(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function W$(n){try{return n.frameElement}catch(e){return null}}(function X$(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===Wk(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),a=Wk(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Q$(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==a:"video"===i?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function J$(n){return!function q$(n){return function Z$(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function z$(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function K$(n){return function Y$(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Hk(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($k))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hk(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Wk(n){if(!Hk(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function Gk(n){return null!=n&&"false"!=`${n}`}class ej{constructor(e,t,r,i,a=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Va.q)(1)).subscribe(e)}}let tj=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new ej(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jk),f.LFG(f.R0b),f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nj=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=Gk(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=Gk(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(tj),f.Y36(ae))},n.\u0275dir=f.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[f.TTD]}),n})(),zk=(()=>{class n{static forRoot(){return{ngModule:n,providers:[H$,$k,jk]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Gi]]}),n})();var rj=N(1144);const ij=["addListener","removeListener"],sj=["addEventListener","removeEventListener"],oj=["on","off"];function NT(n,e,t,r){if((0,Ni.m)(t)&&(r=t,t=void 0),r)return NT(n,e,t).pipe(Na(r));const[i,a]=function uj(n){return(0,Ni.m)(n.addEventListener)&&(0,Ni.m)(n.removeEventListener)}(n)?sj.map(u=>d=>n[u](e,d,t)):function aj(n){return(0,Ni.m)(n.addListener)&&(0,Ni.m)(n.removeListener)}(n)?ij.map(qk(n,e)):function lj(n){return(0,Ni.m)(n.on)&&(0,Ni.m)(n.off)}(n)?oj.map(qk(n,e)):[];if(!i&&(0,rj.z)(n))return(0,Jn.z)(u=>NT(u,e,t))((0,hs.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Mr.y(u=>{const d=(...p)=>u.next(1<p.length?p:p[0]);return i(d),()=>a(d)})}function qk(n,e){return t=>r=>n[t](e,r)}var cj=N(4408);const C0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=C0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new Pc.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=C0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=C0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var hj=N(7565);const pj=new class fj extends hj.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class dj extends cj.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=C0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(C0.cancelAnimationFrame(t),e._scheduled=void 0)}});var xT=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top"}(xT||(xT={})),xT))(),I0=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top"}(I0||(I0={})),I0))();function Cp(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function NM(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===Cp(t,"position")?NM(t):t:r?r.ownerDocument.documentElement:document.documentElement}function xM(n){return null!==n.parentNode?xM(n.parentNode):n}function OT(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);const u=a.commonAncestorContainer;if(n!==u&&e!==u||r.contains(i))return function gj(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||NM(n.firstElementChild)===n)}(u)?u:NM(u);const d=xM(n);return d.host?OT(d.host,e):OT(n,xM(e).host)}function Kk(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===Cp(e,"transform");)e=e.parentElement;return e||document.documentElement}function Zk(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function Yk(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function Qk(n){const e=n.body,t=n.documentElement;return{height:Yk("Height",e,t),width:Yk("Width",e,t)}}function T0(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function Tr(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function Jk(n){const e=n.getBoundingClientRect();if(!(e&&Tr(e.top)&&Tr(e.left)&&Tr(e.bottom)&&Tr(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?Qk(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||Tr(e.right)&&Tr(t.left)&&e.right-t.left||0,a=(null==r?void 0:r.height)||n.clientHeight||Tr(e.bottom)&&Tr(t.top)&&e.bottom-t.top||0;let u=n.offsetWidth-i,d=n.offsetHeight-a;if(u||d){const p=Cp(n);u-=Zk(p,"x"),d-=Zk(p,"y"),t.width-=u,t.height-=d}return T0(t)}function OM(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function PM(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=Cp(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:PM(OM(n))}function kM(n,e,t=!1){var r,i,a,u,d,p;const y="HTML"===e.nodeName,C=Jk(n),T=Jk(e),x=(PM(n),Cp(e)),k=parseFloat(x.borderTopWidth),q=parseFloat(x.borderLeftWidth);t&&y&&(T.top=Math.max(null!==(r=T.top)&&void 0!==r?r:0,0),T.left=Math.max(null!==(i=T.left)&&void 0!==i?i:0,0));const ie=T0({top:(null!==(a=C.top)&&void 0!==a?a:0)-(null!==(u=T.top)&&void 0!==u?u:0)-k,left:(null!==(d=C.left)&&void 0!==d?d:0)-(null!==(p=T.left)&&void 0!==p?p:0)-q,width:C.width,height:C.height});if(ie.marginTop=0,ie.marginLeft=0,y){const Qe=parseFloat(x.marginTop),Ze=parseFloat(x.marginLeft);Tr(ie.top)&&(ie.top-=k-Qe),Tr(ie.bottom)&&(ie.bottom-=k-Qe),Tr(ie.left)&&(ie.left-=q-Ze),Tr(ie.right)&&(ie.right-=q-Ze),ie.marginTop=Qe,ie.marginLeft=Ze}return ie}function Xk(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function e1(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===Cp(n,"position")||e1(OM(n)))}function FM(n,e,t=0,r,i=!1){let a={top:0,left:0};const u=i?Kk(n):OT(n,e);if("viewport"===r)a=function _j(n,e=!1){const t=n.ownerDocument.documentElement,r=kM(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),a=Math.max(t.clientHeight,window.innerHeight||0),u=e?0:Xk(t),d=e?0:Xk(t,"left");return T0({top:u-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:d-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:a})}(u,i);else{let d;"scrollParent"===r?(d=PM(OM(e)),"BODY"===d.nodeName&&(d=n.ownerDocument.documentElement)):d="window"===r?n.ownerDocument.documentElement:r;const p=kM(d,u,i);if(p&&"HTML"===d.nodeName&&!e1(u)){const{height:y,width:C}=Qk(n.ownerDocument);Tr(a.top)&&Tr(p.top)&&Tr(p.marginTop)&&(a.top+=p.top-p.marginTop),Tr(a.top)&&(a.bottom=Number(y)+Number(p.top)),Tr(a.left)&&Tr(p.left)&&Tr(p.marginLeft)&&(a.left+=p.left-p.marginLeft),Tr(a.top)&&(a.right=Number(C)+Number(p.left))}else p&&(a=p)}return Tr(a.left)&&(a.left+=t),Tr(a.top)&&(a.top+=t),Tr(a.right)&&(a.right-=t),Tr(a.bottom)&&(a.bottom-=t),a}function yj({width:n,height:e}){return n*e}function t1(n,e,t,r,i=["top","bottom","right","left"],a="viewport",u=0){var d,p,y,C,T,D,x,k,q,ie,Qe,Ze;if(-1===n.indexOf("auto"))return n;const We=FM(t,r,u,a),tt={top:{width:null!==(d=null==We?void 0:We.width)&&void 0!==d?d:0,height:(null!==(p=null==e?void 0:e.top)&&void 0!==p?p:0)-(null!==(y=null==We?void 0:We.top)&&void 0!==y?y:0)},right:{width:(null!==(C=null==We?void 0:We.right)&&void 0!==C?C:0)-(null!==(T=null==e?void 0:e.right)&&void 0!==T?T:0),height:null!==(D=null==We?void 0:We.height)&&void 0!==D?D:0},bottom:{width:null!==(x=null==We?void 0:We.width)&&void 0!==x?x:0,height:(null!==(k=null==We?void 0:We.bottom)&&void 0!==k?k:0)-(null!==(q=null==e?void 0:e.bottom)&&void 0!==q?q:0)},left:{width:(null!==(ie=e.left)&&void 0!==ie?ie:0)-(null!==(Qe=null==We?void 0:We.left)&&void 0!==Qe?Qe:0),height:null!==(Ze=null==We?void 0:We.height)&&void 0!==Ze?Ze:0}},xt=Object.keys(tt).map(lr=>Object.assign(Object.assign({position:lr},tt[lr]),{area:yj(tt[lr])})).sort((lr,oi)=>oi.area-lr.area);let Lt=xt.filter(({width:lr,height:oi})=>lr>=t.clientWidth&&oi>=t.clientHeight);Lt=Lt.filter(({position:lr})=>i.some(oi=>oi===lr));const on=Lt.length>0?Lt[0].position:xt[0].position,Zn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${b0().isBs5?I0[on]:on}`),on+(Zn?`-${Zn}`:"")}const PT=(n,e=0)=>n?parseFloat(n):e;function n1(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=PT(null==t?void 0:t.marginTop)+PT(null==t?void 0:t.marginBottom),i=PT(null==t?void 0:t.marginLeft)+PT(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function r1(n,e,t){return kM(e,t?Kk(n):OT(n,e),t)}function LM(n,e,t){var r,i,a;const u=t.split(" ")[0],d=n1(n),p={width:d.width,height:d.height},y=-1!==["right","left"].indexOf(u),C=y?"top":"left",T=y?"left":"top",D=y?"height":"width",x=y?"width":"height";return p[C]=(null!==(r=e[C])&&void 0!==r?r:0)+e[D]/2-d[D]/2,p[T]=u===T?(null!==(i=e[T])&&void 0!==i?i:0)-d[x]:null!==(a=e[function Ej(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(T)])&&void 0!==a?a:0,p}function s1(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const bj={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function kT(n,e){return!!b0().isBs5&&bj[e].includes(n)}function o1(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function mj(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function Tj(n){var e,t,r,i,a,u;let d=n.offsets.target;const p=n.instance.target.querySelector(".arrow");if(!p)return n;const y=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),C=y?"height":"width",T=y?"Top":"Left",D=T.toLowerCase(),x=y?"left":"top",k=y?"bottom":"right",q=n1(p)[C],ie=n.placement.split(" ")[1];(null!==(e=n.offsets.host[k])&&void 0!==e?e:0)-q<(null!==(t=d[D])&&void 0!==t?t:0)&&(d[D]-=(null!==(r=d[D])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[k])&&void 0!==i?i:0)-q)),Number(n.offsets.host[D])+Number(q)>(null!==(a=d[k])&&void 0!==a?a:0)&&(d[D]+=Number(n.offsets.host[D])+Number(q)-Number(d[k])),d=T0(d);const Qe=Cp(n.instance.target),Ze=parseFloat(Qe[`margin${T}`])||0,We=parseFloat(Qe[`border${T}Width`])||0;let tt;if(ie){const Lt=parseFloat(Qe.borderRadius)||0,on=Number(Ze+We+Lt);tt=D===ie?Number(n.offsets.host[D])+on:Number(n.offsets.host[D])+Number(n.offsets.host[C]-on)}else tt=Number(n.offsets.host[D])+Number(n.offsets.host[C]/2-q/2);let xt=tt-(null!==(u=d[D])&&void 0!==u?u:0)-Ze-We;return xt=Math.max(Math.min(d[C]-(q+5),xt),0),n.offsets.arrow={[D]:Math.round(xt),[x]:""},n.instance.arrow=p,n}function Sj(n){if(n.offsets.target=T0(n.offsets.target),!s1(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),LM(n.instance.target,n.offsets.host,n.placement)),n;const e=FM(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const d=t1("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),p=[t,d];return p.forEach((y,C)=>{var T,D,x,k,q,ie,Qe,Ze,We,tt,xt,Lt,on,Zn,lr,oi;if(t!==y||p.length===C+1)return;t=n.placement.split(" ")[0];const pw="left"===t&&Math.floor(null!==(T=n.offsets.target.right)&&void 0!==T?T:0)>Math.floor(null!==(D=n.offsets.host.left)&&void 0!==D?D:0)||"right"===t&&Math.floor(null!==(x=n.offsets.target.left)&&void 0!==x?x:0)<Math.floor(null!==(k=n.offsets.host.right)&&void 0!==k?k:0)||"top"===t&&Math.floor(null!==(q=n.offsets.target.bottom)&&void 0!==q?q:0)>Math.floor(null!==(ie=n.offsets.host.top)&&void 0!==ie?ie:0)||"bottom"===t&&Math.floor(null!==(Qe=n.offsets.target.top)&&void 0!==Qe?Qe:0)<Math.floor(null!==(Ze=n.offsets.host.bottom)&&void 0!==Ze?Ze:0),ah=Math.floor(null!==(We=n.offsets.target.left)&&void 0!==We?We:0)<Math.floor(null!==(tt=e.left)&&void 0!==tt?tt:0),kl=Math.floor(null!==(xt=n.offsets.target.right)&&void 0!==xt?xt:0)>Math.floor(null!==(Lt=e.right)&&void 0!==Lt?Lt:0),gw=Math.floor(null!==(on=n.offsets.target.top)&&void 0!==on?on:0)<Math.floor(null!==(Zn=e.top)&&void 0!==Zn?Zn:0),mw=Math.floor(null!==(lr=n.offsets.target.bottom)&&void 0!==lr?lr:0)>Math.floor(null!==(oi=e.bottom)&&void 0!==oi?oi:0),Nt="left"===t&&ah||"right"===t&&kl||"top"===t&&gw||"bottom"===t&&mw,Ut=-1!==["top","bottom"].indexOf(t),Jt=Ut&&"left"===r&&ah||Ut&&"right"===r&&kl||!Ut&&"left"===r&&gw||!Ut&&"right"===r&&mw;(pw||Nt||Jt)&&((pw||Nt)&&(t=p[C+1]),Jt&&(r=function wj(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),LM(n.instance.target,n.offsets.host,n.placement)))}),n}function Aj(n){var e;if(!s1(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:a,[t]:u}=r;r.top="",r.left="",r[t]="";const d=FM(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=a,r[t]=u;const y={primary(C){var T,D,x,k;let q=n.offsets.target[C];return(null!==(T=n.offsets.target[C])&&void 0!==T?T:0)<(null!==(D=d[C])&&void 0!==D?D:0)&&(q=Math.max(null!==(x=n.offsets.target[C])&&void 0!==x?x:0,null!==(k=d[C])&&void 0!==k?k:0)),{[C]:q}},secondary(C){var T,D,x,k;const q="right"===C,ie=q?"left":"top";let Ze=n.offsets.target[ie];return(null!==(T=n.offsets.target[C])&&void 0!==T?T:0)>(null!==(D=d[C])&&void 0!==D?D:0)&&(Ze=Math.min(null!==(x=n.offsets.target[ie])&&void 0!==x?x:0,(null!==(k=d[C])&&void 0!==k?k:0)-n.offsets.target[q?"width":"height"])),{[ie]:Ze}}};return["left","right","top","bottom"].forEach(C=>{const T=-1!==["left","top","start"].indexOf(C)?y.primary:y.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),T(C))}),n}function Rj(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:a,target:u}=n.offsets,d=-1!==["bottom","top"].indexOf(r),p=d?"left":"top",y=d?"width":"height",C={start:{[p]:a[p]},end:{[p]:(null!==(e=a[p])&&void 0!==e?e:0)+a[y]-u[y]}};n.offsets.target=Object.assign(Object.assign({},u),{[p]:p===i?C.start[p]:C.end[p]})}return n}const Nj=new class Mj{position(e,t){return this.offset(e,t)}offset(e,t){return r1(t,e)}positionElements(e,t,r,i,a){const u=[Sj,Rj,Aj,Tj],p=function Dj(n,e,t,r){if(!n||!e)return;const i=r1(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const a=!!t.match(/auto/g);let u=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const d=u.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return d&&(u=d[1]+(d[2]?` ${d[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(u)&&(u="auto"),u=t1(u,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:LM(n,i,u),host:i,arrow:void 0},positionFixed:!1,placement:u,placementAuto:a}}(t,e,xT[r],a);if(p)return u.reduce((y,C)=>C(y),p)}};function xj(n,e,t,r,i,a){const u=Nj.positionElements(n,e,t,r,i);if(!u)return;const d=function vj(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(u);o1(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${d.left}px, ${d.top}px, 0px)`},a),u.instance.arrow&&o1(u.instance.arrow,u.offsets.arrow,a),function Ij(n,e){const t=n.instance.target;let r=t.className;const i=b0().isBs5?I0[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function Cj(n){return b0().isBs5?kT(n,"end")?"ms-2":kT(n,"start")?"me-2":kT(n,"top")?"mb-2":kT(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(u,a)}let VM=(()=>{class n{constructor(t,r,i){this.update$$=new Ki.x,this.positionElements=new Map,this.isDisabled=!1,zn(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,GP.T)(NT(window,"scroll",{passive:!0}),NT(window,"resize",{passive:!0}),kt(0,pj),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(a=>{xj(FT(a.target),FT(a.element),a.attachment,a.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(FT(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(FT(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.R0b),f.LFG(f.FYo),f.LFG(f.Lbi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FT(n){return"string"==typeof n?document.querySelector(n):n instanceof f.SBq?n.nativeElement:null!=n?n:null}class S0{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class Oj{constructor(e,t,r,i,a,u,d,p){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=a,this._ngZone=u,this._applicationRef=d,this._posService=p,this.onBeforeShow=new f.vpe,this.onShown=new f.vpe,this.onBeforeHide=new f.vpe,this.onHidden=new f.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=f.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof f.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,a,u,d;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const p=this._componentRef.location.nativeElement;return null===(t=p.parentNode)||void 0===t||t.removeChild(p),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(a=this._contentRef)||void 0===a?void 0:a.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(d=null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)||void 0===d||d.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=u=>{e.show?e.show(u):this.show(u),u()};return this._renderer&&(this._unregisterListenersFn=function k$(n,e){const t=function Vk(n,e=P$){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(a=>a.split(":")).map(a=>{const u=e[a[0]]||a;return new O$(u[0],u[1])}),i=r.filter(a=>a.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],a=[],u=()=>{a.forEach(d=>i.push(d())),a.length=0};return t.forEach(d=>{const p=d.open===d.close,y=p?e.toggle:e.show;if(!p&&d.close&&e.hide){const C=n.listen(r,d.close,e.hide);a.push(()=>C)}y&&i.push(n.listen(r,d.open,()=>y(u)))}),()=>{i.forEach(d=>d())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:u=>{this.isShown?r():i(u)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function F$(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function L$(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new S0([]);if(e instanceof f.Rgc){if(this._viewContainerRef){const u=this._viewContainerRef.createEmbeddedView(e,t);return u.markForCheck(),new S0([u.rootNodes],u)}const a=e.createEmbeddedView({});return this._applicationRef.attachView(a),new S0([a.rootNodes],a)}if("function"==typeof e){const a=this._componentFactoryResolver.resolveComponentFactory(e),u=f.zs3.create({providers:this._providers,parent:this._injector}),d=a.create(u);return Object.assign(d.instance,r),this._applicationRef.attachView(d.hostView),new S0([[d.location.nativeElement]],d.hostView,d)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new S0([i])}}let UM=(()=>{class n{constructor(t,r,i,a,u){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=a,this._applicationRef=u}createLoader(t,r,i){return new Oj(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f._Vd),f.LFG(f.R0b),f.LFG(f.zs3),f.LFG(VM),f.LFG(f.z2F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pj=["*"];let a1=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),l1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const LT={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},kj=new f.OlP("override-default-config");let Fj=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,v_()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var r;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var r,i;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(r=this.bsModalService)||void 0===r?void 0:r.getModalsCount())&&(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,v_()?"in":"show"),setTimeout(()=>{var t,r;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(r=this.bsModalService)||void 0===r||r.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(l1),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275cmp=f.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&f.NdJ("mousedown",function(a){return r.onClickStarted(a)})("click",function(a){return r.onClickStop(a)})("popstate",function(){return r.onPopState()},!1,f.Jf7)("keydown.esc",function(a){return r.onEsc(a)},!1,f.Jf7),2&t&&f.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:Pj,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(f.F$t(),f.TgZ(0,"div",0)(1,"div",1),f.Hsn(2),f.qZA()()),2&t&&f.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},directives:[nj],encapsulation:2}),n})(),Lj=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),v_()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class $${static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=Ir),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function U$(){const n=b0(),e=Object.keys(n).find(t=>n[t]);return MT[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275cmp=f.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),Vj=1,$M=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new f.vpe,this.onShown=new f.vpe,this.onHide=new f.vpe,this.onHidden=new f.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},LT,i):LT}show(t,r){this.modalsCount++,this._createLoaders();const i=(null==r?void 0:r.id)||Vj++;return this.config=this.modalDefaultOption?Object.assign({},LT,this.modalDefaultOption,r):Object.assign({},LT,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(Lj).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var r;const i=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const d of this.config.providers)i.provide(d);const a=new a1,u=i.provide({provide:l1,useValue:this.config}).provide({provide:a1,useValue:a}).attach(Fj).to("body");return a.hide=()=>{var d;return null===(d=u.instance)||void 0===d?void 0:d.hide()},a.setClass=d=>{u.instance&&(u.instance.config.class=d)},a.onHidden=new f.vpe,a.onHide=new f.vpe,this.copyEvent(i.onBeforeHide,a.onHide),this.copyEvent(i.onHidden,a.onHidden),u.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),u.instance&&(u.instance.level=this.getModalsCount(),a.content=i.getInnerComponent(),a.id=null===(r=u.instance.config)||void 0===r?void 0:r.id),a}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(a=>{var u;return(null===(u=a.instance)||void 0===u?void 0:u.config.id)===t}),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>{var a;return(null===(a=i.instance)||void 0===a?void 0:a.config.id)===t});r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,a)=>{i.instance&&(i.instance.level=a+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(UM),f.LFG(kj,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();zk.forRoot();let Uj=(()=>{class n{static forRoot(){return{ngModule:n,providers:[$M,UM,VM]}}static forChild(){return{ngModule:n,providers:[$M,UM,VM]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[zk]]}),n})();var jM=N(655);function Bj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).close()}),f.TgZ(1,"span",3),f._uU(2,"\xd7"),f.qZA(),f.TgZ(3,"span",4),f._uU(4,"Close"),f.qZA()()}}function $j(n,e){if(1&n&&(f.TgZ(0,"div",1),f.YNc(1,Bj,5,0,"ng-template",0),f.Hsn(2),f.qZA()),2&n){const t=f.oxw();f.Tol("alert alert-"+t.type),f.Q6J("ngClass",t.classes),f.xp6(1),f.Q6J("ngIf",t.dismissible)}}const jj=["*"];let u1=(()=>{class n{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hj=(()=>{class n{constructor(t,r){this.changeDetection=r,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new f.vpe,this.onClosed=new f.vpe,this.classes="",this.dismissibleChange=new f.vpe,Object.assign(this,t),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){!this.isOpen||(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(u1),f.Y36(f.sBO))},n.\u0275cmp=f.Xpm({type:n,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:jj,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(t,r){1&t&&(f.F$t(),f.YNc(0,$j,3,4,"ng-template",0)),2&t&&f.Q6J("ngIf",r.isOpen)},directives:[ti,Ms],encapsulation:2,changeDetection:0}),(0,jM.gn)([B$(),(0,jM.w6)("design:type",Object)],n.prototype,"dismissible",void 0),n})(),Wj=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Gi]]}),n})();function Gj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"alert",4),f.NdJ("onClosed",function(){const a=f.CHM(t).$implicit;return f.oxw().onClosed(a)}),f._uU(2),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(1),f.Q6J("type",t.type)("dismissOnTimeout",t.timeout),f.xp6(1),f.hij("",t.msg," ")}}function zj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",12)(1,"input",13),f.NdJ("change",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().onTasksChecked(i)}),f.qZA(),f._uU(2),f.qZA()}if(2&n){const t=f.oxw().$implicit;f.xp6(2),f.hij(" ",t.task," ")}}function qj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"input",14),f.NdJ("change",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().onTasksChecked(i)}),f.qZA(),f._uU(2),f.qZA()}if(2&n){const t=f.oxw().$implicit;f.xp6(2),f.hij(" ",t.task," ")}}function Kj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",5),f.YNc(1,zj,3,1,"div",6),f.YNc(2,qj,3,1,"div",7),f.TgZ(3,"div",8)(4,"button",9),f._uU(5," OOO "),f.qZA(),f.TgZ(6,"ul",10)(7,"li")(8,"a",11),f.NdJ("click",function(){const a=f.CHM(t).$implicit,u=f.oxw(),d=f.MAs(5);return u.openModal(d,a.id)}),f._uU(9,"Delete"),f.qZA()()()()()}if(2&n){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",t.done),f.xp6(1),f.Q6J("ngIf",!t.done)}}function Zj(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",15)(1,"p"),f._uU(2,"Do you want to delete?"),f.qZA(),f.TgZ(3,"button",16),f.NdJ("click",function(){f.CHM(t);const i=f.oxw();return i.onTaskRemoveed(),i.confirm()}),f._uU(4,"Delete"),f.qZA(),f.TgZ(5,"button",17),f.NdJ("click",function(){return f.CHM(t),f.oxw().decline()}),f._uU(6,"No"),f.qZA()()}}let Yj=(()=>{class n{constructor(t,r,i,a){this.modalService=t,this._getsAllTaskDto=r,this._setsTaskDto=i,this._removesTaskDto=a,this.currentTaskId="",this.tasks$=this._getsAllTaskDto.getAll().pipe((0,ln.U)(u=>u.sort((d,p)=>d.created-p.created))),this.alert$=new ci(!1),this.alerts=[{}]}onClosed(t){this.alerts=this.alerts.filter(r=>r!==t)}onTasksChecked(t){this._setsTaskDto.set({done:!t.done,task:t.task,id:t.id,created:t.created}),t.done?this.alert$.next(!0):(this.alerts.push({type:"success",msg:"Well done, you completed your task!",timeout:2500}),this.alert$.next(!1))}onTaskRemoveed(){this._removesTaskDto.remove(this.currentTaskId)}openModal(t,r){this.currentTaskId=r,this.modalRef=this.modalService.show(t,{class:"modal-sm"})}confirm(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($M),f.Y36(kk),f.Y36(Fk),f.Y36(Lk))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-task-list"]],decls:6,vars:4,consts:[[1,"container","mb-","mt-3","p-25"],[4,"ngFor","ngForOf"],["class","form-check-inline d-flex flex-column m-3 ",4,"ngFor","ngForOf"],["template",""],[3,"type","dismissOnTimeout","onClosed"],[1,"form-check-inline","d-flex","flex-column","m-3"],["class","text-decoration-line-through",4,"ngIf"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton2","data-bs-toggle","dropdown","aria-expanded","false",1,"position-absolute","bottom-0","end-0","btn","btn-sm","text-white","dropdown-toggle"],["aria-labelledby","dropdownMenuButton2",1,"dropdown-menu","dropdown-menu-light"],[1,"dropdown-item","active",3,"click"],[1,"text-decoration-line-through"],["type","checkbox","value","","checked","",1,"form-check-input","rounded-circle",3,"change"],["type","checkbox","value","",1,"form-check-input","hover","rounded-circle","hover",3,"change"],[1,"modal-body","text-center"],["type","button",1,"btn","text-white","mt-3","m-3",3,"click"],["type","button",1,"btn","bg-white","border-dark","mt-3","m-3",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,Gj,3,3,"div",1),f.YNc(2,Kj,10,2,"div",2),f.ALo(3,"async"),f.YNc(4,Zj,7,0,"ng-template",null,3,f.W1O),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngForOf",r.alerts),f.xp6(1),f.Q6J("ngForOf",f.lcZ(3,2,r.tasks$)))},directives:[Rr,Hj,ti],pipes:[Gp],encapsulation:2,changeDetection:0}),n})(),c1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ip=(()=>{class n extends c1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Tl=new f.OlP("NgValueAccessor"),Xj={provide:Tl,useExisting:(0,f.Gpc)(()=>UT),multi:!0},tH=new f.OlP("CompositionEventMode");let UT=(()=>{class n extends c1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function eH(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(tH,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([Xj]),f.qOj]}),n})();const $i=new f.OlP("NgValidators"),zd=new f.OlP("NgAsyncValidators");function w1(n){return null!=n}function b1(n){const e=(0,f.QGY)(n)?(0,cr.D)(n):n;return(0,f.CqO)(e),e}function C1(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function I1(n,e){return e.map(t=>t(n))}function T1(n){return n.map(e=>function rH(n){return!n.validate}(e)?e:t=>e.validate(t))}function HM(n){return null!=n?function S1(n){if(!n)return null;const e=n.filter(w1);return 0==e.length?null:function(t){return C1(I1(t,e))}}(T1(n)):null}function WM(n){return null!=n?function D1(n){if(!n)return null;const e=n.filter(w1);return 0==e.length?null:function(t){return function Qj(...n){const e=(0,xc.jO)(n),{args:t,keys:r}=zo(n),i=new Mr.y(a=>{const{length:u}=t;if(!u)return void a.complete();const d=new Array(u);let p=u,y=u;for(let C=0;C<u;C++){let T=!1;(0,hs.Xf)(t[C]).subscribe((0,rr.x)(a,D=>{T||(T=!0,y--),d[C]=D},()=>p--,void 0,()=>{(!p||!T)&&(y||a.next(r?Nh(r,d):d),a.complete())}))}});return e?i.pipe(Na(e)):i}(I1(t,e).map(b1)).pipe((0,ln.U)(C1))}}(T1(n)):null}function A1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function R1(n){return n._rawValidators}function M1(n){return n._rawAsyncValidators}function GM(n){return n?Array.isArray(n)?n:[n]:[]}function $T(n,e){return Array.isArray(n)?n.includes(e):n===e}function N1(n,e){const t=GM(e);return GM(n).forEach(i=>{$T(t,i)||t.push(i)}),t}function x1(n,e){return GM(e).filter(t=>!$T(n,t))}class O1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class qd extends O1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ss extends O1{get formDirective(){return null}get path(){return null}}class P1{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let k1=(()=>{class n extends P1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(qd,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),F1=(()=>{class n extends P1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ss,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function D0(n,e){KM(n,e),e.valueAccessor.writeValue(n.value),function dH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&V1(n,e)})}(n,e),function fH(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&V1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cH(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function WT(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function GT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KM(n,e){const t=R1(n);null!==e.validator?n.setValidators(A1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=M1(n);null!==e.asyncValidator?n.setAsyncValidators(A1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();GT(e._rawValidators,i),GT(e._rawAsyncValidators,i)}function zT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=R1(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=M1(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return GT(e._rawValidators,r),GT(e._rawAsyncValidators,r),t}function V1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function QM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const A0="VALID",qT="INVALID",E_="PENDING",R0="DISABLED";function XM(n){return(KT(n)?n.validators:n)||null}function j1(n){return Array.isArray(n)?HM(n):n||null}function eN(n,e){return(KT(e)?e.asyncValidators:n)||null}function H1(n){return Array.isArray(n)?WM(n):n||null}function KT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const W1=n=>n instanceof ZT,tN=n=>n instanceof YT;function G1(n){return W1(n)?n.value:n.getRawValue()}function z1(n,e){const t=tN(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function q1(n,e){tN(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class nN{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=j1(this._rawValidators),this._composedAsyncValidatorFn=H1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===A0}get invalid(){return this.status===qT}get pending(){return this.status==E_}get disabled(){return this.status===R0}get enabled(){return this.status!==R0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=j1(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=H1(e)}addValidators(e){this.setValidators(N1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(N1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(x1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(x1(e,this._rawAsyncValidators))}hasValidator(e){return $T(this._rawValidators,e)}hasAsyncValidator(e){return $T(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=E_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=R0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=A0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===A0||this.status===E_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?R0:A0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=E_,this._hasOwnPendingAsyncValidator=!0;const t=b1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function _H(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=tN(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof vH)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?R0:this.errors?qT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(E_)?E_:this._anyControlsHaveStatus(qT)?qT:A0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){KT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ZT extends nN{constructor(e=null,t,r){super(XM(t),eN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),KT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){QM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){QM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class YT extends nN{constructor(e,t,r){super(XM(t),eN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){q1(this,e),Object.keys(e).forEach(r=>{z1(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=G1(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class vH extends nN{constructor(e,t,r){super(XM(t),eN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){q1(this,e),e.forEach((r,i)=>{z1(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>G1(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let J1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),eF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const iN=new f.OlP("NgModelWithFormControlWarning"),AH={provide:ss,useExisting:(0,f.Gpc)(()=>QT)};let QT=(()=>{class n extends ss{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return D0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){WT(t.control||null,t,!1),QM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function $1(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(WT(r||null,t),W1(i)&&(D0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function U1(n,e){KM(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function pH(n,e){return zT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KM(this.form,this),this._oldForm&&zT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($i,10),f.Y36(zd,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([AH]),f.qOj,f.TTD]}),n})();const NH={provide:qd,useExisting:(0,f.Gpc)(()=>aN)};let aN=(()=>{class n extends qd{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function YM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===UT?t=a:function mH(n){return Object.getPrototypeOf(n.constructor)===Ip}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function ZM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function HT(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ss,13),f.Y36($i,10),f.Y36(zd,10),f.Y36(Tl,10),f.Y36(iN,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([NH]),f.qOj,f.TTD]}),n})(),qH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[eF]]}),n})(),KH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iN,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[qH]}),n})();const mF=new f.OlP("ADDS_TASK_DTO");let _F=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this.router=r,this.createTask=new YT({task:new ZT,id:new ZT})}onCreateTaskSubmited(t){var r,i;t.invalid||(this._addsTaskDto.add({task:null===(r=t.get("task"))||void 0===r?void 0:r.value,done:!1,id:null===(i=t.get("id"))||void 0===i?void 0:i.value,created:Date.now()}),this.createTask.reset(),this.router.navigate(["/tasks"]))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(mF),f.Y36(Ci))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-add-task"]],decls:8,vars:1,consts:[[1,"container","mb-5","mt-5","p-25","m-20"],[1,"form-floating","w-50",3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Type your task here","id","floatingTextarea2",1,"form-control",2,"height","100px"],["for","floatingTextarea2"],["type","submit","value","Add task",1,"btn","text-white","mt-3","m-3"],["routerLink","/","role","button",1,"btn","bg-white","border-dark","mt-3","m-3"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"form",1),f.NdJ("ngSubmit",function(){return r.onCreateTaskSubmited(r.createTask)}),f._UZ(2,"input",2),f.TgZ(3,"label",3),f._uU(4,"Type your task here:"),f.qZA(),f._UZ(5,"input",4),f.TgZ(6,"a",5),f._uU(7,"Cancel"),f.qZA()()()),2&t&&(f.xp6(1),f.Q6J("formGroup",r.createTask))},directives:[J1,F1,QT,UT,k1,aN,Yh],encapsulation:2,changeDetection:0}),n})(),ZH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-task-list-page"]],decls:3,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-task-list")(1,"lib-add-task")(2,"lib-images")},directives:[Yj,_F,jy],encapsulation:2,changeDetection:0}),n})(),YH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[u1],imports:[[Gi,Wj.forRoot(),Uj.forRoot()]]}),n})(),N0=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks-list").add(t)}getAll(t){return this._client.collection("tasks-list").valueChanges({idField:"id"}).pipe((0,ln.U)(r=>Ok(r,t)))}set(t){this._client.doc("tasks-list/"+t.id).update(t)}remove(t){this._client.doc("tasks-list/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(DM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),dN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[N0,{provide:mF,useExisting:N0},{provide:kk,useExisting:N0},{provide:Fk,useExisting:N0},{provide:Lk,useExisting:N0}],imports:[[xk]]}),n})(),yF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gi,KH,Co]]}),n})(),QH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gi,dN,Co.forChild([{path:"",component:ZH}]),YH,Jh,AM,yF,Qh]]}),n})(),JH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-add-task-page"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-add-task")(1,"lib-images")},directives:[_F,jy],encapsulation:2,changeDetection:0}),n})(),XH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gi,Co.forChild([{path:"",component:JH}]),yF,dN,Jh,AM,Qh]]}),n})();const eW=[{path:"",loadChildren:()=>x$},{path:"tasks",loadChildren:()=>QH},{path:"add-task",loadChildren:()=>XH}];let tW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Co.forRoot(eW)],Co]}),n})(),nW=(()=>{class n{constructor(){this.today=Date.now()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-date"]],decls:6,vars:4,consts:[[1,"container","border-bottom","py-4","mb-5"],[1,"d-inline","fs-3","fw-bold"],[1,"d-inline","fs-5"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"p",1),f._uU(2," TODAY "),f.qZA(),f.TgZ(3,"p",2),f._uU(4),f.ALo(5,"date"),f.qZA()()),2&t&&(f.xp6(4),f.hij(" ",f.xi3(5,1,r.today,"fullDate"),""))},pipes:[ph],encapsulation:2,changeDetection:0}),n})(),rW=(()=>{class n{constructor(){this.title="todo-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"container-flex","fs-3","text-white","header"],["routerLink","",1,"text-decoration-none","text-white","fw-bold"],[1,"container-flex"]],template:function(t,r){1&t&&(f.TgZ(0,"header")(1,"div",0)(2,"a",1),f._uU(3,"OK TO DO APP"),f.qZA()()(),f._UZ(4,"lib-date"),f.TgZ(5,"div",2),f._UZ(6,"router-outlet"),f.qZA())},directives:[Yh,nW,pu],styles:[".header[_ngcontent-%COMP%]{background-color:navy;padding:8px 80px;font-family:Verdana,Geneva,Tahoma,sans-serif}"]}),n})();const hN_firebase={projectId:"todo-app-93ce9",appId:"1:866611904544:web:b47d7fa825fb1fa286fc45",storageBucket:"todo-app-93ce9.appspot.com",locationId:"europe-west",apiKey:"AIzaSyAA815atWJRBktaddJ6vKf2OSdUt4KB-Iw",authDomain:"todo-app-93ce9.firebaseapp.com",messagingSenderId:"866611904544"};var fN=N(6148),vF=N(573);function sW(n){return new Mr.y(function(e){return{unsubscribe:(0,vF.t)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class JT{constructor(e){return e}}class x0{constructor(){return(0,ct.vb)("auth")}}const pN=new f.OlP("angularfire2.auth-instances");function lW(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new JT(r)}}const uW={provide:x0,deps:[[new f.FiY,pN]]},cW={provide:JT,useFactory:function aW(n,e){const t=(0,ct.JM)("auth",n,e);return t&&new JT(t)},deps:[[new f.FiY,pN],ro]};let dW=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[cW,uW]}),n})();function hW(n,...e){return{ngModule:dW,providers:[{provide:pN,useFactory:lW(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,[new f.FiY,Wd],...e]}]}}const fW=(0,ct.u3)(sW,!0),pW=(0,ct.u3)(vF.n,!0);class O0{constructor(e){return e}}const wF="analytics",bF=ct.nk.async,mW=(0,ct.u3)(fN.IH,!0),_W=(0,ct.u3)(fN.Kz,!0),yW=(0,ct.u3)(fN.Iv,!0);let gN=(()=>{class n{constructor(t,r,i){let a;this.disposables=[],(0,Ri.KN)("angularfire",ct.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(u=>{a=u})),bF().then(()=>{const u=i.get(O0);u?this.disposables=[fW(t).subscribe(d=>{yW(u,null==d?void 0:d.uid),a()})]:a()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(JT),f.LFG(f.R0b),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const CF="firebase_screen_id",mN="outlet",P0="screen_class",IF="screen_name";let MW=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const _N={},NW=n=>{const e=[n[P0],n[mN]].join("#");if(_N.hasOwnProperty(e))return _N[e];{const t=MW++;return _N[e]=t,t}};let TF=(()=>{class n{constructor(t,r,i,a,u,d){(0,Ri.KN)("angularfire",ct.q4.full,"screen-tracking"),bF().then(()=>{const p=d.get(O0);!t||!p||a.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(xi(i=>i instanceof ag)).pipe(Er(i=>{var a;const d=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,x=>x.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",p=n.routerState.root.children.map(x=>x).find(x=>x.outlet===i.snapshot.outlet);if(!p)return kt(null);let y=p;for(;y.firstChild;)y=y.firstChild;const C=y.pathFromRoot.map(x=>{var k;return null===(k=x.routeConfig)||void 0===k?void 0:k.path}).filter(x=>x).join("/")||"/",T={[IF]:C,page_path:`/${d}`,firebase_event_origin:"auto",firebase_screen:C,[mN]:i.snapshot.outlet};e&&(T.page_title=e.getTitle());let D=p.component;if(D){if(D===Zc){let x=i.snapshot;for(;x.firstChild;)x=x.firstChild;D=x.component}}else D=i.snapshot.component;if("string"==typeof D)return kt(Object.assign(Object.assign({},T),{[P0]:D}));if(D){const x=t.resolveComponentFactory(D);return kt(Object.assign(Object.assign({},T),{[P0]:x.selector}))}return kt(null)}),xi(i=>!!i),(0,ln.U)(i=>Object.assign({firebase_screen_class:i[P0],[CF]:NW(i)},i)),function iW(n,e,t,r){return(0,jr.e)((i,a)=>{let u;e&&"function"!=typeof e?({duration:t,element:u,connector:r}=e):u=e;const d=new Map,p=k=>{d.forEach(k),k(a)},y=k=>p(q=>q.error(k));let C=0,T=!1;const D=new rr.Q(a,k=>{try{const q=n(k);let ie=d.get(q);if(!ie){d.set(q,ie=r?r():new Ki.x);const Qe=function x(k,q){const ie=new Mr.y(Qe=>{C++;const Ze=q.subscribe(Qe);return()=>{Ze.unsubscribe(),0==--C&&T&&D.unsubscribe()}});return ie.key=k,ie}(q,ie);if(a.next(Qe),t){const Ze=(0,rr.x)(ie,()=>{ie.complete(),null==Ze||Ze.unsubscribe()},void 0,void 0,()=>d.delete(q));D.add((0,hs.Xf)(t(Qe)).subscribe(Ze))}}ie.next(u?u(k):k)}catch(q){y(q)}},()=>p(k=>k.complete()),y,()=>d.clear(),()=>(T=!0,0===C));i.subscribe(D)})}(i=>i[mN]),(0,Jn.z)(i=>i.pipe(nb((a,u)=>JSON.stringify(a)===JSON.stringify(u)),fs(void 0),Xh(),(0,ln.U)(([a,u])=>a?Object.assign({firebase_previous_class:a[P0],firebase_previous_screen:a[IF],firebase_previous_id:a[CF]},u):u)))))(t,r,i).pipe(Er(y=>(0,jM.mG)(this,void 0,void 0,function*(){return u&&(yield u.initialized),_W(p,"screen_view",y)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ci,8),f.LFG(Kl,8),f.LFG(f._Vd),f.LFG(f.R0b),f.LFG(gN,8),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const yN=new f.OlP("angularfire2.analytics-instances");function PW(n){return(e,t)=>{if(!ct.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new O0(r)}}const kW={provide:class gW{constructor(){return(0,ct.vb)(wF)}},deps:[[new f.FiY,yN]]},FW={provide:O0,useFactory:function OW(n,e){if(!ct.nk.sync())return null;const t=(0,ct.JM)(wF,n,e);return t&&new O0(t)},deps:[[new f.FiY,yN],ro]};let LW=(()=>{class n{constructor(t,r){(0,Ri.KN)("angularfire",ct.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(TF,8),f.LFG(gN,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[FW,kW,{provide:f.ip1,useValue:ct.nk.async,multi:!0}]}),n})();function VW(n,...e){return{ngModule:LW,providers:[{provide:yN,useFactory:PW(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,...e]}]}}const SF="@firebase/database";let vN="";class BW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Z.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $W{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const AF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new BW(e)}}catch(e){}return new $W},Sp=AF("localStorage"),EN=AF("sessionStorage"),w_=new Es.Yd("@firebase/database"),RF=function(){let n=1;return function(){return n++}}(),MF=function(n){const e=(0,Z.dS)(n),t=new Z.gQ;t.update(e);const r=t.digest();return Z.US.encodeByteArray(r)},k0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=k0.apply(null,r):e+="object"==typeof r?(0,Z.Pz)(r):r,e+=" "}return e};let Dp=null,NF=!0;const _i=function(...n){if(!0===NF&&(NF=!1,null===Dp&&!0===EN.get("logging_enabled")&&function(n,e){(0,Z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(w_.logLevel=Es.in.VERBOSE,Dp=w_.log.bind(w_),e&&EN.set("logging_enabled",!0)):"function"==typeof n?Dp=n:(Dp=null,EN.remove("logging_enabled"))}(!0)),Dp){const e=k0.apply(null,n);Dp(e)}},F0=function(n){return function(...e){_i(n,...e)}},wN=function(...n){const e="FIREBASE INTERNAL ERROR: "+k0(...n);w_.error(e)},Sl=function(...n){const e=`FIREBASE FATAL ERROR: ${k0(...n)}`;throw w_.error(e),new Error(e)},os=function(...n){const e="FIREBASE WARNING: "+k0(...n);w_.warn(e)},XT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lc="[MIN_NAME]",Dl="[MAX_NAME]",Ap=function(n,e){if(n===e)return 0;if(n===lc||e===Dl)return-1;if(e===lc||n===Dl)return 1;{const t=eS(n),r=eS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},WW=function(n,e){return n===e?0:n<e?-1:1},L0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Z.Pz)(e))},bN=function(n){if("object"!=typeof n||null===n)return(0,Z.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Z.Pz)(e[r]),t+=":",t+=bN(n[e[r]]);return t+="}",t},OF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function yi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const PF=function(n){(0,Z.hu)(!XT(n),"Invalid JSON number");const r=1023;let i,a,u,d,p;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const C=y.join("");let T="";for(p=0;p<64;p+=8){let D=parseInt(C.substr(p,8),2).toString(16);1===D.length&&(D="0"+D),T+=D}return T.toLowerCase()},KW=new RegExp("^-?(0*)\\d{1,10}$"),eS=function(n){if(KW.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},b_=function(n){try{n()}catch(e){setTimeout(()=>{throw os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class YW{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class QW{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(_i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',os(e)}}let U0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const BF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jF="websocket",HF="long_polling";class TN{constructor(e,t,r,i,a=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Sp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function WF(n,e,t){let r;if((0,Z.hu)("string"==typeof e,"typeof type must == string"),(0,Z.hu)("object"==typeof t,"typeof params must == object"),e===jF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==HF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function XW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return yi(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class eG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Z.p$)(this.counters_)}}const SN={},DN={};function AN(n){const e=n.toString();return SN[e]||(SN[e]=new eG),SN[e]}class nG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&b_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class C_{constructor(e,t,r,i,a,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=F0(e),this.stats_=AN(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),WF(t,HF,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new RN((...a)=>{const[u,d,p,y,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&BF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){C_.forceAllow_=!0}static forceDisallow(){C_.forceDisallow_=!0}static isAvailable(){return!((0,Z.Yr)()||!C_.forceAllow_&&(C_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Z.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Z.h$)(t),i=OF(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Z.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class RN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=RF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=RN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){_i("frame writing exception"),d.stack&&_i(d.stack),_i(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_i("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,Z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{_i("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let B0=null;"undefined"!=typeof MozWebSocket?B0=MozWebSocket:"undefined"!=typeof WebSocket&&(B0=WebSocket);let $0=(()=>{class n{constructor(t,r,i,a,u,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=F0(this.connId),this.stats_=AN(r),this.connURL=n.connectionURL_(r,d,p,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,Z.Yr)()&&"undefined"!=typeof location&&location.hostname&&BF.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),WF(t,jF,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Sp.set("previous_websocket_failure",!0);try{if((0,Z.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${vN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(a.proxy={origin:d}),this.mySock=new B0(this.connURL,[],a)}else this.mySock=new B0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==B0&&!n.forceDisallow_}static previouslyFailed(){return Sp.isInMemoryStorage||!0===Sp.get("previous_websocket_failure")}markConnectionHealthy(){Sp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,Z.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=OF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class MN{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[C_,$0]}initTransports_(e){const t=$0&&$0.isAvailable();let r=t&&!$0.previouslyFailed();if(e.webSocketOnly&&(t||os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[$0];else{const i=this.transports_=[];for(const a of MN.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class rL{constructor(e,t,r,i,a,u,d,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=F0("c:"+this.id+":"),this.transportManager_=new MN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=L0("t",e),r=L0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=L0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?wN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),V0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class iL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class sL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,Z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nS extends sL{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nS}getInitialEvent(e){return(0,Z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bn(){return new Kn("")}function bn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Kd(n){return n.pieces_.length-n.pieceNum_}function ar(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Kn(n.pieces_,e)}function xN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function j0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Kn(e,0)}function Sr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Kn(t,0)}function Cn(n){return n.pieceNum_>=n.pieces_.length}function as(n,e){const t=bn(n),r=bn(e);if(null===t)return e;if(t===r)return as(ar(n),ar(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ON(n,e){if(Kd(n)!==Kd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ko(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Kd(n)>Kd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class TG{constructor(e,t){this.errorPrefix_=t,this.parts_=j0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Z.ug)(this.parts_[r]);uL(this)}}function uL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rp(n))}function Rp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class PN extends sL{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new PN}getInitialEvent(e){return(0,Z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const H0=1e3;let iS,Mp=(()=>{class n extends iL{constructor(t,r,i,a,u,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=F0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=H0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,Z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");PN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,Z.Pz)(u)),(0,Z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new Z.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[u];void 0===d||a!==d||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,Z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Z.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Z.r3)(t,"w")){const i=(0,Z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,Z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Z.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):wN("Unrecognized action received from server: "+(0,Z.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=H0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,a())};t.realtime_={close:C,sendRequest:function(x){(0,Z.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(x)}};const D=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[x,k]=yield Promise.all([t.authTokenProvider_.getToken(D),t.appCheckTokenProvider_.getToken(D)]);p?_i("getToken() completed but was canceled"):(_i("getToken() completed. Creating connection."),t.authToken_=x&&x.accessToken,t.appCheckToken_=k&&k.token,y=new rL(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,q=>{os(q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(x){t.log_("Failed to get token: "+x),p||(t.repoInfo_.nodeAdmin&&os(x),C())}}})()}interrupt(t){_i("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_i("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>bN(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Kn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){_i("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){_i("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+vN.replace(/\./g,"-")]=1,(0,Z.uI)()?t["framework.cordova"]=1:(0,Z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nS.getInstance().currentlyOnline();return(0,Z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tn(e,t)}}class rS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Tn(lc,e),i=new Tn(lc,t);return 0!==this.compare(r,i)}minPost(){return Tn.MIN}}class hL extends rS{static get __EMPTY_NODE(){return iS}static set __EMPTY_NODE(e){iS=e}compare(e,t){return Ap(e.name,t.name)}isDefinedOn(e){throw(0,Z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tn.MIN}maxPost(){return new Tn(Dl,iS)}makePost(e,t){return(0,Z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tn(e,iS)}toString(){return".key"}}const Al=new hL;class sS{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let FN,_a=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:As.EMPTY_NODE,this.right=null!=u?u:As.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return As.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return As.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class As{constructor(e,t=As.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new As(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_a.BLACK,null,null))}remove(e){return new As(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_a.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sS(this.root_,null,this.comparator_,!0,e)}}function PG(n,e){return Ap(n.name,e.name)}function kN(n,e){return Ap(n,e)}As.EMPTY_NODE=new class OG{copy(e,t,r,i,a){return this}insert(e,t,r){return new _a(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fL=function(n){return"number"==typeof n?"number:"+PF(n):"string:"+n},pL=function(n){if(n.isLeafNode()){const e=n.val();(0,Z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Z.hu)(n===FN||n.isEmpty(),"priority of unexpected type.");(0,Z.hu)(n===FN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gL,mL,_L,I_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),pL(this.priorityNode_)}static set __childrenNodeConstructor(t){gL=t}static get __childrenNodeConstructor(){return gL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Cn(t)?this:".priority"===bn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=bn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Z.hu)(".priority"!==i||1===Kd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ar(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?PF(this.value_):this.value_,this.lazyHash_=MF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Z.hu)(a>=0,"Unknown leaf type: "+r),(0,Z.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const gr=new class VG extends rS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Ap(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tn.MIN}maxPost(){return new Tn(Dl,new I_("[PRIORITY-POST]",_L))}makePost(e,t){const r=mL(e);return new Tn(t,new I_("[PRIORITY-POST]",r))}toString(){return".priority"}},UG=Math.log(2);class BG{constructor(e){this.count=parseInt(Math.log(e+1)/UG,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const oS=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let T,D;if(0===C)return null;if(1===C)return T=n[p],D=t?t(T):T,new _a(D,T.node,_a.BLACK,null,null);{const x=parseInt(C/2,10)+p,k=i(p,x),q=i(x+1,y);return T=n[x],D=t?t(T):T,new _a(D,T.node,_a.BLACK,k,q)}},d=function(p){let y=null,C=null,T=n.length;const D=function(k,q){const ie=T-k,Qe=T;T-=k;const Ze=i(ie+1,Qe),We=n[ie],tt=t?t(We):We;x(new _a(tt,We.node,q,null,Ze))},x=function(k){y?(y.left=k,y=k):(C=k,y=k)};for(let k=0;k<p.count;++k){const q=p.nextBitIsOne(),ie=Math.pow(2,p.count-(k+1));q?D(ie,_a.BLACK):(D(ie,_a.BLACK),D(ie,_a.RED))}return C}(new BG(n.length));return new As(r||e,d)};let LN;const T_={};class uc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Z.hu)(T_&&gr,"ChildrenNode.ts has not been loaded"),LN=LN||new uc({".priority":T_},{".priority":gr}),LN}get(e){const t=(0,Z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof As?t:null}hasIndex(e){return(0,Z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Z.hu)(e!==Al,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Tn.Wrap);let d,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();d=i?oS(r,e.getCompare()):T_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=d,new uc(C,y)}addToIndexes(e,t){const r=(0,Z.UI)(this.indexes_,(i,a)=>{const u=(0,Z.DV)(this.indexSet_,a);if((0,Z.hu)(u,"Missing index implementation for "+a),i===T_){if(u.isDefinedOn(e.node)){const d=[],p=t.getIterator(Tn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),oS(d,u.getCompare())}return T_}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new Tn(e.name,d))),p.insert(e,e.node)}});return new uc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Z.UI)(this.indexes_,i=>{if(i===T_)return i;{const a=t.get(e.name);return a?i.remove(new Tn(e.name,a)):i}});return new uc(r,this.indexSet_)}}let W0,pn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pL(this.priorityNode_),this.children_.isEmpty()&&(0,Z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return W0||(W0=new n(new As(kN),null,uc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||W0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?W0:r}}getChild(t){const r=bn(t);return null===r?this:this.getImmediateChild(r).getChild(ar(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Tn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?W0:this.priorityNode_;return new n(a,d,u)}}updateChild(t,r){const i=bn(t);if(null===i)return r;{(0,Z.hu)(".priority"!==bn(t)||1===Kd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ar(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(gr,(d,p)=>{r[d]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+fL(this.getPriority().val())+":"),this.forEachChild(gr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":MF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new Tn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Tn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Tn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Tn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Tn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===G0?-1:0}withIndex(t){if(t===Al||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Al||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(gr),a=r.getIterator(gr);let u=i.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=a.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Al?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const G0=new class $G extends pn{constructor(){super(new As(kN),pn.EMPTY_NODE,uc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pn.EMPTY_NODE}isEmpty(){return!1}};function kr(n,e=null){if(null===n)return pn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new I_(n,kr(e));if(n instanceof Array){let t=pn.EMPTY_NODE;return yi(n,(r,i)=>{if((0,Z.r3)(n,r)&&"."!==r.substring(0,1)){const a=kr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(kr(e))}{const t=[];let r=!1;if(yi(n,(u,d)=>{if("."!==u.substring(0,1)){const p=kr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Tn(u,p)))}}),0===t.length)return pn.EMPTY_NODE;const a=oS(t,PG,u=>u.name,kN);if(r){const u=oS(t,gr.getCompare());return new pn(a,kr(e),new uc({".priority":u},{".priority":gr}))}return new pn(a,kr(e),uc.Default)}}Object.defineProperties(Tn,{MIN:{value:new Tn(lc,pn.EMPTY_NODE)},MAX:{value:new Tn(Dl,G0)}}),hL.__EMPTY_NODE=pn.EMPTY_NODE,I_.__childrenNodeConstructor=pn,function kG(n){FN=n}(G0),function LG(n){_L=n}(G0),function FG(n){mL=n}(kr);class VN extends rS{constructor(e){super(),this.indexPath_=e,(0,Z.hu)(!Cn(e)&&".priority"!==bn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Ap(e.name,t.name):a}makePost(e,t){const r=kr(e),i=pn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Tn(t,i)}maxPost(){const e=pn.EMPTY_NODE.updateChild(this.indexPath_,G0);return new Tn(Dl,e)}toString(){return j0(this.indexPath_,0).join("/")}}const UN=new class HG extends rS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ap(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tn.MIN}maxPost(){return Tn.MAX}makePost(e,t){const r=kr(e);return new Tn(t,r)}toString(){return".value"}};function q0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class jN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===gr}copy(){const e=new jN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CL(n){const e={};if(n.isDefault())return e;let t;return n.index_===gr?t="$priority":n.index_===UN?t="$value":n.index_===Al?t="$key":((0,Z.hu)(n.index_ instanceof VN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Z.Pz)(t),n.startSet_&&(e.startAt=(0,Z.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,Z.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,Z.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,Z.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function IL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==gr&&(e.i=n.index_.toString()),e}class lS extends iL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=F0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=lS.getListenId_(e,r),d={};this.listens_[u]=d;const p=CL(e._queryParams);this.restRequest_(a+".json",p,(y,C)=>{let T=C;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(a,T,!1,r),(0,Z.DV)(this.listens_,u)===d){let D;D=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(D,null)}})}unlisten(e,t){const r=lS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=CL(e._queryParams),r=e._path.toString(),i=new Z.BH;return this.restRequest_(r+".json",t,(a,u)=>{let d=u;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Z.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,Z.cI)(d.responseText)}catch(y){os("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&os("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class JG{constructor(){this.rootNode_=pn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function uS(){return{value:null,children:new Map}}function A_(n,e,t){if(Cn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=bn(e);n.children.has(r)||n.children.set(r,uS()),A_(n.children.get(r),e=ar(e),t)}}function zN(n,e,t){null!==n.value?t(e,n.value):function XG(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{zN(i,new Kn(e.toString()+"/"+r),t)})}class ez{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class rz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ez(e);const r=1e4+2e4*Math.random();V0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;yi(e,(i,a)=>{a>0&&(0,Z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),V0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fo||(Fo={})),Fo))();function ZN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class cS{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Cn(this.path)){if(null!=this.affectedTree.value)return(0,Z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Kn(e));return new cS(Bn(),t,this.revert)}}return(0,Z.hu)(bn(this.path)===e,"operationForChild called for unrelated child."),new cS(ar(this.path),this.affectedTree,this.revert)}}class Np{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fo.OVERWRITE}operationForChild(e){return Cn(this.path)?new Np(this.source,Bn(),this.snap.getImmediateChild(e)):new Np(this.source,ar(this.path),this.snap)}}class R_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fo.MERGE}operationForChild(e){if(Cn(this.path)){const t=this.children.subtree(new Kn(e));return t.isEmpty()?null:t.value?new Np(this.source,Bn(),t.value):new R_(this.source,Bn(),t)}return(0,Z.hu)(bn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new R_(this.source,ar(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Zd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Cn(e))return this.isFullyInitialized()&&!this.filtered_;const t=bn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Y0(n,e,t,r,i,a){const u=r.filter(d=>d.type===t);u.sort((d,p)=>function az(n,e,t){if(null==e.childName||null==t.childName)throw(0,Z.g5)("Should only compare child_ events.");const r=new Tn(e.childName,e.snapshotNode),i=new Tn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),u.forEach(d=>{const p=function oz(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function dS(n,e){return{eventCache:n,serverCache:e}}function Q0(n,e,t,r){return dS(new Zd(e,t,r),n.serverCache)}function SL(n,e,t,r){return dS(n.eventCache,new Zd(e,t,r))}function hS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let YN;class mr{constructor(e,t=(()=>(YN||(YN=new As(WW)),YN))()){this.value=e,this.children=t}static fromObject(e){let t=new mr(null);return yi(e,(r,i)=>{t=t.set(new Kn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bn(),value:this.value};if(Cn(e))return null;{const r=bn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(ar(e),t);return null!=a?{path:Sr(new Kn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Cn(e))return this;{const t=bn(e),r=this.children.get(t);return null!==r?r.subtree(ar(e)):new mr(null)}}set(e,t){if(Cn(e))return new mr(t,this.children);{const r=bn(e),a=(this.children.get(r)||new mr(null)).set(ar(e),t),u=this.children.insert(r,a);return new mr(this.value,u)}}remove(e){if(Cn(e))return this.children.isEmpty()?new mr(null):new mr(null,this.children);{const t=bn(e),r=this.children.get(t);if(r){const i=r.remove(ar(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new mr(null):new mr(this.value,a)}return this}}get(e){if(Cn(e))return this.value;{const t=bn(e),r=this.children.get(t);return r?r.get(ar(e)):null}}setTree(e,t){if(Cn(e))return t;{const r=bn(e),a=(this.children.get(r)||new mr(null)).setTree(ar(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new mr(this.value,u)}}fold(e){return this.fold_(Bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Sr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Cn(e))return null;{const a=bn(e),u=this.children.get(a);return u?u.findOnPath_(ar(e),Sr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bn(),t)}foreachOnPath_(e,t,r){if(Cn(e))return this;{this.value&&r(t,this.value);const i=bn(e),a=this.children.get(i);return a?a.foreachOnPath_(ar(e),Sr(t,i),r):new mr(null)}}foreach(e){this.foreach_(Bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Sr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ya{constructor(e){this.writeTree_=e}static empty(){return new ya(new mr(null))}}function J0(n,e,t){if(Cn(e))return new ya(new mr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=as(i,e);return a=a.updateChild(u,t),new ya(n.writeTree_.set(i,a))}{const i=new mr(t),a=n.writeTree_.setTree(e,i);return new ya(a)}}}function QN(n,e,t){let r=n;return yi(t,(i,a)=>{r=J0(r,Sr(e,i),a)}),r}function DL(n,e){if(Cn(e))return ya.empty();{const t=n.writeTree_.setTree(e,new mr(null));return new ya(t)}}function JN(n,e){return null!=Op(n,e)}function Op(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(as(t.path,e)):null}function AL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(gr,(r,i)=>{e.push(new Tn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Tn(r,i.value))}),e}function Yd(n,e){if(Cn(e))return n;{const t=Op(n,e);return new ya(null!=t?new mr(t):n.writeTree_.subtree(e))}}function XN(n){return n.writeTree_.isEmpty()}function M_(n,e){return RL(Bn(),n.writeTree_,e)}function RL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,Z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=RL(Sr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Sr(n,".priority"),r)),t}}function fS(n,e){return PL(e,n)}function fz(n,e){if(n.snap)return ko(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ko(Sr(n.path,t),e))return!0;return!1}function gz(n){return n.visible}function ML(n,e,t){let r=ya.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let d;if(a.snap)ko(t,u)?(d=as(t,u),r=J0(r,d,a.snap)):ko(u,t)&&(d=as(u,t),r=J0(r,Bn(),a.snap.getChild(d)));else{if(!a.children)throw(0,Z.g5)("WriteRecord should have .snap or .children");if(ko(t,u))d=as(t,u),r=QN(r,d,a.children);else if(ko(u,t))if(d=as(u,t),Cn(d))r=QN(r,Bn(),a.children);else{const p=(0,Z.DV)(a.children,bn(d));if(p){const y=p.getChild(ar(d));r=J0(r,Bn(),y)}}}}}return r}function NL(n,e,t,r,i){if(r||i){const a=Yd(n.visibleWrites,e);return!i&&XN(a)?t:i||null!=t||JN(a,Bn())?M_(ML(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(ko(y.path,e)||ko(e,y.path))},e),t||pn.EMPTY_NODE):null}{const a=Op(n.visibleWrites,e);if(null!=a)return a;{const u=Yd(n.visibleWrites,e);return XN(u)?t:null!=t||JN(u,Bn())?M_(u,t||pn.EMPTY_NODE):null}}}function pS(n,e,t,r){return NL(n.writeTree,n.treePath,e,t,r)}function ex(n,e){return function mz(n,e,t){let r=pn.EMPTY_NODE;const i=Op(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(gr,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Yd(n.visibleWrites,e);return t.forEachChild(gr,(u,d)=>{const p=M_(Yd(a,new Kn(u)),d);r=r.updateImmediateChild(u,p)}),AL(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return AL(Yd(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function xL(n,e,t,r){return function _z(n,e,t,r,i){(0,Z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Sr(e,t);if(JN(n.visibleWrites,a))return null;{const u=Yd(n.visibleWrites,a);return XN(u)?i.getChild(t):M_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function gS(n,e){return function vz(n,e){return Op(n.visibleWrites,e)}(n.writeTree,Sr(n.treePath,e))}function tx(n,e,t){return function yz(n,e,t,r){const i=Sr(e,t),a=Op(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?M_(Yd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function OL(n,e){return PL(Sr(n.treePath,e),n.writeTree)}function PL(n,e){return{treePath:n,writeTree:e}}class Cz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,q0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function z0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function D_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,Z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,q0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const kL=new class Iz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class nx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Zd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xp(this.viewCache_),a=function bz(n,e,t,r,i,a){return function Ez(n,e,t,r,i,a,u){let d;const p=Yd(n.visibleWrites,e),y=Op(p,Bn());if(null!=y)d=y;else{if(null==t)return[];d=M_(p,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const C=[],T=u.getCompare(),D=a?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let x=D.getNext();for(;x&&C.length<i;)0!==T(x,r)&&C.push(x),x=D.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function FL(n,e,t,r,i,a){const u=e.eventCache;if(null!=gS(r,t))return e;{let d,p;if(Cn(t))if((0,Z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=xp(e),T=ex(r,y instanceof pn?y:pn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const y=pS(r,xp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=bn(t);if(".priority"===y){(0,Z.hu)(1===Kd(t),"Can't have a priority with additional path components");const C=u.getNode();p=e.serverCache.getNode();const T=xL(r,t,C,p);d=null!=T?n.filter.updatePriority(C,T):u.getNode()}else{const C=ar(t);let T;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const D=xL(r,t,u.getNode(),p);T=null!=D?u.getNode().getImmediateChild(y).updateChild(C,D):u.getNode().getImmediateChild(y)}else T=tx(r,y,e.serverCache);d=null!=T?n.filter.updateChild(u.getNode(),y,T,C,i,a):u.getNode()}}return Q0(e,d,u.isFullyInitialized()||Cn(t),n.filter.filtersNodes())}}function mS(n,e,t,r,i,a,u,d){const p=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(Cn(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const x=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),x,null)}else{const x=bn(t);if(!p.isCompleteForPath(t)&&Kd(t)>1)return e;const k=ar(t),ie=p.getNode().getImmediateChild(x).updateChild(k,r);y=".priority"===x?C.updatePriority(p.getNode(),ie):C.updateChild(p.getNode(),x,ie,k,kL,null)}const T=SL(e,y,p.isFullyInitialized()||Cn(t),C.filtersNodes());return FL(n,T,t,i,new nx(i,T,a),d)}function rx(n,e,t,r,i,a,u){const d=e.eventCache;let p,y;const C=new nx(i,e,a);if(Cn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=Q0(e,y,!0,n.filter.filtersNodes());else{const T=bn(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=Q0(e,y,d.isFullyInitialized(),d.isFiltered());else{const D=ar(t),x=d.getNode().getImmediateChild(T);let k;if(Cn(D))k=r;else{const q=C.getCompleteChild(T);k=null!=q?".priority"===xN(D)&&q.getChild(lL(D)).isEmpty()?q:q.updateChild(D,r):pn.EMPTY_NODE}p=x.equals(k)?e:Q0(e,n.filter.updateChild(d.getNode(),T,k,D,C,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function LL(n,e){return n.eventCache.isCompleteForChild(e)}function VL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ix(n,e,t,r,i,a,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Cn(t)?r:new mr(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((T,D)=>{if(C.hasChild(T)){const k=VL(0,e.serverCache.getNode().getImmediateChild(T),D);p=mS(n,p,new Kn(T),k,i,a,u,d)}}),y.children.inorderTraversal((T,D)=>{const x=!e.serverCache.isCompleteForChild(T)&&void 0===D.value;if(!C.hasChild(T)&&!x){const q=VL(0,e.serverCache.getNode().getImmediateChild(T),D);p=mS(n,p,new Kn(T),q,i,a,u,d)}}),p}function Fz(n,e){const t=xp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Cn(e)&&!t.getImmediateChild(bn(e)).isEmpty())?t.getChild(e):null}function $L(n,e,t,r){e.type===Fo.MERGE&&null!==e.source.queryId&&((0,Z.hu)(xp(n.viewCache_),"We should always have a full cache before handling merges"),(0,Z.hu)(hS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Dz(n,e,t,r,i){const a=new Cz;let u,d;if(t.type===Fo.OVERWRITE){const y=t;y.source.fromUser?u=rx(n,e,y.path,y.snap,r,i,a):((0,Z.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Cn(y.path),u=mS(n,e,y.path,y.snap,r,i,d,a))}else if(t.type===Fo.MERGE){const y=t;y.source.fromUser?u=function Rz(n,e,t,r,i,a,u){let d=e;return r.foreach((p,y)=>{const C=Sr(t,p);LL(e,bn(C))&&(d=rx(n,d,C,y,i,a,u))}),r.foreach((p,y)=>{const C=Sr(t,p);LL(e,bn(C))||(d=rx(n,d,C,y,i,a,u))}),d}(n,e,y.path,y.children,r,i,a):((0,Z.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),u=ix(n,e,y.path,y.children,r,i,d,a))}else if(t.type===Fo.ACK_USER_WRITE){const y=t;u=y.revert?function xz(n,e,t,r,i,a){let u;if(null!=gS(r,t))return e;{const d=new nx(r,e,i),p=e.eventCache.getNode();let y;if(Cn(t)||".priority"===bn(t)){let C;if(e.serverCache.isFullyInitialized())C=pS(r,xp(e));else{const T=e.serverCache.getNode();(0,Z.hu)(T instanceof pn,"serverChildren would be complete if leaf node"),C=ex(r,T)}C=C,y=n.filter.updateFullNode(p,C,a)}else{const C=bn(t);let T=tx(r,C,e.serverCache);null==T&&e.serverCache.isCompleteForChild(C)&&(T=p.getImmediateChild(C)),y=null!=T?n.filter.updateChild(p,C,T,ar(t),d,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,pn.EMPTY_NODE,ar(t),d,a):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=pS(r,xp(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=gS(r,Bn()),Q0(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function Mz(n,e,t,r,i,a,u){if(null!=gS(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Cn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return mS(n,e,t,p.getNode().getChild(t),i,a,d,u);if(Cn(t)){let y=new mr(null);return p.getNode().forEachChild(Al,(C,T)=>{y=y.set(new Kn(C),T)}),ix(n,e,t,y,i,a,d,u)}return e}{let y=new mr(null);return r.foreach((C,T)=>{const D=Sr(t,C);p.isCompleteForPath(D)&&(y=y.set(C,p.getNode().getChild(D)))}),ix(n,e,t,y,i,a,d,u)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==Fo.LISTEN_COMPLETE)throw(0,Z.g5)("Unknown operation type: "+t.type);u=function Nz(n,e,t,r,i){const a=e.serverCache;return FL(n,SL(e,a.getNode(),a.isFullyInitialized()||Cn(t),a.isFiltered()),t,r,kL,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function Az(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=hS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function bL(n){return{type:"value",snapshotNode:n}}(hS(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function Sz(n,e){(0,Z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,Z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function jL(n,e,t,r){return function sz(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function GG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Y0(n,i,"child_removed",e,r,t),Y0(n,i,"child_added",e,r,t),Y0(n,i,"child_moved",a,r,t),Y0(n,i,"child_changed",e,r,t),Y0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let _S,vS;function sx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,Z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),$L(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat($L(u,e,t,r));return a}}function Qd(n,e){let t=null;for(const r of n.views.values())t=t||Fz(r,e);return t}class KL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mr(null),this.pendingWriteTree_=function wz(){return{visibleWrites:ya.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ox(n,e,t,r,i){return function uz(n,e,t,r,i){(0,Z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=J0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?N_(n,new Np({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Xd(n,e,t=!1){const r=function dz(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function hz(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,Z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&fz(d,r.path)?i=!1:ko(r.path,d.path)&&(a=!0)),u--}return!!i&&(a?(function pz(n){n.visibleWrites=ML(n.allWrites,gz,Bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=DL(n.visibleWrites,r.path):yi(r.children,p=>{n.visibleWrites=DL(n.visibleWrites,Sr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new mr(null);return null!=r.snap?a=a.set(Bn(),!0):yi(r.children,u=>{a=a.set(new Kn(u),!0)}),N_(n,new cS(r.path,a,t))}return[]}function X0(n,e,t){return N_(n,new Np({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ES(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,d)=>{const y=Qd(d,as(u,e));if(y)return y});return NL(i,e,a,t,!0)}function N_(n,e){return YL(e,n.syncPointTree_,null,fS(n.pendingWriteTree_,Bn()))}function YL(n,e,t,r){if(Cn(n.path))return QL(n,e,t,r);{const i=e.get(Bn());null==t&&null!=i&&(t=Qd(i,Bn()));let a=[];const u=bn(n.path),d=n.operationForChild(u),p=e.children.get(u);if(p&&d){const y=t?t.getImmediateChild(u):null,C=OL(r,u);a=a.concat(YL(d,p,y,C))}return i&&(a=a.concat(sx(i,n,r,t))),a}}function QL(n,e,t,r){const i=e.get(Bn());null==t&&null!=i&&(t=Qd(i,Bn()));let a=[];return e.children.inorderTraversal((u,d)=>{const p=t?t.getImmediateChild(u):null,y=OL(r,u),C=n.operationForChild(u);C&&(a=a.concat(QL(C,d,p,y)))}),i&&(a=a.concat(sx(i,n,r,t))),a}function lx(n,e){return n.tagToQueryMap.get(e)}function ux(n){const e=n.indexOf("$");return(0,Z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Kn(n.substr(0,e))}}function cx(n,e,t){const r=n.syncPointTree_.get(e);return(0,Z.hu)(r,"Missing sync point for query tag that we're tracking"),sx(r,t,fS(n.pendingWriteTree_,e),null)}class dx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dx(t)}node(){return this.node_}}class hx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Sr(this.path_,e);return new hx(this.syncTree_,t)}node(){return ES(this.syncTree_,this.path_)}}const XL=function(n,e,t){return n&&"object"==typeof n?((0,Z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?s3(n[".sv"],e,t):"object"==typeof n[".sv"]?o3(n[".sv"],e):void(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},s3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Z.hu)(!1,"Unexpected server value: "+n)},o3=function(n,e,t){n.hasOwnProperty("increment")||(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,Z.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},fx=function(n,e,t){return px(n,new dx(e),t)};function px(n,e,t){const r=n.getPriority().val(),i=XL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,d=XL(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new I_(d,kr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new I_(i))),u.forEachChild(gr,(d,p)=>{const y=px(p,e.getImmediateChild(d),t);y!==p&&(a=a.updateImmediateChild(d,y))}),a}}class gx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function CS(n,e){let t=e instanceof Kn?e:new Kn(e),r=n,i=bn(t);for(;null!==i;){const a=(0,Z.DV)(r.node.children,i)||{children:{},childCount:0};r=new gx(i,r,a),t=ar(t),i=bn(t)}return r}function Pp(n){return n.node.value}function mx(n,e){n.node.value=e,_x(n)}function tV(n){return n.node.childCount>0}function IS(n,e){yi(n.node.children,(t,r)=>{e(new gx(t,n,r))})}function nV(n,e,t,r){t&&!r&&e(n),IS(n,i=>{nV(i,e,!0,r)}),t&&r&&e(n)}function tw(n){return new Kn(null===n.parent?n.name:tw(n.parent)+"/"+n.name)}function _x(n){null!==n.parent&&function u3(n,e,t){const r=function a3(n){return void 0===Pp(n)&&!tV(n)}(t),i=(0,Z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_x(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_x(n))}(n.parent,n.name,n)}const c3=/[\[\].#$\/\u0000-\u001F\u007F]/,d3=/[\[\].#$\u0000-\u001F\u007F]/,yx=10485760,TS=function(n){return"string"==typeof n&&0!==n.length&&!c3.test(n)},rw=function(n,e,t){const r=t instanceof Kn?new TG(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Rp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Rp(r)+" with contents = "+e.toString());if(XT(e))throw new Error(n+"contains "+e.toString()+" "+Rp(r));if("string"==typeof e&&e.length>yx/3&&(0,Z.ug)(e)>yx)throw new Error(n+"contains a string greater than "+yx+" utf8 bytes "+Rp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(yi(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!TS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Rp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function SG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Z.ug)(e),uL(n)})(r,u),rw(n,d,r),function DG(n){const e=n.parts_.pop();n.byteLength_-=(0,Z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Rp(r)+" in addition to actual children.")}},sV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!TS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!d3.test(n)}(n)}(t))throw new Error((0,Z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class g3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lo(n,e,t){(function SS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!ON(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function oV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(m3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>ko(r,e)||ko(e,r))}function m3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Dp&&_i("event: "+t.toString()),b_(r)}}}class y3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uS(),this.transactionQueueTree_=new gx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lV(n){const t=n.infoData_.getNode(new Kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:lV(n)})}function uV(n,e,t,r,i){n.dataUpdateCount++;const a=new Kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,Z.UI)(t,y=>kr(y));u=function Jz(n,e,t,r){const i=lx(n,r);if(i){const a=ux(i),u=a.path,d=a.queryId,p=as(u,e),y=mr.fromObject(t);return cx(n,u,new R_(ZN(d),p,y))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=kr(t);u=function Qz(n,e,t,r){const i=lx(n,r);if(null!=i){const a=ux(i),u=a.path,d=a.queryId,p=as(u,e);return cx(n,u,new Np(ZN(d),p,t))}return[]}(n.serverSyncTree_,a,p,i)}else if(r){const p=(0,Z.UI)(t,y=>kr(y));u=function Kz(n,e,t){const r=mr.fromObject(t);return N_(n,new R_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=kr(t);u=X0(n.serverSyncTree_,a,p)}let d=a;u.length>0&&(d=O_(n,a)),Lo(n.eventQueue_,d,u)}function cV(n,e){bx(n,"connected",e),!1===e&&function C3(n){x_(n,"onDisconnectEvents");const e=sw(n),t=uS();zN(n.onDisconnect_,Bn(),(i,a)=>{const u=function(n,e,t,r){return px(e,new hx(t,n),r)}(i,a,n.serverSyncTree_,e);A_(t,i,u)});let r=[];zN(t,Bn(),(i,a)=>{r=r.concat(X0(n.serverSyncTree_,i,a));const u=function Sx(n,e){const t=tw(fV(n,e)),r=CS(n.transactionQueueTree_,e);return function l3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Dx(n,i)}),Dx(n,r),nV(r,i=>{Dx(n,i)}),t}(n,i);O_(n,u)}),n.onDisconnect_=uS(),Lo(n.eventQueue_,Bn(),r)}(n)}function bx(n,e,t){const r=new Kn("/.info/"+e),i=kr(t);n.infoData_.updateSnapshot(r,i);const a=X0(n.infoSyncTree_,r,i);Lo(n.eventQueue_,r,a)}function DS(n){return n.nextWriteId_++}function x_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_i(t,...e)}function Tx(n,e,t){return ES(n.serverSyncTree_,e,t)||pn.EMPTY_NODE}function AS(n,e=n.transactionQueueTree_){if(e||RS(n,e),Pp(e)){const t=pV(n,e);(0,Z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function M3(n,e,t){const r=t.map(y=>y.currentWriteId),i=Tx(n,e,r);let a=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,Z.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const T=as(e,C.path);a=a.updateChild(T,C.currentOutputSnapshotRaw)}const d=a.val(!0),p=e;n.server_.put(p.toString(),d,y=>{x_(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const T=[];for(let D=0;D<t.length;D++)t[D].status=2,C=C.concat(Xd(n.serverSyncTree_,t[D].currentWriteId)),t[D].onComplete&&T.push(()=>t[D].onComplete(null,!0,t[D].currentOutputSnapshotResolved)),t[D].unwatcher();RS(n,CS(n.transactionQueueTree_,e)),AS(n,n.transactionQueueTree_),Lo(n.eventQueue_,e,C);for(let D=0;D<T.length;D++)b_(T[D])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{os("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}O_(n,e)}},u)}(n,tw(e),t)}else tV(e)&&IS(e,t=>{AS(n,t)})}function O_(n,e){const t=fV(n,e),r=tw(t);return function N3(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=as(t,p.path);let T,C=!1;if((0,Z.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,T=p.abortReason,i=i.concat(Xd(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,T="maxretry",i=i.concat(Xd(n.serverSyncTree_,p.currentWriteId,!0));else{const D=Tx(n,p.path,u);p.currentInputSnapshot=D;const x=e[d].update(D.val());if(void 0!==x){rw("transaction failed: Data returned ",x,p.path);let k=kr(x);"object"==typeof x&&null!=x&&(0,Z.r3)(x,".priority")||(k=k.updatePriority(D.getPriority()));const ie=p.currentWriteId,Qe=sw(n),Ze=fx(k,D,Qe);p.currentOutputSnapshotRaw=k,p.currentOutputSnapshotResolved=Ze,p.currentWriteId=DS(n),u.splice(u.indexOf(ie),1),i=i.concat(ox(n.serverSyncTree_,p.path,Ze,p.currentWriteId,p.applyLocally)),i=i.concat(Xd(n.serverSyncTree_,ie,!0))}else C=!0,T="nodata",i=i.concat(Xd(n.serverSyncTree_,p.currentWriteId,!0))}Lo(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}RS(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)b_(r[d]);AS(n,n.transactionQueueTree_)}(n,pV(n,t),r),r}function fV(n,e){let t,r=n.transactionQueueTree_;for(t=bn(e);null!==t&&void 0===Pp(r);)r=CS(r,t),t=bn(e=ar(e));return r}function pV(n,e){const t=[];return gV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function gV(n,e,t){const r=Pp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);IS(e,i=>{gV(n,i,t)})}function RS(n,e){const t=Pp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,mx(e,t.length>0?t:void 0)}IS(e,r=>{RS(n,r)})}function Dx(n,e){const t=Pp(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,Z.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,Z.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Xd(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?mx(e,void 0):t.length=a+1,Lo(n.eventQueue_,tw(e),i);for(let u=0;u<r.length;u++)b_(r[u])}}const Ax=function(n,e){const t=P3(n),r=t.namespace;return"firebase.com"===t.domain&&Sl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Sl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new TN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Kn(t.pathString)}},P3=function(n){let e="",t="",r="",i="",a="",u=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(C,T)),C<T&&(i=function x3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,T)));const D=function O3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(u="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const x=e.slice(0,y);if("localhost"===x.toLowerCase())t="localhost";else if(x.split(".").length<=2)t=x;else{const k=e.indexOf(".");r=e.substring(0,k).toLowerCase(),t=e.substring(k+1),a=r}"ns"in D&&(a=D.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:a}};class so{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Cn(this._path)?null:xN(this._path)}get ref(){return new va(this._repo,this._path)}get _queryIdentifier(){const e=IL(this._queryParams),t=bN(e);return"{}"===t?"default":t}get _queryObject(){return IL(this._queryParams)}isEqual(e){if(!((e=(0,Z.m9)(e))instanceof so))return!1;const t=this._repo===e._repo,r=ON(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function CG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class va extends so{constructor(e,t){super(e,t,new jN,!1)}get parent(){const e=lL(this._path);return null===e?null:new va(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Uz(n){(0,Z.hu)(!_S,"__referenceConstructor has already been defined"),_S=n})(va),function Wz(n){(0,Z.hu)(!vS,"__referenceConstructor has already been defined"),vS=n}(va);const Rx={};class X3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function v3(n,e,t){if(n.stats_=AN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new lS(n.repoInfo_,(r,i,a,u)=>{uV(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>cV(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Z.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Mp(n.repoInfo_,e,(r,i,a,u)=>{uV(n,r,i,a,u)},r=>{cV(n,r)},r=>{!function E3(n,e){yi(e,(t,r)=>{bx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function tG(n,e){const t=n.toString();return DN[t]||(DN[t]=e()),DN[t]}(n.repoInfo_,()=>new rz(n.stats_,n.server_)),n.infoData_=new JG,n.infoSyncTree_=new KL({startListening:(r,i,a,u)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=X0(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),bx(n,"connected",!1),n.serverSyncTree_=new KL({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(d,p)=>{const y=u(d,p);Lo(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new va(this._repo,Bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Y3(n,e){const t=Rx[e];(!t||t[n.key]!==n)&&Sl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function hV(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Sl("Cannot call "+e+" on a deleted database.")}}function eq(n=(0,Pn.getApp)(),e){return(0,Pn._getProvider)(n,"database").getImmediate({identifier:e})}Mp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Mp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tq(n){(function UW(n){vN=n})(Pn.SDK_VERSION),(0,Pn._registerComponent)(new Ja.wA("database",(e,{instanceIdentifier:t})=>function Z3(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Sl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_i("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=Ax(a,i),d=u.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,a=`http://${y}?ns=${d.namespace}`,u=Ax(a,i),d=u.repoInfo):p=!u.repoInfo.secure;const C=i&&p?new U0(U0.OWNER):new QW(n.name,n.options,e);sV("Invalid Firebase Database URL",u),Cn(u.path)||Sl("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function Q3(n,e,t,r){let i=Rx[e.name];i||(i={},Rx[e.name]=i);let a=i[n.toURLString()];return a&&Sl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new y3(n,!1,t,r),i[n.toURLString()]=a,a}(d,n,C,new YW(n.name,t));return new X3(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pn.registerVersion)(SF,"0.12.8",n),(0,Pn.registerVersion)(SF,"0.12.8","esm2017")}();class Mx{constructor(e){return e}}const CV="database",Nx=new f.OlP("angularfire2.database-instances");function oq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Mx(r)}}const aq={provide:class iq{constructor(){return(0,ct.vb)(CV)}},deps:[[new f.FiY,Nx]]},lq={provide:Mx,useFactory:function sq(n,e){const t=(0,ct.JM)(CV,n,e);return t&&new Mx(t)},deps:[[new f.FiY,Nx],ro]};let uq=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[lq,aq]}),n})();function cq(n,...e){return{ngModule:uq,providers:[{provide:Nx,useFactory:oq(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,[new f.FiY,x0],[new f.FiY,Wd],...e]}]}}const dq=(0,ct.u3)(eq,!0);class xx{constructor(e){return e}}const IV="firestore",Ox=new f.OlP("angularfire2.firestore-instances");function pq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xx(r)}}const gq={provide:class hq{constructor(){return(0,ct.vb)(IV)}},deps:[[new f.FiY,Ox]]},mq={provide:xx,useFactory:function fq(n,e){const t=(0,ct.JM)(IV,n,e);return t&&new xx(t)},deps:[[new f.FiY,Ox],ro]};let _q=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[mq,gq]}),n})();function yq(n,...e){return{ngModule:_q,providers:[{provide:Ox,useFactory:pq(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,[new f.FiY,x0],[new f.FiY,Wd],...e]}]}}const vq=(0,ct.u3)(c0,!0),kx="functions";class Iq{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return(0,Ce.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Ce.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const Fx="us-central1";class Sq{constructor(e,t,r,i,a=Fx,u){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new Iq(t,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin,this.region=Fx}catch(d){this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const DV="@firebase/functions";function kq(n=(0,Pn.getApp)(),e=Fx){return(0,Pn._getProvider)((0,Z.m9)(n),kx).getImmediate({identifier:e})}!function Pq(n,e){(0,Pn._registerComponent)(new Ja.wA(kx,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),u=r.getProvider("auth-internal"),d=r.getProvider("messaging-internal"),p=r.getProvider("app-check-internal");return new Sq(a,u,d,p,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,Pn.registerVersion)(DV,"0.7.11",e),(0,Pn.registerVersion)(DV,"0.7.11","esm2017")}(fetch.bind(self));class Ux{constructor(e){return e}}const RV="functions",Bx=new f.OlP("angularfire2.functions-instances");function Vq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ux(r)}}const Uq={provide:class Fq{constructor(){return(0,ct.vb)(RV)}},deps:[[new f.FiY,Bx]]},Bq={provide:Ux,useFactory:function Lq(n,e){const t=(0,ct.JM)(RV,n,e);return t&&new Ux(t)},deps:[[new f.FiY,Bx],ro]};let $q=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Bq,Uq]}),n})();function jq(n,...e){return{ngModule:$q,providers:[{provide:Bx,useFactory:Vq(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,[new f.FiY,x0],[new f.FiY,Wd],...e]}]}}const Hq=(0,ct.u3)(kq,!0);var Wq=N(2375);class $x{constructor(e){return e}}const MV="messaging",jx=new f.OlP("angularfire2.messaging-instances");function qq(n){return(e,t)=>{if(!ct.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new $x(r)}}const Kq={provide:class Gq{constructor(){return(0,ct.vb)(MV)}},deps:[[new f.FiY,jx]]},Zq={provide:$x,useFactory:function zq(n,e){if(!ct.n1.sync())return null;const t=(0,ct.JM)(MV,n,e);return t&&new $x(t)},deps:[[new f.FiY,jx],ro]};let Yq=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Zq,Kq,{provide:f.ip1,useValue:ct.n1.async,multi:!0}]}),n})();function Qq(n,...e){return{ngModule:Yq,providers:[{provide:jx,useFactory:qq(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,...e]}]}}const Jq=(0,ct.u3)(Wq.KL,!0);N(2833);const NV="@firebase/performance",Hx="0.5.8",Wx="FB-PERF-TRACE-MEASURE",LV="@firebase/performance/config",VV="@firebase/performance/configexpire",UV="Performance",Mi=new Z.LL("performance",UV,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Nl=new Es.Yd(UV);let Gx,BV,$V,qx;Nl.logLevel=Es.in.INFO;class vi{constructor(e){if(this.window=e,!e)throw Mi.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,Z.zI)()?!!(0,Z.hl)()||(Nl.info("IndexedDB is not supported by current browswer"),!1):(Nl.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===Gx&&(Gx=new vi(BV)),Gx}}function zx(){return $V}function jV(n,e){const t=n.length-e.length;if(t<0||t>1)throw Mi.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class oo{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=jV("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=jV("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===qx&&(qx=new oo),qx}}var Fp=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(Fp||(Fp={})),Fp))();const o6=["firebase_","google_","ga_"],a6=new RegExp("^[a-zA-Z]\\w*$");function c6(){const n=vi.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function HV(){switch(vi.getInstance().document.visibilityState){case"visible":return Fp.VISIBLE;case"hidden":return Fp.HIDDEN;default:return Fp.UNKNOWN}}function d6(){const e=vi.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function WV(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Mi.create("no app id");return t}const b6="Could not fetch config, will use default configs";function GV(n){if(!n)return n;const e=oo.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0===t.fpr_enabled||"true"===String(t.fpr_enabled),t.fpr_log_source&&(e.logSource=Number(t.fpr_log_source)),t.fpr_log_endpoint_url&&(e.logEndPointUrl=t.fpr_log_endpoint_url),t.fpr_log_transport_key&&(e.transportKey=t.fpr_log_transport_key),void 0!==t.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate)),void 0!==t.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=zV(e.tracesSamplingRate),e.logNetworkAfterSampling=zV(e.networkRequestsSamplingRate),n}function zV(n){return Math.random()<=n}let Zx,Kx=1;function qV(n){return Kx=2,Zx=Zx||function S6(n){return function D6(){const n=vi.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function i6(n){const e=n.getId();return e.then(t=>{$V=t}),e}(n.installations)).then(e=>function v6(n,e){const t=function E6(){const n=vi.getInstance().localStorage;if(!n)return;const e=n.getItem(VV);if(!e||!function I6(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(LV);if(t)try{return JSON.parse(t)}catch(r){return}}();return t?(GV(t),Promise.resolve()):function C6(n,e){return function s6(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function p6(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Mi.create("no project id");return t}(n.app),i=function g6(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Mi.create("no api key");return t}(n.app),u=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:WV(n.app),app_version:"0.5.8",sdk_version:"0.0.1"})});return fetch(u).then(d=>{if(d.ok)return d.json();throw Mi.create("RC response not ok")})}).catch(()=>{Nl.info(b6)})}(n,e).then(GV).then(r=>function w6(n){const e=vi.getInstance().localStorage;!n||!e||(e.setItem(LV,JSON.stringify(n)),e.setItem(VV,String(Date.now()+60*oo.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>KV(),()=>KV())}(n),Zx}function KV(){Kx=3}let Qx,kS=3,nh=[],YV=!1;function FS(n){setTimeout(()=>{if(0!==kS){if(!nh.length)return FS(1e4);!function N6(){const n=nh.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function x6(n,e){return function O6(n){const e=oo.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||Nl.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(nh=[...e,...nh],Nl.info("Retry transport request later.")),kS=3,FS(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:oo.getInstance().logSource,log_event:e},n).catch(()=>{nh=[...n,...nh],kS--,Nl.info(`Tries left: ${kS}.`),FS(1e4)})}()}},n)}function QV(n,e){Qx||(Qx=function k6(n){return(...e)=>{!function P6(n){if(!n.eventTime||!n.message)throw Mi.create("invalid cc log");nh=[...nh,n]}({message:n(...e),eventTime:Date.now()})}}(L6)),Qx(n,e)}function LS(n){const e=oo.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!vi.getInstance().requiredApisAvailable()||n.isAuto&&HV()!==Fp.VISIBLE||(function T6(){return 3===Kx}()?Jx(n):qV(n.performanceController).then(()=>Jx(n),()=>Jx(n)))}function Jx(n){if(!zx())return;const e=oo.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>QV(n,1),0)}function L6(n,e){return 0===e?function V6(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:JV(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function U6(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:JV(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function JV(n){return{google_app_id:WV(n),app_instance_id:zx(),web_app_info:{sdk_version:"0.5.8",page_url:vi.getInstance().getUrl(),service_worker_status:c6(),visibility_state:HV(),effective_connection_type:d6()},application_process_state:0}}const j6=["_fp","_fcp","_fid"];class rh{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=vi.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Wx}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Mi.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Mi.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),LS(this)}record(e,t,r){if(e<=0)throw Mi.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Mi.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));LS(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function H6(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&j6.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Mi.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function W6(n){const e=Math.floor(n);return e<n&&Nl.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(null!=t?t:0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function h6(n){return!(0===n.length||n.length>40||o6.some(t=>n.startsWith(t))||!n.match(a6))}(e),i=function f6(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Mi.create("invalid attribute name",{attributeName:e});if(!i)throw Mi.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=vi.getInstance().getUrl();if(!a)return;const u=new rh(e,"_wt_"+a,!0),d=Math.floor(1e3*vi.getInstance().getTimeOrigin());if(u.setStartTime(d),t&&t[0]&&(u.setDuration(Math.floor(1e3*t[0].duration)),u.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),u.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),u.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const C=r.find(D=>"first-paint"===D.name);C&&C.startTime&&u.putMetric("_fp",Math.floor(1e3*C.startTime));const T=r.find(D=>"first-contentful-paint"===D.name);T&&T.startTime&&u.putMetric("_fcp",Math.floor(1e3*T.startTime)),i&&u.putMetric("_fid",Math.floor(1e3*i))}LS(u)}static createUserTimingTrace(e,t){LS(new rh(e,t,!1,t))}}function XV(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=vi.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,u=Math.floor(1e3*(t.responseEnd-t.startTime));!function F6(n){const e=oo.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>QV(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:u})}function eU(n){!zx()||(setTimeout(()=>function q6(n){const e=vi.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{rh.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),rh.createOobTrace(n,t,r,a))})}else rh.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function z6(n){const e=vi.getInstance(),t=e.getEntriesByType("resource");for(const r of t)XV(n,r);e.setupObserver("resource",r=>XV(n,r))}(n),0),setTimeout(()=>function K6(n){const e=vi.getInstance(),t=e.getEntriesByType("measure");for(const r of t)tU(n,r);e.setupObserver("measure",r=>tU(n,r))}(n),0))}function tU(n,e){const t=e.name;t.substring(0,Wx.length)!==Wx&&rh.createUserTimingTrace(n,t)}class Z6{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),vi.getInstance().requiredApisAvailable()?(0,Z.eu)().then(t=>{t&&(function M6(){YV||(FS(5500),YV=!0)}(),qV(this).then(()=>eU(this),()=>eU(this)),this.initialized=!0)}).catch(t=>{Nl.info(`Environment doesn't support IndexedDB: ${t}`)}):Nl.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){oo.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return oo.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){oo.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return oo.getInstance().dataCollectionEnabled}}function Q6(n=(0,Pn.getApp)()){return n=(0,Z.m9)(n),(0,Pn._getProvider)(n,"performance").getImmediate()}const J6=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Mi.create("FB not default");if("undefined"==typeof window)throw Mi.create("no window");!function r6(n){BV=n}(window);const i=new Z6(t,r);return i._init(e),i};!function X6(){(0,Pn._registerComponent)(new Ja.wA("performance",J6,"PUBLIC")),(0,Pn.registerVersion)(NV,Hx),(0,Pn.registerVersion)(NV,Hx,"esm2017")}();class Xx{constructor(e){return e}}const nU="performance",eO=new f.OlP("angularfire2.performance-instances");function nK(n){return(e,t,r)=>{if(!zn(t))return null;const i=e.runOutsideAngular(()=>n(r));return new Xx(i)}}const rK={provide:class eK{constructor(){return(0,ct.vb)(nU)}},deps:[[new f.FiY,eO]]},iK={provide:Xx,useFactory:function tK(n,e,t){if(!zn(t))return null;const r=(0,ct.JM)(nU,n,e);return r&&new Xx(r)},deps:[[new f.FiY,eO],ro,f.Lbi]};let sK=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[iK,rK]}),n})();function oK(n,...e){return{ngModule:sK,providers:[{provide:eO,useFactory:nK(n),multi:!0,deps:[f.R0b,f.Lbi,f.zs3,ct.HU,Il,...e]}]}}const aK=(0,ct.u3)(Q6,!0);var lK=N(3226);class tO{constructor(e){return e}}const rU="remote-config",nO=new f.OlP("angularfire2.remote-config-instances");function dK(n){return(e,t)=>{if(!ct._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new tO(r)}}const hK={provide:class uK{constructor(){return(0,ct.vb)(rU)}},deps:[[new f.FiY,nO]]},fK={provide:tO,useFactory:function cK(n,e){if(!ct._J.sync())return null;const t=(0,ct.JM)(rU,n,e);return t&&new tO(t)},deps:[[new f.FiY,nO],ro]};let pK=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[fK,hK,{provide:f.ip1,useValue:ct._J.async,multi:!0}]}),n})();function gK(n,...e){return{ngModule:pK,providers:[{provide:nO,useFactory:dK(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,...e]}]}}const mK=(0,ct.u3)(lK.sN,!0),iU="firebasestorage.googleapis.com";class $r extends Z.ZR{constructor(e,t){super(rO(e),`Firebase Storage: ${t} (${rO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$r.prototype)}_codeEquals(e){return rO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function rO(n){return"storage/"+n}function sO(n){return new $r("invalid-argument",n)}function lU(){return new $r("app-deleted","The Firebase app was deleted.")}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch(i){return new ls(e,"")}if(""===r.path)return r;throw function SK(n){return new $r("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(tt){tt.path_=decodeURIComponent(tt.path)}const T=t.replace(/[.]/g,"\\."),We=[{regex:d,indices:{bucket:1,path:3},postModify:function a(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===iU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let tt=0;tt<We.length;tt++){const xt=We[tt],Lt=xt.regex.exec(e);if(Lt){let Zn=Lt[xt.indices.path];Zn||(Zn=""),r=new ls(Lt[xt.indices.bucket],Zn),xt.postModify(r);break}}if(null==r)throw function TK(n){return new $r("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class NK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function aO(n,e,t,r){if(r<e)throw sO(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sO(`Invalid value for '${n}'. Expected ${t} or less.`)}var ih=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(ih||(ih={})),ih))();class LK{constructor(e,t,r,i,a,u,d,p,y,C,T){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,x)=>{this.resolve_=D,this.reject_=x,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function PK(n){return void 0!==n}(p)?a():a(p)}catch(p){u(p)}else if(null!==d){const p=function iO(){return new $r("unknown","An unknown error occurred, please check the error payload for server response.")}();p.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,p):p)}else u(i.canceled?this.appDelete_?lU():function oU(){return new $r("canceled","User canceled the upload/download.")}():function IK(){return new $r("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new US(!1,null,!0)):this.backoffId_=function xK(n,e,t){let r=1,i=null,a=null,u=!1,d=0;function p(){return 2===d}let y=!1;function C(...ie){y||(y=!0,e.apply(null,ie))}function T(ie){i=setTimeout(()=>{i=null,n(x,p())},ie)}function D(){a&&clearTimeout(a)}function x(ie,...Qe){if(y)return void D();if(ie)return D(),void C.call(null,ie,...Qe);if(p()||u)return D(),void C.call(null,ie,...Qe);let We;r<64&&(r*=2),1===d?(d=2,We=0):We=1e3*(r+Math.random()),T(We)}let k=!1;function q(ie){k||(k=!0,D(),!y&&(null!==i?(ie||(d=2),clearTimeout(i),T(0)):ie||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,q(!0)},t),q}((r,i)=>{if(i)return void r(!1,new US(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===ih.NO_ERROR,p=a.getStatus();if(!d||this.isRetryStatusCode_(p)){const C=a.getErrorCode()===ih.ABORT;return void r(!1,new US(!1,null,C))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new US(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function OK(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class US{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class Lp{constructor(e,t){this._service=e,this._location=t instanceof ls?t:ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lp(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function gU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function QK(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ls(this._location.bucket,e);return new Lp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function MK(n){return new $r("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function MU(n,e){const t=null==e?void 0:e.storageBucket;return null==t?null:ls.makeFromBucketSpec(t,n)}class pO{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=iU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ls.makeFromBucketSpec(i,this._host):MU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ls.makeFromBucketSpec(this._url,e):MU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new NK(lU());{const a=function jK(n,e,t,r,i,a){const u=function cU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),d=n.url+u,p=Object.assign({},n.headers);return function BK(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function VK(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function UK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,a),function $K(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new LK(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const NU="@firebase/storage",OU="storage";function F4(n=(0,Pn.getApp)(),e){return n=(0,Z.m9)(n),(0,Pn._getProvider)(n,OU).getImmediate({identifier:e})}function L4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pO(t,r,i,e,Pn.SDK_VERSION)}!function V4(){(0,Pn._registerComponent)(new Ja.wA(OU,L4,"PUBLIC").setMultipleInstances(!0)),(0,Pn.registerVersion)(NU,"0.9.5",""),(0,Pn.registerVersion)(NU,"0.9.5","esm2017")}();class gO{constructor(e){return e}}const PU="storage",mO=new f.OlP("angularfire2.storage-instances");function $4(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gO(r)}}const j4={provide:class U4{constructor(){return(0,ct.vb)(PU)}},deps:[[new f.FiY,mO]]},H4={provide:gO,useFactory:function B4(n,e){const t=(0,ct.JM)(PU,n,e);return t&&new gO(t)},deps:[[new f.FiY,mO],ro]};let W4=(()=>{class n{constructor(){(0,Ri.KN)("angularfire",ct.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[H4,j4]}),n})();function G4(n,...e){return{ngModule:W4,providers:[{provide:mO,useFactory:$4(n),multi:!0,deps:[f.R0b,f.zs3,ct.HU,Il,[new f.FiY,x0],[new f.FiY,Wd],...e]}]}}const z4=(0,ct.u3)(F4,!0);class kU{}const hc="*";function FU(n,e=null){return{type:2,steps:n,options:e}}function LU(n){return{type:6,styles:n,offset:null}}function VU(n){Promise.resolve(null).then(n)}class dw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){VU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class UU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?VU(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Rn=!1;function BU(n){return new f.vHH(3e3,Rn)}function D8(){return"undefined"!=typeof window&&void 0!==window.document}function yO(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function sh(n){switch(n.length){case 0:return new dw;case 1:return n[0];default:return new UU(n)}}function $U(n,e,t,r,i={},a={}){const u=[],d=[];let p=-1,y=null;if(r.forEach(C=>{const T=C.offset,D=T==p,x=D&&y||{};Object.keys(C).forEach(k=>{let q=k,ie=C[k];if("offset"!==k)switch(q=e.normalizePropertyName(q,u),ie){case"!":ie=i[k];break;case hc:ie=a[k];break;default:ie=e.normalizeStyleValue(k,q,ie,u)}x[q]=ie}),D||d.push(x),y=x,p=T}),u.length)throw function m8(n){return new f.vHH(3502,Rn)}();return d}function vO(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&EO(t,"start",n)));break;case"done":n.onDone(()=>r(t&&EO(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&EO(t,"destroy",n)))}}function EO(n,e,t){const r=t.totalTime,a=wO(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function wO(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function ao(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function jU(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let bO=(n,e)=>!1,HU=(n,e,t)=>[],WU=null;function CO(n){const e=n.parentNode||n.host;return e===WU?null:e}(yO()||"undefined"!=typeof Element)&&(D8()?(WU=(()=>document.documentElement)(),bO=(n,e)=>{for(;e;){if(e===n)return!0;e=CO(e)}return!1}):bO=(n,e)=>n.contains(e),HU=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Vp=null,GU=!1;function zU(n){Vp||(Vp=function R8(){return"undefined"!=typeof document?document.body:null}()||{},GU=!!Vp.style&&"WebkitAppearance"in Vp.style);let e=!0;return Vp.style&&!function A8(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Vp.style,!e&&GU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Vp.style)),e}const qU=bO,KU=HU;let ZU=(()=>{class n{validateStyleProperty(t){return zU(t)}matchesElement(t,r){return!1}containsElement(t,r){return qU(t,r)}getParentElement(t){return CO(t)}query(t,r,i){return KU(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,d=[],p){return new dw(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),IO=(()=>{class n{}return n.NOOP=new ZU,n})();const TO="ng-enter",WS="ng-leave",GS="ng-trigger",zS=".ng-trigger",QU="ng-animating",SO=".ng-animating";function Up(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:DO(parseFloat(e[1]),e[2])}function DO(n,e){return"s"===e?1e3*n:n}function qS(n,e,t){return n.hasOwnProperty("duration")?n:function x8(n,e,t){let i,a=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(BU()),{duration:0,delay:0,easing:""};i=DO(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(a=DO(parseFloat(p),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function K4(){return new f.vHH(3100,Rn)}()),d=!0),a<0&&(e.push(function Z4(){return new f.vHH(3101,Rn)}()),d=!0),d&&e.splice(p,0,BU())}return{duration:i,delay:a,easing:u}}(n,e,t)}function V_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function oh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else V_(n,t);return t}function XU(n,e,t){return t?e+":"+t+";":""}function eB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=XU(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=XU(0,k8(t),n.style[t]));n.setAttribute("style",e)}function Pl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=RO(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),yO()&&eB(n))}function Bp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=RO(t);n.style[r]=""}),yO()&&eB(n))}function hw(n){return Array.isArray(n)?1==n.length?n[0]:FU(n):n}const AO=new RegExp("{{\\s*(.+?)\\s*}}","g");function tB(n){let e=[];if("string"==typeof n){let t;for(;t=AO.exec(n);)e.push(t[1]);AO.lastIndex=0}return e}function KS(n,e,t){const r=n.toString(),i=r.replace(AO,(a,u)=>{let d=e[u];return e.hasOwnProperty(u)||(t.push(function Q4(n){return new f.vHH(3003,Rn)}()),d=""),d.toString()});return i==r?n:i}function ZS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const P8=/-+([a-z0-9])/g;function RO(n){return n.replace(P8,(...e)=>e[1].toUpperCase())}function k8(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function lo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function J4(n){return new f.vHH(3004,Rn)}()}}function nB(n,e){return window.getComputedStyle(n)[e]}function $8(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function j8(n,e,t){if(":"==n[0]){const p=function H8(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function h8(n){return new f.vHH(3016,Rn)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function d8(n){return new f.vHH(3015,Rn)}()),e;const i=r[1],a=r[2],u=r[3];e.push(rB(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(rB(u,i))}(r,t,e)):t.push(n),t}const XS=new Set(["true","1"]),eD=new Set(["false","0"]);function rB(n,e){const t=XS.has(n)||eD.has(n),r=XS.has(e)||eD.has(e);return(i,a)=>{let u="*"==n||n==i,d="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?XS.has(n):eD.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?XS.has(e):eD.has(e)),u&&d}}const W8=new RegExp("s*:selfs*,?","g");function MO(n,e,t,r){return new G8(n).build(e,t,r)}class G8{constructor(e){this._driver=e}build(e,t,r){const i=new K8(t);this._resetContextStyleTimingState(i);const a=lo(this,hw(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function e8(){return new f.vHH(3006,Rn)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,a.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push(function t8(){return new f.vHH(3007,Rn)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(d=>{if(tD(d)){const p=d;Object.keys(p).forEach(y=>{tB(p[y]).forEach(C=>{u.hasOwnProperty(C)||a.add(C)})})}}),a.size&&(ZS(a.values()),t.errors.push(function n8(n,e){return new f.vHH(3008,Rn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=lo(this,hw(e.animation),t);return{type:1,matchers:$8(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$p(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>lo(this,r,t)),options:$p(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const d=lo(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:$p(e.options)}}visitAnimate(e,t){const r=function Y8(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return NO(qS(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=NO(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||qS(r,e),NO(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:LU({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=LU(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==hc?r.push(u):t.errors.push(function r8(n){return new f.vHH(3002,Rn)}()):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(tD(u)){const d=u,p=d.easing;if(p&&(a=p,delete d.easing),!i)for(let y in d)if(d[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete u[d],void t.unsupportedCSSPropertiesFound.add(d);const p=t.collectedStyles[t.currentQuerySelector],y=p[d];let C=!0;y&&(a!=i&&a>=y.startTime&&i<=y.endTime&&(t.errors.push(function i8(n,e,t,r,i){return new f.vHH(3010,Rn)}()),C=!1),a=y.startTime),C&&(p[d]={startTime:a,endTime:i}),t.options&&function O8(n,e,t){const r=e.params||{},i=tB(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function Y4(n){return new f.vHH(3001,Rn)}())})}(u[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function s8(){return new f.vHH(3011,Rn)}()),r;let a=0;const u=[];let d=!1,p=!1,y=0;const C=e.steps.map(Qe=>{const Ze=this._makeStyleAst(Qe,t);let We=null!=Ze.offset?Ze.offset:function Z8(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(tD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(tD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ze.styles),tt=0;return null!=We&&(a++,tt=Ze.offset=We),p=p||tt<0||tt>1,d=d||tt<y,y=tt,u.push(tt),Ze});p&&t.errors.push(function o8(){return new f.vHH(3012,Rn)}()),d&&t.errors.push(function a8(){return new f.vHH(3200,Rn)}());const T=e.steps.length;let D=0;a>0&&a<T?t.errors.push(function l8(){return new f.vHH(3202,Rn)}()):0==a&&(D=1/(T-1));const x=T-1,k=t.currentTime,q=t.currentAnimateTimings,ie=q.duration;return C.forEach((Qe,Ze)=>{const We=D>0?Ze==x?1:D*Ze:u[Ze],tt=We*ie;t.currentTime=k+q.delay+tt,q.duration=tt,this._validateStyleAst(Qe,t),Qe.offset=We,r.styles.push(Qe)}),r}visitReference(e,t){return{type:8,animation:lo(this,hw(e.animation),t),options:$p(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$p(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$p(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function z8(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(W8,"")),n=n.replace(/@\*/g,zS).replace(/@\w+/g,t=>zS+"-"+t.substr(1)).replace(/:animating/g,SO),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,ao(t.collectedStyles,t.currentQuerySelector,{});const d=lo(this,hw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:$p(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function u8(){return new f.vHH(3013,Rn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:qS(e.timings,t.errors,!0);return{type:12,animation:lo(this,hw(e.animation),t),timings:r,options:null}}}class K8{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tD(n){return!Array.isArray(n)&&"object"==typeof n}function $p(n){return n?(n=V_(n)).params&&(n.params=function q8(n){return n?V_(n):null}(n.params)):n={},n}function NO(n,e,t){return{duration:n,delay:e,easing:t}}function xO(n,e,t,r,i,a,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:d}}class nD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const X8=new RegExp(":enter","g"),tZ=new RegExp(":leave","g");function OO(n,e,t,r,i,a={},u={},d,p,y=[]){return(new nZ).buildKeyframes(n,e,t,r,i,a,u,d,p,y)}class nZ{buildKeyframes(e,t,r,i,a,u,d,p,y,C=[]){y=y||new nD;const T=new PO(e,t,y,i,a,C,[]);T.options=p,T.currentTimeline.setStyles([u],null,T.errors,p),lo(this,r,T);const D=T.timelines.filter(x=>x.containsAnimation());if(Object.keys(d).length){let x;for(let k=D.length-1;k>=0;k--){const q=D[k];if(q.element===t){x=q;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([d],null,T.errors,p)}return D.length?D.map(x=>x.buildKeyframes()):[xO(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Up(r.duration):null,d=null!=r.delay?Up(r.delay):null;return 0!==u&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,u,d);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),lo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rD);const u=Up(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>lo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Up(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),lo(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return qS(t.params?KS(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*a),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Up(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rD);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,C)=>{t.currentQueryIndex=C;const T=t.createSubContext(e.options,y);a&&T.delayNextStep(a),y===t.element&&(p=T.currentTimeline),lo(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),d=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const T=C.currentTime;lo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const rD={};class PO{constructor(e,t,r,i,a,u,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new iD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Up(r.duration)),null!=r.delay&&(i.delay=Up(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=KS(a[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new PO(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=rD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new rZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(X8,"."+this._enterClassName)).replace(tZ,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!a&&0==d.length&&u.push(function c8(n){return new f.vHH(3014,Rn)}()),d}}class iD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new iD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||hc,this._currentKeyframe[t]=hc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function iZ(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=hc})):oh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(d=>{const p=KS(u[d],a,r);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:hc),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=oh(d,!0);Object.keys(y).forEach(C=>{const T=y[C];"!"==T?e.add(C):T==hc&&t.add(C)}),r||(y.offset=p/this.duration),i.push(y)});const a=e.size?ZS(e.values()):[],u=t.size?ZS(t.values()):[];if(r){const d=i[0],p=V_(d);d.offset=0,p.offset=1,i=[d,p]}return xO(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class rZ extends iD{constructor(e,t,r,i,a,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,d=t/u,p=oh(e[0],!1);p.offset=0,a.push(p);const y=oh(e[0],!1);y.offset=oB(d),a.push(y);const C=e.length-1;for(let T=1;T<=C;T++){let D=oh(e[T],!1);D.offset=oB((t+D.offset*r)/u),a.push(D)}r=u,t=0,i="",e=a}return xO(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function oB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class kO{}class sZ extends kO{normalizePropertyName(e,t){return RO(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(oZ[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function X4(n,e){return new f.vHH(3005,Rn)}())}return u+a}}const oZ=(()=>function aZ(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function aB(n,e,t,r,i,a,u,d,p,y,C,T,D){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:T,errors:D}}const FO={};class lB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function lZ(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,d,p,y,C){const T=[],D=this.ast.options&&this.ast.options.params||FO,k=this.buildStyles(r,d&&d.params||FO,T),q=p&&p.params||FO,ie=this.buildStyles(i,q,T),Qe=new Set,Ze=new Map,We=new Map,tt="void"===i,xt={params:Object.assign(Object.assign({},D),q)},Lt=C?[]:OO(e,t,this.ast.animation,a,u,k,ie,xt,y,T);let on=0;if(Lt.forEach(lr=>{on=Math.max(lr.duration+lr.delay,on)}),T.length)return aB(t,this._triggerName,r,i,tt,k,ie,[],[],Ze,We,on,T);Lt.forEach(lr=>{const oi=lr.element,pw=ao(Ze,oi,{});lr.preStyleProps.forEach(kl=>pw[kl]=!0);const ah=ao(We,oi,{});lr.postStyleProps.forEach(kl=>ah[kl]=!0),oi!==t&&Qe.add(oi)});const Zn=ZS(Qe.values());return aB(t,this._triggerName,r,i,tt,k,ie,Lt,Zn,Ze,We,on)}}class uZ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=V_(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(d=>{let p=u[d];p.length>1&&(p=KS(p,i,t));const y=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,y,p,t),r[y]=p})}}),r}}class dZ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new uZ(i.style,i.options&&i.options.params||{},r)}),uB(this.states,"true","1"),uB(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new lB(e,i,this.states))}),this.fallbackTransition=function hZ(n,e,t){return new lB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function uB(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const fZ=new nD;class pZ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=MO(this._driver,t,r,[]);if(r.length)throw function _8(n){return new f.vHH(3503,Rn)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=$U(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const d=new Map;if(a?(u=OO(this._driver,t,a,TO,WS,{},{},r,fZ,i),u.forEach(C=>{const T=ao(d,C.element,{});C.postStyleProps.forEach(D=>T[D]=null)})):(i.push(function y8(){return new f.vHH(3300,Rn)}()),u=[]),i.length)throw function v8(n){return new f.vHH(3504,Rn)}();d.forEach((C,T)=>{Object.keys(C).forEach(D=>{C[D]=this._driver.computeStyle(T,D,hc)})});const y=sh(u.map(C=>{const T=d.get(C.element);return this._buildPlayer(C,{},T)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function E8(n){return new f.vHH(3301,Rn)}();return t}listen(e,t,r,i){const a=wO(t,"","","");return vO(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const cB="ng-animate-queued",LO="ng-animate-disabled",vZ=[],dB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},EZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vo="__ng_removed";class VO{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function IZ(n){return null!=n?n:null}(r?e.value:e),r){const a=V_(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const fw="void",UO=new VO(fw);class wZ{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Uo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function w8(n,e){return new f.vHH(3302,Rn)}();if(null==r||0==r.length)throw function b8(n){return new f.vHH(3303,Rn)}();if(!function TZ(n){return"start"==n||"done"==n}(r))throw function C8(n,e){return new f.vHH(3400,Rn)}();const a=ao(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const d=ao(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Uo(e,GS),Uo(e,GS+"-"+t),d[t]=UO),()=>{this._engine.afterFlush(()=>{const p=a.indexOf(u);p>=0&&a.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function I8(n){return new f.vHH(3401,Rn)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new BO(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Uo(e,GS),Uo(e,GS+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const y=new VO(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[t]=y,p||(p=UO),y.value!==fw&&p.value===y.value){if(!function AZ(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(p.params,y.params)){const q=[],ie=a.matchStyles(p.value,p.params,q),Qe=a.matchStyles(y.value,y.params,q);q.length?this._engine.reportError(q):this._engine.afterFlush(()=>{Bp(e,ie),Pl(e,Qe)})}return}const D=ao(this._engine.playersByElement,e,[]);D.forEach(q=>{q.namespaceId==this.id&&q.triggerName==t&&q.queued&&q.destroy()});let x=a.matchTransition(p.value,y.value,e,y.params),k=!1;if(!x){if(!i)return;x=a.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:x,fromState:p,toState:y,player:u,isFallbackTransition:k}),k||(Uo(e,cB),u.onStart(()=>{U_(e,cB)})),u.onDone(()=>{let q=this.players.indexOf(u);q>=0&&this.players.splice(q,1);const ie=this._engine.playersByElement.get(e);if(ie){let Qe=ie.indexOf(u);Qe>=0&&ie.splice(Qe,1)}}),this.players.push(u),D.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,zS,!0);r.forEach(i=>{if(i[Vo])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const d=[];if(Object.keys(a).forEach(p=>{if(u.set(p,a[p].value),this._triggers[p]){const y=this.trigger(e,p,fw,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&sh(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const p=this._triggers[u].fallbackTransition,y=r[u]||UO,C=new VO(fw),T=new BO(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:y,toState:C,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Vo];(!a||a===dB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Uo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(d=>{if(d.name==r.triggerName){const p=wO(a,r.triggerName,r.fromState.value,r.toState.value);p._data=e,vO(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class bZ{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new wZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let u=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}}else for(let d=a;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),u=!0;break}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const d=this._fetchNamespace(u);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(sD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!sD(t))return;const a=t[Vo];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Uo(e,LO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),U_(e,LO))}removeNode(e,t,r,i){if(sD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Vo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return sD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,zS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,SO,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return sh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Vo];if(r&&r.setForRemoval){if(e[Vo]=dB,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(LO))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Uo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?sh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function T8(n){return new f.vHH(3402,Rn)}()}_flushAnimations(e,t){const r=new nD,i=[],a=new Map,u=[],d=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(Nt=>{C.add(Nt);const Ut=this.driver.query(Nt,".ng-animate-queued",!0);for(let Jt=0;Jt<Ut.length;Jt++)C.add(Ut[Jt])});const T=this.bodyNode,D=Array.from(this.statesByElement.keys()),x=pB(D,this.collectedEnterElements),k=new Map;let q=0;x.forEach((Nt,Ut)=>{const Jt=TO+q++;k.set(Ut,Jt),Nt.forEach(Vn=>Uo(Vn,Jt))});const ie=[],Qe=new Set,Ze=new Set;for(let Nt=0;Nt<this.collectedLeaveElements.length;Nt++){const Ut=this.collectedLeaveElements[Nt],Jt=Ut[Vo];Jt&&Jt.setForRemoval&&(ie.push(Ut),Qe.add(Ut),Jt.hasAnimation?this.driver.query(Ut,".ng-star-inserted",!0).forEach(Vn=>Qe.add(Vn)):Ze.add(Ut))}const We=new Map,tt=pB(D,Array.from(Qe));tt.forEach((Nt,Ut)=>{const Jt=WS+q++;We.set(Ut,Jt),Nt.forEach(Vn=>Uo(Vn,Jt))}),e.push(()=>{x.forEach((Nt,Ut)=>{const Jt=k.get(Ut);Nt.forEach(Vn=>U_(Vn,Jt))}),tt.forEach((Nt,Ut)=>{const Jt=We.get(Ut);Nt.forEach(Vn=>U_(Vn,Jt))}),ie.forEach(Nt=>{this.processLeaveNode(Nt)})});const xt=[],Lt=[];for(let Nt=this._namespaceList.length-1;Nt>=0;Nt--)this._namespaceList[Nt].drainQueuedTransitions(t).forEach(Jt=>{const Vn=Jt.player,Ei=Jt.element;if(xt.push(Vn),this.collectedEnterElements.length){const cs=Ei[Vo];if(cs&&cs.setForMove){if(cs.previousTriggersValues&&cs.previousTriggersValues.has(Jt.triggerName)){const jp=cs.previousTriggersValues.get(Jt.triggerName),uh=this.statesByElement.get(Jt.element);uh&&uh[Jt.triggerName]&&(uh[Jt.triggerName].value=jp)}return void Vn.destroy()}}const Fl=!T||!this.driver.containsElement(T,Ei),uo=We.get(Ei),lh=k.get(Ei),Fr=this._buildInstruction(Jt,r,lh,uo,Fl);if(Fr.errors&&Fr.errors.length)return void Lt.push(Fr);if(Fl)return Vn.onStart(()=>Bp(Ei,Fr.fromStyles)),Vn.onDestroy(()=>Pl(Ei,Fr.toStyles)),void i.push(Vn);if(Jt.isFallbackTransition)return Vn.onStart(()=>Bp(Ei,Fr.fromStyles)),Vn.onDestroy(()=>Pl(Ei,Fr.toStyles)),void i.push(Vn);const IB=[];Fr.timelines.forEach(cs=>{cs.stretchStartingKeyframe=!0,this.disabledNodes.has(cs.element)||IB.push(cs)}),Fr.timelines=IB,r.append(Ei,Fr.timelines),u.push({instruction:Fr,player:Vn,element:Ei}),Fr.queriedElements.forEach(cs=>ao(d,cs,[]).push(Vn)),Fr.preStyleProps.forEach((cs,jp)=>{const uh=Object.keys(cs);if(uh.length){let Hp=p.get(jp);Hp||p.set(jp,Hp=new Set),uh.forEach(jO=>Hp.add(jO))}}),Fr.postStyleProps.forEach((cs,jp)=>{const uh=Object.keys(cs);let Hp=y.get(jp);Hp||y.set(jp,Hp=new Set),uh.forEach(jO=>Hp.add(jO))})});if(Lt.length){const Nt=[];Lt.forEach(Ut=>{Nt.push(function S8(n,e){return new f.vHH(3505,Rn)}())}),xt.forEach(Ut=>Ut.destroy()),this.reportError(Nt)}const on=new Map,Zn=new Map;u.forEach(Nt=>{const Ut=Nt.element;r.has(Ut)&&(Zn.set(Ut,Ut),this._beforeAnimationBuild(Nt.player.namespaceId,Nt.instruction,on))}),i.forEach(Nt=>{const Ut=Nt.element;this._getPreviousPlayers(Ut,!1,Nt.namespaceId,Nt.triggerName,null).forEach(Vn=>{ao(on,Ut,[]).push(Vn),Vn.destroy()})});const lr=ie.filter(Nt=>mB(Nt,p,y)),oi=new Map;fB(oi,this.driver,Ze,y,hc).forEach(Nt=>{mB(Nt,p,y)&&lr.push(Nt)});const ah=new Map;x.forEach((Nt,Ut)=>{fB(ah,this.driver,new Set(Nt),p,"!")}),lr.forEach(Nt=>{const Ut=oi.get(Nt),Jt=ah.get(Nt);oi.set(Nt,Object.assign(Object.assign({},Ut),Jt))});const kl=[],gw=[],mw={};u.forEach(Nt=>{const{element:Ut,player:Jt,instruction:Vn}=Nt;if(r.has(Ut)){if(C.has(Ut))return Jt.onDestroy(()=>Pl(Ut,Vn.toStyles)),Jt.disabled=!0,Jt.overrideTotalTime(Vn.totalTime),void i.push(Jt);let Ei=mw;if(Zn.size>1){let uo=Ut;const lh=[];for(;uo=uo.parentNode;){const Fr=Zn.get(uo);if(Fr){Ei=Fr;break}lh.push(uo)}lh.forEach(Fr=>Zn.set(Fr,Ei))}const Fl=this._buildAnimation(Jt.namespaceId,Vn,on,a,ah,oi);if(Jt.setRealPlayer(Fl),Ei===mw)kl.push(Jt);else{const uo=this.playersByElement.get(Ei);uo&&uo.length&&(Jt.parentPlayer=sh(uo)),i.push(Jt)}}else Bp(Ut,Vn.fromStyles),Jt.onDestroy(()=>Pl(Ut,Vn.toStyles)),gw.push(Jt),C.has(Ut)&&i.push(Jt)}),gw.forEach(Nt=>{const Ut=a.get(Nt.element);if(Ut&&Ut.length){const Jt=sh(Ut);Nt.setRealPlayer(Jt)}}),i.forEach(Nt=>{Nt.parentPlayer?Nt.syncPlayerEvents(Nt.parentPlayer):Nt.destroy()});for(let Nt=0;Nt<ie.length;Nt++){const Ut=ie[Nt],Jt=Ut[Vo];if(U_(Ut,WS),Jt&&Jt.hasAnimation)continue;let Vn=[];if(d.size){let Fl=d.get(Ut);Fl&&Fl.length&&Vn.push(...Fl);let uo=this.driver.query(Ut,SO,!0);for(let lh=0;lh<uo.length;lh++){let Fr=d.get(uo[lh]);Fr&&Fr.length&&Vn.push(...Fr)}}const Ei=Vn.filter(Fl=>!Fl.destroyed);Ei.length?SZ(this,Ut,Ei):this.processLeaveNode(Ut)}return ie.length=0,kl.forEach(Nt=>{this.players.push(Nt),Nt.onDone(()=>{Nt.destroy();const Ut=this.players.indexOf(Nt);this.players.splice(Ut,1)}),Nt.play()}),kl}elementContainsData(e,t){let r=!1;const i=t[Vo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const p=!a||a==fw;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==a,T=ao(r,y,[]);this._getPreviousPlayers(y,C,u,d,t.toState).forEach(x=>{const k=x.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),x.destroy(),T.push(x)})}Bp(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const d=t.triggerName,p=t.element,y=[],C=new Set,T=new Set,D=t.timelines.map(k=>{const q=k.element;C.add(q);const ie=q[Vo];if(ie&&ie.removedBeforeQueried)return new dw(k.duration,k.delay);const Qe=q!==p,Ze=function DZ(n){const e=[];return gB(n,e),e}((r.get(q)||vZ).map(on=>on.getRealPlayer())).filter(on=>!!on.element&&on.element===q),We=a.get(q),tt=u.get(q),xt=$U(0,this._normalizer,0,k.keyframes,We,tt),Lt=this._buildPlayer(k,xt,Ze);if(k.subTimeline&&i&&T.add(q),Qe){const on=new BO(e,d,q);on.setRealPlayer(Lt),y.push(on)}return Lt});y.forEach(k=>{ao(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>function CZ(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,k.element,k))}),C.forEach(k=>Uo(k,QU));const x=sh(D);return x.onDestroy(()=>{C.forEach(k=>U_(k,QU)),Pl(p,t.toStyles)}),T.forEach(k=>{ao(i,k,[]).push(x)}),x}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new dw(e.duration,e.delay)}}class BO{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new dw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>vO(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ao(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function sD(n){return n&&1===n.nodeType}function hB(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function fB(n,e,t,r,i){const a=[];t.forEach(p=>a.push(hB(p)));const u=[];r.forEach((p,y)=>{const C={};p.forEach(T=>{const D=C[T]=e.computeStyle(y,T,i);(!D||0==D.length)&&(y[Vo]=EZ,u.push(y))}),n.set(y,C)});let d=0;return t.forEach(p=>hB(p,a[d++])),u}function pB(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(d){if(!d)return 1;let p=a.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?1:u(y),a.set(d,p),p}return e.forEach(d=>{const p=u(d);1!==p&&t.get(p).push(d)}),t}function Uo(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function U_(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function SZ(n,e,t){sh(t).onDone(()=>n.processLeaveNode(e))}function gB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof UU?gB(r.players,e):e.push(r)}}function mB(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class oD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new bZ(e,t,r),this._timelineEngine=new pZ(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const p=[],C=MO(this._driver,a,p,[]);if(p.length)throw function g8(n,e){return new f.vHH(3404,Rn)}();d=function cZ(n,e,t){return new dZ(n,e,t)}(i,C,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=jU(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,d]=jU(r);return this._timelineEngine.listen(u,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let MZ=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Pl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pl(this._element,this._initialStyles),this._endStyles&&(Pl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Bp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bp(this._element,this._endStyles),this._endStyles=null),Pl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $O(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];NZ(i)&&(e=e||{},e[i]=n[i])}return e}function NZ(n){return"display"===n||"position"===n}class _B{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:nB(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xZ{validateStyleProperty(e){return zU(e)}matchesElement(e,t){return!1}containsElement(e,t){return qU(e,t)}getParentElement(e){return CO(e)}query(e,t,r){return KU(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(p.easing=a);const y={},C=u.filter(D=>D instanceof _B);(function F8(n,e){return 0===n||0===e})(r,i)&&C.forEach(D=>{let x=D.currentSnapshot;Object.keys(x).forEach(k=>y[k]=x[k])}),t=function L8(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(d=>{a.hasOwnProperty(d)||u.push(d),a[d]=t[d]}),u.length)for(var i=1;i<e.length;i++){let d=e[i];u.forEach(function(p){d[p]=nB(n,p)})}}return e}(e,t=t.map(D=>oh(D,!1)),y);const T=function RZ(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$O(e[0]),e.length>1&&(r=$O(e[e.length-1]))):e&&(t=$O(e)),t||r?new MZ(n,t,r):null}(e,t);return new _B(e,t,p,T)}}let OZ=(()=>{class n extends kU{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?FU(t):t;return yB(this._renderer,null,r,"register",[i]),new PZ(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class PZ extends class q4{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new kZ(this._id,e,t||{},this._renderer)}}class kZ{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return yB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function yB(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const vB="@.disabled";let FZ=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const d=null==u?void 0:u.parentNode(a);d&&u.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new EB("",a,this.engine),this._rendererCache.set(a,C)),C}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(u,d,t,C.name,C)};return r.data.animation.forEach(p),new LZ(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,d]=a;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(oD),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class EB{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==vB?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class LZ extends EB{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==vB?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function VZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function UZ(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let BZ=(()=>{class n extends oD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(IO),f.LFG(kO))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const wB=new f.OlP("AnimationModuleType"),bB=[{provide:kU,useClass:OZ},{provide:kO,useFactory:function $Z(){return new sZ}},{provide:oD,useClass:BZ},{provide:f.FYo,useFactory:function jZ(n,e,t){return new FZ(n,e,t)},deps:[nr,oD,f.R0b]}],CB=[{provide:IO,useFactory:()=>new xZ},{provide:wB,useValue:"BrowserAnimations"},...bB],HZ=[{provide:IO,useClass:ZU},{provide:wB,useValue:"NoopAnimations"},...bB];let WZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?HZ:CB}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:CB,imports:[Ra]}),n})(),GZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[rW]}),n.\u0275inj=f.cJS({providers:[TF,gN],imports:[[Ra,Qh,Co,tW,Ws.hO.initializeApp(hN_firebase),M2(()=>N2(hN_firebase)),VW(()=>mW()),hW(()=>pW()),cq(()=>dq()),yq(()=>vq()),jq(()=>Hq()),Qq(()=>Jq()),oK(()=>aK()),gK(()=>mK()),G4(()=>z4()),WZ,dN]]}),n})();(0,f.G48)(),wh().bootstrapModule(GZ).catch(n=>console.error(n))},6148:(Rt,xe,N)=>{N.d(xe,{IH:()=>Hn,Gb:()=>qt,Kz:()=>Xt,Iv:()=>an});var f=N(5861),j=N(9681),P=N(1877),ne=N(2090),ge=N(4859);N(2833);const ae="analytics",ce="firebase_id",W="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y="https://www.googletagmanager.com/gtag/js",je=new P.Yd("@firebase/analytics");function Pe(Q){return Promise.all(Q.map(me=>me.catch(Se=>Se)))}function Oe(Q,me){const Se=document.createElement("script");Se.src=`${Y}?l=${Q}&id=${me}`,Se.async=!0,document.head.appendChild(Se)}function _e(Q,me,Se,B,O,H){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,f.Z)(function*(Q,me,Se,B,O,H){const X=B[O];try{if(X)yield me[X];else{const F=(yield Pe(Se)).find($=>$.measurementId===O);F&&(yield me[F.appId])}}catch(M){je.error(M)}Q("config",O,H)})).apply(this,arguments)}function at(Q,me,Se,B,O){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,f.Z)(function*(Q,me,Se,B,O){try{let H=[];if(O&&O.send_to){let X=O.send_to;Array.isArray(X)||(X=[X]);const M=yield Pe(Se);for(const F of X){const $=M.find(qe=>qe.measurementId===F),de=$&&me[$.appId];if(!de){H=[];break}H.push(de)}}0===H.length&&(H=Object.values(me)),yield Promise.all(H),Q("event",B,O||{})}catch(H){je.error(H)}})).apply(this,arguments)}function Ee(){const Q=window.document.getElementsByTagName("script");for(const me of Object.values(Q))if(me.src&&me.src.includes(Y))return me;return null}const J=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),se=new class oe{constructor(me={},Se=1e3){this.throttleMetadata=me,this.intervalMillis=Se}getThrottleMetadata(me){return this.throttleMetadata[me]}setThrottleMetadata(me,Se){this.throttleMetadata[me]=Se}deleteThrottleMetadata(me){delete this.throttleMetadata[me]}};function le(Q){return new Headers({Accept:"application/json","x-goog-api-key":Q})}function Te(Q){return fe.apply(this,arguments)}function fe(){return(fe=(0,f.Z)(function*(Q){var me;const{appId:Se,apiKey:B}=Q,O={method:"GET",headers:le(B)},H=W.replace("{app-id}",Se),X=yield fetch(H,O);if(200!==X.status&&304!==X.status){let M="";try{const F=yield X.json();(null===(me=F.error)||void 0===me?void 0:me.message)&&(M=F.error.message)}catch(F){}throw J.create("config-fetch-failed",{httpStatus:X.status,responseMessage:M})}return X.json()})).apply(this,arguments)}function ze(Q){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(Q,me=se,Se){const{appId:B,apiKey:O,measurementId:H}=Q.options;if(!B)throw J.create("no-app-id");if(!O){if(H)return{measurementId:H,appId:B};throw J.create("no-api-key")}const X=me.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},M=new jn;return setTimeout((0,f.Z)(function*(){M.abort()}),void 0!==Se?Se:6e4),jt({appId:B,apiKey:O,measurementId:H},X,M,me)})).apply(this,arguments)}function jt(Q,me,Se){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(Q,{throttleEndTimeMillis:me,backoffCount:Se},B,O=se){const{appId:H,measurementId:X}=Q;try{yield Be(B,me)}catch(M){if(X)return je.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${X} provided in the "measurementId" field in the local Firebase config. [${M.message}]`),{appId:H,measurementId:X};throw M}try{const M=yield Te(Q);return O.deleteThrottleMetadata(H),M}catch(M){if(!gn(M)){if(O.deleteThrottleMetadata(H),X)return je.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${X} provided in the "measurementId" field in the local Firebase config. [${M.message}]`),{appId:H,measurementId:X};throw M}const F=503===Number(M.customData.httpStatus)?(0,ne.$s)(Se,O.intervalMillis,30):(0,ne.$s)(Se,O.intervalMillis),$={throttleEndTimeMillis:Date.now()+F,backoffCount:Se+1};return O.setThrottleMetadata(H,$),je.debug(`Calling attemptFetch again in ${F} millis`),jt(Q,$,B,O)}})).apply(this,arguments)}function Be(Q,me){return new Promise((Se,B)=>{const O=Math.max(me-Date.now(),0),H=setTimeout(Se,O);Q.addEventListener(()=>{clearTimeout(H),B(J.create("fetch-throttle",{throttleEndTimeMillis:me}))})})}function gn(Q){if(!(Q instanceof ne.ZR&&Q.customData))return!1;const me=Number(Q.customData.httpStatus);return 429===me||500===me||503===me||504===me}class jn{constructor(){this.listeners=[]}addEventListener(me){this.listeners.push(me)}abort(){this.listeners.forEach(me=>me())}}function Dn(){return $t.apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(){if(!(0,ne.hl)())return je.warn(J.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(Q){return je.warn(J.create("indexeddb-unavailable",{errorInfo:Q}).message),!1}return!0})).apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(Q,me,Se,B,O,H,X){var M;const F=ze(Q);F.then(Mt=>{Se[Mt.measurementId]=Mt.appId,Q.options.measurementId&&Mt.measurementId!==Q.options.measurementId&&je.warn(`The measurement ID in the local Firebase config (${Q.options.measurementId}) does not match the measurement ID fetched from the server (${Mt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mt=>je.error(Mt)),me.push(F);const $=Dn().then(Mt=>{if(Mt)return B.getId()}),[de,qe]=yield Promise.all([F,$]);Ee()||Oe(H,de.measurementId),O("js",new Date);const st=null!==(M=null==X?void 0:X.config)&&void 0!==M?M:{};return st.origin="firebase",st.update=!0,null!=qe&&(st[ce]=qe),O("config",de.measurementId,st),de.measurementId})).apply(this,arguments)}class pt{constructor(me){this.app=me}_delete(){return delete gt[this.app.options.appId],Promise.resolve()}}let gt={},Ht=[];const Qt={};let Nn,kn,hn="dataLayer",er=!1;function ke(Q,me,Se){!function ue(){const Q=[];if((0,ne.ru)()&&Q.push("This is a browser extension environment."),(0,ne.zI)()||Q.push("Cookies are not available."),Q.length>0){const me=Q.map((B,O)=>`(${O+1}) ${B}`).join(" "),Se=J.create("invalid-analytics-context",{errorInfo:me});je.warn(Se.message)}}();const B=Q.options.appId;if(!B)throw J.create("no-app-id");if(!Q.options.apiKey){if(!Q.options.measurementId)throw J.create("no-api-key");je.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Q.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gt[B])throw J.create("already-exists",{id:B});if(!er){!function Le(Q){let me=[];Array.isArray(window[Q])?me=window[Q]:window[Q]=me}(hn);const{wrappedGtag:H,gtagCore:X}=function Me(Q,me,Se,B,O){let H=function(...X){window[B].push(arguments)};return window[O]&&"function"==typeof window[O]&&(H=window[O]),window[O]=function Ne(Q,me,Se,B){function H(){return(H=(0,f.Z)(function*(X,M,F){try{"event"===X?yield at(Q,me,Se,M,F):"config"===X?yield _e(Q,me,Se,B,M,F):Q("set",M)}catch($){je.error($)}})).apply(this,arguments)}return function O(X,M,F){return H.apply(this,arguments)}}(H,Q,me,Se),{gtagCore:H,wrappedGtag:window[O]}}(gt,Ht,Qt,hn,"gtag");kn=H,Nn=X,er=!0}return gt[B]=function Ot(Q,me,Se,B,O,H,X){return Ge.apply(this,arguments)}(Q,Ht,Qt,me,Nn,hn,Se),new pt(Q)}function wt(){return(wt=(0,f.Z)(function*(Q,me,Se,B,O){if(O&&O.global)Q("event",Se,B);else{const H=yield me;Q("event",Se,Object.assign(Object.assign({},B),{send_to:H}))}})).apply(this,arguments)}function yn(){return(yn=(0,f.Z)(function*(Q,me,Se,B){if(B&&B.global)return Q("set",{user_id:Se}),Promise.resolve();Q("config",yield me,{update:!0,user_id:Se})})).apply(this,arguments)}function Hn(Q=(0,j.getApp)()){Q=(0,ne.m9)(Q);const me=(0,j._getProvider)(Q,ae);return me.isInitialized()?me.getImmediate():function ur(Q,me={}){const Se=(0,j._getProvider)(Q,ae);if(Se.isInitialized()){const O=Se.getImmediate();if((0,ne.vZ)(me,Se.getOptions()))return O;throw J.create("already-initialized")}return Se.initialize({options:me})}(Q)}function qt(){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(Q){return!1}})).apply(this,arguments)}function an(Q,me,Se){Q=(0,ne.m9)(Q),function un(Q,me,Se,B){return yn.apply(this,arguments)}(kn,gt[Q.app.options.appId],me,Se).catch(B=>je.error(B))}function Xt(Q,me,Se,B){Q=(0,ne.m9)(Q),function Ye(Q,me,Se,B,O){return wt.apply(this,arguments)}(kn,gt[Q.app.options.appId],me,Se,B).catch(O=>je.error(O))}const rt="@firebase/analytics";!function ft(){(0,j._registerComponent)(new ge.wA(ae,(me,{options:Se})=>ke(me.getProvider("app").getImmediate(),me.getProvider("installations-internal").getImmediate(),Se),"PUBLIC")),(0,j._registerComponent)(new ge.wA("analytics-internal",function Q(me){try{const Se=me.getProvider(ae).getImmediate();return{logEvent:(B,O,H)=>Xt(Se,B,O,H)}}catch(Se){throw J.create("interop-component-reg-failed",{reason:Se})}},"PRIVATE")),(0,j.registerVersion)(rt,"0.7.8"),(0,j.registerVersion)(rt,"0.7.8","esm2017")}()},5867:(Rt,xe,N)=>{N.d(xe,{Mq:()=>f.getApp,C6:()=>f.getApps,ZF:()=>f.initializeApp,KN:()=>f.registerVersion});var f=N(9681);(0,f.registerVersion)("firebase","9.6.11","app")},127:(Rt,xe,N)=>{N.d(xe,{Z:()=>f.Z});var f=N(3942);f.Z.registerVersion("firebase","9.6.11","app-compat")},5881:(Rt,xe,N)=>{N.r(xe);var f=N(5861),j=N(3942),P=N(573),ne=N(2090),ae=(N(9681),N(1877),N(4859));function ce(){return window}function W(){return(W=(0,f.Z)(function*(M,F,$){var de;const{BuildInfo:qe}=ce();(0,P.ap)(F.sessionId,"AuthEvent did not contain a session ID");const st=yield Ie(F.sessionId),Mt={};return(0,P.aq)()?Mt.ibi=qe.packageName:(0,P.ar)()?Mt.apn=qe.packageName:(0,P.as)(M,"operation-not-supported-in-this-environment"),qe.displayName&&(Mt.appDisplayName=qe.displayName),Mt.sessionId=st,(0,P.at)(M,$,F.type,void 0,null!==(de=F.eventId)&&void 0!==de?de:void 0,Mt)})).apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(M){const{BuildInfo:F}=ce(),$={};(0,P.aq)()?$.iosBundleId=F.packageName:(0,P.ar)()?$.androidPackageName=F.packageName:(0,P.as)(M,"operation-not-supported-in-this-environment"),yield(0,P.au)(M,$)})).apply(this,arguments)}function Le(){return(Le=(0,f.Z)(function*(M,F,$){const{cordova:de}=ce();let qe=()=>{};try{yield new Promise((st,Mt)=>{let _t=null;function Kt(){var cn;st();const K=null===(cn=de.plugins.browsertab)||void 0===cn?void 0:cn.close;"function"==typeof K&&K(),"function"==typeof(null==$?void 0:$.close)&&$.close()}function xn(){_t||(_t=window.setTimeout(()=>{Mt((0,P.av)(M,"redirect-cancelled-by-user"))},2e3))}function Dr(){"visible"===(null==document?void 0:document.visibilityState)&&xn()}F.addPassiveListener(Kt),document.addEventListener("resume",xn,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",Dr,!1),qe=()=>{F.removePassiveListener(Kt),document.removeEventListener("resume",xn,!1),document.removeEventListener("visibilitychange",Dr,!1),_t&&window.clearTimeout(_t)}})}finally{qe()}})).apply(this,arguments)}function Ie(M){return at.apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(M){const F=Ke(M),$=yield crypto.subtle.digest("SHA-256",F);return Array.from(new Uint8Array($)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ke(M){if((0,P.ap)(/[0-9a-zA-Z]+/.test(M),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(M);const F=new ArrayBuffer(M.length),$=new Uint8Array(F);for(let de=0;de<M.length;de++)$[de]=M.charCodeAt(de);return $}class Me extends P.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(F=>{this.resolveInialized=F})}addPassiveListener(F){this.passiveListeners.add(F)}removePassiveListener(F){this.passiveListeners.delete(F)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(F){return this.resolveInialized(),this.passiveListeners.forEach($=>$(F)),super.onEvent(F)}initialized(){var F=this;return(0,f.Z)(function*(){yield F.initPromise})()}}function J(M){return it.apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(M){const F=yield se()._get(le(M));return F&&(yield se()._remove(le(M))),F})).apply(this,arguments)}function oe(){const M=[],F="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const de=Math.floor(Math.random()*F.length);M.push(F.charAt(de))}return M.join("")}function se(){return(0,P.ax)(P.b)}function le(M){return(0,P.ay)("authEvent",M.config.apiKey,M.name)}function ze(M){if(!(null==M?void 0:M.includes("?")))return{};const[F,...$]=M.split("?");return(0,ne.zd)($.join("?"))}function Be(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.av)("no-auth-event")}}function Ot(){var M;return(null===(M=null==self?void 0:self.location)||void 0===M?void 0:M.protocol)||null}function pt(M=(0,ne.z$)()){return!("file:"!==Ot()&&"ionic:"!==Ot()||!M.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mn(){try{const M=self.localStorage,F=P.aG();if(M)return M.setItem(F,"1"),M.removeItem(F),!function hn(M=(0,ne.z$)()){return function Ht(){return(0,ne.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Qt(M=(0,ne.z$)()){return/Edge\/\d+/.test(M)}(M)}()||(0,ne.hl)()}catch(M){return Nn()&&(0,ne.hl)()}return!1}function Nn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function kn(){return(function Ge(){return"http:"===Ot()||"https:"===Ot()}()||(0,ne.ru)()||pt())&&!function gt(){return(0,ne.b$)()||(0,ne.UG)()}()&&Mn()&&!Nn()}function er(){return pt()&&"undefined"!=typeof document}function ue(){return(ue=(0,f.Z)(function*(){return!!er()&&new Promise(M=>{const F=setTimeout(()=>{M(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(F),M(!0)})})})).apply(this,arguments)}const Ye={LOCAL:"local",NONE:"none",SESSION:"session"},wt=P.aw,zt="persistence";function un(M){return yn.apply(this,arguments)}function yn(){return(yn=(0,f.Z)(function*(M){yield M._initializationPromise;const F=vt(),$=P.ay(zt,M.config.apiKey,M.name);F&&F.setItem($,M._getPersistence())})).apply(this,arguments)}function vt(){var M;try{return(null===(M=function ke(){return"undefined"!=typeof window?window:null}())||void 0===M?void 0:M.sessionStorage)||null}catch(F){return null}}const mt=P.aw;class lt{constructor(){this.browserResolver=P.ax(P.k),this.cordovaResolver=P.ax(class jt{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aA}_initialize(F){var $=this;return(0,f.Z)(function*(){const de=F._key();let qe=$.eventManagers.get(de);return qe||(qe=new Me(F),$.eventManagers.set(de,qe),$.attachCallbackListeners(F,qe)),qe})()}_openPopup(F){(0,P.as)(F,"operation-not-supported-in-this-environment")}_openRedirect(F,$,de,qe){var st=this;return(0,f.Z)(function*(){!function _e(M){var F,$,de,qe,st,Mt,_t,Kt,xn,Dr;const cn=ce();(0,P.aw)("function"==typeof(null===(F=null==cn?void 0:cn.universalLinks)||void 0===F?void 0:F.subscribe),M,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aw)(void 0!==(null===($=null==cn?void 0:cn.BuildInfo)||void 0===$?void 0:$.packageName),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aw)("function"==typeof(null===(st=null===(qe=null===(de=null==cn?void 0:cn.cordova)||void 0===de?void 0:de.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===st?void 0:st.openUrl),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Kt=null===(_t=null===(Mt=null==cn?void 0:cn.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===_t?void 0:_t.browsertab)||void 0===Kt?void 0:Kt.isAvailable),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Dr=null===(xn=null==cn?void 0:cn.cordova)||void 0===xn?void 0:xn.InAppBrowser)||void 0===Dr?void 0:Dr.open),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(F);const Mt=yield st._initialize(F);yield Mt.initialized(),Mt.resetRedirect(),(0,P.aB)(),yield st._originValidation(F);const _t=function Ee(M,F,$=null){return{type:F,eventId:$,urlResponse:null,sessionId:oe(),postBody:null,tenantId:M.tenantId,error:(0,P.av)(M,"no-auth-event")}}(F,de,qe);yield function Je(M,F){return se()._set(le(M),F)}(F,_t);const Kt=yield function z(M,F,$){return W.apply(this,arguments)}(F,_t,$),xn=yield function Pe(M){const{cordova:F}=ce();return new Promise($=>{F.plugins.browsertab.isAvailable(de=>{let qe=null;de?F.plugins.browsertab.openUrl(M):qe=F.InAppBrowser.open(M,(0,P.ao)()?"_blank":"_system","location=yes"),$(qe)})})}(Kt);return function Oe(M,F,$){return Le.apply(this,arguments)}(F,Mt,xn)})()}_isIframeWebStorageSupported(F,$){throw new Error("Method not implemented.")}_originValidation(F){const $=F._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function Y(M){return je.apply(this,arguments)}(F)),this.originValidationPromises[$]}attachCallbackListeners(F,$){const{universalLinks:de,handleOpenURL:qe,BuildInfo:st}=ce(),Mt=setTimeout((0,f.Z)(function*(){yield J(F),$.onEvent(Be())}),500),_t=function(){var Dr=(0,f.Z)(function*(cn){clearTimeout(Mt);const K=yield J(F);let pe=null;K&&(null==cn?void 0:cn.url)&&(pe=function ut(M,F){var $,de;const qe=function fe(M){const F=ze(M),$=F.link?decodeURIComponent(F.link):void 0,de=ze($).link,qe=F.deep_link_id?decodeURIComponent(F.deep_link_id):void 0;return ze(qe).link||qe||de||$||M}(F);if(qe.includes("/__/auth/callback")){const st=ze(qe),Mt=st.firebaseError?function Te(M){try{return JSON.parse(M)}catch(F){return null}}(decodeURIComponent(st.firebaseError)):null,_t=null===(de=null===($=null==Mt?void 0:Mt.code)||void 0===$?void 0:$.split("auth/"))||void 0===de?void 0:de[1],Kt=_t?(0,P.av)(_t):null;return Kt?{type:M.type,eventId:M.eventId,tenantId:M.tenantId,error:Kt,urlResponse:null,sessionId:null,postBody:null}:{type:M.type,eventId:M.eventId,tenantId:M.tenantId,sessionId:M.sessionId,urlResponse:qe,postBody:null}}return null}(K,cn.url)),$.onEvent(pe||Be())});return function(K){return Dr.apply(this,arguments)}}();void 0!==de&&"function"==typeof de.subscribe&&de.subscribe(null,_t);const Kt=qe,xn=`${st.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var Dr=(0,f.Z)(function*(cn){if(cn.toLowerCase().startsWith(xn)&&_t({url:cn}),"function"==typeof Kt)try{Kt(cn)}catch(K){console.error(K)}});return function(cn){return Dr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aA}_initialize(F){var $=this;return(0,f.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(F)})()}_openPopup(F,$,de,qe){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(F,$,de,qe)})()}_openRedirect(F,$,de,qe){var st=this;return(0,f.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(F,$,de,qe)})()}_isIframeWebStorageSupported(F,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(F,$)}_originValidation(F){return this.assertedUnderlyingResolver._originValidation(F)}get _shouldInitProactively(){return er()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var F=this;return(0,f.Z)(function*(){if(F.underlyingResolver)return;const $=yield function De(){return ue.apply(this,arguments)}();F.underlyingResolver=$?F.cordovaResolver:F.browserResolver})()}}function Hn(M){return M.unwrap()}function qt(M){return mn(M)}function mn(M){const{_tokenResponse:F}=M instanceof ne.ZR?M.customData:M;if(!F)return null;if(!(M instanceof ne.ZR)&&"temporaryProof"in F&&"phoneNumber"in F)return P.P.credentialFromResult(M);const $=F.providerId;if(!$||$===P.o.PASSWORD)return null;let de;switch($){case P.o.GOOGLE:de=P.N;break;case P.o.FACEBOOK:de=P.M;break;case P.o.GITHUB:de=P.Q;break;case P.o.TWITTER:de=P.V;break;default:const{oauthIdToken:qe,oauthAccessToken:st,oauthTokenSecret:Mt,pendingToken:_t,nonce:Kt}=F;return st||Mt||qe||_t?_t?$.startsWith("saml.")?P.aJ._create($,_t):P.I._fromParams({providerId:$,signInMethod:$,pendingToken:_t,idToken:qe,accessToken:st}):new P.T($).credential({idToken:qe,accessToken:st,rawNonce:Kt}):null}return M instanceof ne.ZR?de.credentialFromError(M):de.credentialFromResult(M)}function an(M,F){return F.catch($=>{throw $ instanceof ne.ZR&&function Yn(M,F){var $;const de=null===($=F.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===F.code)F.resolver=new Xt(M,P.am(M,F));else if(de){const qe=mn(F),st=F;qe&&(st.credential=qe,st.tenantId=de.tenantId||void 0,st.email=de.email||void 0,st.phoneNumber=de.phoneNumber||void 0)}}(M,$),$}).then($=>{const qe=$.user;return{operationType:$.operationType,credential:qt($),additionalUserInfo:P.ak($),user:rt.getOrCreate(qe)}})}function It(M,F){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(M,F){const $=yield F;return{verificationId:$.verificationId,confirm:de=>an(M,$.confirm(de))}})).apply(this,arguments)}class Xt{constructor(F,$){this.resolver=$,this.auth=function ur(M){return M.wrapped()}(F)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(F){return an(Hn(this.auth),this.resolver.resolveSignIn(F))}}class rt{constructor(F){this._delegate=F,this.multiFactor=P.an(F)}static getOrCreate(F){return rt.USER_MAP.has(F)||rt.USER_MAP.set(F,new rt(F)),rt.USER_MAP.get(F)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(F){return this._delegate.getIdTokenResult(F)}getIdToken(F){return this._delegate.getIdToken(F)}linkAndRetrieveDataWithCredential(F){return this.linkWithCredential(F)}linkWithCredential(F){var $=this;return(0,f.Z)(function*(){return an($.auth,P.Y($._delegate,F))})()}linkWithPhoneNumber(F,$){var de=this;return(0,f.Z)(function*(){return It(de.auth,P.l(de._delegate,F,$))})()}linkWithPopup(F){var $=this;return(0,f.Z)(function*(){return an($.auth,P.d($._delegate,F,lt))})()}linkWithRedirect(F){var $=this;return(0,f.Z)(function*(){return yield un(P.aC($.auth)),P.g($._delegate,F,lt)})()}reauthenticateAndRetrieveDataWithCredential(F){return this.reauthenticateWithCredential(F)}reauthenticateWithCredential(F){var $=this;return(0,f.Z)(function*(){return an($.auth,P.Z($._delegate,F))})()}reauthenticateWithPhoneNumber(F,$){return It(this.auth,P.r(this._delegate,F,$))}reauthenticateWithPopup(F){return an(this.auth,P.e(this._delegate,F,lt))}reauthenticateWithRedirect(F){var $=this;return(0,f.Z)(function*(){return yield un(P.aC($.auth)),P.h($._delegate,F,lt)})()}sendEmailVerification(F){return P.aa(this._delegate,F)}unlink(F){var $=this;return(0,f.Z)(function*(){return yield P.aj($._delegate,F),$})()}updateEmail(F){return P.af(this._delegate,F)}updatePassword(F){return P.ag(this._delegate,F)}updatePhoneNumber(F){return P.u(this._delegate,F)}updateProfile(F){return P.ae(this._delegate,F)}verifyBeforeUpdateEmail(F,$){return P.ab(this._delegate,F,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rt.USER_MAP=new WeakMap;const Ae=P.aw;let ft=(()=>{class M{constructor($,de){if(this.app=$,de.isInitialized())return this._delegate=de.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=$.options;Ae(qe,"invalid-api-key",{appName:$.name}),Ae(qe,"invalid-api-key",{appName:$.name});const st="undefined"!=typeof window?lt:void 0;this._delegate=de.initialize({options:{persistence:me(qe,$.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(P.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,de){P.E(this._delegate,$,de)}applyActionCode($){return P.a1(this._delegate,$)}checkActionCode($){return P.a2(this._delegate,$)}confirmPasswordReset($,de){return P.a0(this._delegate,$,de)}createUserWithEmailAndPassword($,de){var qe=this;return(0,f.Z)(function*(){return an(qe._delegate,P.a4(qe._delegate,$,de))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return P.a9(this._delegate,$)}isSignInWithEmailLink($){return P.a7(this._delegate,$)}getRedirectResult(){var $=this;return(0,f.Z)(function*(){Ae(kn(),$._delegate,"operation-not-supported-in-this-environment");const de=yield P.j($._delegate,lt);return de?an($._delegate,Promise.resolve(de)):{credential:null,user:null}})()}addFrameworkForLogging($){!function gn(M,F){(0,P.aC)(M)._logFramework(F)}(this._delegate,$)}onAuthStateChanged($,de,qe){const{next:st,error:Mt,complete:_t}=Q($,de,qe);return this._delegate.onAuthStateChanged(st,Mt,_t)}onIdTokenChanged($,de,qe){const{next:st,error:Mt,complete:_t}=Q($,de,qe);return this._delegate.onIdTokenChanged(st,Mt,_t)}sendSignInLinkToEmail($,de){return P.a6(this._delegate,$,de)}sendPasswordResetEmail($,de){return P.$(this._delegate,$,de||void 0)}setPersistence($){var de=this;return(0,f.Z)(function*(){let qe;switch(function Gt(M,F){wt(Object.values(Ye).includes(F),M,"invalid-persistence-type"),(0,ne.b$)()?wt(F!==Ye.SESSION,M,"unsupported-persistence-type"):(0,ne.UG)()?wt(F===Ye.NONE,M,"unsupported-persistence-type"):Nn()?wt(F===Ye.NONE||F===Ye.LOCAL&&(0,ne.hl)(),M,"unsupported-persistence-type"):wt(F===Ye.NONE||Mn(),M,"unsupported-persistence-type")}(de._delegate,$),$){case Ye.SESSION:qe=P.a;break;case Ye.LOCAL:qe=(yield P.ax(P.i)._isAvailable())?P.i:P.b;break;case Ye.NONE:qe=P.K;break;default:return P.as("argument-error",{appName:de._delegate.name})}return de._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return an(this._delegate,P.W(this._delegate))}signInWithCredential($){return an(this._delegate,P.X(this._delegate,$))}signInWithCustomToken($){return an(this._delegate,P._(this._delegate,$))}signInWithEmailAndPassword($,de){return an(this._delegate,P.a5(this._delegate,$,de))}signInWithEmailLink($,de){return an(this._delegate,P.a8(this._delegate,$,de))}signInWithPhoneNumber($,de){return It(this._delegate,P.s(this._delegate,$,de))}signInWithPopup($){var de=this;return(0,f.Z)(function*(){return Ae(kn(),de._delegate,"operation-not-supported-in-this-environment"),an(de._delegate,P.c(de._delegate,$,lt))})()}signInWithRedirect($){var de=this;return(0,f.Z)(function*(){return Ae(kn(),de._delegate,"operation-not-supported-in-this-environment"),yield un(de._delegate),P.f(de._delegate,$,lt)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return P.a3(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return M.Persistence=Ye,M})();function Q(M,F,$){let de=M;"function"!=typeof M&&({next:de,error:F,complete:$}=M);const qe=de;return{next:Mt=>qe(Mt&&rt.getOrCreate(Mt)),error:F,complete:$}}function me(M,F){const $=function An(M,F){const $=vt();if(!$)return[];const de=P.ay(zt,M,F);switch($.getItem(de)){case Ye.NONE:return[P.K];case Ye.LOCAL:return[P.i,P.a];case Ye.SESSION:return[P.a];default:return[]}}(M,F);if("undefined"!=typeof self&&!$.includes(P.i)&&$.push(P.i),"undefined"!=typeof window)for(const de of[P.b,P.a])$.includes(de)||$.push(de);return $.includes(P.K)||$.push(P.K),$}class Se{constructor(){this.providerId="phone",this._delegate=new P.P(Hn(j.Z.auth()))}static credential(F,$){return P.P.credential(F,$)}verifyPhoneNumber(F,$){return this._delegate.verifyPhoneNumber(F,$)}unwrap(){return this._delegate}}Se.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Se.PROVIDER_ID=P.P.PROVIDER_ID;const B=P.aw;class O{constructor(F,$,de=j.Z.app()){var qe;B(null===(qe=de.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:de.name}),this._delegate=new P.R(F,$,de.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function X(M){M.INTERNAL.registerComponent(new ae.wA("auth-compat",F=>{const $=F.getProvider("app-compat").getImmediate(),de=F.getProvider("auth");return new ft($,de)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.L,FacebookAuthProvider:P.M,GithubAuthProvider:P.Q,GoogleAuthProvider:P.N,OAuthProvider:P.T,SAMLAuthProvider:P.U,PhoneAuthProvider:Se,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:O,TwitterAuthProvider:P.V,Auth:ft,AuthCredential:P.G,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),M.registerVersion("@firebase/auth-compat","0.2.12")}(j.Z)},2375:(Rt,xe,N)=>{N.d(xe,{KL:()=>_t,Gb:()=>$});var f=N(5861),P=(N(2833),N(4859)),ne=N(2090),ge=N(9681);const we="/firebase-messaging-sw.js",ae="/firebase-cloud-messaging-push-scope",ce="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",z="google.c.a.c_id",W="google.c.a.c_l",Y="google.c.a.ts",je="google.c.a.e";var Oe=(()=>{return(K=Oe||(Oe={})).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",Oe;var K})();function Le(K){const pe=new Uint8Array(K);return btoa(String.fromCharCode(...pe)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _e(K){const Xe=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Et=atob(Xe),St=new Uint8Array(Et.length);for(let U=0;U<Et.length;++U)St[U]=Et.charCodeAt(U);return St}const Ie="fcm_token_details_db",Ke="fcm_token_object_Store";function Ne(K){return Me.apply(this,arguments)}function Me(){return Me=(0,f.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(U=>U.name).includes(Ie))return null;let pe=null;return(yield(0,ne.X3)(Ie,5,function(){var Et=(0,f.Z)(function*(St,U,ee,Re){var yt;if(U<2||!St.objectStoreNames.contains(Ke))return;const Sn=Re.objectStore(Ke),Zt=yield Sn.index("fcmSenderId").get(K);if(yield Sn.clear(),Zt)if(2===U){const Pt=Zt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;pe={token:Pt.fcmToken,createTime:null!==(yt=Pt.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Le(Pt.vapidKey)}}}else if(3===U){const Pt=Zt;pe={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Le(Pt.auth),p256dh:Le(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Le(Pt.vapidKey)}}}else if(4===U){const Pt=Zt;pe={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Le(Pt.auth),p256dh:Le(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Le(Pt.vapidKey)}}}});return function(St,U,ee,Re){return Et.apply(this,arguments)}}())).close(),yield(0,ne.Lj)(Ie),yield(0,ne.Lj)("fcm_vapid_details_db"),yield(0,ne.Lj)("undefined"),Ee(pe)?pe:null}),Me.apply(this,arguments)}function Ee(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:pe}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof pe.auth&&pe.auth.length>0&&"string"==typeof pe.p256dh&&pe.p256dh.length>0&&"string"==typeof pe.endpoint&&pe.endpoint.length>0&&"string"==typeof pe.swScope&&pe.swScope.length>0&&"string"==typeof pe.vapidKey&&pe.vapidKey.length>0}const it="firebase-messaging-store";let ut=null;function oe(){return ut||(ut=(0,ne.X3)("firebase-messaging-database",1,(K,pe)=>{0===pe&&K.createObjectStore(it)})),ut}function se(K){return le.apply(this,arguments)}function le(){return(le=(0,f.Z)(function*(K){const pe=jt(K),Et=yield(yield oe()).transaction(it).objectStore(it).get(pe);if(Et)return Et;{const St=yield Ne(K.appConfig.senderId);if(St)return yield Te(K,St),St}})).apply(this,arguments)}function Te(K,pe){return fe.apply(this,arguments)}function fe(){return(fe=(0,f.Z)(function*(K,pe){const Xe=jt(K),St=(yield oe()).transaction(it,"readwrite");return yield St.objectStore(it).put(pe,Xe),yield St.complete,pe})).apply(this,arguments)}function ze(K){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(K){const pe=jt(K),Et=(yield oe()).transaction(it,"readwrite");yield Et.objectStore(it).delete(pe),yield Et.complete})).apply(this,arguments)}function jt({appConfig:K}){return K.appId}const Be=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function gn(K,pe){return jn.apply(this,arguments)}function jn(){return(jn=(0,f.Z)(function*(K,pe){const Xe=yield gt(K),Et=Qt(pe),St={method:"POST",headers:Xe,body:JSON.stringify(Et)};let U;try{U=yield(yield fetch(pt(K.appConfig),St)).json()}catch(ee){throw Be.create("token-subscribe-failed",{errorInfo:ee})}if(U.error)throw Be.create("token-subscribe-failed",{errorInfo:U.error.message});if(!U.token)throw Be.create("token-subscribe-no-token");return U.token})).apply(this,arguments)}function Dn(K,pe){return $t.apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(K,pe){const Xe=yield gt(K),Et=Qt(pe.subscriptionOptions),St={method:"PATCH",headers:Xe,body:JSON.stringify(Et)};let U;try{U=yield(yield fetch(`${pt(K.appConfig)}/${pe.token}`,St)).json()}catch(ee){throw Be.create("token-update-failed",{errorInfo:ee})}if(U.error)throw Be.create("token-update-failed",{errorInfo:U.error.message});if(!U.token)throw Be.create("token-update-no-token");return U.token})).apply(this,arguments)}function Ot(K,pe){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(K,pe){const Et={method:"DELETE",headers:yield gt(K)};try{const U=yield(yield fetch(`${pt(K.appConfig)}/${pe}`,Et)).json();if(U.error)throw Be.create("token-unsubscribe-failed",{errorInfo:U.error.message})}catch(St){throw Be.create("token-unsubscribe-failed",{errorInfo:St})}})).apply(this,arguments)}function pt({projectId:K}){return`https://fcmregistrations.googleapis.com/v1/projects/${K}/registrations`}function gt(K){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,f.Z)(function*({appConfig:K,installations:pe}){const Xe=yield pe.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${Xe}`})})).apply(this,arguments)}function Qt({p256dh:K,auth:pe,endpoint:Xe,vapidKey:Et}){const St={web:{endpoint:Xe,auth:pe,p256dh:K}};return Et!==ce&&(St.web.applicationPubKey=Et),St}const hn=6048e5;function Mn(K){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(K){const pe=yield wt(K.swRegistration,K.vapidKey),Xe={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:pe.endpoint,auth:Le(pe.getKey("auth")),p256dh:Le(pe.getKey("p256dh"))},Et=yield se(K.firebaseDependencies);if(Et){if(Gt(Et.subscriptionOptions,Xe))return Date.now()>=Et.createTime+hn?De(K,{token:Et.token,createTime:Date.now(),subscriptionOptions:Xe}):Et.token;try{yield Ot(K.firebaseDependencies,Et.token)}catch(St){console.warn(St)}return ke(K.firebaseDependencies,Xe)}return ke(K.firebaseDependencies,Xe)})).apply(this,arguments)}function kn(K){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(K){const pe=yield se(K.firebaseDependencies);pe&&(yield Ot(K.firebaseDependencies,pe.token),yield ze(K.firebaseDependencies));const Xe=yield K.swRegistration.pushManager.getSubscription();return!Xe||Xe.unsubscribe()})).apply(this,arguments)}function De(K,pe){return ue.apply(this,arguments)}function ue(){return(ue=(0,f.Z)(function*(K,pe){try{const Xe=yield Dn(K.firebaseDependencies,pe),Et=Object.assign(Object.assign({},pe),{token:Xe,createTime:Date.now()});return yield Te(K.firebaseDependencies,Et),Xe}catch(Xe){throw yield kn(K),Xe}})).apply(this,arguments)}function ke(K,pe){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,f.Z)(function*(K,pe){const Et={token:yield gn(K,pe),createTime:Date.now(),subscriptionOptions:pe};return yield Te(K,Et),Et.token})).apply(this,arguments)}function wt(K,pe){return zt.apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(K,pe){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_e(pe)})})).apply(this,arguments)}function Gt(K,pe){return pe.vapidKey===K.vapidKey&&pe.endpoint===K.endpoint&&pe.auth===K.auth&&pe.p256dh===K.p256dh}function un(K){const pe={from:K.from,collapseKey:K.collapse_key,messageId:K.fcmMessageId};return function yn(K,pe){if(!pe.notification)return;K.notification={};const Xe=pe.notification.title;Xe&&(K.notification.title=Xe);const Et=pe.notification.body;Et&&(K.notification.body=Et);const St=pe.notification.image;St&&(K.notification.image=St)}(pe,K),function An(K,pe){!pe.data||(K.data=pe.data)}(pe,K),function vt(K,pe){if(!pe.fcmOptions)return;K.fcmOptions={};const Xe=pe.fcmOptions.link;Xe&&(K.fcmOptions.link=Xe);const Et=pe.fcmOptions.analytics_label;Et&&(K.fcmOptions.analyticsLabel=Et)}(pe,K),pe}function mt(K){return"object"==typeof K&&!!K&&z in K}function lt(K,pe){const Xe=[];for(let Et=0;Et<K.length;Et++)Xe.push(K.charAt(Et)),Et<pe.length&&Xe.push(pe.charAt(Et));return Xe.join("")}function ur(K){return Be.create("missing-app-config-values",{valueName:K})}lt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),lt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class qt{constructor(pe,Xe,Et){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const St=function Hn(K){if(!K||!K.options)throw ur("App Configuration Object");if(!K.name)throw ur("App Name");const pe=["projectId","apiKey","appId","messagingSenderId"],{options:Xe}=K;for(const Et of pe)if(!Xe[Et])throw ur(Et);return{appName:K.name,projectId:Xe.projectId,apiKey:Xe.apiKey,appId:Xe.appId,senderId:Xe.messagingSenderId}}(pe);this.firebaseDependencies={app:pe,appConfig:St,installations:Xe,analyticsProvider:Et}}_delete(){return Promise.resolve()}}function Yn(K){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(we,{scope:ae}),K.swRegistration.update().catch(()=>{})}catch(pe){throw Be.create("failed-service-worker-registration",{browserErrorMessage:pe.message})}})).apply(this,arguments)}function an(K,pe){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(K,pe){if(!pe&&!K.swRegistration&&(yield Yn(K)),pe||!K.swRegistration){if(!(pe instanceof ServiceWorkerRegistration))throw Be.create("invalid-sw-registration");K.swRegistration=pe}})).apply(this,arguments)}function Wn(K,pe){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,f.Z)(function*(K,pe){pe?K.vapidKey=pe:K.vapidKey||(K.vapidKey=ce)})).apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(K,pe){if(!navigator)throw Be.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Be.create("permission-blocked");return yield Wn(K,null==pe?void 0:pe.vapidKey),yield an(K,null==pe?void 0:pe.serviceWorkerRegistration),Mn(K)})).apply(this,arguments)}function ft(K,pe,Xe){return Q.apply(this,arguments)}function Q(){return(Q=(0,f.Z)(function*(K,pe,Xe){const Et=me(pe);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(Et,{message_id:Xe[z],message_name:Xe[W],message_time:Xe[Y],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function me(K){switch(K){case Oe.NOTIFICATION_CLICKED:return"notification_open";case Oe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B(){return(B=(0,f.Z)(function*(K,pe){const Xe=pe.data;if(!Xe.isFirebaseMessaging)return;K.onMessageHandler&&Xe.messageType===Oe.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(un(Xe)):K.onMessageHandler.next(un(Xe)));const Et=Xe.data;mt(Et)&&"1"===Et[je]&&(yield ft(K,Xe.messageType,Et))})).apply(this,arguments)}const O="@firebase/messaging",H="0.9.12",X=K=>{const pe=new qt(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Xe=>function Se(K,pe){return B.apply(this,arguments)}(pe,Xe)),pe},M=K=>{const pe=K.getProvider("messaging").getImmediate();return{getToken:Et=>function rt(K,pe){return Ae.apply(this,arguments)}(pe,Et)}};function $(){return de.apply(this,arguments)}function de(){return(de=(0,f.Z)(function*(){try{yield(0,ne.eu)()}catch(K){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function _t(K=(0,ge.getApp)()){return $().then(pe=>{if(!pe)throw Be.create("unsupported-browser")},pe=>{throw Be.create("indexed-db-unsupported")}),(0,ge._getProvider)((0,ne.m9)(K),"messaging").getImmediate()}!function F(){(0,ge._registerComponent)(new P.wA("messaging",X,"PUBLIC")),(0,ge._registerComponent)(new P.wA("messaging-internal",M,"PRIVATE")),(0,ge.registerVersion)(O,H),(0,ge.registerVersion)(O,H,"esm2017")}()},3226:(Rt,xe,N)=>{N.d(xe,{sN:()=>at,Gb:()=>kn});var f=N(5861),j=N(9681),P=N(2090),ne=N(4859),ge=N(1877);N(2833);const ae="@firebase/remote-config",z="remote-config",Y=new P.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function at(De=(0,j.getApp)()){return De=(0,P.m9)(De),(0,j._getProvider)(De,z).getImmediate()}class fe{constructor(ue,ke,Ye,wt){this.client=ue,this.storage=ke,this.storageCache=Ye,this.logger=wt}isCachedDataFresh(ue,ke){if(!ke)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ye=Date.now()-ke,wt=Ye<=ue;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ye}. Cache max age millis (minimumFetchIntervalMillis setting): ${ue}. Is cache hit: ${wt}.`),wt}fetch(ue){var ke=this;return(0,f.Z)(function*(){const[Ye,wt]=yield Promise.all([ke.storage.getLastSuccessfulFetchTimestampMillis(),ke.storage.getLastSuccessfulFetchResponse()]);if(wt&&ke.isCachedDataFresh(ue.cacheMaxAgeMillis,Ye))return wt;ue.eTag=wt&&wt.eTag;const zt=yield ke.client.fetch(ue),Gt=[ke.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===zt.status&&Gt.push(ke.storage.setLastSuccessfulFetchResponse(zt)),yield Promise.all(Gt),zt})()}}function ze(De=navigator){return De.languages&&De.languages[0]||De.language}class bt{constructor(ue,ke,Ye,wt,zt,Gt){this.firebaseInstallations=ue,this.sdkVersion=ke,this.namespace=Ye,this.projectId=wt,this.apiKey=zt,this.appId=Gt}fetch(ue){var ke=this;return(0,f.Z)(function*(){const[Ye,wt]=yield Promise.all([ke.firebaseInstallations.getId(),ke.firebaseInstallations.getToken()]),Gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ke.projectId}/namespaces/${ke.namespace}:fetch?key=${ke.apiKey}`,un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":ue.eTag||"*"},yn={sdk_version:ke.sdkVersion,app_instance_id:Ye,app_instance_id_token:wt,app_id:ke.appId,language_code:ze()},An={method:"POST",headers:un,body:JSON.stringify(yn)},vt=fetch(Gt,An),mt=new Promise((mn,an)=>{ue.signal.addEventListener(()=>{const It=new Error("The operation was aborted.");It.name="AbortError",an(It)})});let lt;try{yield Promise.race([vt,mt]),lt=yield vt}catch(mn){let an="fetch-client-network";throw"AbortError"===mn.name&&(an="fetch-timeout"),Y.create(an,{originalErrorMessage:mn.message})}let Hn=lt.status;const ur=lt.headers.get("ETag")||void 0;let qt,Yn;if(200===lt.status){let mn;try{mn=yield lt.json()}catch(an){throw Y.create("fetch-client-parse",{originalErrorMessage:an.message})}qt=mn.entries,Yn=mn.state}if("INSTANCE_STATE_UNSPECIFIED"===Yn?Hn=500:"NO_CHANGE"===Yn?Hn=304:("NO_TEMPLATE"===Yn||"EMPTY_CONFIG"===Yn)&&(qt={}),304!==Hn&&200!==Hn)throw Y.create("fetch-status",{httpStatus:Hn});return{status:Hn,eTag:ur,config:qt}})()}}class Be{constructor(ue,ke){this.client=ue,this.storage=ke}fetch(ue){var ke=this;return(0,f.Z)(function*(){const Ye=(yield ke.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ke.attemptFetch(ue,Ye)})()}attemptFetch(ue,{throttleEndTimeMillis:ke,backoffCount:Ye}){var wt=this;return(0,f.Z)(function*(){yield function jt(De,ue){return new Promise((ke,Ye)=>{const wt=Math.max(ue-Date.now(),0),zt=setTimeout(ke,wt);De.addEventListener(()=>{clearTimeout(zt),Ye(Y.create("fetch-throttle",{throttleEndTimeMillis:ue}))})})}(ue.signal,ke);try{const zt=yield wt.client.fetch(ue);return yield wt.storage.deleteThrottleMetadata(),zt}catch(zt){if(!function Vt(De){if(!(De instanceof P.ZR&&De.customData))return!1;const ue=Number(De.customData.httpStatus);return 429===ue||500===ue||503===ue||504===ue}(zt))throw zt;const Gt={throttleEndTimeMillis:Date.now()+(0,P.$s)(Ye),backoffCount:Ye+1};return yield wt.storage.setThrottleMetadata(Gt),wt.attemptFetch(ue,Gt)}})()}}class Dn{constructor(ue,ke,Ye,wt,zt){this.app=ue,this._client=ke,this._storageCache=Ye,this._storage=wt,this._logger=zt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $t(De,ue){const ke=De.target.error||void 0;return Y.create(ue,{originalErrorMessage:ke&&ke.message})}const Ot="app_namespace_store";class Ht{constructor(ue,ke,Ye,wt=function gt(){return new Promise((De,ue)=>{try{const ke=indexedDB.open("firebase_remote_config",1);ke.onerror=Ye=>{ue($t(Ye,"storage-open"))},ke.onsuccess=Ye=>{De(Ye.target.result)},ke.onupgradeneeded=Ye=>{0===Ye.oldVersion&&Ye.target.result.createObjectStore(Ot,{keyPath:"compositeKey"})}}catch(ke){ue(Y.create("storage-open",{originalErrorMessage:ke}))}})}()){this.appId=ue,this.appName=ke,this.namespace=Ye,this.openDbPromise=wt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(ue){return this.set("last_fetch_status",ue)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(ue){return this.set("last_successful_fetch_timestamp_millis",ue)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(ue){return this.set("last_successful_fetch_response",ue)}getActiveConfig(){return this.get("active_config")}setActiveConfig(ue){return this.set("active_config",ue)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(ue){return this.set("active_config_etag",ue)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(ue){return this.set("throttle_metadata",ue)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(ue){var ke=this;return(0,f.Z)(function*(){const Ye=yield ke.openDbPromise;return new Promise((wt,zt)=>{const un=Ye.transaction([Ot],"readonly").objectStore(Ot),yn=ke.createCompositeKey(ue);try{const An=un.get(yn);An.onerror=vt=>{zt($t(vt,"storage-get"))},An.onsuccess=vt=>{const mt=vt.target.result;wt(mt?mt.value:void 0)}}catch(An){zt(Y.create("storage-get",{originalErrorMessage:An&&An.message}))}})})()}set(ue,ke){var Ye=this;return(0,f.Z)(function*(){const wt=yield Ye.openDbPromise;return new Promise((zt,Gt)=>{const yn=wt.transaction([Ot],"readwrite").objectStore(Ot),An=Ye.createCompositeKey(ue);try{const vt=yn.put({compositeKey:An,value:ke});vt.onerror=mt=>{Gt($t(mt,"storage-set"))},vt.onsuccess=()=>{zt()}}catch(vt){Gt(Y.create("storage-set",{originalErrorMessage:vt&&vt.message}))}})})()}delete(ue){var ke=this;return(0,f.Z)(function*(){const Ye=yield ke.openDbPromise;return new Promise((wt,zt)=>{const un=Ye.transaction([Ot],"readwrite").objectStore(Ot),yn=ke.createCompositeKey(ue);try{const An=un.delete(yn);An.onerror=vt=>{zt($t(vt,"storage-delete"))},An.onsuccess=()=>{wt()}}catch(An){zt(Y.create("storage-delete",{originalErrorMessage:An&&An.message}))}})})()}createCompositeKey(ue){return[this.appId,this.appName,this.namespace,ue].join()}}class Qt{constructor(ue){this.storage=ue}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var ue=this;return(0,f.Z)(function*(){const ke=ue.storage.getLastFetchStatus(),Ye=ue.storage.getLastSuccessfulFetchTimestampMillis(),wt=ue.storage.getActiveConfig(),zt=yield ke;zt&&(ue.lastFetchStatus=zt);const Gt=yield Ye;Gt&&(ue.lastSuccessfulFetchTimestampMillis=Gt);const un=yield wt;un&&(ue.activeConfig=un)})()}setLastFetchStatus(ue){return this.lastFetchStatus=ue,this.storage.setLastFetchStatus(ue)}setLastSuccessfulFetchTimestampMillis(ue){return this.lastSuccessfulFetchTimestampMillis=ue,this.storage.setLastSuccessfulFetchTimestampMillis(ue)}setActiveConfig(ue){return this.activeConfig=ue,this.storage.setActiveConfig(ue)}}function kn(){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(){if(!(0,P.hl)())return!1;try{return yield(0,P.eu)()}catch(De){return!1}})).apply(this,arguments)}!function hn(){(0,j._registerComponent)(new ne.wA(z,function De(ue,{instanceIdentifier:ke}){const Ye=ue.getProvider("app").getImmediate(),wt=ue.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Y.create("registration-window");if(!(0,P.hl)())throw Y.create("indexed-db-unavailable");const{projectId:zt,apiKey:Gt,appId:un}=Ye.options;if(!zt)throw Y.create("registration-project-id");if(!Gt)throw Y.create("registration-api-key");if(!un)throw Y.create("registration-app-id");const yn=new Ht(un,Ye.name,ke=ke||"firebase"),An=new Qt(yn),vt=new ge.Yd(ae);vt.logLevel=ge.in.ERROR;const mt=new bt(wt,j.SDK_VERSION,ke,zt,Gt,un),lt=new Be(mt,yn),Hn=new fe(lt,yn,An,vt),ur=new Dn(Ye,Hn,An,yn,vt);return function Me(De){const ue=(0,P.m9)(De);ue._initializePromise||(ue._initializePromise=ue._storageCache.loadFromStorage().then(()=>{ue._isInitializationComplete=!0}))}(ur),ur},"PUBLIC").setMultipleInstances(!0)),(0,j.registerVersion)(ae,"0.3.7"),(0,j.registerVersion)(ae,"0.3.7","esm2017")}()},8306:(Rt,xe,N)=>{N.d(xe,{y:()=>z});var f=N(2961),j=N(727),P=N(8822),ne=N(4671);var ae=N(2416),ce=N(576),ye=N(2806);let z=(()=>{class Pe{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const _e=new Pe;return _e.source=this,_e.operator=Le,_e}subscribe(Le,_e,Ie){const at=function je(Pe){return Pe&&Pe instanceof f.Lv||function Y(Pe){return Pe&&(0,ce.m)(Pe.next)&&(0,ce.m)(Pe.error)&&(0,ce.m)(Pe.complete)}(Pe)&&(0,j.Nn)(Pe)}(Le)?Le:new f.Hp(Le,_e,Ie);return(0,ye.x)(()=>{const{operator:Ke,source:Ne}=this;at.add(Ke?Ke.call(at,Ne):Ne?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(Le){try{return this._subscribe(Le)}catch(_e){Le.error(_e)}}forEach(Le,_e){return new(_e=W(_e))((Ie,at)=>{const Ke=new f.Hp({next:Ne=>{try{Le(Ne)}catch(Me){at(Me),Ke.unsubscribe()}},error:at,complete:Ie});this.subscribe(Ke)})}_subscribe(Le){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Le)}[P.L](){return this}pipe(...Le){return function we(Pe){return 0===Pe.length?ne.y:1===Pe.length?Pe[0]:function(Le){return Pe.reduce((_e,Ie)=>Ie(_e),Le)}}(Le)(this)}toPromise(Le){return new(Le=W(Le))((_e,Ie)=>{let at;this.subscribe(Ke=>at=Ke,Ke=>Ie(Ke),()=>_e(at))})}}return Pe.create=Oe=>new Pe(Oe),Pe})();function W(Pe){var Oe;return null!==(Oe=null!=Pe?Pe:ae.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(Rt,xe,N)=>{N.d(xe,{x:()=>ae});var f=N(8306),j=N(727);const ne=(0,N(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=N(8737),we=N(2806);let ae=(()=>{class ye extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const Y=new ce(this,this);return Y.operator=W,Y}_throwIfClosed(){if(this.closed)throw new ne}next(W){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(W)}})}error(W){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:Y}=this;for(;Y.length;)Y.shift().error(W)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:Y,isStopped:je,observers:Pe}=this;return Y||je?j.Lc:(this.currentObservers=null,Pe.push(W),new j.w0(()=>{this.currentObservers=null,(0,ge.P)(Pe,W)}))}_checkFinalizedStatuses(W){const{hasError:Y,thrownError:je,isStopped:Pe}=this;Y?W.error(je):Pe&&W.complete()}asObservable(){const W=new f.y;return W.source=this,W}}return ye.create=(z,W)=>new ce(z,W),ye})();class ce extends ae{constructor(z,W){super(),this.destination=z,this.source=W}next(z){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===Y||Y.call(W,z)}error(z){var W,Y;null===(Y=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===Y||Y.call(W,z)}complete(){var z,W;null===(W=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===W||W.call(z)}_subscribe(z){var W,Y;return null!==(Y=null===(W=this.source)||void 0===W?void 0:W.subscribe(z))&&void 0!==Y?Y:j.Lc}}},2961:(Rt,xe,N)=>{N.d(xe,{Hp:()=>Le,Lv:()=>Y});var f=N(576),j=N(727),P=N(2416),ne=N(7849);function ge(){}const we=ye("C",void 0,void 0);function ye(Ne,Me,Ee){return{kind:Ne,value:Me,error:Ee}}var z=N(3410),W=N(2806);class Y extends j.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,j.Nn)(Me)&&Me.add(this)):this.destination=Ke}static create(Me,Ee,Je){return new Le(Me,Ee,Je)}next(Me){this.isStopped?at(function ce(Ne){return ye("N",Ne,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?at(function ae(Ne){return ye("E",void 0,Ne)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?at(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function Pe(Ne,Me){return je.call(Ne,Me)}class Oe{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Me)}catch(Je){_e(Je)}}error(Me){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Me)}catch(Je){_e(Je)}else _e(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Ee){_e(Ee)}}}class Le extends Y{constructor(Me,Ee,Je){let J;if(super(),(0,f.m)(Me)||!Me)J={next:null!=Me?Me:void 0,error:null!=Ee?Ee:void 0,complete:null!=Je?Je:void 0};else{let it;this&&P.v.useDeprecatedNextContext?(it=Object.create(Me),it.unsubscribe=()=>this.unsubscribe(),J={next:Me.next&&Pe(Me.next,it),error:Me.error&&Pe(Me.error,it),complete:Me.complete&&Pe(Me.complete,it)}):J=Me}this.destination=new Oe(J)}}function _e(Ne){P.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ne):(0,ne.h)(Ne)}function at(Ne,Me){const{onStoppedNotification:Ee}=P.v;Ee&&z.z.setTimeout(()=>Ee(Ne,Me))}const Ke={closed:!0,next:ge,error:function Ie(Ne){throw Ne},complete:ge}},727:(Rt,xe,N)=>{N.d(xe,{Lc:()=>we,w0:()=>ge,Nn:()=>ae});var f=N(576);const P=(0,N(3888).d)(ye=>function(W){ye(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((Y,je)=>`${je+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ne=N(8737);class ge{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Pe of W)Pe.remove(this);else W.remove(this);const{initialTeardown:Y}=this;if((0,f.m)(Y))try{Y()}catch(Pe){z=Pe instanceof P?Pe.errors:[Pe]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const Pe of je)try{ce(Pe)}catch(Oe){z=null!=z?z:[],Oe instanceof P?z=[...z,...Oe.errors]:z.push(Oe)}}if(z)throw new P(z)}}add(z){var W;if(z&&z!==this)if(this.closed)ce(z);else{if(z instanceof ge){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(z)}}_hasParent(z){const{_parentage:W}=this;return W===z||Array.isArray(W)&&W.includes(z)}_addParent(z){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(z),W):W?[W,z]:z}_removeParent(z){const{_parentage:W}=this;W===z?this._parentage=null:Array.isArray(W)&&(0,ne.P)(W,z)}remove(z){const{_finalizers:W}=this;W&&(0,ne.P)(W,z),z instanceof ge&&z._removeParent(this)}}ge.EMPTY=(()=>{const ye=new ge;return ye.closed=!0,ye})();const we=ge.EMPTY;function ae(ye){return ye instanceof ge||ye&&"closed"in ye&&(0,f.m)(ye.remove)&&(0,f.m)(ye.add)&&(0,f.m)(ye.unsubscribe)}function ce(ye){(0,f.m)(ye)?ye():ye.unsubscribe()}},2416:(Rt,xe,N)=>{N.d(xe,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Rt,xe,N)=>{N.d(xe,{E:()=>j});const j=new(N(8306).y)(ge=>ge.complete())},8996:(Rt,xe,N)=>{N.d(xe,{D:()=>Me});var f=N(8421),j=N(5363),P=N(9468),we=N(8306),ce=N(2202),ye=N(576),z=N(9672);function Y(Ee,Je){if(!Ee)throw new Error("Iterable cannot be null");return new we.y(J=>{(0,z.f)(J,Je,()=>{const it=Ee[Symbol.asyncIterator]();(0,z.f)(J,Je,()=>{it.next().then(ut=>{ut.done?J.complete():J.next(ut.value)})},0,!0)})})}var je=N(3670),Pe=N(8239),Oe=N(1144),Le=N(6495),_e=N(2206),Ie=N(4532),at=N(3260);function Me(Ee,Je){return Je?function Ne(Ee,Je){if(null!=Ee){if((0,je.c)(Ee))return function ne(Ee,Je){return(0,f.Xf)(Ee).pipe((0,P.R)(Je),(0,j.Q)(Je))}(Ee,Je);if((0,Oe.z)(Ee))return function ae(Ee,Je){return new we.y(J=>{let it=0;return Je.schedule(function(){it===Ee.length?J.complete():(J.next(Ee[it++]),J.closed||this.schedule())})})}(Ee,Je);if((0,Pe.t)(Ee))return function ge(Ee,Je){return(0,f.Xf)(Ee).pipe((0,P.R)(Je),(0,j.Q)(Je))}(Ee,Je);if((0,_e.D)(Ee))return Y(Ee,Je);if((0,Le.T)(Ee))return function W(Ee,Je){return new we.y(J=>{let it;return(0,z.f)(J,Je,()=>{it=Ee[ce.h](),(0,z.f)(J,Je,()=>{let ut,oe;try{({value:ut,done:oe}=it.next())}catch(se){return void J.error(se)}oe?J.complete():J.next(ut)},0,!0)}),()=>(0,ye.m)(null==it?void 0:it.return)&&it.return()})}(Ee,Je);if((0,at.L)(Ee))return function Ke(Ee,Je){return Y((0,at.Q)(Ee),Je)}(Ee,Je)}throw(0,Ie.z)(Ee)}(Ee,Je):(0,f.Xf)(Ee)}},8421:(Rt,xe,N)=>{N.d(xe,{Xf:()=>je});var f=N(655),j=N(1144),P=N(8239),ne=N(8306),ge=N(3670),we=N(2206),ae=N(4532),ce=N(6495),ye=N(3260),z=N(576),W=N(7849),Y=N(8822);function je(Ne){if(Ne instanceof ne.y)return Ne;if(null!=Ne){if((0,ge.c)(Ne))return function Pe(Ne){return new ne.y(Me=>{const Ee=Ne[Y.L]();if((0,z.m)(Ee.subscribe))return Ee.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,j.z)(Ne))return function Oe(Ne){return new ne.y(Me=>{for(let Ee=0;Ee<Ne.length&&!Me.closed;Ee++)Me.next(Ne[Ee]);Me.complete()})}(Ne);if((0,P.t)(Ne))return function Le(Ne){return new ne.y(Me=>{Ne.then(Ee=>{Me.closed||(Me.next(Ee),Me.complete())},Ee=>Me.error(Ee)).then(null,W.h)})}(Ne);if((0,we.D)(Ne))return Ie(Ne);if((0,ce.T)(Ne))return function _e(Ne){return new ne.y(Me=>{for(const Ee of Ne)if(Me.next(Ee),Me.closed)return;Me.complete()})}(Ne);if((0,ye.L)(Ne))return function at(Ne){return Ie((0,ye.Q)(Ne))}(Ne)}throw(0,ae.z)(Ne)}function Ie(Ne){return new ne.y(Me=>{(function Ke(Ne,Me){var Ee,Je,J,it;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(Ne);!(Je=yield Ee.next()).done;)if(Me.next(Je.value),Me.closed)return}catch(ut){J={error:ut}}finally{try{Je&&!Je.done&&(it=Ee.return)&&(yield it.call(Ee))}finally{if(J)throw J.error}}Me.complete()})})(Ne,Me).catch(Ee=>Me.error(Ee))})}},6451:(Rt,xe,N)=>{N.d(xe,{T:()=>we});var f=N(8189),j=N(8421),P=N(515),ne=N(7669),ge=N(8996);function we(...ae){const ce=(0,ne.yG)(ae),ye=(0,ne._6)(ae,1/0),z=ae;return z.length?1===z.length?(0,j.Xf)(z[0]):(0,f.J)(ye)((0,ge.D)(z,ce)):P.E}},5403:(Rt,xe,N)=>{N.d(xe,{x:()=>j,Q:()=>P});var f=N(2961);function j(ne,ge,we,ae,ce){return new P(ne,ge,we,ae,ce)}class P extends f.Lv{constructor(ge,we,ae,ce,ye,z){super(ge),this.onFinalize=ye,this.shouldUnsubscribe=z,this._next=we?function(W){try{we(W)}catch(Y){ge.error(Y)}}:super._next,this._error=ce?function(W){try{ce(W)}catch(Y){ge.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(W){ge.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(Rt,xe,N)=>{N.d(xe,{U:()=>P});var f=N(4482),j=N(5403);function P(ne,ge){return(0,f.e)((we,ae)=>{let ce=0;we.subscribe((0,j.x)(ae,ye=>{ae.next(ne.call(ge,ye,ce++))}))})}},8189:(Rt,xe,N)=>{N.d(xe,{J:()=>P});var f=N(5577),j=N(4671);function P(ne=1/0){return(0,f.z)(j.y,ne)}},5577:(Rt,xe,N)=>{N.d(xe,{z:()=>ce});var f=N(4004),j=N(8421),P=N(4482),ne=N(9672),ge=N(5403),ae=N(576);function ce(ye,z,W=1/0){return(0,ae.m)(z)?ce((Y,je)=>(0,f.U)((Pe,Oe)=>z(Y,Pe,je,Oe))((0,j.Xf)(ye(Y,je))),W):("number"==typeof z&&(W=z),(0,P.e)((Y,je)=>function we(ye,z,W,Y,je,Pe,Oe,Le){const _e=[];let Ie=0,at=0,Ke=!1;const Ne=()=>{Ke&&!_e.length&&!Ie&&z.complete()},Me=Je=>Ie<Y?Ee(Je):_e.push(Je),Ee=Je=>{Pe&&z.next(Je),Ie++;let J=!1;(0,j.Xf)(W(Je,at++)).subscribe((0,ge.x)(z,it=>{null==je||je(it),Pe?Me(it):z.next(it)},()=>{J=!0},void 0,()=>{if(J)try{for(Ie--;_e.length&&Ie<Y;){const it=_e.shift();Oe?(0,ne.f)(z,Oe,()=>Ee(it)):Ee(it)}Ne()}catch(it){z.error(it)}}))};return ye.subscribe((0,ge.x)(z,Me,()=>{Ke=!0,Ne()})),()=>{null==Le||Le()}}(Y,je,ye,W)))}},5363:(Rt,xe,N)=>{N.d(xe,{Q:()=>ne});var f=N(9672),j=N(4482),P=N(5403);function ne(ge,we=0){return(0,j.e)((ae,ce)=>{ae.subscribe((0,P.x)(ce,ye=>(0,f.f)(ce,ge,()=>ce.next(ye),we),()=>(0,f.f)(ce,ge,()=>ce.complete(),we),ye=>(0,f.f)(ce,ge,()=>ce.error(ye),we)))})}},3099:(Rt,xe,N)=>{N.d(xe,{B:()=>we});var f=N(8996),j=N(5698),P=N(7579),ne=N(2961),ge=N(4482);function we(ce={}){const{connector:ye=(()=>new P.x),resetOnError:z=!0,resetOnComplete:W=!0,resetOnRefCountZero:Y=!0}=ce;return je=>{let Pe=null,Oe=null,Le=null,_e=0,Ie=!1,at=!1;const Ke=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ne=()=>{Ke(),Pe=Le=null,Ie=at=!1},Me=()=>{const Ee=Pe;Ne(),null==Ee||Ee.unsubscribe()};return(0,ge.e)((Ee,Je)=>{_e++,!at&&!Ie&&Ke();const J=Le=null!=Le?Le:ye();Je.add(()=>{_e--,0===_e&&!at&&!Ie&&(Oe=ae(Me,Y))}),J.subscribe(Je),Pe||(Pe=new ne.Hp({next:it=>J.next(it),error:it=>{at=!0,Ke(),Oe=ae(Ne,z,it),J.error(it)},complete:()=>{Ie=!0,Ke(),Oe=ae(Ne,W),J.complete()}}),(0,f.D)(Ee).subscribe(Pe))})(je)}}function ae(ce,ye,...z){return!0===ye?(ce(),null):!1===ye?null:ye(...z).pipe((0,j.q)(1)).subscribe(()=>ce())}},9468:(Rt,xe,N)=>{N.d(xe,{R:()=>j});var f=N(4482);function j(P,ne=0){return(0,f.e)((ge,we)=>{we.add(P.schedule(()=>ge.subscribe(we),ne))})}},5698:(Rt,xe,N)=>{N.d(xe,{q:()=>ne});var f=N(515),j=N(4482),P=N(5403);function ne(ge){return ge<=0?()=>f.E:(0,j.e)((we,ae)=>{let ce=0;we.subscribe((0,P.x)(ae,ye=>{++ce<=ge&&(ae.next(ye),ge<=ce&&ae.complete())}))})}},8505:(Rt,xe,N)=>{N.d(xe,{b:()=>ge});var f=N(576),j=N(4482),P=N(5403),ne=N(4671);function ge(we,ae,ce){const ye=(0,f.m)(we)||ae||ce?{next:we,error:ae,complete:ce}:we;return ye?(0,j.e)((z,W)=>{var Y;null===(Y=ye.subscribe)||void 0===Y||Y.call(ye);let je=!0;z.subscribe((0,P.x)(W,Pe=>{var Oe;null===(Oe=ye.next)||void 0===Oe||Oe.call(ye,Pe),W.next(Pe)},()=>{var Pe;je=!1,null===(Pe=ye.complete)||void 0===Pe||Pe.call(ye),W.complete()},Pe=>{var Oe;je=!1,null===(Oe=ye.error)||void 0===Oe||Oe.call(ye,Pe),W.error(Pe)},()=>{var Pe,Oe;je&&(null===(Pe=ye.unsubscribe)||void 0===Pe||Pe.call(ye)),null===(Oe=ye.finalize)||void 0===Oe||Oe.call(ye)}))}):ne.y}},4408:(Rt,xe,N)=>{N.d(xe,{o:()=>ge});var f=N(727);class j extends f.w0{constructor(ae,ce){super()}schedule(ae,ce=0){return this}}const P={setInterval(we,ae,...ce){const{delegate:ye}=P;return(null==ye?void 0:ye.setInterval)?ye.setInterval(we,ae,...ce):setInterval(we,ae,...ce)},clearInterval(we){const{delegate:ae}=P;return((null==ae?void 0:ae.clearInterval)||clearInterval)(we)},delegate:void 0};var ne=N(8737);class ge extends j{constructor(ae,ce){super(ae,ce),this.scheduler=ae,this.work=ce,this.pending=!1}schedule(ae,ce=0){if(this.closed)return this;this.state=ae;const ye=this.id,z=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(z,ye,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(z,this.id,ce),this}requestAsyncId(ae,ce,ye=0){return P.setInterval(ae.flush.bind(ae,this),ye)}recycleAsyncId(ae,ce,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return ce;P.clearInterval(ce)}execute(ae,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(ae,ce);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ce){let z,ye=!1;try{this.work(ae)}catch(W){ye=!0,z=W||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ce}=this,{actions:ye}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ye,this),null!=ae&&(this.id=this.recycleAsyncId(ce,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Rt,xe,N)=>{N.d(xe,{v:()=>P});var f=N(6063);class j{constructor(ge,we=j.now){this.schedulerActionCtor=ge,this.now=we}schedule(ge,we=0,ae){return new this.schedulerActionCtor(this,ge).schedule(ae,we)}}j.now=f.l.now;class P extends j{constructor(ge,we=j.now){super(ge,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ge){const{actions:we}=this;if(this._active)return void we.push(ge);let ae;this._active=!0;do{if(ae=ge.execute(ge.state,ge.delay))break}while(ge=we.shift());if(this._active=!1,ae){for(;ge=we.shift();)ge.unsubscribe();throw ae}}}},4986:(Rt,xe,N)=>{N.d(xe,{z:()=>P});var f=N(4408);const P=new(N(7565).v)(f.o)},6063:(Rt,xe,N)=>{N.d(xe,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Rt,xe,N)=>{N.d(xe,{z:()=>f});const f={setTimeout(j,P,...ne){const{delegate:ge}=f;return(null==ge?void 0:ge.setTimeout)?ge.setTimeout(j,P,...ne):setTimeout(j,P,...ne)},clearTimeout(j){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(j)},delegate:void 0}},2202:(Rt,xe,N)=>{N.d(xe,{h:()=>j});const j=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Rt,xe,N)=>{N.d(xe,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Rt,xe,N)=>{N.d(xe,{_6:()=>we,jO:()=>ne,yG:()=>ge});var f=N(576);function P(ae){return ae[ae.length-1]}function ne(ae){return(0,f.m)(P(ae))?ae.pop():void 0}function ge(ae){return function j(ae){return ae&&(0,f.m)(ae.schedule)}(P(ae))?ae.pop():void 0}function we(ae,ce){return"number"==typeof P(ae)?ae.pop():ce}},8737:(Rt,xe,N)=>{function f(j,P){if(j){const ne=j.indexOf(P);0<=ne&&j.splice(ne,1)}}N.d(xe,{P:()=>f})},3888:(Rt,xe,N)=>{function f(j){const ne=j(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}N.d(xe,{d:()=>f})},2806:(Rt,xe,N)=>{N.d(xe,{x:()=>P,O:()=>ne});var f=N(2416);let j=null;function P(ge){if(f.v.useDeprecatedSynchronousErrorHandling){const we=!j;if(we&&(j={errorThrown:!1,error:null}),ge(),we){const{errorThrown:ae,error:ce}=j;if(j=null,ae)throw ce}}else ge()}function ne(ge){f.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ge)}},9672:(Rt,xe,N)=>{function f(j,P,ne,ge=0,we=!1){const ae=P.schedule(function(){ne(),we?j.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(j.add(ae),!we)return ae}N.d(xe,{f:()=>f})},4671:(Rt,xe,N)=>{function f(j){return j}N.d(xe,{y:()=>f})},1144:(Rt,xe,N)=>{N.d(xe,{z:()=>f});const f=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(Rt,xe,N)=>{N.d(xe,{D:()=>j});var f=N(576);function j(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Rt,xe,N)=>{function f(j){return"function"==typeof j}N.d(xe,{m:()=>f})},3670:(Rt,xe,N)=>{N.d(xe,{c:()=>P});var f=N(8822),j=N(576);function P(ne){return(0,j.m)(ne[f.L])}},6495:(Rt,xe,N)=>{N.d(xe,{T:()=>P});var f=N(2202),j=N(576);function P(ne){return(0,j.m)(null==ne?void 0:ne[f.h])}},8239:(Rt,xe,N)=>{N.d(xe,{t:()=>j});var f=N(576);function j(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(Rt,xe,N)=>{N.d(xe,{Q:()=>P,L:()=>ne});var f=N(655),j=N(576);function P(ge){return(0,f.FC)(this,arguments,function*(){const ae=ge.getReader();try{for(;;){const{value:ce,done:ye}=yield(0,f.qq)(ae.read());if(ye)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ce)}}finally{ae.releaseLock()}})}function ne(ge){return(0,j.m)(null==ge?void 0:ge.getReader)}},4482:(Rt,xe,N)=>{N.d(xe,{A:()=>j,e:()=>P});var f=N(576);function j(ne){return(0,f.m)(null==ne?void 0:ne.lift)}function P(ne){return ge=>{if(j(ge))return ge.lift(function(we){try{return ne(we,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Rt,xe,N)=>{N.d(xe,{h:()=>P});var f=N(2416),j=N(3410);function P(ne){j.z.setTimeout(()=>{const{onUnhandledError:ge}=f.v;if(!ge)throw ne;ge(ne)})}},4532:(Rt,xe,N)=>{function f(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(xe,{z:()=>f})},655:(Rt,xe,N)=>{function ne(oe,se){var le={};for(var Te in oe)Object.prototype.hasOwnProperty.call(oe,Te)&&se.indexOf(Te)<0&&(le[Te]=oe[Te]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(Te=Object.getOwnPropertySymbols(oe);fe<Te.length;fe++)se.indexOf(Te[fe])<0&&Object.prototype.propertyIsEnumerable.call(oe,Te[fe])&&(le[Te[fe]]=oe[Te[fe]])}return le}function ge(oe,se,le,Te){var bt,fe=arguments.length,ze=fe<3?se:null===Te?Te=Object.getOwnPropertyDescriptor(se,le):Te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ze=Reflect.decorate(oe,se,le,Te);else for(var jt=oe.length-1;jt>=0;jt--)(bt=oe[jt])&&(ze=(fe<3?bt(ze):fe>3?bt(se,le,ze):bt(se,le))||ze);return fe>3&&ze&&Object.defineProperty(se,le,ze),ze}function ae(oe,se){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(oe,se)}function ce(oe,se,le,Te){return new(le||(le=Promise))(function(ze,bt){function jt(gn){try{Be(Te.next(gn))}catch(jn){bt(jn)}}function Vt(gn){try{Be(Te.throw(gn))}catch(jn){bt(jn)}}function Be(gn){gn.done?ze(gn.value):function fe(ze){return ze instanceof le?ze:new le(function(bt){bt(ze)})}(gn.value).then(jt,Vt)}Be((Te=Te.apply(oe,se||[])).next())})}function _e(oe){return this instanceof _e?(this.v=oe,this):new _e(oe)}function Ie(oe,se,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Te=le.apply(oe,se||[]),ze=[];return fe={},bt("next"),bt("throw"),bt("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function bt(Dn){Te[Dn]&&(fe[Dn]=function($t){return new Promise(function(Ot,Ge){ze.push([Dn,$t,Ot,Ge])>1||jt(Dn,$t)})})}function jt(Dn,$t){try{!function Vt(Dn){Dn.value instanceof _e?Promise.resolve(Dn.value.v).then(Be,gn):jn(ze[0][2],Dn)}(Te[Dn]($t))}catch(Ot){jn(ze[0][3],Ot)}}function Be(Dn){jt("next",Dn)}function gn(Dn){jt("throw",Dn)}function jn(Dn,$t){Dn($t),ze.shift(),ze.length&&jt(ze[0][0],ze[0][1])}}function Ke(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,se=oe[Symbol.asyncIterator];return se?se.call(oe):(oe=function Y(oe){var se="function"==typeof Symbol&&Symbol.iterator,le=se&&oe[se],Te=0;if(le)return le.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&Te>=oe.length&&(oe=void 0),{value:oe&&oe[Te++],done:!oe}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),le={},Te("next"),Te("throw"),Te("return"),le[Symbol.asyncIterator]=function(){return this},le);function Te(ze){le[ze]=oe[ze]&&function(bt){return new Promise(function(jt,Vt){!function fe(ze,bt,jt,Vt){Promise.resolve(Vt).then(function(Be){ze({value:Be,done:jt})},bt)}(jt,Vt,(bt=oe[ze](bt)).done,bt.value)})}}}N.d(xe,{_T:()=>ne,gn:()=>ge,w6:()=>ae,mG:()=>ce,qq:()=>_e,FC:()=>Ie,KL:()=>Ke})},5e3:(Rt,xe,N)=>{N.d(xe,{deG:()=>iy,tb:()=>r_,AFp:()=>t_,ip1:()=>ME,CZH:()=>NE,hGG:()=>uT,z2F:()=>GE,sBO:()=>$R,Sil:()=>jI,_Vd:()=>Kf,EJc:()=>Ld,SBq:()=>ml,qLn:()=>Cg,vpe:()=>Bi,tBr:()=>vo,XFs:()=>De,OlP:()=>dr,zs3:()=>Ks,ZZ4:()=>g_,aQg:()=>fp,soG:()=>sp,YKP:()=>dI,h0i:()=>Ju,PXZ:()=>HE,R0b:()=>es,FiY:()=>Qo,Lbi:()=>BI,g9A:()=>n_,Qsj:()=>Zf,FYo:()=>Zu,JOm:()=>bo,tp0:()=>Wa,Rgc:()=>ep,dDg:()=>UE,q4F:()=>lI,GfV:()=>nE,s_b:()=>tc,ifc:()=>vt,eFA:()=>o_,G48:()=>KE,Gpc:()=>W,X6Q:()=>qE,_c5:()=>a0,VLi:()=>GI,c2e:()=>i_,zSh:()=>Ef,wAp:()=>ot,vHH:()=>Oe,cg1:()=>mm,kL8:()=>ym,dqk:()=>qt,sIi:()=>hd,CqO:()=>oC,QGY:()=>im,F4k:()=>gd,RDi:()=>Qp,AaK:()=>ce,qOj:()=>br,TTD:()=>Bl,_Bn:()=>Dm,xp6:()=>Ng,uIk:()=>yv,Tol:()=>xf,ekj:()=>Fv,Suo:()=>SI,Xpm:()=>Se,lG2:()=>de,Yz7:()=>$t,cJS:()=>Ge,oAB:()=>M,Yjl:()=>qe,Y36:()=>Qs,_UZ:()=>Mv,qZA:()=>aa,TgZ:()=>Or,EpF:()=>rm,n5z:()=>Oh,LFG:()=>hr,$8M:()=>Va,$Z:()=>Rv,NdJ:()=>Js,CRH:()=>Bm,oxw:()=>xv,ALo:()=>mI,lcZ:()=>_I,xi3:()=>yI,Hsn:()=>md,F$t:()=>Xs,Q6J:()=>ku,iGM:()=>TI,MAs:()=>nC,Jf7:()=>Vw,CHM:()=>z_,LSH:()=>Yc,YNc:()=>Pu,W1O:()=>RI,_uU:()=>Pf,hij:()=>yd});var f=N(7579),j=N(727),P=N(8306),ne=N(6451),ge=N(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function ae(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ye(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=we({__forward_ref__:we});function W(s){return s.__forward_ref__=W,s.toString=function(){return ce(this())},s}function Y(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===W}class Oe extends Error{constructor(o,l){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function Me(s,o){const l=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ie(s)} found${l}`)}function Vt(s,o){null==s&&function Be(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function $t(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ge(s){return{providers:s.providers||[],imports:s.imports||[]}}function pt(s){return gt(s,Mn)||gt(s,kn)}function gt(s,o){return s.hasOwnProperty(o)?s[o]:null}function hn(s){return s&&(s.hasOwnProperty(Nn)||s.hasOwnProperty(er))?s[Nn]:null}const Mn=we({\u0275prov:we}),Nn=we({\u0275inj:we}),kn=we({ngInjectableDef:we}),er=we({ngInjectorDef:we});var De=(()=>((De=De||{})[De.Default=0]="Default",De[De.Host=1]="Host",De[De.Self=2]="Self",De[De.SkipSelf=4]="SkipSelf",De[De.Optional=8]="Optional",De))();let ue;function Ye(s){const o=ue;return ue=s,o}function wt(s,o,l){const c=pt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&De.Optional?null:void 0!==o?o:void Me(ce(s),"Injector")}function Gt(s){return{toString:s}.toString()}var un=(()=>((un=un||{})[un.OnPush=0]="OnPush",un[un.Default=1]="Default",un))(),vt=(()=>{return(s=vt||(vt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",vt;var s})();const mt="undefined"!=typeof globalThis&&globalThis,lt="undefined"!=typeof window&&window,Hn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qt=mt||"undefined"!=typeof global&&global||lt||Hn,an={},It=[],Wn=we({\u0275cmp:we}),Xt=we({\u0275dir:we}),rt=we({\u0275pipe:we}),Ae=we({\u0275mod:we}),ft=we({\u0275fac:we}),Q=we({__NG_ELEMENT_ID__:we});let me=0;function Se(s){return Gt(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===un.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||It,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||vt.Emulated,id:"c",styles:s.styles||It,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,g=s.features,v=s.pipes;return c.id+=me++,c.inputs=$(s.inputs,l),c.outputs=$(s.outputs),g&&g.forEach(w=>w(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(O):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(H):null,c})}function O(s){return st(s)||function Mt(s){return s[Xt]||null}(s)}function H(s){return function _t(s){return s[rt]||null}(s)}const X={};function M(s){return Gt(()=>{const o={type:s.type,bootstrap:s.bootstrap||It,declarations:s.declarations||It,imports:s.imports||It,exports:s.exports||It,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(X[s.id]=s.type),o})}function $(s,o){if(null==s)return an;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=c,o&&(o[h]=g)}return l}const de=Se;function qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function st(s){return s[Wn]||null}function Kt(s,o){const l=s[Ae]||null;if(!l&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return l}function ai(s){return Array.isArray(s)&&"object"==typeof s[1]}function ji(s){return Array.isArray(s)&&!0===s[1]}function Vl(s){return 0!=(8&s.flags)}function hh(s){return 2==(2&s.flags)}function Bo(s){return 1==(1&s.flags)}function Hi(s){return null!==s.template}function fh(s){return 0!=(512&s[2])}function Wi(s,o){return s.hasOwnProperty(ft)?s[ft]:null}class B_{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Bl(){return mc}function mc(s){return s.type.prototype.ngOnChanges&&(s.setInput=$l),$_}function $_(){const s=Ia(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===an)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function $l(s,o,l,c){const h=Ia(s)||function j_(s,o){return s[Gi]=o}(s,{previous:an,current:null}),g=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[l],I=v[w];g[w]=new B_(I&&I.currentValue,o,v===an),s[c]=o}Bl.ngInherit=!0;const Gi="__ngSimpleChanges__";function Ia(s){return s[Gi]||null}let vc;function Qp(s){vc=s}function tr(s){return!!s.listen}const Wl={createRenderer:(s,o)=>function Hl(){return void 0!==vc?vc:"undefined"!=typeof document?document:void 0}()};function Qn(s){for(;Array.isArray(s);)s=s[0];return s}function Ta(s,o){return Qn(o[s])}function Qr(s,o){return Qn(o[s.index])}function wc(s,o){return s.data[o]}function ds(s,o){return s[o]}function li(s,o){const l=o[s];return ai(l)?l:l[0]}function $o(s){return 4==(4&s[2])}function Sa(s){return 128==(128&s[2])}function Os(s,o){return null==o?null:s[o]}function po(s){s[18]=0}function jo(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Wt={lFrame:Ih(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ic(){return Wt.bindingsEnabled}function Ue(){return Wt.lFrame.lView}function vn(){return Wt.lFrame.tView}function z_(s){return Wt.lFrame.contextLView=s,s[8]}function nr(){let s=Tc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Tc(){return Wt.lFrame.currentTNode}function zi(s,o){const l=Wt.lFrame;l.currentTNode=s,l.isParent=o}function Eh(){return Wt.lFrame.isParent}function ql(){Wt.lFrame.isParent=!1}function Da(){return Wt.isInCheckNoChangesMode}function Sc(s){Wt.isInCheckNoChangesMode=s}function Lr(){const s=Wt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Aa(){return Wt.lFrame.bindingIndex++}function qi(s){const o=Wt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function K_(s,o){const l=Wt.lFrame;l.bindingIndex=l.bindingRootIndex=s,bh(o)}function bh(s){Wt.lFrame.currentDirectiveIndex=s}function Z_(){return Wt.lFrame.currentQueryIndex}function Ch(s){Wt.lFrame.currentQueryIndex=s}function Y_(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Rc(s,o,l){if(l&De.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&De.Host||(h=Y_(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=Wt.lFrame=Wo();return c.currentTNode=o,c.lView=s,!0}function Kl(s){const o=Wo(),l=s[1];Wt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Wo(){const s=Wt.lFrame,o=null===s?null:s.child;return null===o?Ih(s):o}function Ih(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Q_(){const s=Wt.lFrame;return Wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const J_=Q_;function Zl(){const s=Q_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ui(){return Wt.lFrame.selectedIndex}function ks(s){Wt.lFrame.selectedIndex=s}function sr(){const s=Wt.lFrame;return wc(s.tView,s.selectedIndex)}function Yl(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:R}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),S&&((s.viewHooks||(s.viewHooks=[])).push(l,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function Th(s,o,l){ey(s,o,3,l)}function Sh(s,o,l,c){(3&s[2])===l&&ey(s,o,l,c)}function Dh(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function ey(s,o,l,c){const g=null!=c?c:-1,v=o.length-1;let w=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=c&&w>=c)break}else o[I]<0&&(s[18]+=65536),(w<g||-1==g)&&(tg(s,l,o,I),s[18]=(4294901760&s[18])+I+2),I++}function tg(s,o,l,c){const h=l[c]<0,g=l[c+1],w=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Mc{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function kt(s,o,l){const c=tr(s);let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const v=l[h++],w=l[h++],I=l[h++];c?s.setAttribute(o,w,I,v):o.setAttributeNS(v,w,I)}else{const v=g,w=l[++h];ci(v)?c&&s.setProperty(o,v,w):c?s.setAttribute(o,v,w):o.setAttribute(v,w),h++}}return h}function Ki(s){return 3===s||4===s||6===s}function ci(s){return 64===s.charCodeAt(0)}function Mr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||rg(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function rg(s,o,l,c,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===l){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function vr(s){return-1!==s}function Ma(s){return 32767&s}function zo(s,o){let l=function Rh(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Ql=!0;function mo(s){const o=Ql;return Ql=s,o}let Na=0;function rr(s,o){const l=xh(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,xa(c.data,s),xa(o,null),xa(c.blueprint,null));const h=Oa(s,o),g=s.injectorIndex;if(vr(h)){const v=Ma(h),w=zo(h,o),I=w[1].data;for(let S=0;S<8;S++)o[g+S]=w[v+S]|I[v+S]}return o[g+8]=h,g}function xa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function xh(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Oa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const g=h[1],v=g.type;if(c=2===v?g.declTNode:1===v?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Pa(s,o,l){!function Nh(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Q)&&(c=l[Q]),null==c&&(c=l[Q]=Na++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Jl(s,o,l){if(l&De.Optional)return s;Me(o,"NodeInjector")}function Oc(s,o,l,c){if(l&De.Optional&&void 0===c&&(c=null),0==(l&(De.Self|De.Host))){const h=s[9],g=Ye(void 0);try{return h?h.get(o,c,l&De.Optional):wt(o,c,l&De.Optional)}finally{Ye(g)}}return Jl(c,o,l)}function ka(s,o,l,c=De.Default,h){if(null!==s){const g=function La(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Q)?s[Q]:void 0;return"number"==typeof o?o>=0?255&o:ry:o}(l);if("function"==typeof g){if(!Rc(o,s,c))return c&De.Host?Jl(h,l,c):Oc(o,l,c,h);try{const v=g(c);if(null!=v||c&De.Optional)return v;Me(l)}finally{J_()}}else if("number"==typeof g){let v=null,w=xh(s,o),I=-1,S=c&De.Host?o[16][6]:null;for((-1===w||c&De.SkipSelf)&&(I=-1===w?Oa(s,o):o[w+8],-1!==I&&jr(c,!1)?(v=o[1],w=Ma(I),o=zo(I,o)):w=-1);-1!==w;){const R=o[1];if(Pc(g,w,R.data)){const V=sg(w,o,l,v,c,S);if(V!==Xl)return V}I=o[w+8],-1!==I&&jr(c,o[1].data[w+8]===S)&&Pc(g,w,o)?(v=R,w=Ma(I),o=zo(I,o)):w=-1}}}return Oc(o,l,c,h)}const Xl={};function ry(){return new qo(nr(),Ue())}function sg(s,o,l,c,h,g){const v=o[1],w=v.data[s+8],R=hs(w,v,l,null==c?hh(w)&&Ql:c!=v&&0!=(3&w.type),h&De.Host&&g===w);return null!==R?Fa(o,v,R,w):Xl}function hs(s,o,l,c,h){const g=s.providerIndexes,v=o.data,w=1048575&g,I=s.directiveStart,R=g>>20,G=h?w+R:s.directiveEnd;for(let te=c?w:w+R;te<G;te++){const he=v[te];if(te<I&&l===he||te>=I&&he.type===l)return te}if(h){const te=v[I];if(te&&Hi(te)&&te.type===l)return I}return null}function Fa(s,o,l,c){let h=s[l];const g=o.data;if(function Ah(s){return s instanceof Mc}(h)){const v=h;v.resolving&&function at(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ie(g[l]));const w=mo(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Ye(v.injectImpl):null;Rc(s,c,De.Default);try{h=s[l]=v.factory(void 0,g,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Go(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const v=mc(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==I&&Ye(I),mo(w),v.resolving=!1,J_()}}return h}function Pc(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function jr(s,o){return!(s&De.Self||s&De.Host&&o)}class qo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return ka(this._tNode,this._lView,o,c,l)}}function Oh(s){return Gt(()=>{const o=s.prototype.constructor,l=o[ft]||Er(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[ft]||Er(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Er(s){return je(s)?()=>{const o=Er(Y(s));return o&&o()}:Wi(s)}function Va(s){return function Ni(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const g=l[h];if(Ki(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(nr(),s)}const Ls="__parameters__";function Jn(s,o,l){return Gt(()=>{const c=function gs(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const v=new h(...g);return w.annotation=v,w;function w(I,S,R){const V=I.hasOwnProperty(Ls)?I[Ls]:Object.defineProperty(I,Ls,{value:[]})[Ls];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(v),I}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class dr{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=$t({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const iy=new dr("AnalyzeForEntryComponents");function di(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),di(c,o)):o!==s&&o.push(c)}return o}function _s(s,o){s.forEach(l=>Array.isArray(l)?_s(l,o):o(l))}function nu(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function ru(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Zi(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function Vr(s,o,l){let c=ys(s,o);return c>=0?s[1|c]=l:(c=~c,function ag(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Vc(s,o){const l=ys(s,o);if(l>=0)return s[1|l]}function ys(s,o){return function Uc(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const g=c+(h-c>>1),v=s[g<<l];if(o===v)return g<<l;v>o?h=g:c=g+1}return~(h<<l)}(s,o,1)}const Zo={},$c="__NG_DI_FLAG__",$a="ngTempTokenPath",dg=/\n/gm,su="__source",hg=we({provide:String,useValue:we});let _o;function vs(s){const o=_o;return _o=s,o}function En(s,o=De.Default){if(void 0===_o)throw new Oe(203,"");return null===_o?wt(s,void 0,o):_o.get(s,o&De.Optional?null:void 0,o)}function hr(s,o=De.Default){return(function ke(){return ue}()||En)(Y(s),o)}const Yo=hr;function ou(s){const o=[];for(let l=0;l<s.length;l++){const c=Y(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let h,g=De.Default;for(let v=0;v<c.length;v++){const w=c[v],I=Hc(w);"number"==typeof I?-1===I?h=w.token:g|=I:h=w}o.push(hr(h,g))}else o.push(hr(c))}return o}function yo(s,o){return s[$c]=o,s.prototype[$c]=o,s}function Hc(s){return s[$c]}const vo=yo(Jn("Inject",s=>({token:s})),-1),Qo=yo(Jn("Optional"),8),Wa=yo(Jn("SkipSelf"),4);class zc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Eo(s){return s instanceof zc?s.changingThisBreaksApplicationSecurity:s}const m=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,b=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function Yc(s){const o=function Qa(){const s=Ue();return s&&s[12]}();return o?o.sanitize(Fn.URL,s)||"":function $s(s,o){const l=function du(s){return s instanceof zc&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?Eo(s):function A(s){return(s=String(s)).match(m)||s.match(b)?s:"unsafe:"+s}(_e(s))}const xw="__ngContext__";function fi(s,o){s[xw]=o}function Dy(s){const o=function zh(s){return s[xw]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function _u(s){return s.ngOriginalError}function ID(s,...o){s.error(...o)}class Cg{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function CD(s){return s&&s.ngErrorLogger||ID}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&_u(o);for(;l&&_u(l);)l=_u(l);return l||null}}const OD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(qt))();function Vw(s){return s.ownerDocument.defaultView}function Hs(s){return s instanceof Function?s():s}var bo=(()=>((bo=bo||{})[bo.Important=1]="Important",bo[bo.DashCase=2]="DashCase",bo))();function Ig(s,o){return undefined(s,o)}function Kh(s){const o=s[3];return ji(o)?o[3]:o}function Zh(s){return Hw(s[13])}function Sg(s){return Hw(s[4])}function Hw(s){for(;null!==s&&!ji(s);)s=s[4];return s}function Qc(s,o,l,c,h){if(null!=c){let g,v=!1;ji(c)?g=c:ai(c)&&(v=!0,c=c[0]);const w=Qn(c);0===s&&null!==l?null==h?Fy(o,l,w):Yi(o,l,w,h||null,!0):1===s&&null!==l?Yi(o,l,w,h||null,!0):2===s?function By(s,o,l){const c=Co(s,o);c&&function BD(s,o,l,c){tr(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function jy(s,o,l,c,h){const g=l[7];g!==Qn(l)&&Qc(o,s,c,g,h);for(let w=10;w<l.length;w++){const I=l[w];Mg(I[1],I,s,o,c,g)}}(o,s,g,l,h)}}function xy(s,o,l){if(tr(s))return s.createElement(o,l);{const c=null!==l?function Yp(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Gw(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,jo(h,-1)),l.splice(c,1)}function Oy(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&Gw(h,c),o>0&&(s[l-1][4]=c[4]);const g=ru(s,10+o);!function Ci(s,o){Mg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Py(s,o){if(!(256&o[2])){const l=o[11];tr(l)&&l.destroyNode&&Mg(s,o,l,3,null,null),function Dg(s){let o=s[13];if(!o)return ky(s[1],s);for(;o;){let l=null;if(ai(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)ai(o)&&ky(o[1],o),o=o[3];null===o&&(o=s),ai(o)&&ky(o[1],o),l=o&&o[4]}o=l}}(o)}}function ky(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function qw(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Mc)){const g=l[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=h[g[v]],I=g[v+1];try{I.call(w)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function zw(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(o):Qn(o[v]),I=c[h=l[g+2]],S=l[g+3];"boolean"==typeof S?w.removeEventListener(l[g],I,S):S>=0?c[h=S]():c[h=-S].unsubscribe(),g+=2}else{const v=c[h=l[g+1]];l[g].call(v)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();o[7]=null}}(s,o),1===o[1].type&&tr(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ji(o[3])){l!==o[3]&&Gw(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Ag(s,o,l){return function UD(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===vt.None||h===vt.Emulated)return null}return Qr(c,l)}(s,o.parent,l)}function Yi(s,o,l,c,h){tr(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function Fy(s,o,l){tr(s)?s.appendChild(o,l):o.appendChild(l)}function Kw(s,o,l,c,h){null!==c?Yi(s,o,l,c,h):Fy(s,o,l)}function Co(s,o){return tr(s)?s.parentNode(o):o.parentNode}function Zw(s,o,l){return Ly(s,o,l)}let Ly=function Yw(s,o,l){return 40&s.type?Qr(s,l):null};function Rg(s,o,l,c){const h=Ag(s,c,o),g=o[11],w=Zw(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let I=0;I<l.length;I++)Kw(g,h,l[I],w,!1);else Kw(g,h,l,w,!1)}function Xc(s,o){if(null!==o){const l=o.type;if(3&l)return Qr(o,s);if(4&l)return Uy(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Xc(s,c);{const h=s[o.index];return ji(h)?Uy(-1,h):Qn(h)}}if(32&l)return Ig(o,s)()||Qn(s[o.index]);{const c=Jw(s,o);return null!==c?Array.isArray(c)?c[0]:Xc(Kh(s[16]),c):Xc(s,o.next)}}return null}function Jw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Uy(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return Xc(c,h)}return o[7]}function $y(s,o,l,c,h,g,v){for(;null!=l;){const w=c[l.index],I=l.type;if(v&&0===o&&(w&&fi(Qn(w),c),l.flags|=4),64!=(64&l.flags))if(8&I)$y(s,o,l.child,c,h,g,!1),Qc(o,s,h,w,g);else if(32&I){const S=Ig(l,c);let R;for(;R=S();)Qc(o,s,h,R,g);Qc(o,s,h,w,g)}else 16&I?eb(s,o,c,l,h,g):Qc(o,s,h,w,g);l=v?l.projectionNext:l.next}}function Mg(s,o,l,c,h,g){$y(l,c,s.firstChild,o,h,g,!1)}function eb(s,o,l,c,h,g){const v=l[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)Qc(o,s,h,I[S],g);else $y(s,o,I,v[3],h,g,!0)}function Qh(s,o,l){tr(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Jh(s,o,l){tr(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function tb(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}l=h+1}}const Xh="ng-template";function nb(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==tb(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function rb(s){return 4===s.type&&s.value!==Xh}function Ws(s,o,l){return o===(4!==s.type||l?s.value:Xh)}function zO(s,o,l){let c=4;const h=s.attrs||[],g=function Es(s){for(let o=0;o<s.length;o++)if(Ki(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!Ws(s,I,l)||""===I&&1===o.length){if(Gs(c))return!1;v=!0}}else{const S=8&c?I:o[++w];if(8&c&&null!==s.attrs){if(!nb(s.attrs,S,l)){if(Gs(c))return!1;v=!0}continue}const V=Ce(8&c?"class":I,h,rb(s),l);if(-1===V){if(Gs(c))return!1;v=!0;continue}if(""!==S){let G;G=V>g?"":h[V+1].toLowerCase();const te=8&c?G:null;if(te&&-1!==tb(te,S,0)||2&c&&S!==G){if(Gs(c))return!1;v=!0}}}}else{if(!v&&!Gs(c)&&!Gs(I))return!1;if(v&&Gs(I))continue;v=!1,c=I|1&c}}return Gs(c)||v}function Gs(s){return 0==(1&s)}function Ce(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function Z(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Pn(s,o,l=!1){for(let c=0;c<o.length;c++)if(zO(s,o[c],l))return!0;return!1}function HD(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Io(s,o){return s?":not("+o.trim()+")":o}function Tt(s){let o=s[0],l=1,c=2,h="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const w=s[++l];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Gs(v)&&(o+=Io(g,h),h=""),c=v,g=g||!Gs(c);l++}return""!==h&&(o+=Io(g,h)),o}const en={};function Ng(s){ed(vn(),Ue(),ui()+s,Da())}function ed(s,o,l,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Th(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Sh(o,g,0,l)}ks(l)}function td(s,o){return s<<17|o<<2}function zs(s){return s>>17&32767}function Hr(s){return 2|s}function ws(s){return(131068&s)>>2}function Wr(s,o){return-131069&s|o<<2}function Wy(s){return 1|s}function Lg(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],g=l[c+1];if(-1!==g){const v=s.data[g];Ch(h),v.contentQueries(2,o[g],g)}}}function Eu(s,o,l,c,h,g,v,w,I,S){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,po(R),R[3]=R[15]=s,R[8]=l,R[10]=v||s&&s[10],R[11]=w||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=S||s&&s[9]||null,R[6]=g,R[16]=2==o.type?s[16]:R,R}function wu(s,o,l,c,h){let g=s.data[o];if(null===g)g=function Vg(s,o,l,c,h){const g=Tc(),v=Eh(),I=s.data[o]=function wb(s,o,l,c,h,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,l,c,h),function q_(){return Wt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=h;const v=function Ho(){const s=Wt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return zi(g,!0),g}function id(s,o,l,c){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function sd(s,o,l){Kl(o);try{const c=s.viewQuery;null!==c&&sv(1,c,l);const h=s.template;null!==h&&Jy(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Lg(s,o),s.staticViewQueries&&sv(2,s.viewQuery,l);const g=s.components;null!==g&&function Yy(s,o){for(let l=0;l<o.length;l++)rv(s,o[l])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Zl()}}function bu(s,o,l,c){const h=o[2];if(256==(256&h))return;Kl(o);const g=Da();try{po(o),function Dc(s){return Wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Jy(s,o,l,2,c);const v=3==(3&h);if(!g)if(v){const S=s.preOrderCheckHooks;null!==S&&Th(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Sh(o,S,0,null),Dh(o,0)}if(function df(s){for(let o=Zh(s);null!==o;o=Sg(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],g=h[3];0==(1024&h[2])&&jo(g,1),h[2]|=1024}}}(o),function Nb(s){for(let o=Zh(s);null!==o;o=Sg(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];Sa(c)&&bu(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Lg(s,o),!g)if(v){const S=s.contentCheckHooks;null!==S&&Th(o,S)}else{const S=s.contentHooks;null!==S&&Sh(o,S,1),Dh(o,1)}!function Fg(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)ks(~h);else{const g=h,v=l[++c],w=l[++c];K_(v,g),w(2,o[g])}}}finally{ks(-1)}}(s,o);const w=s.components;null!==w&&function Zy(s,o){for(let l=0;l<o.length;l++)jg(s,o[l])}(o,w);const I=s.viewQuery;if(null!==I&&sv(2,I,c),!g)if(v){const S=s.viewCheckHooks;null!==S&&Th(o,S)}else{const S=s.viewHooks;null!==S&&Sh(o,S,2),Dh(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,jo(o[3],-1))}finally{Zl()}}function Qy(s,o,l,c){const h=o[10],g=!Da(),v=$o(o);try{g&&!v&&h.begin&&h.begin(),v&&sd(s,o,c),bu(s,o,l,c)}finally{g&&!v&&h.end&&h.end()}}function Jy(s,o,l,c,h){const g=ui(),v=2&c;try{ks(-1),v&&o.length>20&&ed(s,o,20,Da()),l(c,h)}finally{ks(g)}}function rf(s,o,l){!Ic()||(function Tb(s,o,l,c){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||rr(l,o),fi(c,o);const v=l.initialInputs;for(let w=h;w<g;w++){const I=s.data[w],S=Hi(I);S&&Cu(o,l,I);const R=Fa(o,s,w,l);fi(R,o),null!==v&&Mb(0,w-h,R,I,0,v),S&&(li(l.index,o)[8]=R)}}(s,o,l,Qr(l,o)),128==(128&l.flags)&&function Sb(s,o,l){const c=l.directiveStart,h=l.directiveEnd,v=l.index,w=function wh(){return Wt.lFrame.currentDirectiveIndex}();try{ks(v);for(let I=c;I<h;I++){const S=s.data[I],R=o[I];bh(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&nv(S,R)}}finally{ks(-1),bh(w)}}(s,o,l))}function sf(s,o,l=Qr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],w=-1===v?l(o,s):s[v];s[h++]=w}}}function Ug(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=xr(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function xr(s,o,l,c,h,g,v,w,I,S){const R=20+c,V=R+h,G=function ii(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:en);return l}(R,V),te="function"==typeof S?S():S;return G[1]={type:s,blueprint:G,template:l,queries:null,viewQuery:w,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function Eb(s,o,l,c){const h=Gg(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&ov(s).push(c,h.length-1))}function bb(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function Bg(s,o,l,c){let h=!1;if(Ic()){const g=function $g(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Pn(l,v.selectors,!1)&&(h||(h=[]),Pa(rr(l,o),s,v.type),Hi(v)?(Db(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===c?null:{"":-1};if(null!==g){h=!0,Ab(l,s.data.length,g.length);for(let R=0;R<g.length;R++){const V=g[R];V.providersResolver&&V.providersResolver(V)}let w=!1,I=!1,S=id(s,o,g.length,null);for(let R=0;R<g.length;R++){const V=g[R];l.mergedAttrs=Mr(l.mergedAttrs,V.hostAttrs),Rb(s,l,o,S,V),od(S,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const G=V.type.prototype;!w&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),S++}!function eA(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,v=[];let w=null,I=null;for(let S=o.directiveStart;S<c;S++){const R=h[S],V=R.inputs,G=null===g||rb(o)?null:cf(V,g);v.push(G),w=bb(V,S,w),I=bb(R.outputs,S,I)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=I}(s,l)}v&&function rA(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new Oe(-301,!1);c.push(o[h],g)}}}(l,c,v)}return l.mergedAttrs=Mr(l.mergedAttrs,l.attrs),h}function Ib(s,o,l,c,h,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~o.index;(function uf(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(c,h,v)}}function nv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Db(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function od(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Hi(o)&&(l[""]=s)}}function Ab(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Rb(s,o,l,c,h){s.data[c]=h;const g=h.factory||(h.factory=Wi(h.type)),v=new Mc(g,Hi(h),null);s.blueprint[c]=v,l[c]=v,Ib(s,o,0,c,id(s,l,h.hostVars,en),h)}function Cu(s,o,l){const c=Qr(o,s),h=Ug(l),g=s[10],v=hf(s,Eu(s,h,null,l.onPush?64:16,c,o,g,g.createRenderer(c,l),null,null));s[o.index]=v}function qs(s,o,l,c,h,g){const v=Qr(s,o);!function ad(s,o,l,c,h,g,v){if(null==g)tr(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const w=null==v?_e(g):v(g,c||"",h);tr(s)?s.setAttribute(o,h,w,l):l?o.setAttributeNS(l,h,w):o.setAttribute(h,w)}}(o[11],v,g,s.value,l,c,h)}function Mb(s,o,l,c,h,g){const v=g[o];if(null!==v){const w=c.setInput;for(let I=0;I<v.length;){const S=v[I++],R=v[I++],V=v[I++];null!==w?c.setInput(l,V,S,R):l[R]=V}}}function cf(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function pi(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function jg(s,o){const l=li(o,s);if(Sa(l)){const c=l[1];80&l[2]?bu(c,l,c.template,l[8]):l[5]>0&&Hg(l)}}function Hg(s){for(let c=Zh(s);null!==c;c=Sg(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const v=g[1];bu(v,g,v.template,g[8])}else g[5]>0&&Hg(g)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=li(l[c],s);Sa(h)&&h[5]>0&&Hg(h)}}function rv(s,o){const l=li(o,s),c=l[1];(function xb(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),sd(c,l,l[8])}function hf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Iu(s){for(;s;){s[2]|=64;const o=Kh(s);if(fh(s)&&!o)return s;s=o}return null}function pf(s,o,l){const c=o[10];c.begin&&c.begin();try{bu(s,o,s.template,l)}catch(h){throw lv(o,h),h}finally{c.end&&c.end()}}function gf(s){!function ff(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=Dy(l),h=c[1];Qy(h,c,h.template,l)}}(s[8])}function sv(s,o,l){Ch(0),o(s,l)}const Wg=(()=>Promise.resolve(null))();function Gg(s){return s[7]||(s[7]=[])}function ov(s){return s.cleanup||(s.cleanup=[])}function lv(s,o){const l=s[9],c=l?l.get(Cg,null):null;c&&c.handleError(o)}function kb(s,o,l,c,h){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],I=o[v],S=s.data[v];null!==S.setInput?S.setInput(I,h,c,w):I[w]=h}}function Qi(s,o,l){const c=Ta(o,s);!function Ny(s,o,l){tr(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function _f(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?h=ye(h,w):2==g&&(c=ye(c,w+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const vf=new dr("INJECTOR",-1);class Fb{get(o,l=Zo){if(l===Zo){const c=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw c.name="NullInjectorError",c}return l}}const Ef=new dr("Set Injector scope."),To={},uv={};let na;function cv(){return void 0===na&&(na=new Fb),na}function Lb(s,o=null,l=null,c){const h=tl(s,o,l,c);return h._resolveInjectorDefTypes(),h}function tl(s,o=null,l=null,c){return new ra(s,l,o||cv(),c)}class ra{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&_s(l,w=>this.processProvider(w,o,l)),_s([o],w=>this.processInjectorType(w,[],g)),this.records.set(vf,$n(void 0,this));const v=this.records.get(Ef);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Zo,c=De.Default){this.assertNotDestroyed();const h=vs(this),g=Ye(void 0);try{if(!(c&De.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function lA(s){return"function"==typeof s||"object"==typeof s&&s instanceof dr}(o)&&pt(o);w=I&&this.injectableDefInScope(I)?$n(ud(o),To):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&De.Self?cv():this.parent).get(o,l=c&De.Optional&&l===Zo?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[$a]=v[$a]||[]).unshift(ce(o)),h)throw v;return function fg(s,o,l,c){const h=s[$a];throw o[su]&&h.unshift(o[su]),s.message=function ja(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):ce(w)))}h=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(dg,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[$a]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Ye(g),vs(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ce(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,l,c){if(!(o=Y(o)))return!1;let h=hn(o);const g=null==h&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==c.indexOf(v);if(void 0!==g&&(h=hn(g)),null==h)return!1;if(null!=h.imports&&!w){let R;c.push(v);try{_s(h.imports,V=>{this.processInjectorType(V,l,c)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:G,providers:te}=R[V];_s(te,he=>this.processProvider(he,G,te||It))}}this.injectorDefTypes.add(v);const I=Wi(v)||(()=>new v);this.records.set(v,$n(I,To));const S=h.providers;if(null!=S&&!w){const R=o;_s(S,V=>this.processProvider(V,R,S))}return void 0!==g&&void 0!==o.providers}processProvider(o,l,c){let h=So(o=Y(o))?o:Y(o&&o.provide);const g=function Kg(s,o,l){return wf(s)?$n(void 0,s.useValue):$n(dv(s),To)}(o);if(So(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=$n(void 0,To,!0),v.factory=()=>ou(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,g)}hydrate(o,l){return l.value===To&&(l.value=uv,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Vb(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Y(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function ud(s){const o=pt(s),l=null!==o?o.factory:Wi(s);if(null!==l)return l;if(s instanceof dr)throw new Oe(204,!1);if(s instanceof Function)return function qg(s){const o=s.length;if(o>0)throw Zi(o,"?"),new Oe(204,!1);const l=function Ht(s){const o=s&&(s[Mn]||s[kn]);if(o){const l=function Qt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Oe(204,!1)}function dv(s,o,l){let c;if(So(s)){const h=Y(s);return Wi(h)||ud(h)}if(wf(s))c=()=>Y(s.useValue);else if(function oA(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...ou(s.deps||[]));else if(function sA(s){return!(!s||!s.useExisting)}(s))c=()=>hr(Y(s.useExisting));else{const h=Y(s&&(s.useClass||s.provide));if(!function aA(s){return!!s.deps}(s))return Wi(h)||ud(h);c=()=>new h(...ou(s.deps))}return c}function $n(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function wf(s){return null!==s&&"object"==typeof s&&hg in s}function So(s){return"function"==typeof s}let Ks=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return Lb({name:""},c,l,"");{const g=null!==(h=l.name)&&void 0!==h?h:"";return Lb({name:g},l.parent,l.providers,g)}}}return s.THROW_IF_NOT_FOUND=Zo,s.NULL=new Fb,s.\u0275prov=$t({token:s,providedIn:"any",factory:()=>hr(vf)}),s.__NG_ELEMENT_ID__=-1,s})();function If(s,o){Yl(Dy(s)[1],nr())}function br(s){let o=function Yb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(Hi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const v=s;v.inputs=mv(s.inputs),v.declaredInputs=mv(s.declaredInputs),v.outputs=mv(s.outputs);const w=h.hostBindings;w&&fA(s,w);const I=h.viewQuery,S=h.contentQueries;if(I&&dA(s,I),S&&hA(s,S),ae(s.inputs,h.inputs),ae(s.declaredInputs,h.declaredInputs),ae(s.outputs,h.outputs),Hi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===br&&(l=!1)}}o=Object.getPrototypeOf(o)}!function Qb(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Mr(h.hostAttrs,l=Mr(l,h.hostAttrs))}}(c)}function mv(s){return s===an?{}:s===It?[]:s}function dA(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function hA(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,g)=>{o(c,h,g),l(c,h,g)}:o}function fA(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let Tu=null;function Su(){if(!Tu){const s=qt.Symbol;if(s&&s.iterator)Tu=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Tu=c)}}}return Tu}function hd(s){return!!Du(s)&&(Array.isArray(s)||!(s instanceof Map)&&Su()in s)}function Du(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ys(s,o,l){return s[o]=l}function Gr(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function yv(s,o,l,c){const h=Ue();return Gr(h,Aa(),o)&&(vn(),qs(sr(),h,s,o,l,c)),yv}function Pu(s,o,l,c,h,g,v,w){const I=Ue(),S=vn(),R=s+20,V=S.firstCreatePass?function tC(s,o,l,c,h,g,v,w,I){const S=o.consts,R=wu(o,s,4,v||null,Os(S,w));Bg(o,l,R,Os(S,I)),Yl(o,R);const V=R.tViews=xr(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,S,I,o,l,c,h,g,v):S.data[R];zi(V,!1);const G=I[11].createComment("");Rg(S,I,G,V),fi(G,I),hf(I,I[R]=pi(G,I,G,V)),Bo(V)&&rf(S,I,V),null!=v&&sf(I,V,w)}function nC(s){return ds(function Xp(){return Wt.lFrame.contextLView}(),20+s)}function Qs(s,o=De.Default){const l=Ue();return null===l?hr(s,o):ka(nr(),l,Y(s),o)}function Rv(){throw new Error("invalid")}function ku(s,o,l){const c=Ue();return Gr(c,Aa(),o)&&function Ti(s,o,l,c,h,g,v,w){const I=Qr(o,l);let R,S=o.inputs;!w&&null!=S&&(R=S[c])?(kb(s,l,R,c,h),hh(o)&&function tA(s,o){const l=li(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function Xy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,tr(g)?g.setProperty(I,c,h):ci(c)||(I.setProperty?I.setProperty(c,h):I[c]=h))}(vn(),sr(),c,s,o,c[11],l,!1),ku}function In(s,o,l,c,h){const v=h?"class":"style";kb(s,l,o.inputs[v],v,c)}function Or(s,o,l,c){const h=Ue(),g=vn(),v=20+s,w=h[11],I=h[v]=xy(w,o,function eg(){return Wt.lFrame.currentNamespace}()),S=g.firstCreatePass?function RA(s,o,l,c,h,g,v){const w=o.consts,S=wu(o,s,2,h,Os(w,g));return Bg(o,l,S,Os(w,v)),null!==S.attrs&&_f(S,S.attrs,!1),null!==S.mergedAttrs&&_f(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,h,0,o,l,c):g.data[v];zi(S,!0);const R=S.mergedAttrs;null!==R&&kt(w,I,R);const V=S.classes;null!==V&&Jh(w,I,V);const G=S.styles;return null!==G&&Qh(w,I,G),64!=(64&S.flags)&&Rg(g,h,I,S),0===function Jp(){return Wt.lFrame.elementDepthCount}()&&fi(I,h),function Cc(){Wt.lFrame.elementDepthCount++}(),Bo(S)&&(rf(g,h,S),function _b(s,o,l){if(Vl(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,S,h)),null!==c&&sf(h,S),Or}function aa(){let s=nr();Eh()?ql():(s=s.parent,zi(s,!1));const o=s;!function W_(){Wt.lFrame.elementDepthCount--}();const l=vn();return l.firstCreatePass&&(Yl(l,s),Vl(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ny(s){return 0!=(16&s.flags)}(o)&&In(l,o,Ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function dD(s){return 0!=(32&s.flags)}(o)&&In(l,o,Ue(),o.stylesWithoutHost,!1),aa}function Mv(s,o,l,c){return Or(s,o,l,c),aa(),Mv}function rm(){return Ue()}function im(s){return!!s&&"function"==typeof s.then}function gd(s){return!!s&&"function"==typeof s.subscribe}const oC=gd;function Js(s,o,l,c){const h=Ue(),g=vn(),v=nr();return function Nv(s,o,l,c,h,g,v,w){const I=Bo(c),R=s.firstCreatePass&&ov(s),V=o[8],G=Gg(o);let te=!0;if(3&c.type||w){const nt=Qr(c,o),Ct=w?w(nt):nt,Fe=G.length,Ft=w?wn=>w(Qn(wn[c.index])):c.index;if(tr(l)){let wn=null;if(!w&&I&&(wn=function Af(s,o,l,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===c){const w=o[7],I=h[g+2];return w.length>I?w[I]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,c.index)),null!==wn)(wn.__ngLastListenerFn__||wn).__ngNextListenerFn__=g,wn.__ngLastListenerFn__=g,te=!1;else{g=sm(c,o,V,g,!1);const Ln=l.listen(Ct,h,g);G.push(g,Ln),R&&R.push(h,Ft,Fe,Fe+1)}}else g=sm(c,o,V,g,!0),Ct.addEventListener(h,g,v),G.push(g),R&&R.push(h,Ft,Fe,v)}else g=sm(c,o,V,g,!1);const he=c.outputs;let $e;if(te&&null!==he&&($e=he[h])){const nt=$e.length;if(nt)for(let Ct=0;Ct<nt;Ct+=2){const ts=o[$e[Ct]][$e[Ct+1]].subscribe(g),ga=G.length;G.push(g,ts),R&&R.push(h,c.index,ga,-(ga+1))}}}(g,h,h[11],v,s,o,!!l,c),Js}function dt(s,o,l,c){try{return!1!==l(c)}catch(h){return lv(s,h),!1}}function sm(s,o,l,c,h){return function g(v){if(v===Function)return c;const w=2&s.flags?li(s.index,o):o;0==(32&o[2])&&Iu(w);let I=dt(o,0,c,v),S=g.__ngNextListenerFn__;for(;S;)I=dt(o,0,S,v)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function xv(s=1){return function go(s){return(Wt.lFrame.contextLView=function X_(s,o){for(;s>0;)o=o[15],s--;return o}(s,Wt.lFrame.contextLView))[8]}(s)}function Fu(s,o){let l=null;const c=function Ja(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const g=o[h];if("*"!==g){if(null===c?Pn(s,g,!0):HD(c,g))return h}else l=h}return l}function Xs(s){const o=Ue()[16][6];if(!o.projection){const c=o.projection=Zi(s?s.length:1,null),h=c.slice();let g=o.child;for(;null!==g;){const v=s?Fu(g,s):0;null!==v&&(h[v]?h[v].projectionNext=g:c[v]=g,h[v]=g),g=g.next}}}function md(s,o=0,l){const c=Ue(),h=vn(),g=wu(h,20+s,16,null,l||null);null===g.projection&&(g.projection=o),ql(),64!=(64&g.flags)&&function Xw(s,o,l){eb(o[11],0,o,l,Ag(s,l,o),Zw(l.parent||o[6],l,o))}(h,c,g)}function lC(s,o,l,c,h){const g=s[l+1],v=null===o;let w=c?zs(g):ws(g),I=!1;for(;0!==w&&(!1===I||v);){const R=s[w+1];uC(s[w],o)&&(I=!0,s[w+1]=c?Wy(R):Hr(R)),w=c?zs(R):ws(R)}I&&(s[l+1]=c?Hr(g):Wy(g))}function uC(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ys(s,o)>=0}const Ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function si(s){return s.substring(Ur.key,Ur.keyEnd)}function Mf(s,o){const l=Ur.textEnd;return l===o?-1:(o=Ur.keyEnd=function dC(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Ur.key=o,l),Mo(s,o,l))}function Mo(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function Fv(s,o){return function Cs(s,o,l,c){const h=Ue(),g=vn(),v=qi(2);g.firstUpdatePass&&pC(g,s,v,c),o!==en&&Gr(h,v,o)&&Vv(g,g.data[ui()],h,h[11],s,h[v+1]=function mC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(Eo(s)))),s}(o,l),c,v)}(s,o,null,!0),Fv}function xf(s){!function Xn(s,o,l,c){const h=vn(),g=qi(2);h.firstUpdatePass&&pC(h,null,g,c);const v=Ue();if(l!==en&&Gr(v,g,l)){const w=h.data[ui()];if(Uu(w,c)&&!fC(h,g)){let I=c?w.classesWithoutHost:w.stylesWithoutHost;null!==I&&(l=ye(I,l||"")),In(h,w,v,l,c)}else!function VA(s,o,l,c,h,g,v,w){h===en&&(h=It);let I=0,S=0,R=0<h.length?h[0]:null,V=0<g.length?g[0]:null;for(;null!==R||null!==V;){const G=I<h.length?h[I+1]:void 0,te=S<g.length?g[S+1]:void 0;let $e,he=null;R===V?(I+=2,S+=2,G!==te&&(he=V,$e=te)):null===V||null!==R&&R<V?(I+=2,he=R):(S+=2,he=V,$e=te),null!==he&&Vv(s,o,l,c,he,$e,v,w),R=I<h.length?h[I]:null,V=S<g.length?g[S]:null}}(h,w,v,v[11],v[g+1],v[g+1]=function hl(s,o,l){if(null==l||""===l)return It;const c=[],h=Eo(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(c,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(c,g,h[g]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,g)}}(Vr,eo,s,!0)}function eo(s,o){for(let l=function or(s){return function Nf(s){Ur.key=0,Ur.keyEnd=0,Ur.value=0,Ur.valueEnd=0,Ur.textEnd=s.length}(s),Mf(s,Mo(s,0,Ur.textEnd))}(o);l>=0;l=Mf(o,l))Vr(s,si(o),!0)}function fC(s,o){return o>=s.expandoStartIndex}function pC(s,o,l,c){const h=s.data;if(null===h[l+1]){const g=h[ui()],v=fC(s,l);Uu(g,c)&&null===o&&!v&&(o=!1),o=function kA(s,o,l,c){const h=function Ra(s){const o=Wt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Of(l=Lv(null,s,o,l,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=Lv(h,s,o,l,c),null===g){let I=function gC(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==ws(c))return s[zs(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Lv(null,s,o,I[1],c),I=Of(I,o.attrs,c),function FA(s,o,l,c){s[zs(l?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else g=function LA(s,o,l){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=Of(c,s[g].hostAttrs,l);return Of(c,o.attrs,l)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,c),function aC(s,o,l,c,h,g){let v=g?o.classBindings:o.styleBindings,w=zs(v),I=ws(v);s[c]=l;let R,S=!1;if(Array.isArray(l)){const V=l;R=V[1],(null===R||ys(V,R)>0)&&(S=!0)}else R=l;if(h)if(0!==I){const G=zs(s[w+1]);s[c+1]=td(G,w),0!==G&&(s[G+1]=Wr(s[G+1],c)),s[w+1]=function WD(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=td(w,0),0!==w&&(s[w+1]=Wr(s[w+1],c)),w=c;else s[c+1]=td(I,0),0===w?w=c:s[I+1]=Wr(s[I+1],c),I=c;S&&(s[c+1]=Hr(s[c+1])),lC(s,R,c,!0),lC(s,R,c,!1),function NA(s,o,l,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&ys(g,o)>=0&&(l[c+1]=Wy(l[c+1]))}(o,R,s,c,g),v=td(w,I),g?o.classBindings=v:o.styleBindings=v}(h,g,o,l,v,c)}}function Lv(s,o,l,c,h){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=o[w],c=Of(c,g.hostAttrs,h),g!==s);)w++;return null!==s&&(l.directiveStylingLast=w),c}function Of(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Vr(s,v,!!l||o[++g]))}return void 0===s?null:s}function Vv(s,o,l,c,h,g,v,w){if(!(3&o.type))return;const I=s.data,S=I[w+1];Is(function ta(s){return 1==(1&s)}(S)?Uv(I,o,l,h,ws(S),v):void 0)||(Is(g)||function sb(s){return 2==(2&s)}(S)&&(g=Uv(I,null,l,h,w,v)),function jD(s,o,l,c,h){const g=tr(s);if(o)h?g?s.addClass(l,c):l.classList.add(c):g?s.removeClass(l,c):l.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:bo.DashCase;if(null==h)g?s.removeStyle(l,c,v):l.style.removeProperty(c);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=bo.Important),g?s.setStyle(l,c,h,v):l.style.setProperty(c,h,w?"important":"")}}}(c,v,Ta(ui(),l),h,g))}function Uv(s,o,l,c,h,g){const v=null===o;let w;for(;h>0;){const I=s[h],S=Array.isArray(I),R=S?I[1]:I,V=null===R;let G=l[h+1];G===en&&(G=V?It:void 0);let te=V?Vc(G,c):R===c?G:void 0;if(S&&!Is(te)&&(te=Vc(I,c)),Is(te)&&(w=te,v))return w;const he=s[h+1];h=v?zs(he):ws(he)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(w=Vc(I,c))}return w}function Is(s){return void 0!==s}function Uu(s,o){return 0!=(s.flags&(o?16:32))}function Pf(s,o=""){const l=Ue(),c=vn(),h=s+20,g=c.firstCreatePass?wu(c,h,1,o,null):c.data[h],v=l[h]=function My(s,o){return tr(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Rg(c,l,v,g),zi(g,!1)}function yd(s,o,l){const c=Ue(),h=function Do(s,o,l,c){return Gr(s,Aa(),l)?o+_e(l)+c:en}(c,s,o,l);return h!==en&&Qi(c,ui(),h),yd}const fl=void 0;var Hu=["en",[["a","p"],["AM","PM"],fl],[["AM","PM"],fl,fl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fl,"{1} 'at' {0}",fl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vf(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Wu={};function mm(s){const o=function NC(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=MC(o);if(l)return l;const c=o.split("-")[0];if(l=MC(c),l)return l;if("en"===c)return Hu;throw new Error(`Missing locale data for the locale "${s}".`)}function ym(s){return mm(s)[ot.PluralCase]}function MC(s){return s in Wu||(Wu[s]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[s]),Wu[s]}var ot=(()=>((ot=ot||{})[ot.LocaleId=0]="LocaleId",ot[ot.DayPeriodsFormat=1]="DayPeriodsFormat",ot[ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",ot[ot.DaysFormat=3]="DaysFormat",ot[ot.DaysStandalone=4]="DaysStandalone",ot[ot.MonthsFormat=5]="MonthsFormat",ot[ot.MonthsStandalone=6]="MonthsStandalone",ot[ot.Eras=7]="Eras",ot[ot.FirstDayOfWeek=8]="FirstDayOfWeek",ot[ot.WeekendRange=9]="WeekendRange",ot[ot.DateFormat=10]="DateFormat",ot[ot.TimeFormat=11]="TimeFormat",ot[ot.DateTimeFormat=12]="DateTimeFormat",ot[ot.NumberSymbols=13]="NumberSymbols",ot[ot.NumberFormats=14]="NumberFormats",ot[ot.CurrencyCode=15]="CurrencyCode",ot[ot.CurrencySymbol=16]="CurrencySymbol",ot[ot.CurrencyName=17]="CurrencyName",ot[ot.Currencies=18]="Currencies",ot[ot.Directionality=19]="Directionality",ot[ot.PluralCase=20]="PluralCase",ot[ot.ExtraData=21]="ExtraData",ot))();const pr="en-US";let OC=pr;function Sd(s,o,l,c,h){if(s=Y(s),Array.isArray(s))for(let g=0;g<s.length;g++)Sd(s[g],o,l,c,h);else{const g=vn(),v=Ue();let w=So(s)?s:Y(s.provide),I=dv(s);const S=nr(),R=1048575&S.providerIndexes,V=S.directiveStart,G=S.providerIndexes>>20;if(So(s)||!s.multi){const te=new Mc(I,h,Qs),he=Gu(w,o,h?R:R+G,V);-1===he?(Pa(rr(S,v),g,w),Xi(g,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(te),v.push(te)):(l[he]=te,v[he]=te)}else{const te=Gu(w,o,R+G,V),he=Gu(w,o,R,R+G),$e=te>=0&&l[te],nt=he>=0&&l[he];if(h&&!nt||!h&&!$e){Pa(rr(S,v),g,w);const Ct=function iI(s,o,l,c,h){const g=new Mc(s,l,Qs);return g.multi=[],g.index=o,g.componentProviders=0,rI(g,h,c&&!l),g}(h?fR:zu,l.length,h,c,I);!h&&nt&&(l[he].providerFactory=Ct),Xi(g,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(Ct),v.push(Ct)}else Xi(g,s,te>-1?te:he,rI(l[h?he:te],I,!h&&c));!h&&c&&nt&&l[he].componentProviders++}}}function Xi(s,o,l,c){const h=So(o),g=function bf(s){return!!s.useClass}(o);if(h||g){const I=(g?Y(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=S.indexOf(l);-1===R?S.push(l,[c,I]):S[R+1].push(c,I)}else S.push(l,I)}}}function rI(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Gu(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function zu(s,o,l,c){return ca(this.multi,[])}function fR(s,o,l,c){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Fa(l,l[1],this.providerFactory.index,c);g=w.slice(0,v),ca(h,g);for(let I=v;I<w.length;I++)g.push(w[I])}else g=[],ca(h,g);return g}function ca(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Dm(s,o=[]){return l=>{l.providersResolver=(c,h)=>function be(s,o,l){const c=vn();if(c.firstCreatePass){const h=Hi(s);Sd(l,c.data,c.blueprint,h,!0),Sd(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Zr{}class gl{resolveComponentFactory(o){throw function Xv(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Kf=(()=>{class s{}return s.NULL=new gl,s})();function pR(){return qu(nr(),Ue())}function qu(s,o){return new ml(Qr(s,o))}let ml=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=pR,s})();function Ku(s){return s instanceof ml?s.nativeElement:s}class Zu{}let Zf=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function eE(){const s=Ue(),l=li(nr().index,s);return function aI(s){return s[11]}(ai(l)?l:s)}(),s})(),tE=(()=>{class s{}return s.\u0275prov=$t({token:s,providedIn:"root",factory:()=>null}),s})();class nE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const lI=new nE("13.2.7"),Rm={};function Yf(s,o,l,c,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&c.push(Qn(g)),ji(g))for(let w=10;w<g.length;w++){const I=g[w],S=I[1].firstChild;null!==S&&Yf(I[1],I,S,c)}const v=l.type;if(8&v)Yf(s,o,l.child,c);else if(32&v){const w=Ig(l,o);let I;for(;I=w();)c.push(I)}else if(16&v){const w=Jw(o,l);if(Array.isArray(w))c.push(...w);else{const I=Kh(o[16]);Yf(I[1],I,w,c,!0)}}l=h?l.projectionNext:l.next}return c}class Yu{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Yf(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ji(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Oy(o,c),ru(l,c))}this._attachedToViewContainer=!1}Py(this._lView[1],this._lView)}onDestroy(o){Eb(this._lView[1],this._lView,null,o)}markForCheck(){Iu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){pf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mf(s,o,l){Sc(!0);try{pf(s,o,l)}finally{Sc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ww(s,o){Mg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class Qf extends Yu{constructor(o){super(o),this._view=o}detectChanges(){gf(this._view)}checkNoChanges(){!function Ob(s){Sc(!0);try{gf(s)}finally{Sc(!1)}}(this._view)}get context(){return null}}class _l extends Kf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=st(o);return new rE(l,this.ngModule)}}function uI(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class rE extends Zr{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Hy(s){return s.map(Tt).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return uI(this.componentDef.inputs)}get outputs(){return uI(this.componentDef.outputs)}create(o,l,c,h){const g=(h=h||this.ngModule)?function gR(s,o){return{get:(l,c,h)=>{const g=s.get(l,Rm,h);return g!==Rm||c===Rm?g:o.get(l,c,h)}}}(o,h.injector):o,v=g.get(Zu,Wl),w=g.get(tE,null),I=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",R=c?function vb(s,o,l){if(tr(s))return s.selectRootElement(o,l===vt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):xy(v.createRenderer(null,this.componentDef),S,function cI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),V=this.componentDef.onPush?576:528,G=function gv(s,o){return{components:[],scheduler:s||OD,clean:Wg,playerHandler:o||null,flags:0}}(),te=xr(0,null,null,1,0,null,null,null,null,null),he=Eu(null,te,G,V,null,null,v,I,w,g);let $e,nt;Kl(he);try{const Ct=function Cf(s,o,l,c,h,g){const v=l[1];l[20]=s;const I=wu(v,20,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(_f(I,S,!0),null!==s&&(kt(h,s,S),null!==I.classes&&Jh(h,s,I.classes),null!==I.styles&&Qh(h,s,I.styles)));const R=c.createRenderer(s,o),V=Eu(l,Ug(o),null,o.onPush?64:16,l[20],I,c,R,g||null,null);return v.firstCreatePass&&(Pa(rr(I,l),v,o.type),Db(v,I),Ab(I,l.length,1)),hf(l,V),l[20]=V}(R,this.componentDef,he,v,I);if(R)if(c)kt(I,R,["ng-version",lI.full]);else{const{attrs:Fe,classes:Ft}=function sn(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&l.push(g);else{if(!Gs(h))break;h=g}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Fe&&kt(I,R,Fe),Ft&&Ft.length>0&&Jh(I,R,Ft.join(" "))}if(nt=wc(te,20),void 0!==l){const Fe=nt.projection=[];for(let Ft=0;Ft<this.ngContentSelectors.length;Ft++){const wn=l[Ft];Fe.push(null!=wn?Array.from(wn):null)}}$e=function Jg(s,o,l,c,h){const g=l[1],v=function tv(s,o,l){const c=nr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Rb(s,c,o,id(s,o,1,null),l));const h=Fa(o,s,c.directiveStart,c);fi(h,o);const g=Qr(c,o);return g&&fi(g,o),h}(g,l,o);if(c.components.push(v),s[8]=v,h&&h.forEach(I=>I(v,o)),o.contentQueries){const I=nr();o.contentQueries(1,v,I.directiveStart)}const w=nr();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ks(w.index),Ib(l[1],w,0,w.directiveStart,w.directiveEnd,o),nv(o,v)),v}(Ct,this.componentDef,he,G,[If]),sd(te,he,null)}finally{Zl()}return new yl(this.componentType,$e,qu(nt,he),he,nt)}}class yl extends class sI{}{constructor(o,l,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new Qf(h),this.componentType=o}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ju{}class dI{}const Ad=new Map;class Jf extends Ju{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _l(this);const c=Kt(o);this._bootstrapComponents=Hs(c.bootstrap),this._r3Injector=tl(o,l,[{provide:Ju,useValue:this},{provide:Kf,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=Ks.THROW_IF_NOT_FOUND,c=De.Default){return o===Ks||o===Ju||o===vf?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Nm extends dI{constructor(o){super(),this.moduleType=o,null!==Kt(o)&&function _R(s){const o=new Set;!function l(c){const h=Kt(c,!0),g=h.id;null!==g&&(function Xu(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ce(o)} vs ${ce(o.name)}`)}(g,Ad.get(g),c),Ad.set(g,c));const v=Hs(h.imports);for(const w of v)o.has(w)||(o.add(w),l(w))}(s)}(o)}create(o){return new Jf(this.moduleType,o)}}function Oo(s,o){const l=s[o];return l===en?void 0:l}function da(s,o,l,c,h,g,v){const w=o+l;return function nl(s,o,l,c){const h=Gr(s,o,l);return Gr(s,o+1,c)||h}(s,w,h,g)?Ys(s,w+2,v?c.call(v,h,g):c(h,g)):Oo(s,w+2)}function mI(s,o){const l=vn();let c;const h=s+20;l.firstCreatePass?(c=function ER(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[h]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,c.onDestroy)):c=l.data[h];const g=c.factory||(c.factory=Wi(c.type)),v=Ye(Qs);try{const w=mo(!1),I=g();return mo(w),function gA(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,Ue(),h,I),I}finally{Ye(v)}}function _I(s,o,l){const c=s+20,h=Ue(),g=ds(h,c);return Xf(h,c)?function oE(s,o,l,c,h,g){const v=o+l;return Gr(s,v,h)?Ys(s,v+1,g?c.call(g,h):c(h)):Oo(s,v+1)}(h,Lr(),o,g.transform,l,g):g.transform(l)}function yI(s,o,l,c){const h=s+20,g=Ue(),v=ds(g,h);return Xf(g,h)?da(g,Lr(),o,v.transform,l,c,v):v.transform(l,c)}function Xf(s,o){return s[1].data[o].pure}function ha(s){return o=>{setTimeout(s,void 0,o)}}const Bi=class EI extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,g,v;let w=o,I=l||(()=>null),S=c;if(o&&"object"==typeof o){const V=o;w=null===(h=V.next)||void 0===h?void 0:h.bind(V),I=null===(g=V.error)||void 0===g?void 0:g.bind(V),S=null===(v=V.complete)||void 0===v?void 0:v.bind(V)}this.__isAsync&&(I=ha(I),w&&(w=ha(w)),S&&(S=ha(S)));const R=super.subscribe({next:w,error:I,complete:S});return o instanceof j.w0&&o.add(R),R}};function wI(){return this._results[Su()]()}class km{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Su(),c=km.prototype;c[l]||(c[l]=wI)}get changes(){return this._changes||(this._changes=new Bi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=di(o);(this._changesDetected=!function Fc(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ep=(()=>{class s{}return s.__NG_ELEMENT_ID__=uE,s})();const bI=ep,lE=class extends bI{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=Eu(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(l)),sd(l,c,o),new Yu(c)}};function uE(){return wl(nr(),Ue())}function wl(s,o){return 4&s.type?new lE(o,s,qu(s,o)):null}let tc=(()=>{class s{}return s.__NG_ELEMENT_ID__=cE,s})();function cE(){return fE(nr(),Ue())}const bR=tc,Fm=class extends bR{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Oa(this._hostTNode,this._hostLView);if(vr(o)){const l=zo(o,this._hostLView),c=Ma(o);return new qo(l[1].data[c+8],l)}return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=dE(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,g){const v=o&&!function tu(s){return"function"==typeof s}(o);let w;if(v)w=l;else{const V=l||{};w=V.index,c=V.injector,h=V.projectableNodes,g=V.ngModuleRef}const I=v?o:new rE(st(o)),S=c||this.parentInjector;if(!g&&null==I.ngModule){const G=(v?S:this.parentInjector).get(Ju,null);G&&(g=G)}const R=I.create(S,h,void 0,g);return this.insert(R.hostView,w),R}insert(o,l){const c=o._lView,h=c[1];if(function bc(s){return ji(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],G=new Fm(V,V[6],V[3]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function Yh(s,o,l,c){const h=10+c,g=l.length;c>0&&(l[h-1][4]=o),c<g-10?(o[4]=l[h],nu(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function Jc(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(h,c,v,g);const w=Uy(g,v),I=c[11],S=Co(I,v[7]);return null!==S&&function VD(s,o,l,c,h,g){c[0]=h,c[6]=o,Mg(s,c,l,1,h,g)}(h,v[6],I,c,S,w),o.attachToViewContainerRef(),nu(hE(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=dE(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Oy(this._lContainer,l);c&&(ru(hE(this._lContainer),l),Py(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Oy(this._lContainer,l);return c&&null!=ru(hE(this._lContainer),l)?new Yu(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function dE(s){return s[8]}function hE(s){return s[8]||(s[8]=[])}function fE(s,o){let l;const c=o[s.index];if(ji(c))l=c;else{let h;if(8&s.type)h=Qn(c);else{const g=o[11];h=g.createComment("");const v=Qr(s,o);Yi(g,Co(g,v),h,function $D(s,o){return tr(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=l=pi(c,o,h,s),hf(o,l)}return new Fm(l,s,o)}class Lm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Lm(this.queryList)}setDirty(){this.queryList.setDirty()}}class gE{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<c;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new gE(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==AI(o,l).matches&&this.queries[l].setDirty()}}class mE{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class _E{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new _E(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class bl{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new bl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,l,Nd(l,g)),this.matchTNodeWithReadOption(o,l,hs(l,o,g,!1,!1))}else c===ep?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,hs(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===ml||h===tc||h===ep&&4&l.type)this.addMatch(l.index,-2);else{const g=hs(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Nd(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function Vm(s,o,l,c){return-1===l?function yE(s,o){return 11&s.type?qu(s,o):4&s.type?wl(s,o):null}(o,s):-2===l?function II(s,o,l){return l===ml?qu(o,s):l===ep?wl(o,s):l===tc?fE(o,s):void 0}(s,o,c):Fa(s,s[1],l,o)}function vE(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,v=l.matches,w=[];for(let I=0;I<v.length;I+=2){const S=v[I];w.push(S<0?null:Vm(o,g[S],v[I+1],l.metadata.read))}h.matches=w}return h.matches}function Um(s,o,l,c){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const v=vE(s,o,h,l);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)c.push(v[w/2]);else{const S=g[w+1],R=o[-I];for(let V=10;V<R.length;V++){const G=R[V];G[17]===G[3]&&Um(G[1],G,S,c)}if(null!==R[9]){const V=R[9];for(let G=0;G<V.length;G++){const te=V[G];Um(te[1],te,S,c)}}}}}return c}function TI(s){const o=Ue(),l=vn(),c=Z_();Ch(c+1);const h=AI(l,c);if(s.dirty&&$o(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Um(l,o,c,[]):vE(l,o,h,c);s.reset(g,Ku),s.notifyOnChanges()}return!0}return!1}function SI(s,o,l,c){const h=vn();if(h.firstCreatePass){const g=nr();(function $m(s,o,l){null===s.queries&&(s.queries=new _E),s.queries.track(new bl(o,l))})(h,new mE(o,l,c),g.index),function ei(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function DI(s,o,l){const c=new km(4==(4&l));Eb(s,o,c,c.destroy),null===o[19]&&(o[19]=new gE),o[19].queries.push(new Lm(c))}(h,Ue(),l)}function Bm(){return function CR(s,o){return s[19].queries[o].queryList}(Ue(),Z_())}function AI(s,o){return s.queries.getByIndex(o)}function RI(s,o){return wl(s,o)}function e_(...s){}const ME=new dr("Application Initializer");let NE=(()=>{class s{constructor(l){this.appInits=l,this.resolve=e_,this.reject=e_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(im(g))l.push(g);else if(oC(g)){const v=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(hr(ME,8))},s.\u0275prov=$t({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const t_=new dr("AppId",{providedIn:"root",factory:function VI(){return`${xE()}${xE()}${xE()}`}});function xE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const n_=new dr("Platform Initializer"),BI=new dr("Platform ID"),r_=new dr("appBootstrapListener");let i_=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=$t({token:s,factory:s.\u0275fac}),s})();const sp=new dr("LocaleId",{providedIn:"root",factory:()=>Yo(sp,De.Optional|De.SkipSelf)||function OE(){return"undefined"!=typeof $localize&&$localize.locale||pr}()}),Ld=new dr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Vd{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let jI=(()=>{class s{compileModuleSync(l){return new Nm(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=Hs(Kt(l).declarations).reduce((v,w)=>{const I=st(w);return I&&v.push(new rE(I)),v},[]);return new Vd(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=$t({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const OR=(()=>Promise.resolve(0))();function ap(s){"undefined"==typeof Zone?OR.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class es{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bi(!1),this.onMicrotaskEmpty=new Bi(!1),this.onStable=new Bi(!1),this.onError=new Bi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function PE(){let s=qt.requestAnimationFrame,o=qt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function LE(s){const o=()=>{!function PR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(qt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,lp(s),s.isCheckStableRunning=!0,FE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),lp(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,g,v,w)=>{try{return HI(s),l.invokeTask(h,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),VE(s)}},onInvoke:(l,c,h,g,v,w,I)=>{try{return HI(s),l.invoke(h,g,v,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),VE(s)}},onHasTask:(l,c,h,g)=>{l.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,lp(s),FE(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(es.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,kE,e_,e_);try{return g.runTask(v,l,c)}finally{g.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const kE={};function FE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function lp(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function HI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function VE(s){s._nesting--,FE(s)}class kR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bi,this.onMicrotaskEmpty=new Bi,this.onStable=new Bi,this.onError=new Bi}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let UE=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),ap(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ap(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(hr(es))},s.\u0275prov=$t({token:s,factory:s.\u0275fac}),s})(),BE=(()=>{class s{constructor(){this._applications=new Map,$E.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return $E.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=$t({token:s,factory:s.\u0275fac}),s})();class WI{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function GI(s){$E=s}let no,$E=new WI;const s_=new dr("AllowMultipleToken");class HE{constructor(o,l){this.name=o,this.token=l}}function o_(s,o,l=[]){const c=`Platform: ${o}`,h=new dr(c);return(g=[])=>{let v=WE();if(!v||v.injector.get(s_,!1))if(s)s(l.concat(g).concat({provide:h,useValue:!0}));else{const w=l.concat(g).concat({provide:h,useValue:!0},{provide:Ef,useValue:"platform"});!function LR(s){if(no&&!no.destroyed&&!no.injector.get(s_,!1))throw new Oe(400,"");no=s.get(a_);const o=s.get(n_,null);o&&o.forEach(l=>l())}(Ks.create({providers:w,name:c}))}return function VR(s){const o=WE();if(!o)throw new Oe(401,"");return o}()}}function WE(){return no&&!no.destroyed?no:null}let a_=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const w=function qI(s,o){let l;return l="noop"===s?new kR:("zone.js"===s?void 0:s)||new es({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:es,useValue:w}];return w.run(()=>{const S=Ks.create({providers:I,parent:this.injector,name:l.moduleType.name}),R=l.create(S),V=R.injector.get(Cg,null);if(!V)throw new Oe(402,"");return w.runOutsideAngular(()=>{const G=w.onError.subscribe({next:te=>{V.handleError(te)}});R.onDestroy(()=>{up(this._modules,R),G.unsubscribe()})}),function UR(s,o,l){try{const c=l();return im(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,w,()=>{const G=R.injector.get(NE);return G.runInitializers(),G.donePromise.then(()=>(function Ts(s){Vt(s,"Expected localeId to be defined"),"string"==typeof s&&(OC=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(sp,pr)||pr),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,c=[]){const h=l_({},c);return function FR(s,o,l){const c=new Nm(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const c=l.injector.get(GE);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Oe(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(hr(Ks))},s.\u0275prov=$t({token:s,factory:s.\u0275fac}),s})();function l_(s,o){return Array.isArray(o)?o.reduce(l_,s):Object.assign(Object.assign({},s),o)}let GE=(()=>{class s{constructor(l,c,h,g,v){this._zone=l,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new P.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),I=new P.y(S=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{es.assertNotInAngularZone(),ap(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,ne.T)(w,I.pipe((0,ge.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Oe(405,"");let h;h=l instanceof Zr?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const g=function jE(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Ju),w=h.create(Ks.NULL,[],c||h.selector,g),I=w.location.nativeElement,S=w.injector.get(UE,null),R=S&&w.injector.get(BE);return S&&R&&R.registerApplication(I,S),w.onDestroy(()=>{this.detachView(w.hostView),up(this.components,w),R&&R.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;up(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(r_,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(hr(es),hr(Ks),hr(Cg),hr(Kf),hr(NE))},s.\u0275prov=$t({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function up(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let ZI=!0,u_=!1;function qE(){return u_=!0,ZI}function KE(){if(u_)throw new Error("Cannot enable prod mode after platform setup.");ZI=!1}let $R=(()=>{class s{}return s.__NG_ELEMENT_ID__=ZE,s})();function ZE(s){return function pa(s,o,l){if(hh(s)&&!l){const c=li(s.index,o);return new Yu(c,c)}return 47&s.type?new Yu(o[16],o):null}(nr(),Ue(),16==(16&s))}class nT{constructor(){}supports(o){return hd(o)}create(o){return new iT(o)}}const rT=(s,o)=>o;class iT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||rT}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,g=null;for(;l||c;){const v=!c||l&&l.currentIndex<hp(c,h,g)?l:c,w=hp(v,h,g),I=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const S=w-h,R=I-h;if(S!=R){for(let G=0;G<S;G++){const te=G<g.length?g[G]:g[G]=0,he=te+G;R<=he&&he<S&&(g[G]=te+1)}g[v.previousIndex]=R-S}}w!==I&&o(v,w,I)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!hd(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),c=!0),l=l._next}else h=0,function _v(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Su()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,w=>{v=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,w,v,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new HR(l,c),g,h),o}_verifyReinsertion(o,l,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new t0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new t0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class HR{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class t0{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new e0,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hp(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class sT{constructor(){}supports(o){return o instanceof Map||Du(o)}create(){return new WR}}class WR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Du(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const c=new GR(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class GR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oT(){return new g_([new nT])}let g_=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||oT()),deps:[[s,new Wa,new Qo]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Oe(901,"")}}return s.\u0275prov=$t({token:s,providedIn:"root",factory:oT}),s})();function n0(){return new fp([new sT])}let fp=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||n0()),deps:[[s,new Wa,new Qo]]}}find(l){const c=this.factories.find(g=>g.supports(l));if(c)return c;throw new Oe(901,"")}}return s.\u0275prov=$t({token:s,providedIn:"root",factory:n0}),s})();const a0=o_(null,"core",[{provide:BI,useValue:"unknown"},{provide:a_,deps:[Ks]},{provide:BE,deps:[]},{provide:i_,deps:[]}]);let uT=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(hr(GE))},s.\u0275mod=M({type:s}),s.\u0275inj=Ge({}),s})()},3942:(Rt,xe,N)=>{N.d(xe,{Z:()=>Oe});var f=N(2090),j=N(4859),P=N(9681),ne=N(1877);class ge{constructor(_e,Ie){this._delegate=_e,this.firebase=Ie,(0,P._addComponent)(_e,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(_e,Ie=P._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(_e);return!Ke.isInitialized()&&"EXPLICIT"===(null===(at=Ke.getComponent())||void 0===at?void 0:at.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:Ie})}_removeServiceInstance(_e,Ie=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Ie)}_addComponent(_e){(0,P._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,P._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ye(){const Le=function ce(Le){const _e={},Ie={__esModule:!0,initializeApp:function Ne(J,it={}){const ut=P.initializeApp(J,it);if((0,f.r3)(_e,ut.name))return _e[ut.name];const oe=new Le(ut,Ie);return _e[ut.name]=oe,oe},app:Ke,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ee(J){const it=J.name,ut=it.replace("-compat","");if(P._registerComponent(J)&&"PUBLIC"===J.type){const oe=(se=Ke())=>{if("function"!=typeof se[ut])throw ae.create("invalid-app-argument",{appName:it});return se[ut]()};void 0!==J.serviceProps&&(0,f.ZB)(oe,J.serviceProps),Ie[ut]=oe,Le.prototype[ut]=function(...se){return this._getService.bind(this,it).apply(this,J.multipleInstances?se:[])}}return"PUBLIC"===J.type?Ie[ut]:null},removeApp:function at(J){delete _e[J]},useAsService:function Je(J,it){return"serverAuth"===it?null:it},modularAPIs:P}};function Ke(J){if(!(0,f.r3)(_e,J=J||P._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:J});return _e[J]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function Me(){return Object.keys(_e).map(J=>_e[J])}}),Ke.App=Le,Ie}(ge);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function _e(Ie){(0,f.ZB)(Le,Ie)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),W=new ne.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=z;!function Pe(Le){(0,P.registerVersion)("@firebase/app-compat","0.1.22",Le)}()},9681:(Rt,xe,N)=>{N.r(xe),N.d(xe,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>hn,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>jn,_addOrOverwriteComponent:()=>Dn,_apps:()=>Be,_clearComponents:()=>pt,_components:()=>gn,_getProvider:()=>Ot,_registerComponent:()=>$t,_removeServiceInstance:()=>Ge,deleteApp:()=>er,getApp:()=>Nn,getApps:()=>kn,initializeApp:()=>Mn,onLog:()=>ke,registerVersion:()=>ue,setLogLevel:()=>Ye});var f=N(5861),j=N(4859),P=N(1877),ne=N(2090);class ge{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(ft=>{if(function we(rt){const Ae=rt.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(ft)){const Q=ft.getImmediate();return`${Q.library}/${Q.version}`}return null}).filter(ft=>ft).join(" ")}}const ae="@firebase/app",ye=new P.Yd("@firebase/app"),jt="[DEFAULT]",Vt={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Be=new Map,gn=new Map;function jn(rt,Ae){try{rt.container.addComponent(Ae)}catch(ft){ye.debug(`Component ${Ae.name} failed to register with FirebaseApp ${rt.name}`,ft)}}function Dn(rt,Ae){rt.container.addOrOverwriteComponent(Ae)}function $t(rt){const Ae=rt.name;if(gn.has(Ae))return ye.debug(`There were multiple attempts to register component ${Ae}.`),!1;gn.set(Ae,rt);for(const ft of Be.values())jn(ft,rt);return!0}function Ot(rt,Ae){const ft=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return ft&&ft.triggerHeartbeat(),rt.container.getProvider(Ae)}function Ge(rt,Ae,ft=jt){Ot(rt,Ae).clearInstance(ft)}function pt(){gn.clear()}const Ht=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Qt{constructor(Ae,ft,Q){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},ft),this._name=ft.name,this._automaticDataCollectionEnabled=ft.automaticDataCollectionEnabled,this._container=Q,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}const hn="9.6.11";function Mn(rt,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const ft=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ae),Q=ft.name;if("string"!=typeof Q||!Q)throw Ht.create("bad-app-name",{appName:String(Q)});const me=Be.get(Q);if(me){if((0,ne.vZ)(rt,me.options)&&(0,ne.vZ)(ft,me.config))return me;throw Ht.create("duplicate-app",{appName:Q})}const Se=new j.H0(Q);for(const O of gn.values())Se.addComponent(O);const B=new Qt(rt,ft,Se);return Be.set(Q,B),B}function Nn(rt=jt){const Ae=Be.get(rt);if(!Ae)throw Ht.create("no-app",{appName:rt});return Ae}function kn(){return Array.from(Be.values())}function er(rt){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(rt){const Ae=rt.name;Be.has(Ae)&&(Be.delete(Ae),yield Promise.all(rt.container.getProviders().map(ft=>ft.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function ue(rt,Ae,ft){var Q;let me=null!==(Q=Vt[rt])&&void 0!==Q?Q:rt;ft&&(me+=`-${ft}`);const Se=me.match(/\s|\//),B=Ae.match(/\s|\//);if(Se||B){const O=[`Unable to register library "${me}" with version "${Ae}":`];return Se&&O.push(`library name "${me}" contains illegal characters (whitespace or "/")`),Se&&B&&O.push("and"),B&&O.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ye.warn(O.join(" "))}$t(new j.wA(`${me}-version`,()=>({library:me,version:Ae}),"VERSION"))}function ke(rt,Ae){if(null!==rt&&"function"!=typeof rt)throw Ht.create("invalid-log-argument");(0,P.Am)(rt,Ae)}function Ye(rt){(0,P.Ub)(rt)}const Gt="firebase-heartbeat-store";let un=null;function yn(){return un||(un=(0,ne.X3)("firebase-heartbeat-database",1,(rt,Ae)=>{0===Ae&&rt.createObjectStore(Gt)}).catch(rt=>{throw Ht.create("storage-open",{originalErrorMessage:rt.message})})),un}function vt(){return(vt=(0,f.Z)(function*(rt){try{return(yield yn()).transaction(Gt).objectStore(Gt).get(Hn(rt))}catch(Ae){throw Ht.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function mt(rt,Ae){return lt.apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(rt,Ae){try{const Q=(yield yn()).transaction(Gt,"readwrite");return yield Q.objectStore(Gt).put(Ae,Hn(rt)),Q.complete}catch(ft){throw Ht.create("storage-set",{originalErrorMessage:ft.message})}})).apply(this,arguments)}function Hn(rt){return`${rt.name}!${rt.options.appId}`}class Yn{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const ft=this.container.getProvider("app").getImmediate();this._storage=new It(ft),this._heartbeatsCachePromise=this._storage.read().then(Q=>(this._heartbeatsCache=Q,Q))}triggerHeartbeat(){var Ae=this;return(0,f.Z)(function*(){const Q=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),me=mn();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==me&&!Ae._heartbeatsCache.heartbeats.some(Se=>Se.date===me))return Ae._heartbeatsCache.heartbeats.push({date:me,agent:Q}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Se=>{const B=new Date(Se.date).valueOf();return Date.now()-B<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,f.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const ft=mn(),{heartbeatsToSend:Q,unsentEntries:me}=function an(rt,Ae=1024){const ft=[];let Q=rt.slice();for(const me of rt){const Se=ft.find(B=>B.agent===me.agent);if(Se){if(Se.dates.push(me.date),Wn(ft)>Ae){Se.dates.pop();break}}else if(ft.push({agent:me.agent,dates:[me.date]}),Wn(ft)>Ae){ft.pop();break}Q=Q.slice(1)}return{heartbeatsToSend:ft,unsentEntries:Q}}(Ae._heartbeatsCache.heartbeats),Se=(0,ne.L)(JSON.stringify({version:2,heartbeats:Q}));return Ae._heartbeatsCache.lastSentHeartbeatDate=ft,me.length>0?(Ae._heartbeatsCache.heartbeats=me,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Se})()}}function mn(){return(new Date).toISOString().substring(0,10)}class It{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,f.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function An(rt){return vt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var ft=this;return(0,f.Z)(function*(){var Q;if(yield ft._canUseIndexedDBPromise){const Se=yield ft.read();return mt(ft.app,{lastSentHeartbeatDate:null!==(Q=Ae.lastSentHeartbeatDate)&&void 0!==Q?Q:Se.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var ft=this;return(0,f.Z)(function*(){var Q;if(yield ft._canUseIndexedDBPromise){const Se=yield ft.read();return mt(ft.app,{lastSentHeartbeatDate:null!==(Q=Ae.lastSentHeartbeatDate)&&void 0!==Q?Q:Se.lastSentHeartbeatDate,heartbeats:[...Se.heartbeats,...Ae.heartbeats]})}})()}}function Wn(rt){return(0,ne.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function Xt(rt){$t(new j.wA("platform-logger",Ae=>new ge(Ae),"PRIVATE")),$t(new j.wA("heartbeat",Ae=>new Yn(Ae),"PRIVATE")),ue(ae,"0.7.21",rt),ue(ae,"0.7.21","esm2017"),ue("fire-js","")}("")},4859:(Rt,xe,N)=>{N.d(xe,{wA:()=>P,H0:()=>ce});var f=N(5861),j=N(2090);class P{constructor(z,W,Y){this.name=z,this.instanceFactory=W,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ne="[DEFAULT]";class ge{constructor(z,W){this.name=z,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const W=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(W)){const Y=new j.BH;if(this.instancesDeferred.set(W,Y),this.isInitialized(W)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:W});je&&Y.resolve(je)}catch(je){}}return this.instancesDeferred.get(W).promise}getImmediate(z){var W;const Y=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),je=null!==(W=null==z?void 0:z.optional)&&void 0!==W&&W;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Pe){if(je)return null;throw Pe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ae(ye){return"EAGER"===ye.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(W){}for(const[W,Y]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(W);try{const Pe=this.getOrInitializeService({instanceIdentifier:je});Y.resolve(Pe)}catch(Pe){}}}}clearInstance(z=ne){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const W=Array.from(z.instances.values());yield Promise.all([...W.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...W.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ne){return this.instances.has(z)}getOptions(z=ne){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:W={}}=z,Y=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Y,options:W});for(const[Pe,Oe]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Pe)&&Oe.resolve(je);return je}onInit(z,W){var Y;const je=this.normalizeInstanceIdentifier(W),Pe=null!==(Y=this.onInitCallbacks.get(je))&&void 0!==Y?Y:new Set;Pe.add(z),this.onInitCallbacks.set(je,Pe);const Oe=this.instances.get(je);return Oe&&z(Oe,je),()=>{Pe.delete(z)}}invokeOnInitCallbacks(z,W){const Y=this.onInitCallbacks.get(W);if(Y)for(const je of Y)try{je(z,W)}catch(Pe){}}getOrInitializeService({instanceIdentifier:z,options:W={}}){let Y=this.instances.get(z);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=z,ye===ne?void 0:ye),options:W}),this.instances.set(z,Y),this.instancesOptions.set(z,W),this.invokeOnInitCallbacks(Y,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Y)}catch(je){}var ye;return Y||null}normalizeInstanceIdentifier(z=ne){return this.component?this.component.multipleInstances?z:ne:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const W=this.getProvider(z.name);if(W.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);W.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const W=new ge(z,this);return this.providers.set(z,W),W}getProviders(){return Array.from(this.providers.values())}}},2833:(Rt,xe,N)=>{var f=N(5861),j=N(9681),P=N(4859),ne=N(2090);const ge="@firebase/installations",ce="w:0.5.8",ye="FIS_v2",Oe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(U){return U instanceof ne.ZR&&U.code.includes("request-failed")}function _e({projectId:U}){return`https://firebaseinstallations.googleapis.com/v1/projects/${U}/installations`}function Ie(U){return{token:U.token,requestStatus:2,expiresIn:J(U.expiresIn),creationTime:Date.now()}}function at(U,ee){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,f.Z)(function*(U,ee){const yt=(yield ee.json()).error;return Oe.create("request-failed",{requestName:U,serverCode:yt.code,serverMessage:yt.message,serverStatus:yt.status})})).apply(this,arguments)}function Ne({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function Me(U,{refreshToken:ee}){const Re=Ne(U);return Re.append("Authorization",function it(U){return`${ye} ${U}`}(ee)),Re}function Ee(U){return Je.apply(this,arguments)}function Je(){return(Je=(0,f.Z)(function*(U){const ee=yield U();return ee.status>=500&&ee.status<600?U():ee})).apply(this,arguments)}function J(U){return Number(U.replace("s","000"))}function ut(U,ee){return oe.apply(this,arguments)}function oe(){return(oe=(0,f.Z)(function*({appConfig:U,heartbeatServiceProvider:ee},{fid:Re}){const yt=_e(U),Sn=Ne(U),Zt=ee.getImmediate({optional:!0});if(Zt){const Ar=yield Zt.getHeartbeatsHeader();Ar&&Sn.append("x-firebase-client",Ar)}const _n={method:"POST",headers:Sn,body:JSON.stringify({fid:Re,authVersion:ye,appId:U.appId,sdkVersion:ce})},Yr=yield Ee(()=>fetch(yt,_n));if(Yr.ok){const Ar=yield Yr.json();return{fid:Ar.fid||Re,registrationStatus:2,refreshToken:Ar.refreshToken,authToken:Ie(Ar.authToken)}}throw yield at("Create Installation",Yr)})).apply(this,arguments)}function se(U){return new Promise(ee=>{setTimeout(ee,U)})}const Te=/^[cdef][\w-]{21}$/;function ze(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const Re=function bt(U){return function le(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return Te.test(Re)?Re:""}catch(U){return""}}function jt(U){return`${U.appName}!${U.appId}`}const Vt=new Map;function Be(U,ee){const Re=jt(U);Dn(Re,ee),function $t(U,ee){const Re=function Ge(){return!Ot&&"BroadcastChannel"in self&&(Ot=new BroadcastChannel("[Firebase] FID Change"),Ot.onmessage=U=>{Dn(U.data.key,U.data.fid)}),Ot}();Re&&Re.postMessage({key:U,fid:ee}),function pt(){0===Vt.size&&Ot&&(Ot.close(),Ot=null)}()}(Re,ee)}function Dn(U,ee){const Re=Vt.get(U);if(Re)for(const yt of Re)yt(ee)}let Ot=null;const Qt="firebase-installations-store";let hn=null;function Mn(){return hn||(hn=(0,ne.X3)("firebase-installations-database",1,(U,ee)=>{0===ee&&U.createObjectStore(Qt)})),hn}function Nn(U,ee){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(U,ee){const Re=jt(U),Sn=(yield Mn()).transaction(Qt,"readwrite"),Zt=Sn.objectStore(Qt),Pt=yield Zt.get(Re);return yield Zt.put(ee,Re),yield Sn.complete,(!Pt||Pt.fid!==ee.fid)&&Be(U,ee.fid),ee})).apply(this,arguments)}function er(U){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(U){const ee=jt(U),yt=(yield Mn()).transaction(Qt,"readwrite");yield yt.objectStore(Qt).delete(ee),yield yt.complete})).apply(this,arguments)}function ue(U,ee){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(U,ee){const Re=jt(U),Sn=(yield Mn()).transaction(Qt,"readwrite"),Zt=Sn.objectStore(Qt),Pt=yield Zt.get(Re),_n=ee(Pt);return void 0===_n?yield Zt.delete(Re):yield Zt.put(_n,Re),yield Sn.complete,_n&&(!Pt||Pt.fid!==_n.fid)&&Be(U,_n.fid),_n})).apply(this,arguments)}function Ye(U){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(U){let ee;const Re=yield ue(U.appConfig,yt=>{const Sn=zt(yt),Zt=Gt(U,Sn);return ee=Zt.registrationPromise,Zt.installationEntry});return""===Re.fid?{installationEntry:yield ee}:{installationEntry:Re,registrationPromise:ee}})).apply(this,arguments)}function zt(U){return lt(U||{fid:ze(),registrationStatus:0})}function Gt(U,ee){if(0===ee.registrationStatus){if(!navigator.onLine)return{installationEntry:ee,registrationPromise:Promise.reject(Oe.create("app-offline"))};const Re={fid:ee.fid,registrationStatus:1,registrationTime:Date.now()},yt=function un(U,ee){return yn.apply(this,arguments)}(U,Re);return{installationEntry:Re,registrationPromise:yt}}return 1===ee.registrationStatus?{installationEntry:ee,registrationPromise:An(U)}:{installationEntry:ee}}function yn(){return(yn=(0,f.Z)(function*(U,ee){try{const Re=yield ut(U,ee);return Nn(U.appConfig,Re)}catch(Re){throw Le(Re)&&409===Re.customData.serverCode?yield er(U.appConfig):yield Nn(U.appConfig,{fid:ee.fid,registrationStatus:0}),Re}})).apply(this,arguments)}function An(U){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(U){let ee=yield mt(U.appConfig);for(;1===ee.registrationStatus;)yield se(100),ee=yield mt(U.appConfig);if(0===ee.registrationStatus){const{installationEntry:Re,registrationPromise:yt}=yield Ye(U);return yt||Re}return ee})).apply(this,arguments)}function mt(U){return ue(U,ee=>{if(!ee)throw Oe.create("installation-not-found");return lt(ee)})}function lt(U){return function Hn(U){return 1===U.registrationStatus&&U.registrationTime+1e4<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function ur(U,ee){return qt.apply(this,arguments)}function qt(){return(qt=(0,f.Z)(function*({appConfig:U,heartbeatServiceProvider:ee},Re){const yt=Yn(U,Re),Sn=Me(U,Re),Zt=ee.getImmediate({optional:!0});if(Zt){const Ar=yield Zt.getHeartbeatsHeader();Ar&&Sn.append("x-firebase-client",Ar)}const _n={method:"POST",headers:Sn,body:JSON.stringify({installation:{sdkVersion:ce,appId:U.appId}})},Yr=yield Ee(()=>fetch(yt,_n));if(Yr.ok)return Ie(yield Yr.json());throw yield at("Generate Auth Token",Yr)})).apply(this,arguments)}function Yn(U,{fid:ee}){return`${_e(U)}/${ee}/authTokens:generate`}function mn(U){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(U,ee=!1){let Re;const yt=yield ue(U.appConfig,Zt=>{if(!ft(Zt))throw Oe.create("not-registered");const Pt=Zt.authToken;if(!ee&&Q(Pt))return Zt;if(1===Pt.requestStatus)return Re=It(U,ee),Zt;{if(!navigator.onLine)throw Oe.create("app-offline");const _n=Se(Zt);return Re=rt(U,_n),_n}});return Re?yield Re:yt.authToken})).apply(this,arguments)}function It(U,ee){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(U,ee){let Re=yield Xt(U.appConfig);for(;1===Re.authToken.requestStatus;)yield se(100),Re=yield Xt(U.appConfig);const yt=Re.authToken;return 0===yt.requestStatus?mn(U,ee):yt})).apply(this,arguments)}function Xt(U){return ue(U,ee=>{if(!ft(ee))throw Oe.create("not-registered");return function B(U){return 1===U.requestStatus&&U.requestTime+1e4<Date.now()}(ee.authToken)?Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}}):ee})}function rt(U,ee){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(U,ee){try{const Re=yield ur(U,ee),yt=Object.assign(Object.assign({},ee),{authToken:Re});return yield Nn(U.appConfig,yt),Re}catch(Re){if(!Le(Re)||401!==Re.customData.serverCode&&404!==Re.customData.serverCode){const yt=Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}});yield Nn(U.appConfig,yt)}else yield er(U.appConfig);throw Re}})).apply(this,arguments)}function ft(U){return void 0!==U&&2===U.registrationStatus}function Q(U){return 2===U.requestStatus&&!function me(U){const ee=Date.now();return ee<U.creationTime||U.creationTime+U.expiresIn<ee+36e5}(U)}function Se(U){const ee={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:ee})}function H(){return(H=(0,f.Z)(function*(U){const ee=U,{installationEntry:Re,registrationPromise:yt}=yield Ye(ee);return yt?yt.catch(console.error):mn(ee).catch(console.error),Re.fid})).apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(U,ee=!1){const Re=U;return yield F(Re),(yield mn(Re,ee)).token})).apply(this,arguments)}function F(U){return $.apply(this,arguments)}function $(){return($=(0,f.Z)(function*(U){const{registrationPromise:ee}=yield Ye(U);ee&&(yield ee)})).apply(this,arguments)}function cn(U){return Oe.create("missing-app-config-values",{valueName:U})}const K="installations",Xe=U=>{const ee=U.getProvider("app").getImmediate(),Re=function Dr(U){if(!U||!U.options)throw cn("App Configuration");if(!U.name)throw cn("App Name");const ee=["projectId","apiKey","appId"];for(const Re of ee)if(!U.options[Re])throw cn(Re);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(ee);return{app:ee,appConfig:Re,heartbeatServiceProvider:(0,j._getProvider)(ee,"heartbeat"),_delete:()=>Promise.resolve()}},Et=U=>{const ee=U.getProvider("app").getImmediate(),Re=(0,j._getProvider)(ee,K).getImmediate();return{getId:()=>function O(U){return H.apply(this,arguments)}(Re),getToken:Sn=>function X(U){return M.apply(this,arguments)}(Re,Sn)}};(function St(){(0,j._registerComponent)(new P.wA(K,Xe,"PUBLIC")),(0,j._registerComponent)(new P.wA("installations-internal",Et,"PRIVATE"))})(),(0,j.registerVersion)(ge,"0.5.8"),(0,j.registerVersion)(ge,"0.5.8","esm2017")},1877:(Rt,xe,N)=>{N.d(xe,{in:()=>j,Yd:()=>ae,Ub:()=>ce,Am:()=>ye});const f=[];var j=(()=>{return(z=j||(j={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",j;var z})();const P={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ne=j.INFO,ge={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},we=(z,W,...Y)=>{if(W<z.logLevel)return;const je=(new Date).toISOString(),Pe=ge[W];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Pe](`[${je}]  ${z.name}:`,...Y)};class ae{constructor(W){this.name=W,this._logLevel=ne,this._logHandler=we,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in j))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?P[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...W),this._logHandler(this,j.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...W),this._logHandler(this,j.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,j.INFO,...W),this._logHandler(this,j.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,j.WARN,...W),this._logHandler(this,j.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...W),this._logHandler(this,j.ERROR,...W)}}function ce(z){f.forEach(W=>{W.setLogLevel(z)})}function ye(z,W){for(const Y of f){let je=null;W&&W.level&&(je=P[W.level]),Y.userLogHandler=null===z?null:(Pe,Oe,...Le)=>{const _e=Le.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(at){return null}}).filter(Ie=>Ie).join(" ");Oe>=(null!=je?je:Pe.logLevel)&&z({level:j[Oe].toLowerCase(),message:_e,args:Le,type:Pe.name})}}}},5861:(Rt,xe,N)=>{function f(P,ne,ge,we,ae,ce,ye){try{var z=P[ce](ye),W=z.value}catch(Y){return void ge(Y)}z.done?ne(W):Promise.resolve(W).then(we,ae)}function j(P){return function(){var ne=this,ge=arguments;return new Promise(function(we,ae){var ce=P.apply(ne,ge);function ye(W){f(ce,we,ae,ye,z,"next",W)}function z(W){f(ce,we,ae,ye,z,"throw",W)}ye(void 0)})}}N.d(xe,{Z:()=>j})}},Rt=>{Rt(Rt.s=7313)}]);