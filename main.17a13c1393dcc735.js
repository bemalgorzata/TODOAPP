"use strict";(self.webpackChunktodo_app=self.webpackChunktodo_app||[]).push([[179],{2011:(Rt,xe,N)=>{N.d(xe,{hO:()=>$e,xv:()=>_e,Dh:()=>le,GT:()=>we,cc:()=>Oe,on:()=>z,pX:()=>pe});var f=N(5e3),$=N(127),O=N(4027);Rt=N.hmd(Rt);const ne=["ngOnDestroy"],pe=(be,rt,qe,Ne={})=>new Proxy(be,{get:(Me,Ee)=>qe.runOutsideAngular(()=>{var Ze;if(be[Ee])return(null===(Ze=null==Ne?void 0:Ne.spy)||void 0===Ze?void 0:Ze.get)&&Ne.spy.get(Ee,be[Ee]),be[Ee];if(ne.indexOf(Ee)>-1)return()=>{};const Q=rt.toPromise().then(et=>{const st=et&&et[Ee];return"function"==typeof st?st.bind(et):st&&st.then?st.then(se=>qe.run(()=>se)):qe.run(()=>st)});return new Proxy(()=>{},{get:(et,st)=>Q[st],apply:(et,st,se)=>Q.then(ie=>{var oe;const Te=ie&&ie(...se);return(null===(oe=null==Ne?void 0:Ne.spy)||void 0===oe?void 0:oe.apply)&&Ne.spy.apply(Ee,se,Te),Te})})})}),we=(be,rt)=>{rt.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(Ne=>{Object.defineProperty(be.prototype,Ne,Object.getOwnPropertyDescriptor(qe.prototype||qe,Ne))})})};class ae{constructor(rt){return rt}}const le=new f.OlP("angularfire2.app.options"),_e=new f.OlP("angularfire2.app.name");function z(be,rt,qe){const Me="object"==typeof qe&&qe||{};Me.name=Me.name||"string"==typeof qe&&qe||"[DEFAULT]";const Ze=$.Z.apps.filter(Q=>Q&&Q.name===Me.name)[0]||rt.runOutsideAngular(()=>$.Z.initializeApp(be,Me));try{JSON.stringify(be)!==JSON.stringify(Ze.options)&&G("error",`${Ze.name} Firebase App already initialized with different options${Rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Q){}return new ae(Ze)}const G=(be,...rt)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[be](...rt)},Z={provide:ae,useFactory:z,deps:[le,f.R0b,[new f.FiY,_e]]};let $e=(()=>{class be{constructor(qe){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",f.q4F.full,qe.toString())}static initializeApp(qe,Ne){return{ngModule:be,providers:[{provide:le,useValue:qe},{provide:_e,useValue:Ne}]}}}return be.\u0275fac=function(qe){return new(qe||be)(f.LFG(f.Lbi))},be.\u0275mod=f.oAB({type:be}),be.\u0275inj=f.cJS({providers:[Z]}),be})();function Oe(be,rt,qe,Ne,Me){const[,Ee,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Q=>Q[0]===be)||[];if(Ee)return function Pe(be,rt){try{return be.toString()===rt.toString()}catch(qe){return be===rt}}(Me,Ze)||(me("error",`${rt} was already initialized on the ${qe} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Me,was:Ze})),Ee;{const Q=Ne();return globalThis.\u0275AngularfireInstanceCache.push([be,Q,Me]),Q}}const Le=!!Rt.hot,me=(be,...rt)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[be](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(Rt,xe,N)=>{N.d(xe,{q4:()=>me,iC:()=>$n,HU:()=>We,vb:()=>ie,JM:()=>se,nk:()=>st,n1:()=>Q,_J:()=>et,u3:()=>Nt});var f=N(5e3),$=N(5867),O=N(3226),ne=N(2375),pe=N(6148),we=N(4408),le=N(7565);const z=new class _e extends le.v{}(class ae extends we.o{constructor(ht,pt){super(ht,pt),this.scheduler=ht,this.work=pt}schedule(ht,pt=0){return pt>0?super.schedule(ht,pt):(this.delay=pt,this.state=ht,this.scheduler.flush(this),this)}execute(ht,pt){return pt>0||this.closed?super.execute(ht,pt):this._execute(ht,pt)}requestAsyncId(ht,pt,Bt=0){return null!=Bt&&Bt>0||null==Bt&&this.delay>0?super.requestAsyncId(ht,pt,Bt):ht.flush(this)}});var Z=N(4986),$e=N(8306),Oe=N(8505),Pe=N(9468),Le=N(5363);const me=new f.GfV("7.3.0"),be="__angularfire_symbol__analyticsIsSupportedValue",rt="__angularfire_symbol__analyticsIsSupported",qe="__angularfire_symbol__remoteConfigIsSupportedValue",Ne="__angularfire_symbol__remoteConfigIsSupported",Me="__angularfire_symbol__messagingIsSupportedValue",Ee="__angularfire_symbol__messagingIsSupported";globalThis[rt]||(globalThis[rt]=(0,pe.Gb)().then(Ge=>globalThis[be]=Ge).catch(()=>globalThis[be]=!1)),globalThis[Ee]||(globalThis[Ee]=(0,ne.Gb)().then(Ge=>globalThis[Me]=Ge).catch(()=>globalThis[Me]=!1)),globalThis[Ne]||(globalThis[Ne]=(0,O.Gb)().then(Ge=>globalThis[qe]=Ge).catch(()=>globalThis[qe]=!1));const Ze=Ge=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Ge} in the constructor, first ensure that ${Ge} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Ge})\`.`,Q={async:()=>globalThis[Ee],sync:()=>{const Ge=globalThis[Me];if(void 0===Ge)throw new Error(Ze("Messaging"));return Ge}},et={async:()=>globalThis[Ne],sync:()=>{const Ge=globalThis[qe];if(void 0===Ge)throw new Error(Ze("RemoteConfig"));return Ge}},st={async:()=>globalThis[rt],sync:()=>{const Ge=globalThis[be];if(void 0===Ge)throw new Error(Ze("Analytics"));return Ge}};function se(Ge,ht,pt){if(ht){if(1===ht.length)return ht[0];const dn=ht.filter(Mn=>Mn.app===pt);if(1===dn.length)return dn[0]}return pt.container.getProvider(Ge).getImmediate({optional:!0})}const ie=(Ge,ht)=>{const pt=ht?[ht]:(0,$.C6)(),Bt=[];return pt.forEach(Yt=>{Yt.container.getProvider(Ge).instances.forEach(Mn=>{Bt.includes(Mn)||Bt.push(Mn)})}),Bt};function oe(){}class Te{constructor(ht,pt=z){this.zone=ht,this.delegate=pt}now(){return this.delegate.now()}schedule(ht,pt,Bt){const Yt=this.zone;return this.delegate.schedule(function(Mn){Yt.runGuarded(()=>{ht.apply(this,[Mn])})},pt,Bt)}}class he{constructor(ht){this.zone=ht,this.task=null}call(ht,pt){const Bt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oe,{},oe,oe)),pt.pipe((0,Oe.b)({next:Bt,complete:Bt,error:Bt})).subscribe(ht).add(Bt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let We=(()=>{class Ge{constructor(pt){this.ngZone=pt,this.outsideAngular=pt.runOutsideAngular(()=>new Te(Zone.current)),this.insideAngular=pt.run(()=>new Te(Zone.current,Z.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ge.\u0275fac=function(pt){return new(pt||Ge)(f.LFG(f.R0b))},Ge.\u0275prov=f.Yz7({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge})();function It(){const Ge=globalThis.\u0275AngularFireScheduler;if(!Ge)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ge}function Ut(Ge){return It().ngZone.runOutsideAngular(()=>Ge())}function Ft(Ge){return It().ngZone.run(()=>Ge())}function $n(Ge){return It(),function Dn(Ge){return function(pt){return(pt=pt.lift(new he(Ge.ngZone))).pipe((0,Pe.R)(Ge.outsideAngular),(0,Le.Q)(Ge.insideAngular))}}(It())(Ge)}const Vt=(Ge,ht)=>function(){const Bt=arguments;return ht&&setTimeout(()=>{"scheduled"===ht.state&&ht.invoke()},10),Ft(()=>Ge.apply(void 0,Bt))},Nt=(Ge,ht)=>function(){let pt;const Bt=arguments;for(let dn=0;dn<arguments.length;dn++)"function"==typeof Bt[dn]&&(ht&&(pt||(pt=Ft(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oe,{},oe,oe)))),Bt[dn]=Vt(Bt[dn],pt));const Yt=Ut(()=>Ge.apply(this,Bt));if(!ht){if(Yt instanceof $e.y){const dn=It();return Yt.pipe((0,Pe.R)(dn.outsideAngular),(0,Le.Q)(dn.insideAngular))}return Ft(()=>Yt)}return Yt instanceof $e.y?Yt.pipe($n):Yt instanceof Promise?Ft(()=>new Promise((dn,Mn)=>Yt.then(Nn=>Ft(()=>dn(Nn)),Nn=>Ft(()=>Mn(Nn))))):"function"==typeof Yt&&pt?function(){return setTimeout(()=>{pt&&"scheduled"===pt.state&&pt.invoke()},10),Yt.apply(this,arguments)}:Ft(()=>Yt)}},573:(Rt,xe,N)=>{N.d(xe,{$:()=>Kp,A:()=>G,E:()=>ee,G:()=>Pt,I:()=>Ts,K:()=>x,L:()=>Wp,M:()=>k_,N:()=>Pu,P:()=>Xu,Q:()=>fc,R:()=>Ri,T:()=>Bi,U:()=>Ea,V:()=>L_,W:()=>hw,X:()=>Zr,Y:()=>yc,Z:()=>si,_:()=>Ss,a:()=>Ot,a0:()=>U_,a1:()=>B_,a2:()=>Ue,a3:()=>j_,a4:()=>Ic,a5:()=>ji,a6:()=>gh,a7:()=>fw,a8:()=>Zp,a9:()=>As,aA:()=>po,aB:()=>Lc,aC:()=>Dt,aG:()=>kr,aJ:()=>Ou,aa:()=>ba,ab:()=>$_,ae:()=>_h,af:()=>G_,ag:()=>yh,aj:()=>qp,ak:()=>K_,am:()=>Eh,an:()=>Sc,ao:()=>xn,ap:()=>st,aq:()=>zt,ar:()=>tt,as:()=>qe,at:()=>Zo,au:()=>Ua,av:()=>Ne,aw:()=>Q,ax:()=>ie,ay:()=>H,az:()=>qo,b:()=>ur,c:()=>Oc,d:()=>iy,e:()=>mw,f:()=>ag,g:()=>vn,h:()=>ug,i:()=>Ns,j:()=>zo,k:()=>Fs,l:()=>vr,m:()=>fy,n:()=>my,o:()=>le,r:()=>Qu,s:()=>Go,t:()=>ir,u:()=>hs,z:()=>Oe});var f=N(5861),$=N(2090),O=N(9681),ne=N(655),pe=N(1877),we=N(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function Z(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new pe.Yd("@firebase/auth");function rt(E,...m){be.logLevel<=pe.in.ERROR&&be.error(`Auth (${O.SDK_VERSION}): ${E}`,...m)}function qe(E,...m){throw Ze(E,...m)}function Ne(E,...m){return Ze(E,...m)}function Me(E,m,_){const I=Object.assign(Object.assign({},Pe()),{[m]:_});return new $.LL("auth","Firebase",I).create(m,{appName:E.name})}function Ee(E,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&qe(E,"argument-error"),Me(E,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(E,...m){if("string"!=typeof E){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(_,...I)}return Le.create(E,...m)}function Q(E,m,..._){if(!E)throw Ze(m,..._)}function et(E){const m="INTERNAL ASSERTION FAILED: "+E;throw rt(m),new Error(m)}function st(E,m){E||et(m)}const se=new Map;function ie(E){st(E instanceof Function,"Expected a class definition");let m=se.get(E);return m?(st(m instanceof E,"Instance stored in cache mismatched with class"),m):(m=new E,se.set(E,m),m)}function he(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function We(){return"http:"===It()||"https:"===It()}function It(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Be{constructor(m,_){this.shortDelay=m,this.longDelay=_,st(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(We()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pn(E,m){st(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class $n{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vt=new Be(3e4,6e4);function Nt(E,m){return E.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:E.tenantId}):m}function Ge(E,m,_,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(E,m,_,I,A={}){return pt(E,A,(0,f.Z)(function*(){let F={},re={};I&&("GET"===m?re=I:F={body:JSON.stringify(I)});const Ve=(0,$.xO)(Object.assign({key:E.config.apiKey},re)).slice(1),St=yield E._getAdditionalHeaders();return St["Content-Type"]="application/json",E.languageCode&&(St["X-Firebase-Locale"]=E.languageCode),$n.fetch()(Mn(E,E.config.apiHost,_,Ve),Object.assign({method:m,headers:St,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function pt(E,m,_){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*(E,m,_){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},Dn),m);try{const A=new Nn(E),F=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const re=yield F.json();if("needConfirmation"in re)throw kn(E,"account-exists-with-different-credential",re);if(F.ok&&!("errorMessage"in re))return re;{const Ve=F.ok?re.errorMessage:re.error.message,[St,Lt]=Ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw kn(E,"credential-already-in-use",re);if("EMAIL_EXISTS"===St)throw kn(E,"email-already-in-use",re);const rn=I[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(Lt)throw Me(E,rn,Lt);qe(E,rn)}}catch(A){if(A instanceof $.ZR)throw A;qe(E,"network-request-failed")}})).apply(this,arguments)}function Yt(E,m,_,I){return dn.apply(this,arguments)}function dn(){return(dn=(0,f.Z)(function*(E,m,_,I,A={}){const F=yield Ge(E,m,_,I,A);return"mfaPendingCredential"in F&&qe(E,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Mn(E,m,_,I){const A=`${m}${_}?${I}`;return E.config.emulator?pn(E.config,A):`${E.config.apiScheme}://${A}`}class Nn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Ne(this.auth,"network-request-failed")),Vt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kn(E,m,_){const I={appName:E.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const A=Ne(E,m,I);return A.customData._tokenResponse=_,A}function Se(){return(Se=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function ue(E,m){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ke(E,m){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Gt(E){if(E)try{const m=new Date(Number(E));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function _n(){return(_n=(0,f.Z)(function*(E,m=!1){const _=(0,$.m9)(E),I=yield _.getIdToken(m),A=vt(I);Q(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const F="object"==typeof A.firebase?A.firebase:void 0,re=null==F?void 0:F.sign_in_provider;return{claims:A,token:I,authTime:Gt(Sn(A.auth_time)),issuedAtTime:Gt(Sn(A.iat)),expirationTime:Gt(Sn(A.exp)),signInProvider:re||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function Sn(E){return 1e3*Number(E)}function vt(E){const[m,_,I]=E.split(".");if(void 0===m||void 0===_||void 0===I)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,$.tV)(_);return A?JSON.parse(A):(rt("Failed to decode base64 JWT payload"),null)}catch(A){return rt("Caught error parsing JWT payload as JSON",A),null}}function it(E,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(E,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof $.ZR&&ar(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}function ar({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Wt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,f.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class Kn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gt(this.lastLoginAt),this.creationTime=Gt(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gn(E){return on.apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(E){var m;const _=E.auth,I=yield E.getIdToken(),A=yield it(E,Ke(_,{idToken:I}));Q(null==A?void 0:A.users.length,_,"internal-error");const F=A.users[0];E._notifyReloadListener(F);const re=(null===(m=F.providerUserInfo)||void 0===m?void 0:m.length)?Xe(F.providerUserInfo):[],Ve=Qt(E.providerData,re),rn=!!E.isAnonymous&&!(E.email&&F.passwordHash||(null==Ve?void 0:Ve.length)),Pn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Ve,metadata:new Kn(F.createdAt,F.lastLoginAt),isAnonymous:rn};Object.assign(E,Pn)})).apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(E){const m=(0,$.m9)(E);yield gn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Qt(E,m){return[...E.filter(I=>!m.some(A=>A.providerId===I.providerId)),...m]}function Xe(E){return E.map(m=>{var{providerId:_}=m,I=(0,ne._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function ct(){return(ct=(0,f.Z)(function*(E,m){const _=yield pt(E,{},(0,f.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:A,apiKey:F}=E.config,re=Mn(E,A,"/v1/token",`key=${F}`),Ve=yield E._getAdditionalHeaders();return Ve["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(re,{method:"POST",headers:Ve,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Q(m.idToken,"internal-error"),Q(void 0!==m.idToken,"internal-error"),Q(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function gt(E){const m=vt(E);return Q(m,"internal-error"),Q(void 0!==m.exp,"internal-error"),Q(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,f.Z)(function*(){return Q(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:F,expiresIn:re}=yield function Ae(E,m){return ct.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(A,F,Number(re))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:A,expirationTime:F}=_,re=new Y;return I&&(Q("string"==typeof I,"internal-error",{appName:m}),re.refreshToken=I),A&&(Q("string"==typeof A,"internal-error",{appName:m}),re.accessToken=A),F&&(Q("number"==typeof F,"internal-error",{appName:m}),re.expirationTime=F),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Y,this.toJSON())}_performRefresh(){return et("not implemented")}}function ge(E,m){Q("string"==typeof E||void 0===E,"internal-error",{appName:m})}class De{constructor(m){var{uid:_,auth:I,stsTokenManager:A}=m,F=(0,ne._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Kn(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,f.Z)(function*(){const I=yield it(_,_.stsTokenManager.getToken(_.auth,m));return Q(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function un(E){return _n.apply(this,arguments)}(this,m)}reload(){return function bt(E){return Gn.apply(this,arguments)}(this)}_assign(m){this!==m&&(Q(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new De(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,f.Z)(function*(){let A=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),A=!0),_&&(yield gn(I)),yield I.auth._persistUserIfCurrent(I),A&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,f.Z)(function*(){const _=yield m.getIdToken();return yield it(m,function Qn(E,m){return Se.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,A,F,re,Ve,St,Lt,rn;const Pn=null!==(I=_.displayName)&&void 0!==I?I:void 0,Ls=null!==(A=_.email)&&void 0!==A?A:void 0,vi=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,Ha=null!==(re=_.photoURL)&&void 0!==re?re:void 0,Gc=null!==(Ve=_.tenantId)&&void 0!==Ve?Ve:void 0,ul=null!==(St=_._redirectEventId)&&void 0!==St?St:void 0,_y=null!==(Lt=_.createdAt)&&void 0!==Lt?Lt:void 0,ll=null!==(rn=_.lastLoginAt)&&void 0!==rn?rn:void 0,{uid:_o,emailVerified:gg,isAnonymous:Ga,providerData:cl,stsTokenManager:mg}=_;Q(_o&&mg,m,"internal-error");const Wc=Y.fromJSON(this.name,mg);Q("string"==typeof _o,m,"internal-error"),ge(Pn,m.name),ge(Ls,m.name),Q("boolean"==typeof gg,m,"internal-error"),Q("boolean"==typeof Ga,m,"internal-error"),ge(vi,m.name),ge(Ha,m.name),ge(Gc,m.name),ge(ul,m.name),ge(_y,m.name),ge(ll,m.name);const Yo=new De({uid:_o,auth:m,email:Ls,emailVerified:gg,displayName:Pn,isAnonymous:Ga,photoURL:Ha,phoneNumber:vi,tenantId:Gc,stsTokenManager:Wc,createdAt:_y,lastLoginAt:ll});return cl&&Array.isArray(cl)&&(Yo.providerData=cl.map(yy=>Object.assign({},yy))),ul&&(Yo._redirectEventId=ul),Yo}static _fromIdTokenResponse(m,_,I=!1){return(0,f.Z)(function*(){const A=new Y;A.updateFromServerResponse(_);const F=new De({uid:_.localId,auth:m,stsTokenManager:A,isAnonymous:I});return yield gn(F),F})()}}const x=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,I){var A=this;return(0,f.Z)(function*(){A.storage[_]=I})()}_get(_){var I=this;return(0,f.Z)(function*(){const A=I.storage[_];return void 0===A?null:A})()}_remove(_){var I=this;return(0,f.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return E.type="NONE",E})();function H(E,m,_){return`firebase:${E}:${m}:${_}`}class X{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:A,name:F}=this.auth;this.fullUserKey=H(this.userKey,A.apiKey,F),this.fullPersistenceKey=H("persistence",A.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,f.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?De._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,f.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,f.Z)(function*(){if(!_.length)return new X(ie(x),m,I);const A=(yield Promise.all(_.map(function(){var Lt=(0,f.Z)(function*(rn){if(yield rn._isAvailable())return rn});return function(rn){return Lt.apply(this,arguments)}}()))).filter(Lt=>Lt);let F=A[0]||ie(x);const re=H(I,m.config.apiKey,m.name);let Ve=null;for(const Lt of _)try{const rn=yield Lt._get(re);if(rn){const Pn=De._fromJSON(m,rn);Lt!==F&&(Ve=Pn),F=Lt;break}}catch(rn){}const St=A.filter(Lt=>Lt._shouldAllowMigration);return F._shouldAllowMigration&&St.length?(F=St[0],Ve&&(yield F._set(re,Ve.toJSON())),yield Promise.all(_.map(function(){var Lt=(0,f.Z)(function*(rn){if(rn!==F)try{yield rn._remove(re)}catch(Pn){}});return function(rn){return Lt.apply(this,arguments)}}())),new X(F,m,I)):new X(F,m,I)})()}}function M(E){const m=E.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(ze(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(k(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Mt(m))return"Blackberry";if(mt(m))return"Webos";if(j(m))return"Safari";if((m.includes("chrome/")||ce(m))&&!m.includes("edge/"))return"Chrome";if(tt(m))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function k(E=(0,$.z$)()){return/firefox\//i.test(E)}function j(E=(0,$.z$)()){const m=E.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ce(E=(0,$.z$)()){return/crios\//i.test(E)}function ze(E=(0,$.z$)()){return/iemobile/i.test(E)}function tt(E=(0,$.z$)()){return/android/i.test(E)}function Mt(E=(0,$.z$)()){return/blackberry/i.test(E)}function mt(E=(0,$.z$)()){return/webos/i.test(E)}function zt(E=(0,$.z$)()){return/iphone|ipad|ipod/i.test(E)}function xn(E=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function q(E=(0,$.z$)()){return zt(E)||tt(E)||mt(E)||Mt(E)||/windows phone/i.test(E)||ze(E)}function Ye(E,m=[]){let _;switch(E){case"Browser":_=M((0,$.z$)());break;case"Worker":_=`${M((0,$.z$)())}-${E}`;break;default:_=E}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${I}`}class Et{constructor(m,_,I){this.app=m,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V(this),this.idTokenSubscription=new V(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,F;if(!I._deleted&&(I.persistenceManager=yield X.create(I,m),!I._deleted)){if(null===(A=I._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(re){}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,f.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_)}})()}initializeCurrentUser(m){var _=this;return(0,f.Z)(function*(){var I;let A=yield _.assertedPersistence.getCurrentUser();if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const F=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,re=null==A?void 0:A._redirectEventId,Ve=yield _.tryRedirectSignIn(m);(!F||F===re)&&(null==Ve?void 0:Ve.user)&&(A=Ve.user)}return A?A._redirectEventId?(Q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===A._redirectEventId?_.directlySetCurrentUser(A):_.reloadAndSetCurrentUserOrClear(A)):_.reloadAndSetCurrentUserOrClear(A):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var _=this;return(0,f.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(A){yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,f.Z)(function*(){try{yield gn(m)}catch(I){if("auth/network-request-failed"!==I.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ft(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var m=this;return(0,f.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,f.Z)(function*(){const I=m?(0,$.m9)(m):null;return I&&Q(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return m&&Q(_.tenantId===m.tenantId,_,"tenant-id-mismatch"),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(m),_.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,f.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new $.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,f.Z)(function*(){const A=yield I.getOrInitRedirectPersistenceManager(_);return null===m?A.removeCurrentUser():A.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&ie(m)||_._popupRedirectResolver;Q(I,_,"argument-error"),_.redirectPersistenceManager=yield X.create(_,[ie(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,f.Z)(function*(){var I,A;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,f.Z)(function*(){if(m===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,A){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(re,this,"internal-error"),re.then(()=>F(this.currentUser)),"function"==typeof _?m.addObserver(_,I,A):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Ye(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,f.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const A=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(I["X-Firebase-Client"]=A),I})()}}function Dt(E){return(0,$.m9)(E)}class V{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ee(E,m,_){const I=Dt(E);Q(I._canInitEmulator,I,"emulator-config-failed"),Q(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),F=Re(m),{host:re,port:Ve}=function _t(E){const m=Re(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(I);if(A){const F=A[1];return{host:F,port:Tn(I.substr(F.length+1))}}{const[F,re]=I.split(":");return{host:F,port:Tn(re)}}}(m);I.config.emulator={url:`${F}//${re}${null===Ve?"":`:${Ve}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:re,port:Ve,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function qt(){function E(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function Re(E){const m=E.indexOf(":");return m<0?"":E.substr(0,m+1)}function Tn(E){if(!E)return null;const m=Number(E);return isNaN(m)?null:m}class Pt{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return et("not implemented")}_getIdTokenResponse(m){return et("not implemented")}_linkToIdToken(m,_){return et("not implemented")}_getReauthenticationResolver(m){return et("not implemented")}}function mn(E,m){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:resetPassword",Nt(E,m))})).apply(this,arguments)}function Tr(E,m){return en.apply(this,arguments)}function en(){return(en=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function cc(E,m){return bs.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",Nt(E,m))})).apply(this,arguments)}function oo(){return(oo=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithPassword",Nt(E,m))})).apply(this,arguments)}function Dr(E,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:sendOobCode",Nt(E,m))})).apply(this,arguments)}function Mu(E,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(E,m){return Dr(E,m)})).apply(this,arguments)}function Wn(E,m){return dc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(E,m){return Dr(E,m)})).apply(this,arguments)}function oh(E,m){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(E,m){return Dr(E,m)})).apply(this,arguments)}function Vi(E,m){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,f.Z)(function*(E,m){return Dr(E,m)})).apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",Nt(E,m))})).apply(this,arguments)}function uh(){return(uh=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",Nt(E,m))})).apply(this,arguments)}class hc extends Pt{constructor(m,_,I,A=null){super("password",I),this._email=m,this._password=_,this._tenantId=A}static _fromEmailAndPassword(m,_){return new hc(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new hc(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function sh(E,m){return oo.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ah(E,m){return Fo.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:qe(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,f.Z)(function*(){switch(I.signInMethod){case"password":return Tr(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Ui(E,m){return uh.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:qe(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function uo(E,m){return yi.apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithIdp",Nt(E,m))})).apply(this,arguments)}class Ts extends Pt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Ts(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):qe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:A}=_,F=(0,ne._T)(_,["providerId","signInMethod"]);if(!I||!A)return null;const re=new Ts(I,A);return re.idToken=F.idToken||void 0,re.accessToken=F.accessToken||void 0,re.secret=F.secret,re.nonce=F.nonce,re.pendingToken=F.pendingToken||null,re}_getIdTokenResponse(m){return uo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,uo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,uo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,$.xO)(_)}return m}}function ow(E,m){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:sendVerificationCode",Nt(E,m))})).apply(this,arguments)}function $p(){return($p=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",Nt(E,m))})).apply(this,arguments)}function Hp(){return(Hp=(0,f.Z)(function*(E,m){const _=yield Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",Nt(E,m));if(_.temporaryProof)throw kn(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const uw={USER_NOT_FOUND:"user-not-found"};function lh(){return(lh=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",Nt(E,Object.assign(Object.assign({},m),{operation:"REAUTH"})),uw)})).apply(this,arguments)}class ya extends Pt{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new ya({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new ya({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function jp(E,m){return $p.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function aw(E,m){return Hp.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function lw(E,m){return lh.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:A}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:A}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:A,temporaryProof:F}=m;return I||_||A||F?new ya({verificationId:_,verificationCode:I,phoneNumber:A,temporaryProof:F}):null}}class va{constructor(m){var _,I,A,F,re,Ve;const St=(0,$.zd)((0,$.pd)(m)),Lt=null!==(_=St.apiKey)&&void 0!==_?_:null,rn=null!==(I=St.oobCode)&&void 0!==I?I:null,Pn=function cw(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=St.mode)&&void 0!==A?A:null);Q(Lt&&rn&&Pn,"argument-error"),this.apiKey=Lt,this.operation=Pn,this.code=rn,this.continueUrl=null!==(F=St.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(re=St.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Ve=St.tenantId)&&void 0!==Ve?Ve:null}static parseLink(m){const _=function dw(E){const m=(0,$.zd)((0,$.pd)(E)).link,_=m?(0,$.zd)((0,$.pd)(m)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(E)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||_||m||E}(m);try{return new va(_)}catch(I){return null}}}let Wp=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,I){return hc._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const A=va.parseLink(I);return Q(A,"argument-error"),hc._fromEmailAndCode(_,A.code,A.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Ds{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class xu extends Ds{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Bi extends xu{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return Q("providerId"in _&&"signInMethod"in _,"argument-error"),Ts._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Q(m.idToken||m.accessToken,"argument-error"),Ts._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Bi.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Bi.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:A,pendingToken:F,nonce:re,providerId:Ve}=m;if(!I&&!A&&!_&&!F||!Ve)return null;try{return new Bi(Ve)._credential({idToken:_,accessToken:I,nonce:re,pendingToken:F})}catch(St){return null}}}let k_=(()=>{class E extends xu{constructor(){super("facebook.com")}static credential(_){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(I){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Pu=(()=>{class E extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:A}=_;if(!I&&!A)return null;try{return E.credential(I,A)}catch(F){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),fc=(()=>{class E extends xu{constructor(){super("github.com")}static credential(_){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(I){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ou extends Pt{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return uo(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,uo(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,uo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:A,pendingToken:F}=_;return I&&A&&F&&I===A?new Ou(I,F):null}static _create(m,_){return new Ou(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ea extends Ds{constructor(m){Q(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ea.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ea.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Ou.fromJSON(m);return Q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return Ou._create(I,_)}catch(A){return null}}}let L_=(()=>{class E extends xu{constructor(){super("twitter.com")}static credential(_,I){return Ts._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:A}=_;if(!I||!A)return null;try{return E.credential(I,A)}catch(F){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function pc(E,m){return ch.apply(this,arguments)}function ch(){return(ch=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signUp",Nt(E,m))})).apply(this,arguments)}class Jn{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,A=!1){return(0,f.Z)(function*(){const F=yield De._fromIdTokenResponse(m,I,A),re=ku(I);return new Jn({user:F,providerId:re,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,f.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const A=ku(I);return new Jn({user:m,providerId:A,_tokenResponse:I,operationType:_})})()}}function ku(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function hw(E){return gc.apply(this,arguments)}function gc(){return(gc=(0,f.Z)(function*(E){var m;const _=Dt(E);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new Jn({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield pc(_,{returnSecureToken:!0}),A=yield Jn._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class dh extends $.ZR{constructor(m,_,I,A){var F;super(_.code,_.message),this.operationType=I,this.user=A,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,A){return new dh(m,_,I,A)}}function zp(E,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?dh._fromErrorAndOperation(E,F,m,I):F})}function mc(E){return new Set(E.map(({providerId:m})=>m).filter(m=>!!m))}function qp(E,m){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(E,m){const _=(0,$.m9)(E);yield Lu(!0,_,m);const{providerUserInfo:I}=yield ue(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),A=mc(I||[]);return _.providerData=_.providerData.filter(F=>A.has(F.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function V_(E,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,f.Z)(function*(E,m,_=!1){const I=yield it(E,m._linkToIdToken(E.auth,yield E.getIdToken()),_);return Jn._forOperation(E,"link",I)})).apply(this,arguments)}function Lu(E,m,_){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,f.Z)(function*(E,m,_){yield gn(m);const A=!1===E?"provider-already-linked":"no-such-provider";Q(mc(m.providerData).has(_)===E,m.auth,A)})).apply(this,arguments)}function Zn(E,m){return hh.apply(this,arguments)}function hh(){return(hh=(0,f.Z)(function*(E,m,_=!1){const{auth:I}=E,A="reauthenticate";try{const F=yield it(E,zp(I,A,m,E),_);Q(F.idToken,I,"internal-error");const re=vt(F.idToken);Q(re,I,"internal-error");const{sub:Ve}=re;return Q(E.uid===Ve,I,"user-mismatch"),Jn._forOperation(E,A,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&qe(I,"user-mismatch"),F}})).apply(this,arguments)}function _c(E,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,f.Z)(function*(E,m,_=!1){const I="signIn",A=yield zp(E,I,m),F=yield Jn._fromIdTokenResponse(E,I,A);return _||(yield E._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Zr(E,m){return fh.apply(this,arguments)}function fh(){return(fh=(0,f.Z)(function*(E,m){return _c(Dt(E),m)})).apply(this,arguments)}function yc(E,m){return os.apply(this,arguments)}function os(){return(os=(0,f.Z)(function*(E,m){const _=(0,$.m9)(E);return yield Lu(!1,_,m.providerId),V_(_,m)})).apply(this,arguments)}function si(E,m){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(E,m){return Zn((0,$.m9)(E),m)})).apply(this,arguments)}function Ia(E,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,f.Z)(function*(E,m){return Yt(E,"POST","/v1/accounts:signInWithCustomToken",Nt(E,m))})).apply(this,arguments)}function Ss(E,m){return lo.apply(this,arguments)}function lo(){return(lo=(0,f.Z)(function*(E,m){const _=Dt(E),I=yield Ia(_,{token:m,returnSecureToken:!0}),A=yield Jn._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Vo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?jt._fromServerResponse(m,_):qe(m,"internal-error")}}class jt extends Vo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new jt(_)}}function Uu(E,m,_){var I;Q((null===(I=_.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),Q(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Q(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(Q(_.android.packageName.length>0,E,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Kp(E,m,_){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E),A={requestType:"PASSWORD_RESET",email:m};_&&Uu(I,A,_),yield Wn(I,A)})).apply(this,arguments)}function U_(E,m,_){return wc.apply(this,arguments)}function wc(){return(wc=(0,f.Z)(function*(E,m,_){yield mn((0,$.m9)(E),{oobCode:m,newPassword:_})})).apply(this,arguments)}function B_(E,m){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(E,m){yield cc((0,$.m9)(E),{oobCode:m})})).apply(this,arguments)}function Ue(E,m){return yn.apply(this,arguments)}function yn(){return(yn=(0,f.Z)(function*(E,m){const _=(0,$.m9)(E),I=yield mn(_,{oobCode:m}),A=I.requestType;switch(Q(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(I.mfaInfo,_,"internal-error");default:Q(I.email,_,"internal-error")}let F=null;return I.mfaInfo&&(F=Vo._fromServerResponse(Dt(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:A}})).apply(this,arguments)}function j_(E,m){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(E,m){const{data:_}=yield Ue((0,$.m9)(E),m);return _.email})).apply(this,arguments)}function Ic(E,m,_){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(E,m,_){const I=Dt(E),A=yield pc(I,{returnSecureToken:!0,email:m,password:_}),F=yield Jn._fromIdTokenResponse(I,"signIn",A);return yield I._updateCurrentUser(F.user),F})).apply(this,arguments)}function ji(E,m,_){return Zr((0,$.m9)(E),Wp.credential(m,_))}function gh(E,m,_){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E),A={requestType:"EMAIL_SIGNIN",email:m};Q(_.handleCodeInApp,I,"argument-error"),_&&Uu(I,A,_),yield oh(I,A)})).apply(this,arguments)}function fw(E,m){const _=va.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Zp(E,m,_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E),A=Wp.credentialWithLink(m,_||he());return Q(A._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Zr(I,A)})).apply(this,arguments)}function Cc(E,m){return Or.apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:createAuthUri",Nt(E,m))})).apply(this,arguments)}function As(E,m){return bc.apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(E,m){const I={identifier:m,continueUri:We()?he():"http://localhost"},{signinMethods:A}=yield Cc((0,$.m9)(E),I);return A||[]})).apply(this,arguments)}function ba(E,m){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(E,m){const _=(0,$.m9)(E),A={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};m&&Uu(_.auth,A,m);const{email:F}=yield Mu(_.auth,A);F!==E.email&&(yield E.reload())})).apply(this,arguments)}function $_(E,m,_){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:m};_&&Uu(I.auth,F,_);const{email:re}=yield Vi(I.auth,F);re!==E.email&&(yield E.reload())})).apply(this,arguments)}function H_(E,m){return mh.apply(this,arguments)}function mh(){return(mh=(0,f.Z)(function*(E,m){return Ge(E,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function _h(E,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(E,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,$.m9)(E),F={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},re=yield it(I,H_(I.auth,F));I.displayName=re.displayName||null,I.photoURL=re.photoUrl||null;const Ve=I.providerData.find(({providerId:St})=>"password"===St);Ve&&(Ve.displayName=I.displayName,Ve.photoURL=I.photoURL),yield I._updateTokensIfNecessary(re)})).apply(this,arguments)}function G_(E,m){return W_((0,$.m9)(E),m,null)}function yh(E,m){return W_((0,$.m9)(E),null,m)}function W_(E,m,_){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(E,m,_){const{auth:I}=E,F={idToken:yield E.getIdToken(),returnSecureToken:!0};m&&(F.email=m),_&&(F.password=_);const re=yield it(E,Tr(I,F));yield E._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Bo{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class vh extends Bo{constructor(m,_,I,A){super(m,_,I),this.username=A}}class z_ extends Bo{constructor(m,_){super(m,"facebook.com",_)}}class q_ extends vh{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class $u extends Bo{constructor(m,_){super(m,"google.com",_)}}class co extends vh{constructor(m,_,I){super(m,"twitter.com",_,I)}}function K_(E){const{user:m,_tokenResponse:_}=E;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ju(E){var m,_;if(!E)return null;const{providerId:I}=E,A=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},F=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&(null==E?void 0:E.idToken)){const re=null===(_=null===(m=vt(E.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(re)return new Bo(F,"anonymous"!==re&&"custom"!==re?re:null)}if(!I)return null;switch(I){case"facebook.com":return new z_(F,A);case"github.com":return new q_(F,A);case"google.com":return new $u(F,A);case"twitter.com":return new co(F,A,E.screenName||null);case"custom":case"anonymous":return new Bo(F,null);default:return new Bo(F,I,A)}}(_)}function ir(E,m,_,I){return(0,$.m9)(E).onAuthStateChanged(m,_,I)}class jo{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new jo("enroll",m)}static _fromMfaPendingCredential(m){return new jo("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return jo._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(I=m.multiFactorSession)||void 0===I?void 0:I.idToken)return jo._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Hu{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=Dt(m),A=_.customData._serverResponse,F=(A.mfaInfo||[]).map(Ve=>Vo._fromServerResponse(I,Ve));Q(A.mfaPendingCredential,I,"internal-error");const re=jo._fromMfaPendingCredential(A.mfaPendingCredential);return new Hu(re,F,function(){var Ve=(0,f.Z)(function*(St){const Lt=yield St._process(I,re);delete A.mfaInfo,delete A.mfaPendingCredential;const rn=Object.assign(Object.assign({},A),{idToken:Lt.idToken,refreshToken:Lt.refreshToken});switch(_.operationType){case"signIn":const Pn=yield Jn._fromIdTokenResponse(I,_.operationType,rn);return yield I._updateCurrentUser(Pn.user),Pn;case"reauthenticate":return Q(_.user,I,"internal-error"),Jn._forOperation(_.user,_.operationType,rn);default:qe(I,"internal-error")}});return function(St){return Ve.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,f.Z)(function*(){return _.signInResolver(m)})()}}function Eh(E,m){var _;const I=(0,$.m9)(E),A=m;return Q(m.customData.operationType,I,"argument-error"),Q(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Hu._fromError(I,A)}function wh(E,m){return Ge(E,"POST","/v2/accounts/mfaEnrollment:start",Nt(E,m))}class Qp{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Vo._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Qp(m)}getSession(){var m=this;return(0,f.Z)(function*(){return jo._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var I=this;return(0,f.Z)(function*(){const A=m,F=yield I.getSession(),re=yield it(I.user,A._process(I.user.auth,F,_));return yield I.user._updateTokensIfNecessary(re),I.user.reload()})()}unenroll(m){var _=this;return(0,f.Z)(function*(){const I="string"==typeof m?m:m.uid,A=yield _.user.getIdToken(),F=yield it(_.user,function Z_(E,m){return Ge(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(E,m))}(_.user.auth,{idToken:A,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:re})=>re!==I),yield _.user._updateTokensIfNecessary(F);try{yield _.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Ms=new WeakMap;function Sc(E){const m=(0,$.m9)(E);return Ms.has(m)||Ms.set(m,Qp._fromUser(m)),Ms.get(m)}const Ch="__sak";class Y_{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const ur=(()=>{class E extends Y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ac(){const E=(0,$.z$)();return j(E)||zt(E)}()&&function fe(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=q(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const A=this.storage.getItem(I),F=this.localCache[I];A!==F&&_(I,F,A)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Ve,St,Lt)=>{this.notifyListeners(Ve,Lt)});const A=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ve=this.storage.getItem(A);if(_.newValue!==Ve)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!I)return}const F=()=>{const Ve=this.storage.getItem(A);!I&&this.localCache[A]===Ve||this.notifyListeners(A,Ve)},re=this.storage.getItem(A);!function ln(){return(0,$.w1)()&&10===document.documentMode}()||re===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,I){this.localCache[_]=I;const A=this.listeners[_];if(A)for(const F of Array.from(A))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var A=()=>super._set,F=this;return(0,f.Z)(function*(){yield A().call(F,_,I),F.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,A=this;return(0,f.Z)(function*(){const F=yield I().call(A,_);return A.localCache[_]=JSON.stringify(F),F})()}_remove(_){var I=()=>super._remove,A=this;return(0,f.Z)(function*(){yield I().call(A,_),delete A.localCache[_]})()}}return E.type="LOCAL",E})(),Ot=(()=>{class E extends Y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return E.type="SESSION",E})();let ai=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(F=>F.isListeningto(_));if(I)return I;const A=new E(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,f.Z)(function*(){const A=_,{eventId:F,eventType:re,data:Ve}=A.data,St=I.handlersMap[re];if(!(null==St?void 0:St.size))return;A.ports[0].postMessage({status:"ack",eventId:F,eventType:re});const Lt=Array.from(St).map(function(){var Pn=(0,f.Z)(function*(Ls){return Ls(A.origin,Ve)});return function(Ls){return Pn.apply(this,arguments)}}()),rn=yield function as(E){return Promise.all(E.map(function(){var m=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(Lt);A.ports[0].postMessage({status:"done",eventId:F,eventType:re,response:rn})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function kr(E="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return E+_}class Xp{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var A=this;return(0,f.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let re,Ve;return new Promise((St,Lt)=>{const rn=kr("",20);F.port1.start();const Pn=setTimeout(()=>{Lt(new Error("unsupported_event"))},I);Ve={messageChannel:F,onMessage(Ls){const vi=Ls;if(vi.data.eventId===rn)switch(vi.data.status){case"ack":clearTimeout(Pn),re=setTimeout(()=>{Lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),St(vi.data.response);break;default:clearTimeout(Pn),clearTimeout(re),Lt(new Error("invalid_response"))}}},A.handlers.add(Ve),F.port1.addEventListener("message",Ve.onMessage),A.target.postMessage({eventType:m,eventId:rn,data:_},[F.port2])}).finally(()=>{Ve&&A.removeMessageHandler(Ve)})})()}}function _r(){return window}function bh(){return void 0!==_r().WorkerGlobalScope&&"function"==typeof _r().importScripts}function Gu(){return(Gu=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Th="firebaseLocalStorageDb",Wu="firebaseLocalStorage",Dh="fbase_key";class tr{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Sa(E,m){return E.transaction([Wu],m?"readwrite":"readonly").objectStore(Wu)}function Aa(){const E=indexedDB.open(Th,1);return new Promise((m,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(Wu,{keyPath:Dh})}catch(A){_(A)}}),E.addEventListener("success",(0,f.Z)(function*(){const I=E.result;I.objectStoreNames.contains(Wu)?m(I):(I.close(),yield function Sh(){const E=indexedDB.deleteDatabase(Th);return new tr(E).toPromise()}(),m(yield Aa()))}))})}function Ra(E,m,_){return zu.apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(E,m,_){const I=Sa(E,!0).put({[Dh]:m,value:_});return new tr(I).toPromise()})).apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(E,m){const _=Sa(E,!1).get(m),I=yield new tr(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ma(E,m){const _=Sa(E,!0).delete(m);return new tr(_).toPromise()}const Ns=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Aa()),_.db})()}_withRetries(_){var I=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const F=yield I._openDb();return yield _(F)}catch(F){if(A++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return bh()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=ai._getInstance(function an(){return bh()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,f.Z)(function*(A,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(A,F){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,f.Z)(function*(A,F){return["keyChanged"]});return function(A,F){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var I,A;if(_.activeServiceWorker=yield function $o(){return Gu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Xp(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(I=F[0])||void 0===I?void 0:I.fulfilled)&&(null===(A=F[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,f.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function ho(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Aa();return yield Ra(_,Ch,"1"),yield Ma(_,Ch),!0}catch(_){}return!1})()}_withPendingWrite(_){var I=this;return(0,f.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(F=>Ra(F,_,I)),A.localCache[_]=I,A.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,f.Z)(function*(){const A=yield I._withRetries(F=>function qu(E,m){return Mc.apply(this,arguments)}(F,_));return I.localCache[_]=A,A})()}_remove(_){var I=this;return(0,f.Z)(function*(){return I._withPendingWrite((0,f.Z)(function*(){return yield I._withRetries(A=>Ma(A,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const I=yield _._withRetries(re=>{const Ve=Sa(re,!1).getAll();return new tr(Ve).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const A=[],F=new Set;for(const{fbase_key:re,value:Ve}of I)F.add(re),JSON.stringify(_.localCache[re])!==JSON.stringify(Ve)&&(_.notifyListeners(re,Ve),A.push(re));for(const re of Object.keys(_.localCache))_.localCache[re]&&!F.has(re)&&(_.notifyListeners(re,null),A.push(re));return A})()}notifyListeners(_,I){this.localCache[_]=I;const A=this.listeners[_];if(A)for(const F of Array.from(A))F(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function Na(E,m){return Ge(E,"POST","/v2/accounts/mfaSignIn:start",Nt(E,m))}function Br(){return(Br=(0,f.Z)(function*(E){return(yield Ge(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rh(E){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=m,I.onerror=A=>{const F=Ne("internal-error");F.customData=A,_(F)},I.type="text/javascript",I.charset="UTF-8",function Ho(){var E,m;return null!==(m=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==m?m:document}().appendChild(I)})}function yr(E){return`__${E}${Math.floor(1e6*Math.random())}`}const xs=1e12;class ls{constructor(m){this.auth=m,this.counter=xs,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Ai(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||xs;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||xs))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,f.Z)(function*(){var I;return null===(I=_._widgets.get(m||xs))||void 0===I||I.execute(),""})()}}class Ai{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof m?document.getElementById(m):m;Q(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function cs(E){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nr=yr("rcb"),Nc=new Be(3e4,6e4);class lr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!_r().grecaptcha}load(m,_=""){return Q(function X_(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(_r().grecaptcha):new Promise((I,A)=>{const F=_r().setTimeout(()=>{A(Ne(m,"network-request-failed"))},Nc.get());_r()[nr]=()=>{_r().clearTimeout(F),delete _r()[nr];const Ve=_r().grecaptcha;if(!Ve)return void A(Ne(m,"internal-error"));const St=Ve.render;Ve.render=(Lt,rn)=>{const Pn=St(Lt,rn);return this.counter++,Pn},this.hostLanguage=_,I(Ve)},Rh(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:nr,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),A(Ne(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!_r().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ey{load(m){return(0,f.Z)(function*(){return new ls(m)})()}clearedOneInstance(){}}const ty="recaptcha",Pa={theme:"light",type:"image"};class Ri{constructor(m,_=Object.assign({},Pa),I){this.parameters=_,this.type=ty,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dt(I),this.isInvisible="invisible"===this.parameters.size,Q("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof m?document.getElementById(m):m;Q(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ey:new lr,this.validateStartingState()}verify(){var m=this;return(0,f.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(F=>{const re=Ve=>{!Ve||(m.tokenChangeListeners.delete(re),F(Ve))};m.tokenChangeListeners.add(re),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=_r()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,f.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,f.Z)(function*(){Q(We()&&!bh(),m.auth,"internal-error"),yield function gw(){let E=null;return new Promise(m=>{"complete"!==document.readyState?(E=()=>m(),window.addEventListener("load",E)):m()}).catch(m=>{throw E&&window.removeEventListener("load",E),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ah(E){return Br.apply(this,arguments)}(m.auth);Q(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ds{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=ya._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Go(E,m,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(E,m,_){const I=Dt(E),A=yield xc(I,m,(0,$.m9)(_));return new ds(A,F=>Zr(I,F))})).apply(this,arguments)}function vr(E,m,_){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E);yield Lu(!1,I,"phone");const A=yield xc(I.auth,m,(0,$.m9)(_));return new ds(A,F=>yc(I,F))})).apply(this,arguments)}function Qu(E,m,_){return ng.apply(this,arguments)}function ng(){return(ng=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E),A=yield xc(I.auth,m,(0,$.m9)(_));return new ds(A,F=>si(I,F))})).apply(this,arguments)}function xc(E,m,_){return ui.apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(E,m,_){var I;const A=yield _.verify();try{let F;if(Q("string"==typeof A,E,"argument-error"),Q(_.type===ty,E,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const re=F.session;if("phoneNumber"in F)return Q("enroll"===re.type,E,"internal-error"),(yield wh(E,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Q("signin"===re.type,E,"internal-error");const Ve=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return Q(Ve,E,"missing-multi-factor-info"),(yield Na(E,{mfaPendingCredential:re.credential,mfaEnrollmentId:Ve,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield ow(E,{phoneNumber:F.phoneNumber,recaptchaToken:A});return re}}finally{_._reset()}})).apply(this,arguments)}function hs(E,m){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,f.Z)(function*(E,m){yield V_((0,$.m9)(E),m)})).apply(this,arguments)}let Xu=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Dt(_)}verifyPhoneNumber(_,I){return xc(this.auth,_,(0,$.m9)(I))}static credential(_,I){return ya._fromVerification(_,I)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:A}=_;return I&&A?ya._fromTokenResponse(I,A):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Hi(E,m){return m?ie(m):(Q(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Pc extends Pt{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return uo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return uo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return uo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function ny(E){return _c(E.auth,new Pc(E),E.bypassAuthState)}function rg(E){const{auth:m,user:_}=E;return Q(_,m,"internal-error"),Zn(_,new Pc(E),E.bypassAuthState)}function ry(E){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(E){const{auth:m,user:_}=E;return Q(_,m,"internal-error"),V_(_,new Pc(E),E.bypassAuthState)})).apply(this,arguments)}class Nh{constructor(m,_,I,A,F=!1){this.auth=m,this.resolver=I,this.user=A,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,f.Z)(function*(I,A){m.pendingPromise={resolve:I,reject:A};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(I,A){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,f.Z)(function*(){const{urlResponse:I,sessionId:A,postBody:F,tenantId:re,error:Ve,type:St}=m;if(Ve)return void _.reject(Ve);const Lt={auth:_.auth,requestUri:I,sessionId:A,tenantId:re||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(St)(Lt))}catch(rn){_.reject(rn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return ny;case"linkViaPopup":case"linkViaRedirect":return ry;case"reauthViaPopup":case"reauthViaRedirect":return rg;default:qe(this.auth,"internal-error")}}resolve(m){st(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){st(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fr=new Be(2e3,1e4);function Oc(E,m,_){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(E,m,_){const I=Dt(E);Ee(E,m,Ds);const A=Hi(I,_);return new Fc(I,"signInViaPopup",m,A).executeNotNull()})).apply(this,arguments)}function mw(E,m,_){return kc.apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E);Ee(I.auth,m,Ds);const A=Hi(I.auth,_);return new Fc(I.auth,"reauthViaPopup",m,A,I).executeNotNull()})).apply(this,arguments)}function iy(E,m,_){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E);Ee(I.auth,m,Ds);const A=Hi(I.auth,_);return new Fc(I.auth,"linkViaPopup",m,A,I).executeNotNull()})).apply(this,arguments)}let Fc=(()=>{class E extends Nh{constructor(_,I,A,F,re){super(_,I,F,re),this.provider=A,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const I=yield _.execute();return Q(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,f.Z)(function*(){st(1===_.filter.length,"Popup operations only handle one event");const I=kr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Ne(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,A;this.pollId=(null===(A=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Fr.get())};_()}}return E.currentPopupAction=null,E})();const el=new Map;class sy extends Nh{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,f.Z)(function*(){let I=el.get(_.auth._key());if(!I){try{const F=(yield function Sr(E,m){return ei.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(F)}catch(A){I=()=>Promise.reject(A)}el.set(_.auth._key(),I)}return _.bypassAuthState||el.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,f.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const A=yield I.auth._redirectUserForId(m.eventId);if(A)return I.user=A,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ei(){return(ei=(0,f.Z)(function*(E,m){const _=og(m),I=ka(E);if(!(yield I._isAvailable()))return!1;const A="true"===(yield I._get(_));return yield I._remove(_),A})).apply(this,arguments)}function sg(E,m){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(E,m){return ka(E)._set(og(m),"true")})).apply(this,arguments)}function Lc(){el.clear()}function ka(E){return ie(E._redirectPersistence)}function og(E){return H("pendingRedirect",E.config.apiKey,E.name)}function ag(E,m,_){return function oy(E,m,_){return tl.apply(this,arguments)}(E,m,_)}function tl(){return(tl=(0,f.Z)(function*(E,m,_){const I=Dt(E);Ee(E,m,Ds);const A=Hi(I,_);return yield sg(A,I),A._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function ug(E,m,_){return function fo(E,m,_){return ps.apply(this,arguments)}(E,m,_)}function ps(){return(ps=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E);Ee(I.auth,m,Ds);const A=Hi(I.auth,_);yield sg(A,I.auth);const F=yield lg(I);return A._openRedirect(I.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function vn(E,m,_){return function cr(E,m,_){return Vc.apply(this,arguments)}(E,m,_)}function Vc(){return(Vc=(0,f.Z)(function*(E,m,_){const I=(0,$.m9)(E);Ee(I.auth,m,Ds);const A=Hi(I.auth,_);yield Lu(!1,I,m.providerId),yield sg(A,I.auth);const F=yield lg(I);return A._openRedirect(I.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function zo(E,m){return nl.apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(E,m){return yield Dt(E)._initializationPromise,po(E,m,!1)})).apply(this,arguments)}function po(E,m){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,f.Z)(function*(E,m,_=!1){const I=Dt(E),A=Hi(I,m),re=yield new sy(I,A,_).execute();return re&&!_&&(delete re.user._redirectEventId,yield I._persistUserIfCurrent(re.user),yield I._setRedirectUser(null,m)),re})).apply(this,arguments)}function lg(E){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(E){const m=kr(`${E.uid}:::`);return E._redirectEventId=m,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),m})).apply(this,arguments)}class qo{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function xh(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Va(E);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Va(m)){const A=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Ne(this.auth,A))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(La(m))}saveEventToCache(m){this.cachedEventUids.add(La(m)),this.lastProcessedEventTime=Date.now()}}function La(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(m=>m).join("-")}function Va({type:E,error:m}){return"unknown"===E&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Ua(E){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,f.Z)(function*(E,m={}){return Ge(E,"GET","/v1/projects",m)})).apply(this,arguments)}const rl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cg=/^https?/;function Ph(){return(Ph=(0,f.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:m}=yield Ua(E);for(const _ of m)try{if(Ps(_))return}catch(I){}qe(E,"unauthorized-domain")})).apply(this,arguments)}function Ps(E){const m=he(),{protocol:_,hostname:I}=new URL(m);if(E.startsWith("chrome-extension://")){const re=new URL(E);return""===re.hostname&&""===I?"chrome-extension:"===_&&E.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&re.hostname===I}if(!cg.test(_))return!1;if(rl.test(E))return I===E;const A=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(I)}const il=new Be(3e4,6e4);function dg(){const E=_r().___jsl;if(null==E?void 0:E.H)for(const m of Object.keys(E.H))if(E.H[m].r=E.H[m].r||[],E.H[m].L=E.H[m].L||[],E.H[m].r=[...E.H[m].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let sl=null;function uy(E){return sl=sl||function _w(E){return new Promise((m,_)=>{var I,A,F;function re(){dg(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{dg(),_(Ne(E,"network-request-failed"))},timeout:il.get()})}if(null===(A=null===(I=_r().gapi)||void 0===I?void 0:I.iframes)||void 0===A?void 0:A.Iframe)m(gapi.iframes.getContext());else{if(!(null===(F=_r().gapi)||void 0===F?void 0:F.load)){const Ve=yr("iframefcb");return _r()[Ve]=()=>{gapi.load?re():_(Ne(E,"network-request-failed"))},Rh(`https://apis.google.com/js/api.js?onload=${Ve}`).catch(St=>_(St))}re()}}).catch(m=>{throw sl=null,m})}(E),sl}const ly=new Be(5e3,15e3),Os={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ks=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bc(E){const m=E.config;Q(m.authDomain,E,"auth-domain-config-required");const _=m.emulator?pn(m,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:E.name,v:O.SDK_VERSION},A=ks.get(E.config.apiHost);A&&(I.eid=A);const F=E._getFrameworks();return F.length&&(I.fw=F.join(",")),`${_}?${(0,$.xO)(I).slice(1)}`}function Fh(){return Fh=(0,f.Z)(function*(E){const m=yield uy(E),_=_r().gapi;return Q(_,E,"internal-error"),m.open({where:document.body,url:Bc(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Os,dontclear:!0},I=>new Promise(function(){var A=(0,f.Z)(function*(F,re){yield I.restyle({setHideOnLeave:!1});const Ve=Ne(E,"network-request-failed"),St=_r().setTimeout(()=>{re(Ve)},ly.get());function Lt(){_r().clearTimeout(St),F(I)}I.ping(Lt).then(Lt,()=>{re(Ve)})});return function(F,re){return A.apply(this,arguments)}}()))}),Fh.apply(this,arguments)}const ja={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ol{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function Zo(E,m,_,I,A,F){Q(E.config.authDomain,E,"auth-domain-config-required"),Q(E.config.apiKey,E,"invalid-api-key");const re={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:I,v:O.SDK_VERSION,eventId:A};if(m instanceof Ds){m.setDefaultLanguage(E.languageCode),re.providerId=m.providerId||"",(0,$.xb)(m.getCustomParameters())||(re.customParameters=JSON.stringify(m.getCustomParameters()));for(const[St,Lt]of Object.entries(F||{}))re[St]=Lt}if(m instanceof xu){const St=m.getScopes().filter(Lt=>""!==Lt);St.length>0&&(re.scopes=St.join(","))}E.tenantId&&(re.tid=E.tenantId);const Ve=re;for(const St of Object.keys(Ve))void 0===Ve[St]&&delete Ve[St];return`${function hy({config:E}){return E.emulator?pn(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,$.xO)(Ve).slice(1)}`}const Bh="webStorageSupport",Fs=class mo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ot,this._completeRedirectFn=po}_openPopup(m,_,I,A){var F=this;return(0,f.Z)(function*(){var re;st(null===(re=F.eventManagers[m._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Ve=Zo(m,_,I,he(),A);return function Vh(E,m,_,I=500,A=600){const F=Math.max((window.screen.availHeight-A)/2,0).toString(),re=Math.max((window.screen.availWidth-I)/2,0).toString();let Ve="";const St=Object.assign(Object.assign({},ja),{width:I.toString(),height:A.toString(),top:F,left:re}),Lt=(0,$.z$)().toLowerCase();_&&(Ve=ce(Lt)?"_blank":_),k(Lt)&&(m=m||"http://localhost",St.scrollbars="yes");const rn=Object.entries(St).reduce((Ls,[vi,Ha])=>`${Ls}${vi}=${Ha},`,"");if(function br(E=(0,$.z$)()){var m;return zt(E)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Lt)&&"_self"!==Ve)return function $c(E,m){const _=document.createElement("a");_.href=E,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",Ve),new ol(null);const Pn=window.open(m||"",Ve,rn);Q(Pn,E,"popup-blocked");try{Pn.focus()}catch(Ls){}return new ol(Pn)}(m,Ve,kr())})()}_openRedirect(m,_,I,A){var F=this;return(0,f.Z)(function*(){return yield F._originValidation(m),function Da(E){_r().location.href=E}(Zo(m,_,I,he(),A)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:A,promise:F}=this.eventManagers[_];return A?Promise.resolve(A):(st(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,f.Z)(function*(){const I=yield function Ko(E){return Fh.apply(this,arguments)}(m),A=new qo(m);return I.register("authEvent",F=>(Q(null==F?void 0:F.authEvent,m,"invalid-auth-event"),{status:A.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:A},_.iframes[m._key()]=I,A})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Bh,{type:Bh},A=>{var F;const re=null===(F=null==A?void 0:A[0])||void 0===F?void 0:F[Bh];void 0!==re&&_(!!re),qe(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ay(E){return Ph.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return q()||j()||zt()}};class Hc extends class al{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return et("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Hc(m)}_finalizeEnroll(m,_,I){return function Ih(E,m){return Ge(E,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(E,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function xa(E,m){return Ge(E,"POST","/v2/accounts/mfaSignIn:finalize",Nt(E,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fy=(()=>{class E{constructor(){}static assertion(_){return Hc._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var hg="@firebase/auth",py="0.19.12";class fg{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{var A;m((null===(A=I)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function my(E=(0,O.getApp)()){const m=(0,O._getProvider)(E,"auth");return m.isInitialized()?m.getImmediate():function oe(E,m){const _=(0,O._getProvider)(E,"auth");if(_.isInitialized()){const A=_.getImmediate(),F=_.getOptions();if((0,$.vZ)(F,null!=m?m:{}))return A;qe(A,"already-initialized")}return _.initialize({options:m})}(E,{popupRedirectResolver:Fs,persistence:[Ns,ur,Ot]})}!function gy(E){(0,O._registerComponent)(new we.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),A=m.getProvider("heartbeat"),{apiKey:F,authDomain:re}=I.options;return((Ve,St)=>{Q(F&&!F.includes(":"),"invalid-api-key",{appName:Ve.name}),Q(!(null==re?void 0:re.includes(":")),"argument-error",{appName:Ve.name});const Lt={apiKey:F,authDomain:re,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ye(E)},rn=new Et(Ve,St,Lt);return function Te(E,m){const _=(null==m?void 0:m.persistence)||[],I=(Array.isArray(_)?_:[_]).map(ie);(null==m?void 0:m.errorMap)&&E._updateErrorMap(m.errorMap),E._initializeWithPersistence(I,null==m?void 0:m.popupRedirectResolver)}(rn,_),rn})(I,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new we.wA("auth-internal",m=>{const _=Dt(m.getProvider("auth").getImmediate());return new fg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(hg,py,function pg(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,O.registerVersion)(hg,py,"esm2017")}("Browser")},2090:(Rt,xe,N)=>{N.d(xe,{BH:()=>Oe,LL:()=>We,ZR:()=>he,gQ:()=>Qn,zI:()=>ie,hu:()=>O,g5:()=>ne,US:()=>ae,tV:()=>z,h$:()=>le,L:()=>_e,$s:()=>Kn,r3:()=>Ge,Sg:()=>Pe,ne:()=>Se,p$:()=>G,vZ:()=>Yt,ZB:()=>Z,Lj:()=>ge,gK:()=>$t,pd:()=>kn,m9:()=>bt,z$:()=>Le,GJ:()=>Nt,jU:()=>rt,ru:()=>qe,d:()=>Me,xb:()=>pt,w1:()=>Ee,hl:()=>st,uI:()=>me,UG:()=>be,Yr:()=>Q,b$:()=>Ne,G6:()=>et,Mn:()=>Ze,w9:()=>Vt,cI:()=>Ft,UI:()=>Bt,X3:()=>Y,xO:()=>Mn,zd:()=>Nn,DV:()=>ht,ug:()=>gt,dS:()=>vt,Pz:()=>Be,eu:()=>se});var f=N(5861);const O=function(U,x){if(!U)throw ne(x)},ne=function(U){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+U)},pe=function(U){const x=[];let H=0;for(let X=0;X<U.length;X++){let M=U.charCodeAt(X);M<128?x[H++]=M:M<2048?(x[H++]=M>>6|192,x[H++]=63&M|128):55296==(64512&M)&&X+1<U.length&&56320==(64512&U.charCodeAt(X+1))?(M=65536+((1023&M)<<10)+(1023&U.charCodeAt(++X)),x[H++]=M>>18|240,x[H++]=M>>12&63|128,x[H++]=M>>6&63|128,x[H++]=63&M|128):(x[H++]=M>>12|224,x[H++]=M>>6&63|128,x[H++]=63&M|128)}return x},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,x){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,X=[];for(let M=0;M<U.length;M+=3){const k=U[M],j=M+1<U.length,ce=j?U[M+1]:0,ze=M+2<U.length,tt=ze?U[M+2]:0;let zt=(15&ce)<<2|tt>>6,xn=63&tt;ze||(xn=64,j||(zt=64)),X.push(H[k>>2],H[(3&k)<<4|ce>>4],H[zt],H[xn])}return X.join("")},encodeString(U,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(U):this.encodeByteArray(pe(U),x)},decodeString(U,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(U):function(U){const x=[];let H=0,X=0;for(;H<U.length;){const M=U[H++];if(M<128)x[X++]=String.fromCharCode(M);else if(M>191&&M<224){const k=U[H++];x[X++]=String.fromCharCode((31&M)<<6|63&k)}else if(M>239&&M<365){const ze=((7&M)<<18|(63&U[H++])<<12|(63&U[H++])<<6|63&U[H++])-65536;x[X++]=String.fromCharCode(55296+(ze>>10)),x[X++]=String.fromCharCode(56320+(1023&ze))}else{const k=U[H++],j=U[H++];x[X++]=String.fromCharCode((15&M)<<12|(63&k)<<6|63&j)}}return x.join("")}(this.decodeStringToByteArray(U,x))},decodeStringToByteArray(U,x){this.init_();const H=x?this.charToByteMapWebSafe_:this.charToByteMap_,X=[];for(let M=0;M<U.length;){const k=H[U.charAt(M++)],ce=M<U.length?H[U.charAt(M)]:0;++M;const tt=M<U.length?H[U.charAt(M)]:64;++M;const mt=M<U.length?H[U.charAt(M)]:64;if(++M,null==k||null==ce||null==tt||null==mt)throw Error();X.push(k<<2|ce>>4),64!==tt&&(X.push(ce<<4&240|tt>>2),64!==mt&&X.push(tt<<6&192|mt))}return X},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},le=function(U){const x=pe(U);return ae.encodeByteArray(x,!0)},_e=function(U){return le(U).replace(/\./g,"")},z=function(U){try{return ae.decodeString(U,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function G(U){return Z(void 0,U)}function Z(U,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return x}for(const H in x)!x.hasOwnProperty(H)||!$e(H)||(U[H]=Z(U[H],x[H]));return U}function $e(U){return"__proto__"!==U}class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((x,H)=>{this.resolve=x,this.reject=H})}wrapCallback(x){return(H,X)=>{H?this.reject(H):this.resolve(X),"function"==typeof x&&(this.promise.catch(()=>{}),1===x.length?x(H):x(H,X))}}}function Pe(U,x){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const X=x||"demo-project",M=U.iat||0,k=U.sub||U.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const j=Object.assign({iss:`https://securetoken.google.com/${X}`,aud:X,iat:M,exp:M+3600,auth_time:M,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},U);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(j)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function rt(){return"object"==typeof self&&self.self===self}function qe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Le().indexOf("Electron/")>=0}function Ee(){const U=Le();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ze(){return Le().indexOf("MSAppHost/")>=0}function Q(){return!1}function et(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function st(){return"object"==typeof indexedDB}function se(){return new Promise((U,x)=>{try{let H=!0;const X="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(X);M.onsuccess=()=>{M.result.close(),H||self.indexedDB.deleteDatabase(X),U(!0)},M.onupgradeneeded=()=>{H=!1},M.onerror=()=>{var k;x((null===(k=M.error)||void 0===k?void 0:k.message)||"")}}catch(H){x(H)}})}function ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class he extends Error{constructor(x,H,X){super(H),this.code=x,this.customData=X,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(x,H,X){this.service=x,this.serviceName=H,this.errors=X}create(x,...H){const X=H[0]||{},M=`${this.service}/${x}`,k=this.errors[x],j=k?function It(U,x){return U.replace(Ut,(H,X)=>{const M=x[X];return null!=M?String(M):`<${X}?>`})}(k,X):"Error";return new he(M,`${this.serviceName}: ${j} (${M}).`,X)}}const Ut=/\{\$([^}]+)}/g;function Ft(U){return JSON.parse(U)}function Be(U){return JSON.stringify(U)}const pn=function(U){let x={},H={},X={},M="";try{const k=U.split(".");x=Ft(z(k[0])||""),H=Ft(z(k[1])||""),M=k[2],X=H.d||{},delete H.d}catch(k){}return{header:x,claims:H,data:X,signature:M}},Vt=function(U){const H=pn(U).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},Nt=function(U){const x=pn(U).claims;return"object"==typeof x&&!0===x.admin};function Ge(U,x){return Object.prototype.hasOwnProperty.call(U,x)}function ht(U,x){if(Object.prototype.hasOwnProperty.call(U,x))return U[x]}function pt(U){for(const x in U)if(Object.prototype.hasOwnProperty.call(U,x))return!1;return!0}function Bt(U,x,H){const X={};for(const M in U)Object.prototype.hasOwnProperty.call(U,M)&&(X[M]=x.call(H,U[M],M,U));return X}function Yt(U,x){if(U===x)return!0;const H=Object.keys(U),X=Object.keys(x);for(const M of H){if(!X.includes(M))return!1;const k=U[M],j=x[M];if(dn(k)&&dn(j)){if(!Yt(k,j))return!1}else if(k!==j)return!1}for(const M of X)if(!H.includes(M))return!1;return!0}function dn(U){return null!==U&&"object"==typeof U}function Mn(U){const x=[];for(const[H,X]of Object.entries(U))Array.isArray(X)?X.forEach(M=>{x.push(encodeURIComponent(H)+"="+encodeURIComponent(M))}):x.push(encodeURIComponent(H)+"="+encodeURIComponent(X));return x.length?"&"+x.join("&"):""}function Nn(U){const x={};return U.replace(/^\?/,"").split("&").forEach(X=>{if(X){const[M,k]=X.split("=");x[decodeURIComponent(M)]=decodeURIComponent(k)}}),x}function kn(U){const x=U.indexOf("?");if(!x)return"";const H=U.indexOf("#",x);return U.substring(x,H>0?H:void 0)}class Qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let x=1;x<this.blockSize;++x)this.pad_[x]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(x,H){H||(H=0);const X=this.W_;if("string"==typeof x)for(let mt=0;mt<16;mt++)X[mt]=x.charCodeAt(H)<<24|x.charCodeAt(H+1)<<16|x.charCodeAt(H+2)<<8|x.charCodeAt(H+3),H+=4;else for(let mt=0;mt<16;mt++)X[mt]=x[H]<<24|x[H+1]<<16|x[H+2]<<8|x[H+3],H+=4;for(let mt=16;mt<80;mt++){const zt=X[mt-3]^X[mt-8]^X[mt-14]^X[mt-16];X[mt]=4294967295&(zt<<1|zt>>>31)}let tt,Mt,M=this.chain_[0],k=this.chain_[1],j=this.chain_[2],ce=this.chain_[3],ze=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?(tt=ce^k&(j^ce),Mt=1518500249):(tt=k^j^ce,Mt=1859775393):mt<60?(tt=k&j|ce&(k|j),Mt=2400959708):(tt=k^j^ce,Mt=3395469782);const zt=(M<<5|M>>>27)+tt+ze+Mt+X[mt]&4294967295;ze=ce,ce=j,j=4294967295&(k<<30|k>>>2),k=M,M=zt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+k&4294967295,this.chain_[2]=this.chain_[2]+j&4294967295,this.chain_[3]=this.chain_[3]+ce&4294967295,this.chain_[4]=this.chain_[4]+ze&4294967295}update(x,H){if(null==x)return;void 0===H&&(H=x.length);const X=H-this.blockSize;let M=0;const k=this.buf_;let j=this.inbuf_;for(;M<H;){if(0===j)for(;M<=X;)this.compress_(x,M),M+=this.blockSize;if("string"==typeof x){for(;M<H;)if(k[j]=x.charCodeAt(M),++j,++M,j===this.blockSize){this.compress_(k),j=0;break}}else for(;M<H;)if(k[j]=x[M],++j,++M,j===this.blockSize){this.compress_(k),j=0;break}}this.inbuf_=j,this.total_+=H}digest(){const x=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&H,H/=256;this.compress_(this.buf_);let X=0;for(let M=0;M<5;M++)for(let k=24;k>=0;k-=8)x[X]=this.chain_[M]>>k&255,++X;return x}}function Se(U,x){const H=new ue(U,x);return H.subscribe.bind(H)}class ue{constructor(x,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{x(this)}).catch(X=>{this.error(X)})}next(x){this.forEachObserver(H=>{H.next(x)})}error(x){this.forEachObserver(H=>{H.error(x)}),this.close(x)}complete(){this.forEachObserver(x=>{x.complete()}),this.close()}subscribe(x,H,X){let M;if(void 0===x&&void 0===H&&void 0===X)throw new Error("Missing Observer.");M=function Ke(U,x){if("object"!=typeof U||null===U)return!1;for(const H of x)if(H in U&&"function"==typeof U[H])return!0;return!1}(x,["next","error","complete"])?x:{next:x,error:H,complete:X},void 0===M.next&&(M.next=wt),void 0===M.error&&(M.error=wt),void 0===M.complete&&(M.complete=wt);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch(j){}}),this.observers.push(M),k}unsubscribeOne(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(x){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,x)}sendOne(x,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[x])try{H(this.observers[x])}catch(X){"undefined"!=typeof console&&console.error&&console.error(X)}})}close(x){this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wt(){}function $t(U,x){return`${U} failed: ${x} argument `}const vt=function(U){const x=[];let H=0;for(let X=0;X<U.length;X++){let M=U.charCodeAt(X);if(M>=55296&&M<=56319){const k=M-55296;X++,O(X<U.length,"Surrogate pair missing trail surrogate."),M=65536+(k<<10)+(U.charCodeAt(X)-56320)}M<128?x[H++]=M:M<2048?(x[H++]=M>>6|192,x[H++]=63&M|128):M<65536?(x[H++]=M>>12|224,x[H++]=M>>6&63|128,x[H++]=63&M|128):(x[H++]=M>>18|240,x[H++]=M>>12&63|128,x[H++]=M>>6&63|128,x[H++]=63&M|128)}return x},gt=function(U){let x=0;for(let H=0;H<U.length;H++){const X=U.charCodeAt(H);X<128?x++:X<2048?x+=2:X>=55296&&X<=56319?(x+=4,H++):x+=3}return x};function Kn(U,x=1e3,H=2){const X=x*Math.pow(H,U),M=Math.round(.5*X*(Math.random()-.5)*2);return Math.min(144e5,X+M)}function bt(U){return U&&U._delegate?U._delegate:U}function Gn(U,x){return new Promise((H,X)=>{U.onsuccess=M=>{H(M.target.result)},U.onerror=M=>{var k;X(`${x}: ${null===(k=M.target.error)||void 0===k?void 0:k.message}`)}})}class Qt{constructor(x){this._db=x,this.objectStoreNames=this._db.objectStoreNames}transaction(x,H="readonly"){return new Xe(this._db.transaction.call(this._db,x,H))}createObjectStore(x,H){return new Ae(this._db.createObjectStore(x,H))}close(){this._db.close()}}class Xe{constructor(x){this._transaction=x,this.complete=new Promise((H,X)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{X(this._transaction.error)},this._transaction.onabort=()=>{X(this._transaction.error)}})}objectStore(x){return new Ae(this._transaction.objectStore(x))}}class Ae{constructor(x){this._store=x}index(x){return new ct(this._store.index(x))}createIndex(x,H,X){return new ct(this._store.createIndex(x,H,X))}get(x){return Gn(this._store.get(x),"Error reading from IndexedDB")}put(x,H){return Gn(this._store.put(x,H),"Error writing to IndexedDB")}delete(x){return Gn(this._store.delete(x),"Error deleting from IndexedDB")}clear(){return Gn(this._store.clear(),"Error clearing IndexedDB object store")}}class ct{constructor(x){this._index=x}get(x){return Gn(this._index.get(x),"Error reading from IndexedDB")}}function Y(U,x,H){return new Promise((X,M)=>{try{const k=indexedDB.open(U,x);k.onsuccess=j=>{X(new Qt(j.target.result))},k.onerror=j=>{var ce;M(`Error opening indexedDB: ${null===(ce=j.target.error)||void 0===ce?void 0:ce.message}`)},k.onupgradeneeded=j=>{H(new Qt(k.result),j.oldVersion,j.newVersion,new Xe(k.transaction))}}catch(k){M(`Error opening indexedDB: ${k.message}`)}})}function ge(U){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(U){return new Promise((x,H)=>{try{const X=indexedDB.deleteDatabase(U);X.onsuccess=()=>{x()},X.onerror=M=>{var k;H(`Error deleting indexedDB database "${U}": ${null===(k=M.target.error)||void 0===k?void 0:k.message}`)}}catch(X){H(`Error deleting indexedDB database "${U}": ${X.message}`)}})})).apply(this,arguments)}},1199:(Rt,xe,N)=>{var f=N(5e3);let $=null;function O(){return $}const ae=new f.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return(0,f.LFG)(G)}()},providedIn:"platform"}),n})();const z=new f.OlP("Location Initialized");let G=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function $e(){return new G((0,f.LFG)(ae))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function be(n){const e=(0,f.LFG)(ae).location;return new qe((0,f.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const rt=new f.OlP("appBaseHref");let qe=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Le(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Le(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(rt,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Le(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Le(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(rt,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(Q(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Q(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Oe,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(f.LFG(me),f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,f.LFG)(me),(0,f.LFG)(le))}()},providedIn:"root"}),n})();function Q(n){return n.replace(/\/index.html$/,"")}var ie=(()=>((ie=ie||{})[ie.Format=0]="Format",ie[ie.Standalone=1]="Standalone",ie))(),oe=(()=>((oe=oe||{})[oe.Narrow=0]="Narrow",oe[oe.Abbreviated=1]="Abbreviated",oe[oe.Wide=2]="Wide",oe[oe.Short=3]="Short",oe))(),Te=(()=>((Te=Te||{})[Te.Short=0]="Short",Te[Te.Medium=1]="Medium",Te[Te.Long=2]="Long",Te[Te.Full=3]="Full",Te))(),he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Group=1]="Group",he[he.List=2]="List",he[he.PercentSign=3]="PercentSign",he[he.PlusSign=4]="PlusSign",he[he.MinusSign=5]="MinusSign",he[he.Exponential=6]="Exponential",he[he.SuperscriptingExponent=7]="SuperscriptingExponent",he[he.PerMille=8]="PerMille",he[he.Infinity=9]="Infinity",he[he.NaN=10]="NaN",he[he.TimeSeparator=11]="TimeSeparator",he[he.CurrencyDecimal=12]="CurrencyDecimal",he[he.CurrencyGroup=13]="CurrencyGroup",he))();function Vt(n,e){return ke((0,f.cg1)(n)[f.wAp.DateFormat],e)}function Nt(n,e){return ke((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function Ge(n,e){return ke((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function ht(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(void 0===r){if(e===he.CurrencyDecimal)return t[f.wAp.NumberSymbols][he.Decimal];if(e===he.CurrencyGroup)return t[f.wAp.NumberSymbols][he.Group]}return r}function kn(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ke(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Ke(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const un=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_n={},Sn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var vt=(()=>((vt=vt||{})[vt.Short=0]="Short",vt[vt.ShortGMT=1]="ShortGMT",vt[vt.Long=2]="Long",vt[vt.Extended=3]="Extended",vt))(),gt=(()=>((gt=gt||{})[gt.FullYear=0]="FullYear",gt[gt.Month=1]="Month",gt[gt.Date=2]="Date",gt[gt.Hours=3]="Hours",gt[gt.Minutes=4]="Minutes",gt[gt.Seconds=5]="Seconds",gt[gt.FractionalSeconds=6]="FractionalSeconds",gt[gt.Day=7]="Day",gt))(),it=(()=>((it=it||{})[it.DayPeriods=0]="DayPeriods",it[it.Days=1]="Days",it[it.Months=2]="Months",it[it.Eras=3]="Eras",it))();function Hn(n,e,t,r){let i=function ce(n){if(tt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,l=1]=n.split("-").map(d=>+d);return ar(i,a-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(un))return function ze(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,d=Number(n[5]||0)-r,g=Number(n[6]||0),y=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,l,d,g,y),e}(r)}const e=new Date(n);if(!tt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Wt(t,e)||e;let d,l=[];for(;e;){if(d=Sn.exec(e),!d){l.push(e);break}{l=l.concat(d.slice(1));const b=l.pop();if(!b)break;e=b}}let g=i.getTimezoneOffset();r&&(g=M(r,g),i=function j(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function k(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(M(e,i)-i))}(i,r,!0));let y="";return l.forEach(b=>{const T=function X(n){if(H[n])return H[n];let e;switch(n){case"G":case"GG":case"GGG":e=Qt(it.Eras,oe.Abbreviated);break;case"GGGG":e=Qt(it.Eras,oe.Wide);break;case"GGGGG":e=Qt(it.Eras,oe.Narrow);break;case"y":e=bt(gt.FullYear,1,0,!1,!0);break;case"yy":e=bt(gt.FullYear,2,0,!0,!0);break;case"yyy":e=bt(gt.FullYear,3,0,!1,!0);break;case"yyyy":e=bt(gt.FullYear,4,0,!1,!0);break;case"Y":e=x(1);break;case"YY":e=x(2,!0);break;case"YYY":e=x(3);break;case"YYYY":e=x(4);break;case"M":case"L":e=bt(gt.Month,1,1);break;case"MM":case"LL":e=bt(gt.Month,2,1);break;case"MMM":e=Qt(it.Months,oe.Abbreviated);break;case"MMMM":e=Qt(it.Months,oe.Wide);break;case"MMMMM":e=Qt(it.Months,oe.Narrow);break;case"LLL":e=Qt(it.Months,oe.Abbreviated,ie.Standalone);break;case"LLLL":e=Qt(it.Months,oe.Wide,ie.Standalone);break;case"LLLLL":e=Qt(it.Months,oe.Narrow,ie.Standalone);break;case"w":e=U(1);break;case"ww":e=U(2);break;case"W":e=U(1,!0);break;case"d":e=bt(gt.Date,1);break;case"dd":e=bt(gt.Date,2);break;case"c":case"cc":e=bt(gt.Day,1);break;case"ccc":e=Qt(it.Days,oe.Abbreviated,ie.Standalone);break;case"cccc":e=Qt(it.Days,oe.Wide,ie.Standalone);break;case"ccccc":e=Qt(it.Days,oe.Narrow,ie.Standalone);break;case"cccccc":e=Qt(it.Days,oe.Short,ie.Standalone);break;case"E":case"EE":case"EEE":e=Qt(it.Days,oe.Abbreviated);break;case"EEEE":e=Qt(it.Days,oe.Wide);break;case"EEEEE":e=Qt(it.Days,oe.Narrow);break;case"EEEEEE":e=Qt(it.Days,oe.Short);break;case"a":case"aa":case"aaa":e=Qt(it.DayPeriods,oe.Abbreviated);break;case"aaaa":e=Qt(it.DayPeriods,oe.Wide);break;case"aaaaa":e=Qt(it.DayPeriods,oe.Narrow);break;case"b":case"bb":case"bbb":e=Qt(it.DayPeriods,oe.Abbreviated,ie.Standalone,!0);break;case"bbbb":e=Qt(it.DayPeriods,oe.Wide,ie.Standalone,!0);break;case"bbbbb":e=Qt(it.DayPeriods,oe.Narrow,ie.Standalone,!0);break;case"B":case"BB":case"BBB":e=Qt(it.DayPeriods,oe.Abbreviated,ie.Format,!0);break;case"BBBB":e=Qt(it.DayPeriods,oe.Wide,ie.Format,!0);break;case"BBBBB":e=Qt(it.DayPeriods,oe.Narrow,ie.Format,!0);break;case"h":e=bt(gt.Hours,1,-12);break;case"hh":e=bt(gt.Hours,2,-12);break;case"H":e=bt(gt.Hours,1);break;case"HH":e=bt(gt.Hours,2);break;case"m":e=bt(gt.Minutes,1);break;case"mm":e=bt(gt.Minutes,2);break;case"s":e=bt(gt.Seconds,1);break;case"ss":e=bt(gt.Seconds,2);break;case"S":e=bt(gt.FractionalSeconds,1);break;case"SS":e=bt(gt.FractionalSeconds,2);break;case"SSS":e=bt(gt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ae(vt.Short);break;case"ZZZZZ":e=Ae(vt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ae(vt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ae(vt.Long);break;default:return null}return H[n]=e,e}(b);y+=T?T(i,t,g):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),y}function ar(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wt(n,e){const t=function It(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(_n[t]=_n[t]||{},_n[t][e])return _n[t][e];let r="";switch(e){case"shortDate":r=Vt(n,Te.Short);break;case"mediumDate":r=Vt(n,Te.Medium);break;case"longDate":r=Vt(n,Te.Long);break;case"fullDate":r=Vt(n,Te.Full);break;case"shortTime":r=Nt(n,Te.Short);break;case"mediumTime":r=Nt(n,Te.Medium);break;case"longTime":r=Nt(n,Te.Long);break;case"fullTime":r=Nt(n,Te.Full);break;case"short":const i=Wt(n,"shortTime"),a=Wt(n,"shortDate");r=Kn(Ge(n,Te.Short),[i,a]);break;case"medium":const l=Wt(n,"mediumTime"),d=Wt(n,"mediumDate");r=Kn(Ge(n,Te.Medium),[l,d]);break;case"long":const g=Wt(n,"longTime"),y=Wt(n,"longDate");r=Kn(Ge(n,Te.Long),[g,y]);break;case"full":const b=Wt(n,"fullTime"),T=Wt(n,"fullDate");r=Kn(Ge(n,Te.Full),[b,T])}return r&&(_n[t][e]=r),r}function Kn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function gn(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.substr(l.length-e)),a+l}function bt(n,e,t=0,r=!1,i=!1){return function(a,l){let d=function Gn(n,e){switch(n){case gt.FullYear:return e.getFullYear();case gt.Month:return e.getMonth();case gt.Date:return e.getDate();case gt.Hours:return e.getHours();case gt.Minutes:return e.getMinutes();case gt.Seconds:return e.getSeconds();case gt.FractionalSeconds:return e.getMilliseconds();case gt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||d>-t)&&(d+=t),n===gt.Hours)0===d&&-12===t&&(d=12);else if(n===gt.FractionalSeconds)return function on(n,e){return gn(n,3).substr(0,e)}(d,e);const g=ht(l,he.MinusSign);return gn(d,e,g,r,i)}}function Qt(n,e,t=ie.Format,r=!1){return function(i,a){return function Xe(n,e,t,r,i,a){switch(t){case it.Months:return function Be(n,e,t){const r=(0,f.cg1)(n),a=ke([r[f.wAp.MonthsFormat],r[f.wAp.MonthsStandalone]],e);return ke(a,t)}(e,i,r)[n.getMonth()];case it.Days:return function Ft(n,e,t){const r=(0,f.cg1)(n),a=ke([r[f.wAp.DaysFormat],r[f.wAp.DaysStandalone]],e);return ke(a,t)}(e,i,r)[n.getDay()];case it.DayPeriods:const l=n.getHours(),d=n.getMinutes();if(a){const y=function Qn(n){const e=(0,f.cg1)(n);return kn(e),(e[f.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Ke(r):[Ke(r[0]),Ke(r[1])])}(e),b=function Se(n,e,t){const r=(0,f.cg1)(n);kn(r);const a=ke([r[f.wAp.ExtraData][0],r[f.wAp.ExtraData][1]],e)||[];return ke(a,t)||[]}(e,i,r),T=y.findIndex(S=>{if(Array.isArray(S)){const[P,B]=S,J=l>=P.hours&&d>=P.minutes,ye=l<B.hours||l===B.hours&&d<B.minutes;if(P.hours<B.hours){if(J&&ye)return!0}else if(J||ye)return!0}else if(S.hours===l&&S.minutes===d)return!0;return!1});if(-1!==T)return b[T]}return function Ut(n,e,t){const r=(0,f.cg1)(n),a=ke([r[f.wAp.DayPeriodsFormat],r[f.wAp.DayPeriodsStandalone]],e);return ke(a,t)}(e,i,r)[l<12?0:1];case it.Eras:return function pn(n,e){return ke((0,f.cg1)(n)[f.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function Ae(n){return function(e,t,r){const i=-1*r,a=ht(t,he.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case vt.Short:return(i>=0?"+":"")+gn(l,2,a)+gn(Math.abs(i%60),2,a);case vt.ShortGMT:return"GMT"+(i>=0?"+":"")+gn(l,1,a);case vt.Long:return"GMT"+(i>=0?"+":"")+gn(l,2,a)+":"+gn(Math.abs(i%60),2,a);case vt.Extended:return 0===r?"Z":(i>=0?"+":"")+gn(l,2,a)+":"+gn(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function De(n){return ar(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function U(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+a)/7)}else{const a=De(t),l=function ge(n){const e=ar(n,0,1).getDay();return ar(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),d=a.getTime()-l.getTime();i=1+Math.round(d/6048e5)}return gn(i,n,ht(r,he.MinusSign))}}function x(n,e=!1){return function(t,r){return gn(De(t).getFullYear(),n,ht(r,he.MinusSign),e)}}const H={};function M(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function tt(n){return n instanceof Date&&!isNaN(n.valueOf())}let bs=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,f.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,f.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class oo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new oo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,l),ao(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ao(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ao(n,e){n.context.$implicit=e.item}let Xr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Wn{constructor(){this.$implicit=null,this.ngIf=null}}function dc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}function yi(n,e){return new f.vHH(2100,"")}class sw{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Ts{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ow=new Ts,Bp=new sw;let jp=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return ow;if((0,f.F4k)(t))return Bp;throw yi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})();const lw=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let lh=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,a){var l;if(null==t||""===t||t!=t)return null;try{return Hn(t,r,a||this.locale,null!==(l=null!=i?i:this.defaultTimezone)&&void 0!==l?l:void 0)}catch(d){throw yi()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(lw,24))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0}),n})(),ss=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Ea="browser";function Jn(n){return n===Ea}function ku(n){return"server"===n}let zp=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new mc((0,f.LFG)(ae),window)}),n})();class mc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qp(this.window.history)||qp(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qp(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Vu extends class Lu extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function pe(n){$||($=n)}(new Vu)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hh(){return Zn=Zn||document.querySelector("base"),Zn?Zn.getAttribute("href"):null}();return null==t?null:function wa(n){_c=_c||document.createElement("a"),_c.setAttribute("href",n);const e=_c.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function cc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let _c,Zn=null;const Zr=new f.OlP("TRANSITION_ID"),yc=[{provide:f.ip1,useFactory:function fh(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Zr,ae,f.zs3],multi:!0}];class os{static init(){(0,f.VLi)(new os)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(g){l=l||g,a--,0==a&&r(l)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let si=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Lo=new f.OlP("EventManagerPlugins");let Ia=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Lo),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class vc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ss=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),lo=(()=>{class n extends Ss{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vo))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Vo(n){O().remove(n)}const jt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Uu=/%COMP%/g;function Ue(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ue(n,i,t):(i=i.replace(Uu,n),t.push(i))}return t}function yn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let er=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ic(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new gh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Bu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ue(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ia),f.LFG(lo),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ic{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(jt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=jt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=jt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yn(r)):this.eventManager.addEventListener(e,t,yn(r))}}class gh extends Ic{constructor(e,t,r,i){super(e),this.component=r;const a=Ue(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function B_(n){return"_ngcontent-%COMP%".replace(Uu,n)}(i+"-"+r.id),this.hostAttr=function ph(n){return"_nghost-%COMP%".replace(Uu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Bu extends Ic{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ue(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let fw=(()=>{class n extends vc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Zp=["alt","control","meta","shift"],Cc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Or={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},As={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bc=(()=>{class n extends vc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Zp.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),l+=g+".")}),l+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=l,d}static getEventFullKey(t){let r="",i=function ba(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Or.hasOwnProperty(e)&&(e=Or[e]))}return Cc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Zp.forEach(a=>{a!=i&&As[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const mh=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:Ea},{provide:f.g9A,useValue:function $i(){Vu.makeCurrent(),os.init()},multi:!0},{provide:ae,useFactory:function Tc(){return(0,f.RDi)(document),document},deps:[]}]),_h=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function $_(){return new f.qLn},deps:[]},{provide:Lo,useClass:fw,multi:!0,deps:[ae,f.R0b,f.Lbi]},{provide:Lo,useClass:bc,multi:!0,deps:[ae]},{provide:er,useClass:er,deps:[Ia,lo,f.AFp]},{provide:f.FYo,useExisting:er},{provide:Ss,useExisting:lo},{provide:lo,useClass:lo,deps:[ae]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Ia,useClass:Ia,deps:[Lo,f.R0b]},{provide:class Xn{},useClass:si,deps:[]}];let Ta=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Zr,useExisting:f.AFp},yc]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:_h,imports:[ss,f.hGG]}),n})(),ju=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Dc(){return new ju((0,f.LFG)(ae))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var ur=N(8996),Rc=N(7669);function Ot(...n){const e=(0,Rc.yG)(n);return(0,ur.D)(n,e)}var as=N(7579);class ai extends as.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var kr=N(8306);const{isArray:Xp}=Array,{getPrototypeOf:_r,prototype:Da,keys:bh}=Object;function $o(n){if(1===n.length){const e=n[0];if(Xp(e))return{args:e,keys:null};if(function Gu(n){return n&&"object"==typeof n&&_r(n)===Da}(e)){const t=bh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ho=N(4671),an=N(4004);const{isArray:Th}=Array;function Wu(n){return(0,an.U)(e=>function eg(n,e){return Th(e)?n(...e):n(e)}(n,e))}function Dh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var tr=N(5403),Sa=N(9672);function Ra(n,e,t){n?(0,Sa.f)(t,n,e):e()}var zu=N(576);function qu(n,e){const t=(0,zu.m)(n)?n:()=>n,r=i=>i.error(t());return new kr.y(e?i=>e.schedule(r,0,i):r)}const Ma=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ku=N(8189);function tg(...n){return function J_(){return(0,Ku.J)(1)}()((0,ur.D)(n,(0,Rc.yG)(n)))}var Ns=N(8421);function Na(n){return new kr.y(e=>{(0,Ns.Xf)(n()).subscribe(e)})}var xa=N(515),Ah=N(727),Br=N(4482);function Ho(){return(0,Br.e)((n,e)=>{let t=null;n._refCount++;const r=(0,tr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Rh extends kr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Br.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ah.w0;const t=this.getSubject();e.add(this.source.subscribe((0,tr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ah.w0.EMPTY)}return e}refCount(){return Ho()(this)}}function yr(n,e){return(0,Br.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,tr.x)(r,g=>{null==i||i.unsubscribe();let y=0;const b=a++;(0,Ns.Xf)(n(g,b)).subscribe(i=(0,tr.x)(r,T=>r.next(e?e(g,T,b,y++):T),()=>{i=null,d()}))},()=>{l=!0,d()}))})}var Zu=N(5698);function us(...n){const e=(0,Rc.yG)(n);return(0,Br.e)((t,r)=>{(e?tg(n,t,e):tg(n,t)).subscribe(r)})}function xs(n,e,t,r,i){return(a,l)=>{let d=t,g=e,y=0;a.subscribe((0,tr.x)(l,b=>{const T=y++;g=d?n(g,b,T):(d=!0,b),r&&l.next(g)},i&&(()=>{d&&l.next(g),l.complete()})))}}function ls(n,e){return(0,Br.e)(xs(n,e,arguments.length>=2,!0))}function Ai(n,e){return(0,Br.e)((t,r)=>{let i=0;t.subscribe((0,tr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function cs(n){return(0,Br.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,tr.x)(t,void 0,void 0,l=>{a=(0,Ns.Xf)(n(l,cs(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var nr=N(5577);function Nc(n,e){return(0,zu.m)(e)?(0,nr.z)(n,e,1):(0,nr.z)(n,1)}function Mh(n){return n<=0?()=>xa.E:(0,Br.e)((e,t)=>{let r=[];e.subscribe((0,tr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lr(n=X_){return(0,Br.e)((e,t)=>{let r=!1;e.subscribe((0,tr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function X_(){return new Ma}function ey(n){return(0,Br.e)((e,t)=>{let r=!1;e.subscribe((0,tr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ai((i,a)=>n(i,a,r)):ho.y,(0,Zu.q)(1),t?ey(e):lr(()=>new Ma))}var Ri=N(8505);class ds{constructor(e,t){this.id=e,this.url=t}}class Go extends ds{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oa extends ds{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vr extends ds{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Yu extends ds{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qu extends ds{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ng extends ds{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xc extends ds{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ui extends ds{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hs extends ds{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ju{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pc{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ny{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rg{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ry{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const hn="primary";class Nh{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fr(n){return new Nh(n)}const Oc="ngNavigationCancelingError";function fs(n){const e=Error("NavigationCancelingError: "+n);return e[Oc]=!0,e}function kc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Fc(n[i],e[i]))return!1;return!0}function Fc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function ig(n){return Array.prototype.concat.apply([],n)}function el(n){return n.length>0?n[n.length-1]:null}function Sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ei(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,ur.D)(Promise.resolve(n)):Ot(n)}const Wo={exact:function ag(n,e,t){if(!zo(n.segments,e.segments)||!fo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ag(n.children[r],e.children[r],t))return!1;return!0},subset:tl},Lc={exact:function og(n,e){return Mi(n,e)},subset:function oy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fc(n[t],e[t]))},ignored:()=>!0};function ka(n,e,t){return Wo[t.paths](n.root,e.root,t.matrixParams)&&Lc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tl(n,e,t){return ug(n,e,e.segments,t)}function ug(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!zo(i,t)||e.hasChildren()||!fo(i,t,r))}if(n.segments.length===t.length){if(!zo(n.segments,t)||!fo(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!tl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(zo(n.segments,i)&&fo(n.segments,i,r)&&n.children[hn])&&ug(n.children[hn],e,a,r)}}function fo(n,e,t){return e.every((r,i)=>Lc[t](n[i].parameters,r.parameters))}class ps{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fr(this.queryParams)),this._queryParamMap}toString(){return lg.serialize(this)}}class vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Sr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fa(this)}}class cr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fr(this.parameters)),this._parameterMap}toString(){return rl(this)}}function zo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class po{}class Uc{parse(e){const t=new uy(e);return new ps(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${go(e.root,!0)}`,r=function ay(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${La(t)}=${La(i)}`).join("&"):`${La(t)}=${La(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Va(n){return encodeURI(n)}(e.fragment)}`:""}`}}const lg=new Uc;function Fa(n){return n.segments.map(e=>rl(e)).join("/")}function go(n,e){if(!n.hasChildren())return Fa(n);if(e){const t=n.children[hn]?go(n.children[hn],!1):"",r=[];return Sr(n.children,(i,a)=>{a!==hn&&r.push(`${a}:${go(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nl(n,e){let t=[];return Sr(n.children,(r,i)=>{i===hn&&(t=t.concat(e(r,i)))}),Sr(n.children,(r,i)=>{i!==hn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===hn?[go(n.children[hn],!1)]:[`${i}:${go(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[hn]?`${Fa(n)}/${t[0]}`:`${Fa(n)}/(${t.join("//")})`}}function qo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function La(n){return qo(n).replace(/%3B/gi,";")}function xh(n){return qo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ua(n){return decodeURIComponent(n)}function Ba(n){return Ua(n.replace(/\+/g,"%20"))}function rl(n){return`${xh(n.path)}${function cg(n){return Object.keys(n).map(e=>`;${xh(e)}=${xh(n[e])}`).join("")}(n.parameters)}`}const Ph=/^[^\/()?;=#]+/;function Ps(n){const e=n.match(Ph);return e?e[0]:""}const il=/^[^=?&#]+/,_w=/^[^&#]+/;class uy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[hn]=new vn(e,t)),r}parseSegment(){const e=Ps(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new cr(Ua(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ps(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ps(this.remaining);i&&(r=i,this.capture(r))}e[Ua(t)]=Ua(r)}parseQueryParam(e){const t=function dg(n){const e=n.match(il);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function sl(n){const e=n.match(_w);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ba(t),a=Ba(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ps(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=hn);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[hn]:new vn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ly{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Oh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Oh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kh(e,this._root).map(t=>t.value)}}function Oh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Oh(n,t);if(r)return r}return null}function kh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=kh(n,t);if(r.length)return r.unshift(e),r}return[]}class Os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ks(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bc extends ly{constructor(e,t){super(e),this.snapshot=t,ol(this,e)}toString(){return this.snapshot.toString()}}function Ko(n,e){const t=function Fh(n,e){const l=new $a([],{},{},"",{},hn,e,null,n.root,-1,{});return new Lh("",new Os(l,[]))}(n,e),r=new ai([new cr("",{})]),i=new ai({}),a=new ai({}),l=new ai({}),d=new ai(""),g=new ja(r,i,l,d,a,hn,e,t.root);return g.snapshot=t.root,new Bc(new Os(g,[]),t)}class ja{constructor(e,t,r,i,a,l,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,an.U)(e=>Fr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,an.U)(e=>Fr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function jc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class $a{constructor(e,t,r,i,a,l,d,g,y,b,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=b,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lh extends ly{constructor(e,t){super(t),this.url=e,ol(this,t)}toString(){return Vh(this._root)}}function ol(n,e){e.value._routerState=n,e.children.forEach(t=>ol(n,t))}function Vh(n){const e=n.children.length>0?` { ${n.children.map(Vh).join(", ")} } `:"";return`${n.value}${e}`}function $c(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mi(e.params,t.params)||n.params.next(t.params),function iy(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Uh(n,e){const t=Mi(n.params,e.params)&&function Vc(n,e){return zo(n,e)&&n.every((t,r)=>Mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Uh(n.parent,e.parent))}function Zo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function hy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zo(n,r,i);return Zo(n,r)})}(n,e,t);return new Os(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Zo(n,d)),l}}const r=function Bh(n){return new ja(new ai(n.url),new ai(n.params),new ai(n.queryParams),new ai(n.fragment),new ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Zo(n,a));return new Os(r,i)}}function Fs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function al(n){return"object"==typeof n&&null!=n&&n.outlets}function Hc(n,e,t,r,i){let a={};if(r&&Sr(r,(d,g)=>{a[g]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new ps(t,a,i);const l=fy(n,e,t);return new ps(l,a,i)}function fy(n,e,t){const r={};return Sr(n.children,(i,a)=>{r[a]=i===e?t:fy(i,e,t)}),new vn(n.segments,r)}class hg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fs(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(al);if(i&&i!==el(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function E(n,e,t){if(n||(n=new vn([],{})),0===n.segments.length&&n.hasChildren())return m(n,e,t);const r=function _(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(al(d))break;const g=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!re(g,y,l))return a;r+=2}else{if(!re(g,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new vn(n.segments.slice(0,r.pathIndex),{});return a.children[hn]=new vn(n.segments.slice(r.pathIndex),n.children),m(a,0,i)}return r.match&&0===i.length?new vn(n.segments,{}):r.match&&!n.hasChildren()?I(n,e,t):r.match?m(n,0,i):I(n,e,t)}function m(n,e,t){if(0===t.length)return new vn(n.segments,{});{const r=function my(n){return al(n[0])?n[0].outlets:{[hn]:n}}(t),i={};return Sr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=E(n.children[l],e,a))}),Sr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new vn(n.segments,i)}}function I(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(al(a)){const g=A(a.outlets);return new vn(r,g)}if(0===i&&Fs(t[0])){r.push(new cr(n.segments[e].path,F(t[0]))),i++;continue}const l=al(a)?a.outlets[hn]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&Fs(d)?(r.push(new cr(l,F(d))),i+=2):(r.push(new cr(l,{})),i++)}return new vn(r,{})}function A(n){const e={};return Sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=I(new vn([],{}),0,t))}),e}function F(n){const e={};return Sr(n,(t,r)=>e[r]=`${t}`),e}function re(n,e,t){return n==t.path&&Mi(e,t.parameters)}class St{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$c(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ks(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Sr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ks(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ks(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ks(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new rg(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Pc(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if($c(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),$c(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function Lt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=g,l.outlet&&l.outlet.activateWith(i,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class rn{constructor(e,t){this.routes=e,this.module=t}}function Pn(n){return"function"==typeof n}function vi(n){return n instanceof ps}const ll=Symbol("INITIAL_VALUE");function _o(){return yr(n=>function Sh(...n){const e=(0,Rc.yG)(n),t=(0,Rc.jO)(n),{args:r,keys:i}=$o(n);if(0===r.length)return(0,ur.D)([],e);const a=new kr.y(function Aa(n,e,t=ho.y){return r=>{Ra(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let g=0;g<i;g++)Ra(e,()=>{const y=(0,ur.D)(n[g],e);let b=!1;y.subscribe((0,tr.x)(r,T=>{a[g]=T,b||(b=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Dh(i,l):ho.y));return t?a.pipe(Wu(t)):a}(n.map(e=>e.pipe((0,Zu.q)(1),us(ll)))).pipe(ls((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==ll?i:(a===ll&&(r=!0),r||!1!==a&&l!==t.length-1&&!vi(a)?i:a),e)},ll),Ai(e=>e!==ll),(0,an.U)(e=>vi(e)?e:!0===e),(0,Zu.q)(1)))}class gg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ga,this.attachRef=null}}class Ga{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new gg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let cl=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=a||hn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,g=new mg(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ga),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class mg{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ja?this.route:e===Ga?this.childContexts:this.parent.get(e,t)}}let Wc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[cl],encapsulation:2}),n})();function Yo(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];yy(r,vy(e,r))}}function yy(n,e){n.children&&Yo(n.children,e)}function vy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ey(n){const e=n.children&&n.children.map(Ey),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==hn&&(t.component=Wc),t}function Fn(n){return n.outlet||hn}function yw(n,e){const t=n.filter(r=>Fn(r)===e);return t.push(...n.filter(r=>Fn(r)!==e)),t}const vw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zc(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},vw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||kc)(t,n,e);if(!a)return Object.assign({},vw);const l={};Sr(a.posParams,(g,y)=>{l[y]=g.path});const d=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function jh(n,e,t,r,i="corrected"){if(t.length>0&&function GD(n,e,t){return t.some(r=>_g(n,e,r)&&Fn(r)!==hn)}(n,t,r)){const l=new vn(e,function HD(n,e,t,r){const i={};i[hn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Fn(a)!==hn){const l=new vn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Fn(a)]=l}return i}(n,e,r,new vn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function WD(n,e,t){return t.some(r=>_g(n,e,r))}(n,t,r)){const l=new vn(n.segments,function $D(n,e,t,r,i,a){const l={};for(const d of r)if(_g(n,t,d)&&!i[Fn(d)]){const g=new vn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Fn(d)]=g}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new vn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function _g(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function zD(n,e,t,r){return!!(Fn(n)===r||r!==hn&&_g(e,t,n))&&("**"===n.path||zc(e,n,t).matched)}function qD(n,e,t){return 0===e.length&&!n.children[t]}class Wa{constructor(e){this.segmentGroup=e||null}}class li{constructor(e){this.urlTree=e}}function dl(n){return qu(new Wa(n))}function wy(n){return qu(new li(n))}class Iy{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=jh(this.urlTree.root,[],[],this.config).segmentGroup,t=new vn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,hn).pipe((0,an.U)(a=>this.createUrlTree(Cy(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cs(a=>{if(a instanceof li)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Wa?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,hn).pipe((0,an.U)(i=>this.createUrlTree(Cy(i),e.queryParams,e.fragment))).pipe(cs(i=>{throw i instanceof Wa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new vn([],{[hn]:e}):e;return new ps(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,an.U)(a=>new vn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,ur.D)(i).pipe(Nc(a=>{const l=r.children[a],d=yw(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,an.U)(g=>({segment:g,outlet:a})))}),ls((a,l)=>(a[l.outlet]=l.segment,a),{}),function ty(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ai((i,a)=>n(i,a,r)):ho.y,Mh(1),t?ey(e):lr(()=>new Ma))}())}expandSegment(e,t,r,i,a,l){return(0,ur.D)(r).pipe(Nc(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(cs(y=>{if(y instanceof Wa)return Ot(null);throw y}))),Pa(d=>!!d),cs((d,g)=>{if(d instanceof Ma||"EmptyError"===d.name)return qD(t,i,a)?Ot(new vn([],{})):dl(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return zD(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):dl(t):dl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?wy(a):this.lineralizeSegments(r,a).pipe((0,nr.z)(l=>{const d=new vn(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:g,remainingSegments:y,positionalParamSegments:b}=zc(t,i,a);if(!d)return dl(t);const T=this.applyRedirectCommands(g,i.redirectTo,b);return i.redirectTo.startsWith("/")?wy(T):this.lineralizeSegments(i,T).pipe((0,nr.z)(S=>this.expandSegment(e,t,r,S.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ot(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,an.U)(T=>(r._loadedConfig=T,new vn(i,{})))):Ot(new vn(i,{}));const{matched:l,consumedSegments:d,remainingSegments:g}=zc(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,nr.z)(b=>{const T=b.module,S=b.routes,{segmentGroup:P,slicedSegments:B}=jh(t,d,g,S),J=new vn(P.segments,P.children);if(0===B.length&&J.hasChildren())return this.expandChildren(T,S,J).pipe((0,an.U)(yt=>new vn(d,yt)));if(0===S.length&&0===B.length)return Ot(new vn(d,{}));const ye=Fn(r)===a;return this.expandSegment(T,J,S,B,ye?hn:a,!0).pipe((0,an.U)(dt=>new vn(d.concat(dt.segments),dt.children)))})):dl(t)}getChildConfig(e,t,r){return t.children?Ot(new rn(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ot(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,nr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,an.U)(a=>(t._loadedConfig=a,a))):function ci(n){return qu(fs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Ot(new rn([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Ot(i.map(l=>{const d=e.get(l);let g;if(function Ha(n){return n&&Pn(n.canLoad)}(d))g=d.canLoad(t,r);else{if(!Pn(d))throw new Error("Invalid CanLoad guard");g=d(t,r)}return ei(g)})).pipe(_o(),(0,Ri.b)(l=>{if(!vi(l))return;const d=fs(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,an.U)(l=>!0===l)):Ot(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ot(r);if(i.numberOfChildren>1||!i.children[hn])return qu(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[hn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new ps(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Sr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Sr(t.children,(d,g)=>{l[g]=this.createSegmentGroup(e,d,r,i)}),new vn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Cy(n){const e={};for(const r of Object.keys(n.children)){const a=Cy(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function KD(n){if(1===n.numberOfChildren&&n.children[hn]){const e=n.children[hn];return new vn(n.segments.concat(e.segments),e.children)}return n}(new vn(n.segments,e))}class Iw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Hh{constructor(e,t){this.component=e,this.route=t}}function ZD(n,e,t){const r=n._root;return hl(r,e?e._root:null,t,[r.value])}function yg(n,e,t){const r=function YD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function hl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ks(e);return n.children.forEach(l=>{(function QD(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const g=function JD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zo(n.url,e.url)||!Mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uh(n,e)||!Mi(n.queryParams,e.queryParams);default:return!Uh(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Iw(r)):(a.data=l.data,a._resolvedData=l._resolvedData),hl(n,e,a.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Hh(d.outlet.component,l))}else l&&fl(e,d,i),i.canActivateChecks.push(new Iw(r)),hl(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Sr(a,(l,d)=>fl(l,t.getContext(d),i)),i}function fl(n,e,t){const r=ks(n),i=n.value;Sr(r,(a,l)=>{fl(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Hh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class bw{}function Tw(n){return new kr.y(e=>e.error(n))}class aS{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=jh(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,hn);if(null===t)return null;const r=new $a([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},hn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Os(r,t),a=new Lh(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=cy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],d=yw(e,a),g=this.processSegmentGroup(d,l,a);if(null===g)return null;r.push(...g)}const i=Dw(r);return function uS(n){n.sort((e,t)=>e.value.outlet===hn?-1:t.value.outlet===hn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return qD(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!zD(e,t,r,i))return null;let a,l=[],d=[];if("**"===e.path){const P=r.length>0?el(r).parameters:{};a=new $a(r,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dS(e),Fn(e),e.component,e,pl(t),Vs(t)+r.length,hS(e))}else{const P=zc(t,e,r);if(!P.matched)return null;l=P.consumedSegments,d=P.remainingSegments,a=new $a(l,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dS(e),Fn(e),e.component,e,pl(t),Vs(t)+l.length,hS(e))}const g=function lS(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:b}=jh(t,l,d,g.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===b.length&&y.hasChildren()){const P=this.processChildren(g,y);return null===P?null:[new Os(a,P)]}if(0===g.length&&0===b.length)return[new Os(a,[])];const T=Fn(e)===i,S=this.processSegment(g,y,b,T?hn:i);return null===S?null:[new Os(a,S)]}}function cS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dw(n){const e=[],t=new Set;for(const r of n){if(!cS(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Dw(r.children);e.push(new Os(r.value,i))}return e.filter(r=>!t.has(r))}function pl(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Vs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function dS(n){return n.data||{}}function hS(n){return n.resolve||{}}function Eg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wg(n){return yr(e=>{const t=n(e);return t?(0,ur.D)(t).pipe((0,an.U)(()=>e)):Ot(e)})}class Rw extends class Aw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Wh=new f.OlP("ROUTES");class Ig{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,an.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new rn(ig(l.injector.get(Wh,void 0,f.XFs.Self|f.XFs.Optional)).map(Ey),l)}),cs(a=>{throw t._loader$=void 0,a}));return t._loader$=new Rh(i,()=>new as.x).pipe(Ho()),t._loader$}loadModuleFactory(e){return ei(e()).pipe((0,nr.z)(t=>t instanceof f.YKP?Ot(t):(0,ur.D)(this.compiler.compileModuleAsync(t))))}}class fP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qc(n){throw n}function Ty(n,e,t){return e.parse("/")}function Dy(n,e){return Ot(null)}const pS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ei=(()=>{class n{constructor(t,r,i,a,l,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new as.x,this.errorHandler=qc,this.malformedUriErrorHandler=Ty,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Dy,afterPreactivation:Dy},this.urlHandlingStrategy=new fP,this.routeReuseStrategy=new Rw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const T=l.get(f.R0b);this.isNgZoneEnabled=T instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function sg(){return new ps(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ig(l,d,S=>this.triggerEvent(new Ju(S)),S=>this.triggerEvent(new Xu(S))),this.routerState=Ko(this.currentUrlTree,this.rootComponentType),this.transitions=new ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ai(i=>0!==i.id),(0,an.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),yr(i=>{let a=!1,l=!1;return Ot(i).pipe((0,Ri.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),yr(d=>{const g=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Nw(d.source)&&(this.browserUrlTree=d.extractedUrl),Ot(d).pipe(yr(T=>{const S=this.transitions.getValue();return r.next(new Go(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),S!==this.transitions.getValue()?xa.E:Promise.resolve(T)}),function ww(n,e,t,r){return yr(i=>function $h(n,e,t,r,i){return new Iy(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,an.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ri.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function Sw(n,e,t,r,i){return(0,nr.z)(a=>function oS(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new aS(n,e,t,r,i,a).recognize();return null===l?Tw(new bw):Ot(l)}catch(l){return Tw(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,an.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ri.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const P=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(P,T)}this.browserUrlTree=T.urlAfterRedirects}const S=new Qu(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(S)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:P,source:B,restoredState:J,extras:ye}=d,ft=new Go(S,this.serializeUrl(P),B,J);r.next(ft);const dt=Ko(P,this.rootComponentType).snapshot;return Ot(Object.assign(Object.assign({},d),{targetSnapshot:dt,urlAfterRedirects:P,extras:Object.assign(Object.assign({},ye),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),xa.E}),wg(d=>{const{targetSnapshot:g,id:y,extractedUrl:b,rawUrl:T,extras:{skipLocationChange:S,replaceUrl:P}}=d;return this.hooks.beforePreactivation(g,{navigationId:y,appliedUrlTree:b,rawUrlTree:T,skipLocationChange:!!S,replaceUrl:!!P})}),(0,Ri.b)(d=>{const g=new ng(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,an.U)(d=>Object.assign(Object.assign({},d),{guards:ZD(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function XD(n,e){return(0,nr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Ot(Object.assign(Object.assign({},t),{guardsResult:!0})):function eS(n,e,t,r){return(0,ur.D)(n).pipe((0,nr.z)(i=>function sS(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Ot(a.map(d=>{const g=yg(d,e,i);let y;if(function _y(n){return n&&Pn(n.canDeactivate)}(g))y=ei(g.canDeactivate(n,e,t,r));else{if(!Pn(g))throw new Error("Invalid CanDeactivate guard");y=ei(g(n,e,t,r))}return y.pipe(Pa())})).pipe(_o()):Ot(!0)}(i.component,i.route,t,e,r)),Pa(i=>!0!==i,!0))}(l,r,i,n).pipe((0,nr.z)(d=>d&&function Ls(n){return"boolean"==typeof n}(d)?function vg(n,e,t,r){return(0,ur.D)(e).pipe(Nc(i=>tg(function nS(n,e){return null!==n&&e&&e(new Hi(n)),Ot(!0)}(i.route.parent,r),function tS(n,e){return null!==n&&e&&e(new ny(n)),Ot(!0)}(i.route,r),function iS(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function Cw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Na(()=>Ot(l.guards.map(g=>{const y=yg(g,l.node,t);let b;if(function ul(n){return n&&Pn(n.canActivateChild)}(y))b=ei(y.canActivateChild(r,n));else{if(!Pn(y))throw new Error("Invalid CanActivateChild guard");b=ei(y(r,n))}return b.pipe(Pa())})).pipe(_o())));return Ot(a).pipe(_o())}(n,i.path,t),function rS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ot(!0);const i=r.map(a=>Na(()=>{const l=yg(a,e,t);let d;if(function Gc(n){return n&&Pn(n.canActivate)}(l))d=ei(l.canActivate(e,n));else{if(!Pn(l))throw new Error("Invalid CanActivate guard");d=ei(l(e,n))}return d.pipe(Pa())}));return Ot(i).pipe(_o())}(n,i.route,t))),Pa(i=>!0!==i,!0))}(r,a,n,e):Ot(d)),(0,an.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ri.b)(d=>{if(vi(d.guardsResult)){const y=fs(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const g=new xc(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),Ai(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),wg(d=>{if(d.guards.canActivateChecks.length)return Ot(d).pipe((0,Ri.b)(g=>{const y=new ui(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),yr(g=>{let y=!1;return Ot(g).pipe(function hP(n,e){return(0,nr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ot(t);let a=0;return(0,ur.D)(i).pipe(Nc(l=>function yo(n,e,t,r){return function by(n,e,t,r){const i=Eg(n);if(0===i.length)return Ot({});const a={};return(0,ur.D)(i).pipe((0,nr.z)(l=>function fS(n,e,t,r){const i=yg(n,e,r);return ei(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Ri.b)(d=>{a[l]=d}))),Mh(1),(0,nr.z)(()=>Eg(a).length===i.length?Ot(a):xa.E))}(n._resolve,n,e,r).pipe((0,an.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),cy(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ri.b)(()=>a++),Mh(1),(0,nr.z)(l=>a===i.length?Ot(t):xa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ri.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,Ri.b)(g=>{const y=new hs(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),wg(d=>{const{targetSnapshot:g,id:y,extractedUrl:b,rawUrl:T,extras:{skipLocationChange:S,replaceUrl:P}}=d;return this.hooks.afterPreactivation(g,{navigationId:y,appliedUrlTree:b,rawUrlTree:T,skipLocationChange:!!S,replaceUrl:!!P})}),(0,an.U)(d=>{const g=function dy(n,e,t){const r=Zo(n,e._root,t?t._root:void 0);return new Bc(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:g})}),(0,Ri.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,an.U)(r=>(new St(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ri.b)({next(){a=!0},complete(){a=!0}}),function gw(n){return(0,Br.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),cs(d=>{if(l=!0,function mw(n){return n&&n[Oc]}(d)){const g=vi(d.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const y=new vr(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(y),g?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nw(i.source)};this.scheduleNavigation(b,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new Yu(i.id,this.serializeUrl(i.extractedUrl),d);r.next(g);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return xa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Yo(t),this.config=t.map(Ey),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:g}=r,y=i||this.routerState.root,b=g?this.currentUrlTree.fragment:l;let T=null;switch(d){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),function mo(n,e,t,r,i){if(0===t.length)return Hc(e.root,e.root,e.root,r,i);const a=function py(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return Sr(a.outlets,(g,y)=>{d[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new hg(t,e,r)}(t);if(a.toRoot())return Hc(e.root,e.root,new vn([],{}),r,i);const l=function pg(n,e,t){if(n.isAbsolute)return new fg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new fg(a,a===e.root,0)}const r=Fs(n.commands[0])?0:1;return function gy(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new fg(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=l.processChildren?m(l.segmentGroup,l.index,a.commands):E(l.segmentGroup,l.index,a.commands);return Hc(e.root,l.segmentGroup,d,r,i)}(y,this.currentUrlTree,t,T,null!=b?b:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=vi(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function gS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},pS):!1===r?Object.assign({},Sy):r,vi(t))return ka(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ka(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Oa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var d,g;if(this.disposed)return Promise.resolve(!1);let y,b,T;l?(y=l.resolve,b=l.reject,T=l.promise):T=new Promise((B,J)=>{y=B,b=J});const S=++this.navigationId;let P;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),P=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):P=0,this.setTransition({id:S,targetPageId:P,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:y,reject:b,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new vr(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Nw(n){return"imperative"!==n}let Cg=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new as.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Kc(this.skipLocationChange),replaceUrl:Kc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ei),f.Y36(ja),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})(),zh=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new as.x,this.subscription=t.events.subscribe(a=>{a instanceof Oa&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:Kc(this.skipLocationChange),replaceUrl:Kc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ei),f.Y36(ja),f.Y36(me))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Kc(n){return""===n||!!n}class Ry{}class Pw{preload(e,t){return Ot(null)}}let Ow=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Ig(i,r,g=>t.triggerEvent(new Ju(g)),g=>t.triggerEvent(new Xu(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ai(t=>t instanceof Oa),Nc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,ur.D)(i).pipe((0,Ku.J)(),(0,an.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ot(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,nr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ei),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Ry))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),bg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Go?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ry&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ry(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Gi=new f.OlP("ROUTER_CONFIGURATION"),Ny=new f.OlP("ROUTER_FORROOT_GUARD"),kw=[Me,{provide:po,useClass:Uc},{provide:Ei,useFactory:function Py(n,e,t,r,i,a,l={},d,g){const y=new Ei(null,n,e,t,r,i,ig(a));return d&&(y.urlHandlingStrategy=d),g&&(y.routeReuseStrategy=g),function Vw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,y),l.enableTracing&&y.events.subscribe(b=>{var T,S;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${b.constructor.name}`),console.log(b.toString()),console.log(b),null===(S=console.groupEnd)||void 0===S||S.call(console)}),y},deps:[po,Ga,Me,f.zs3,f.Sil,Wh,Gi,[class Mw{},new f.FiY],[class Gh{},new f.FiY]]},Ga,{provide:ja,useFactory:function Tg(n){return n.routerState.root},deps:[Ei]},Ow,Pw,class My{preload(e,t){return t().pipe(cs(()=>Ot(null)))}},{provide:Gi,useValue:{enableTracing:!1}}];function _S(){return new f.PXZ("Router",Ei)}let vo=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[kw,xy(t),{provide:Ny,useFactory:Lw,deps:[[Ei,new f.FiY,new f.tp0]]},{provide:Gi,useValue:r||{}},{provide:me,useFactory:Fw,deps:[le,[new f.tBr(rt),new f.FiY],Gi]},{provide:bg,useFactory:yS,deps:[Ei,zp,Gi]},{provide:Ry,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Pw},{provide:f.PXZ,multi:!0,useFactory:_S},[Zc,{provide:f.ip1,multi:!0,useFactory:Uw,deps:[Zc]},{provide:ky,useFactory:Oy,deps:[Zc]},{provide:f.tb,multi:!0,useExisting:ky}]]}}static forChild(t){return{ngModule:n,providers:[xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ny,8),f.LFG(Ei,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function yS(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new bg(n,e,t)}function Fw(n,e,t={}){return t.useHash?new Ne(n,e):new qe(n,e)}function Lw(n){return"guarded"}function xy(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Wh,multi:!0,useValue:n}]}let Zc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new as.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(Ei),l=this.injector.get(Gi);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Ot(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Gi),i=this.injector.get(Ow),a=this.injector.get(bg),l=this.injector.get(Ei),d=this.injector.get(f.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Uw(n){return n.appInitializer.bind(n)}function Oy(n){return n.bootstrapListener.bind(n)}const ky=new f.OlP("Router Initializer"),Bw=new f.OlP("GETS_ALL_IMAGE_DTO");function jw(n,e){if(1&n&&(f.TgZ(0,"div",3)(1,"div",4),f._UZ(2,"img",5),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.imageUrl,f.LSH)}}let Ly=(()=>{class n{constructor(t){this._getsAllImageDto=t,this.images$=this._getsAllImageDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Bw))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-images"]],decls:4,vars:3,consts:[[1,"container"],[1,"row",2,"margin","50px","padding","10px"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"card","text-center"],[1,"card-img-top",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f.YNc(2,jw,3,1,"div",2),f.ALo(3,"async"),f.qZA()()),2&t&&(f.xp6(2),f.Q6J("ngForOf",f.lcZ(3,1,r.images$)))},directives:[Dr],pipes:[jp],encapsulation:2,changeDetection:0}),n})(),vS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page"]],decls:12,vars:0,consts:[[1,"grid"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"fw-bold","fs-1"],[1,"fs-5"],[1,"d-flex","justify-content-center"],["type","button","routerLink","/add-task",1,"btn","text-white","fw-bold",2,"margin","10px","padding","10px"],["type","button","routerLink","/tasks",1,"btn","text-white","fw-bold",2,"margin","10px","padding","10px"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"p",2),f._uU(3,"Get a clear view of the day ahead"),f.qZA(),f.TgZ(4,"p",3),f._uU(5,"All your tasks that are due today will show up here."),f.qZA(),f.TgZ(6,"div",4)(7,"div",5),f._uU(8," Add task "),f.qZA(),f.TgZ(9,"div",6),f._uU(10," My tasks "),f.qZA()()()(),f._UZ(11,"lib-images"))},directives:[Cg,Ly],encapsulation:2,changeDetection:0}),n})(),qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[ss]]}),n})(),Kh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[ss]]}),n})();var $w=N(4986),ot=N(4027);function Zh(){return(0,Br.e)((n,e)=>{let t,r=!1;n.subscribe((0,tr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Hw(n,e=ho.y){return n=null!=n?n:Gw,(0,Br.e)((t,r)=>{let i,a=!0;t.subscribe((0,tr.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function Gw(n,e){return n===e}var Tt,Us=N(2011),Bs=(N(5881),N(3942)),Ce=N(5861),On=N(9681),za=N(4859),gs=N(1877),K=N(2090),ES="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Eo={},Vy=Vy||{},sn=ES||self;function Jt(){}function Sg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Qc="closure_uid_"+(1e9*Math.random()>>>0),js=0;function zw(n,e,t){return n.call.apply(n.bind,arguments)}function wS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function jr(n,e,t){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zw:wS).apply(null,arguments)}function ms(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Qo(){this.s=this.s,this.o=this.o}var gP={};Qo.prototype.s=!1,Qo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ww(n){return Object.prototype.hasOwnProperty.call(n,Qc)&&n[Qc]||(n[Qc]=++js)}(this);delete gP[n]}},Qo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const By=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},IS=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Yh(n){return Array.prototype.concat.apply([],arguments)}function Qh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Jc(n){return/^[\s\xa0]*$/.test(n)}var wi,Rg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ni(n,e){return-1!=n.indexOf(e)}function jy(n,e){return n<e?-1:n>e?1:0}e:{var qw=sn.navigator;if(qw){var Kw=qw.userAgent;if(Kw){wi=Kw;break e}}wi=""}function Mg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function CS(n){const e={};for(const t in n)e[t]=n[t];return e}var Zw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Zw.length;a++)t=Zw[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ng(n){return Ng[" "](n),n}Ng[" "]=Jt;var $y,n,TS=Ni(wi,"Opera"),qa=Ni(wi,"Trident")||Ni(wi,"MSIE"),DS=Ni(wi,"Edge"),Qw=DS||qa,SS=Ni(wi,"Gecko")&&!(Ni(wi.toLowerCase(),"webkit")&&!Ni(wi,"Edge"))&&!(Ni(wi,"Trident")||Ni(wi,"MSIE"))&&!Ni(wi,"Edge"),mP=Ni(wi.toLowerCase(),"webkit")&&!Ni(wi,"Edge");function AS(){var n=sn.document;return n?n.documentMode:void 0}e:{var Jw="",Xw=(n=wi,SS?/rv:([^\);]+)(\)|;)/.exec(n):DS?/Edge\/([\d\.]+)/.exec(n):qa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mP?/WebKit\/(\S+)/.exec(n):TS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Xw&&(Jw=Xw?Xw[1]:""),qa){var eI=AS();if(null!=eI&&eI>parseFloat(Jw)){$y=String(eI);break e}}$y=Jw}var _P={};var nI=sn.document&&qa&&(AS()||parseInt($y,10))||void 0,Hy=function(){if(!sn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{sn.addEventListener("test",Jt,e),sn.removeEventListener("test",Jt,e)}catch(t){}return n}();function ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function gl(n,e){if(ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(SS){e:{try{Ng(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:RS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gl.Z.h.call(this)}}ti.prototype.h=function(){this.defaultPrevented=!0},$r(gl,ti);var RS={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _s="closure_listenable_"+(1e6*Math.random()|0),rI=0;function MS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++rI,this.ca=this.fa=!1}function Xc(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function xg(n){this.src=n,this.g={},this.h=0}function Pg(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=By(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Xc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Gy(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}xg.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Gy(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new MS(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Wy="closure_lm_"+(1e6*Math.random()|0),ml={};function _l(n,e,t,r,i){if(r&&r.once)return td(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)_l(n,e[a],t,r,i);return null}return t=kg(t),n&&n[_s]?n.N(e,t,Yc(r)?!!r.capture:!!r,i):Og(n,e,t,!1,r,i)}function Og(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Yc(i)?!!i.capture:!!i,d=Xh(n);if(d||(n[Wy]=d=new xg(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function ed(){var e=iI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Hy||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(qy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function td(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)td(n,e[a],t,r,i);return null}return t=kg(t),n&&n[_s]?n.O(e,t,Yc(r)?!!r.capture:!!r,i):Og(n,e,t,!0,r,i)}function yl(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)yl(n,e[a],t,r,i);else r=Yc(r)?!!r.capture:!!r,t=kg(t),n&&n[_s]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Gy(a=n.g[e],t,r,i))&&(Xc(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Xh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Gy(e,t,r,i)),(t=-1<n?e[n]:null)&&zy(t))}function zy(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[_s])Pg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(qy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Xh(e))?(Pg(t,n),0==t.h&&(t.src=null,e[Wy]=null)):Xc(n)}}}function qy(n){return n in ml?ml[n]:ml[n]="on"+n}function iI(n,e){if(n.ca)n=!0;else{e=new gl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&zy(n),n=t.call(r,e)}return n}function Xh(n){return(n=n[Wy])instanceof xg?n:null}var ef="__closure_events_fn_"+(1e9*Math.random()>>>0);function kg(n){return"function"==typeof n?n:(n[ef]||(n[ef]=function(e){return n.handleEvent(e)}),n[ef])}function Ar(){Qo.call(this),this.i=new xg(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ti(e,n);else if(e instanceof ti)e.target=e.target||n;else{var i=e;bS(e=new ti(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=tf(l,r,!0,e)&&i}if(i=tf(l=e.g=n,r,!0,e)&&i,i=tf(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=tf(l=e.g=t[a],r,!1,e)&&i}function tf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var d=l.listener,g=l.ia||l.src;l.fa&&Pg(n.i,l),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}$r(Ar,Qo),Ar.prototype[_s]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){yl(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Xc(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var sI=sn.JSON.stringify;function oI(){var n=PS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ii,uI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lI,n=>n.reset());class lI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function NS(n){sn.setTimeout(()=>{throw n},0)}function Ky(n,e){Ii||function xS(){var n=sn.Promise.resolve(void 0);Ii=function(){n.then(yP)}}(),Zy||(Ii(),Zy=!0),PS.add(n,e)}var Zy=!1,PS=new class aI{constructor(){this.h=this.g=null}add(e,t){const r=uI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yP(){for(var n;n=oI();){try{n.h.call(n.g)}catch(t){NS(t)}var e=uI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Zy=!1}function nf(n,e){Ar.call(this),this.h=n||1,this.g=e||sn,this.j=jr(this.kb,this),this.l=Date.now()}function cI(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Yy(n,e,t){if("function"==typeof n)t&&(n=jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:sn.setTimeout(n,e||0)}function Fg(n){n.g=Yy(()=>{n.g=null,n.i&&(n.i=!1,Fg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(nf,Ar),(Tt=nf.prototype).da=!1,Tt.S=null,Tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ni(this,"tick"),this.da&&(cI(this),this.start()))}},Tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tt.M=function(){nf.Z.M.call(this),cI(this),delete this.g};class dI extends Qo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fg(this)}M(){super.M(),this.g&&(sn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rf(n){Qo.call(this),this.h=n,this.g={}}$r(rf,Qo);var hI=[];function fI(n,e,t,r){Array.isArray(t)||(t&&(hI[0]=t.toString()),t=hI);for(var i=0;i<t.length;i++){var a=_l(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Qy(n){Mg(n.g,function(e,t){this.g.hasOwnProperty(t)&&zy(e)},n),n.g={}}function Lg(){this.g=!0}function nd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return sI(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}rf.prototype.M=function(){rf.Z.M.call(this),Qy(this)},rf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lg.prototype.Aa=function(){this.g=!1},Lg.prototype.info=function(){};var vl={},$s=null;function rd(){return $s=$s||new Ar}function _I(n){ti.call(this,vl.Ma,n)}function sf(n){const e=rd();ni(e,new _I(e,n))}function kS(n,e){ti.call(this,vl.STAT_EVENT,n),this.stat=e}function di(n){const e=rd();ni(e,new kS(e,n))}function yI(n,e){ti.call(this,vl.Na,n),this.size=e}function af(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return sn.setTimeout(function(){n()},e)}vl.Ma="serverreachability",$r(_I,ti),vl.STAT_EVENT="statevent",$r(kS,ti),vl.Na="timingevent",$r(yI,ti);var Vg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ug={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Jy(){}function uf(){}Jy.prototype.h=null;var cf,El={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Xy(){ti.call(this,"d")}function lf(){ti.call(this,"c")}function df(){}function hf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new rf(this),this.P=ev,this.W=new nf(n=Qw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new EI}function EI(){this.i=null,this.g="",this.h=!1}$r(Xy,ti),$r(lf,ti),$r(df,Jy),df.prototype.g=function(){return new XMLHttpRequest},df.prototype.i=function(){return{}},cf=new df;var ev=45e3,wI={},Bg={};function jg(n,e,t){n.K=1,n.v=_f(Xo(e)),n.s=t,n.U=!0,tv(n,null)}function tv(n,e){n.F=Date.now(),Wi(n),n.A=Xo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),AI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new EI,n.g=_v(n.l,t?e:null,!n.s),0<n.O&&(n.L=new dI(jr(n.Ia,n,n.g),n.O)),fI(n.V,n.g,"readystatechange",n.gb),e=n.H?CS(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sf(1),function pI(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),g=0;g<d.length;g++){var y=d[g].split("=");if(1<y.length){var b=y[0];y=y[1];var T=b.split("_");l=2<=T.length&&"type"==T[1]?l+(b+"=")+y+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function nv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function rv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=II(n,t),i==Bg){4==e&&(n.o=4,di(14),r=!1),nd(n.j,n.m,null,"[Incomplete Response]");break}if(i==wI){n.o=4,di(15),nd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}nd(n.j,n.m,i,null),gf(n,i)}nv(n)&&i!=Bg&&i!=wI&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ja(e),e.L=!0,di(11))):(nd(n.j,n.m,t,"[Invalid Chunked Response]"),id(n),pf(n))}function II(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Bg:(t=Number(e.substring(t,r)),isNaN(t)?wI:(r+=1)+t>e.length?Bg:(e=e.substr(r,t),n.C=r+t,e))}function Wi(n){n.Y=Date.now()+n.P,ff(n,n.P)}function ff(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=af(jr(n.eb,n),e)}function $g(n){n.B&&(sn.clearTimeout(n.B),n.B=null)}function pf(n){0==n.l.G||n.I||Rl(n.l,n)}function id(n){$g(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,cI(n.W),Qy(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function gf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||PI(t.i,n)))if(t.I=n.N,!n.J&&PI(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=af(jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;na(t),Hr(t)}Qa(t),di(18)}if(1>=xI(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else Xa(t,11)}else if((n.J||t.g==n)&&na(t),!Jc(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const b=y[3];null!=b&&(t.ma=b,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const S=y[5];null!=S&&"number"==typeof S&&0<S&&(t.K=r=1.5*S,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const B=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var a=r.i;!a.g&&(Ni(B,"spdy")||Ni(B,"quic")||Ni(B,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(OI(a,a.h),a.h=null))}if(r.D){const J=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.sa=J,jn(r.F,r.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=mv(r,r.H?r.la:null,r.W),l.J){Wg(r.i,l);var d=l,g=r.K;g&&d.setTimeout(g),d.B&&($g(d),Wi(d)),r.g=l}else Sl(r);0<t.l.length&&Ci(t)}else"stop"!=y[0]&&"close"!=y[0]||Xa(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Xa(t,7):bl(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}sf(4)}catch(y){}}function mf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sg(n)||"string"==typeof n)IS(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Sg(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function CI(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Sg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function wo(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof wo)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function iv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Jo(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Jo(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Jo(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Tt=hf.prototype).setTimeout=function(n){this.P=n},Tt.gb=function(n){n=n.target;const e=this.L;e&&3==ta(n)?e.l():this.Ia(n)},Tt.Ia=function(n){try{if(n==this.g)e:{const b=ta(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>b)&&(3!=b||Qw||this.g&&(this.h.h||this.g.ga()||ud(this.g)))){this.I||4!=b||7==e||sf(8==e||0>=T?3:2),$g(this);var t=this.g.ba();this.N=t;t:if(nv(this)){var r=ud(this.g);n="";var i=r.length,a=4==ta(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){id(this),pf(this);var l="";break t}this.h.i=new sn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function OS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,b,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jc(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,di(12),id(this),pf(this);break e}nd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gf(this,t)}this.U?(rv(this,b,l),Qw&&this.i&&3==b&&(fI(this.V,this.W,"tick",this.fb),this.W.start())):(nd(this.j,this.m,l,null),gf(this,l)),4==b&&id(this),this.i&&!this.I&&(4==b?Rl(this.l,this):(this.i=!1,Wi(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),id(this),pf(this)}}}catch(b){}},Tt.fb=function(){if(this.g){var n=ta(this.g),e=this.g.ga();this.C<e.length&&($g(this),rv(this,n,e),this.i&&4!=n&&Wi(this))}},Tt.cancel=function(){this.I=!0,id(this)},Tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function gI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sf(3),di(17)),id(this),this.o=2,pf(this)):ff(this,this.Y-n)},(Tt=wo.prototype).R=function(){iv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Tt.T=function(){return iv(this),this.g.concat()},Tt.get=function(n,e){return Jo(this.h,n)?this.h[n]:e},Tt.set=function(n,e){Jo(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var sv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Za(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Za){this.g=void 0!==e?e:n.g,sd(this,n.j),this.s=n.s,Hg(this,n.i),Gg(this,n.m),this.l=n.l,e=n.h;var t=new od;t.i=e.i,e.g&&(t.g=new wo(e.g),t.h=e.h),ov(this,t),this.o=n.o}else n&&(t=String(n).match(sv))?(this.g=!!e,sd(this,t[1]||"",!0),this.s=Io(t[2]||""),Hg(this,t[3]||"",!0),Gg(this,t[4]),this.l=Io(t[5]||"",!0),ov(this,t[6]||"",!0),this.o=Io(t[7]||"")):(this.g=!!e,this.h=new od(null,this.g))}function Xo(n){return new Za(n)}function sd(n,e,t){n.j=t?Io(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Hg(n,e,t){n.i=t?Io(e,!0):e}function Gg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ov(n,e,t){e instanceof od?(n.h=e,function BS(n,e){e&&!n.j&&(ea(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(uv(this,r),AI(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=yf(e,av)),n.h=new od(e,n.g))}function jn(n,e,t){n.h.set(e,t)}function _f(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Io(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,VS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function VS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Za.prototype.toString=function(){var n=[],e=this.j;e&&n.push(yf(e,TI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(yf(e,TI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(yf(t,"/"==t.charAt(0)?Hs:US,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",yf(t,DI)),n.join("")};var TI=/[#\/\?@]/g,US=/[#\?:]/g,Hs=/[#\?]/g,av=/[#\?@]/g,DI=/#/g;function od(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ea(n){n.g||(n.g=new wo,n.h=0,n.i&&function bI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function uv(n,e){ea(n),e=ad(n,e),Jo(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Jo((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&iv(n)))}function SI(n,e){return ea(n),e=ad(n,e),Jo(n.g.h,e)}function AI(n,e,t){uv(n,e),0<t.length&&(n.i=null,n.g.set(ad(n,e),Qh(t)),n.h+=t.length)}function ad(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jS(n){this.l=n||MI,n=sn.PerformanceNavigationTiming?0<(n=sn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(sn.g&&sn.g.Ea&&sn.g.Ea()&&sn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Tt=od.prototype).add=function(n,e){ea(this),this.i=null,n=ad(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Tt.forEach=function(n,e){ea(this),this.g.forEach(function(t,r){IS(t,function(i){n.call(e,i,r,this)},this)},this)},Tt.T=function(){ea(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Tt.R=function(n){ea(this);var e=[];if("string"==typeof n)SI(this,n)&&(e=Yh(e,this.g.get(ad(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Yh(e,n[t])}return e},Tt.set=function(n,e){return ea(this),this.i=null,SI(this,n=ad(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var MI=10;function NI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xI(n){return n.h?1:n.g?n.g.size:0}function PI(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function OI(n,e){n.g?n.g.add(e):n.h=e}function Wg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function kI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Qh(n.i)}function zg(){}function FI(){this.g=new zg}function vP(n,e,t){const r=t||"";try{mf(n,function(i,a){let l=i;Yc(i)&&(l=sI(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function lv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function qg(n){this.l=n.$b||null,this.j=n.ib||!1}function vf(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Kg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jS.prototype.cancel=function(){if(this.i=kI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},zg.prototype.stringify=function(n){return sn.JSON.stringify(n,void 0)},zg.prototype.parse=function(n){return sn.JSON.parse(n,void 0)},$r(qg,Jy),qg.prototype.g=function(){return new vf(this.l,this.j)},qg.prototype.i=function(n){return function(){return n}}({}),$r(vf,Ar);var Kg=0;function cv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ef(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zg(n)}function Zg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Tt=vf.prototype).open=function(n,e){if(this.readyState!=Kg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zg(this)},Tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||sn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ef(this)),this.readyState=Kg},Tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zg(this)),this.g&&(this.readyState=3,Zg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==sn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ef(this):Zg(this),3==this.readyState&&cv(this)}},Tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Ef(this))},Tt.Ta=function(n){this.g&&(this.response=n,Ef(this))},Tt.ha=function(){this.g&&Ef(this)},Tt.setRequestHeader=function(n,e){this.v.append(n,e)},Tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var LI=sn.JSON.parse;function Er(n){Ar.call(this),this.headers=new wo,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=VI,this.K=this.L=!1}$r(Er,Ar);var VI="",dv=/^https?$/i,$S=["POST","PUT"];function GS(n){return"content-type"==n.toLowerCase()}function UI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,BI(n),wl(n)}function BI(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function jI(n){if(n.h&&void 0!==Vy&&(!n.C[1]||4!=ta(n)||2!=n.ba()))if(n.v&&4==ta(n))Yy(n.Fa,0,n);else if(ni(n,"readystatechange"),4==ta(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(sv)[1]||null;if(!i&&sn.self&&sn.self.location){var a=sn.self.location.protocol;i=a.substr(0,a.length-1)}r=!dv.test(i?i.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var l=2<ta(n)?n.g.statusText:""}catch(g){l=""}n.j=l+" ["+n.ba()+"]",BI(n)}}finally{wl(n)}}}function wl(n,e){if(n.g){Il(n);const t=n.g,r=n.C[0]?Jt:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Il(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(sn.clearTimeout(n.A),n.A=null)}function ta(n){return n.g?n.g.readyState:0}function ud(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case VI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function hv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function WS(n){let e="";return Mg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Cl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ws(n){this.za=0,this.l=[],this.h=new Lg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cl("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cl("baseRetryDelayMs",5e3,n),this.$a=Cl("retryDelaySeedMs",1e4,n),this.Ya=Cl("forwardChannelMaxRetries",2,n),this.ra=Cl("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new jS(n&&n.concurrentRequestLimit),this.Ca=new FI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function bl(n){if(Ya(n),3==n.G){var e=n.V++,t=Xo(n.F);jn(t,"SID",n.J),jn(t,"RID",e),jn(t,"TYPE","terminate"),Co(n,t),(e=new hf(n,n.h,e,void 0)).K=2,e.v=_f(Xo(t)),t=!1,sn.navigator&&sn.navigator.sendBeacon&&(t=sn.navigator.sendBeacon(e.v.toString(),"")),!t&&sn.Image&&((new Image).src=e.v,t=!0),t||(e.g=_v(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wi(e)}gv(n)}function Hr(n){n.g&&(Ja(n),n.g.cancel(),n.g=null)}function Ya(n){Hr(n),n.u&&(sn.clearTimeout(n.u),n.u=null),na(n),n.i.cancel(),n.m&&("number"==typeof n.m&&sn.clearTimeout(n.m),n.m=null)}function ld(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ci(n)}function Ci(n){NI(n.i)||n.m||(n.m=!0,Ky(n.Ha,n),n.C=0)}function Tl(n,e){var t;t=e?e.m:n.V++;const r=Xo(n.F);jn(r,"SID",n.J),jn(r,"RID",t),jn(r,"AID",n.U),Co(n,r),n.o&&n.s&&hv(r,n.o,n.s),t=new hf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Dl(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),OI(n.i,t),jg(t,r,e)}function Co(n,e){n.j&&mf({},function(t,r){jn(e,r,t)})}function Dl(n,e,t){t=Math.min(n.l.length,t);var r=n.j?jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let g=0;g<t;g++){let y=i[g].h;const b=i[g].g;if(y-=a,0>y)a=Math.max(0,i[g].h-100),d=!1;else try{vP(b,l,"req"+y+"_")}catch(T){r&&r(b)}}if(d){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Sl(n){n.g||n.u||(n.Y=1,Ky(n.Ga,n),n.A=0)}function Qa(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=af(jr(n.Ga,n),pv(n,n.A)),n.A++,0))}function Ja(n){null!=n.B&&(sn.clearTimeout(n.B),n.B=null)}function Al(n){n.g=new hf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Xo(n.oa);jn(e,"RID","rpc"),jn(e,"SID",n.J),jn(e,"CI",n.N?"0":"1"),jn(e,"AID",n.U),Co(n,e),jn(e,"TYPE","xmlhttp"),n.o&&n.s&&hv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=_f(Xo(e)),t.s=null,t.U=!0,tv(t,n)}function na(n){null!=n.v&&(sn.clearTimeout(n.v),n.v=null)}function Rl(n,e){var t=null;if(n.g==e){na(n),Ja(n),n.g=null;var r=2}else{if(!PI(n.i,e))return;t=e.D,Wg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ni(r=rd(),new yI(r,t,e,i)),Ci(n)}else Sl(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function fv(n,e){return!(xI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=af(jr(n.Ha,n,e),pv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Qa(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xa(n,5);break;case 4:Xa(n,10);break;case 3:Xa(n,6);break;default:Xa(n,2)}}function pv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Xa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=jr(n.jb,n);t||(t=new Za("//www.google.com/images/cleardot.gif"),sn.location&&"http"==sn.location.protocol||sd(t,"https"),_f(t)),function Gs(n,e){const t=new Lg;if(sn.Image){const r=new Image;r.onload=ms(lv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ms(lv,t,r,"TestLoadImage: error",!1,e),r.onabort=ms(lv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ms(lv,t,r,"TestLoadImage: timeout",!1,e),sn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else di(2);n.G=0,n.j&&n.j.va(e),gv(n),Ya(n)}function gv(n){n.G=0,n.I=-1,n.j&&((0!=kI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Qh(n.l),n.l.length=0),n.j.ua())}function mv(n,e,t){let r=function FS(n){return n instanceof Za?Xo(n):new Za(n,void 0)}(t);if(""!=r.i)e&&Hg(r,e+"."+r.i),Gg(r,r.m);else{const i=sn.location;r=function LS(n,e,t,r){var i=new Za(null,void 0);return n&&sd(i,n),e&&Hg(i,e),t&&Gg(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Mg(n.aa,function(i,a){jn(r,a,i)}),t=n.sa,(e=n.D)&&t&&jn(r,e,t),jn(r,"VER",n.ma),Co(n,r),r}function _v(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new qg({ib:!0}):n.qa)).L=n.H,e}function yv(){}function wf(){if(qa&&!(10<=Number(nI)))throw Error("Environmental error: no available transport.")}function xi(n,e){Ar.call(this),this.g=new Ws(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Jc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ml(this)}function vv(n){Xy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function $I(){lf.call(this),this.status=1}function Ml(n){this.g=n}(Tt=Er.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cf.g(),this.C=function vI(n){return n.h||(n.h=n.i())}(this.u?this.u:cf),this.g.onreadystatechange=jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void UI(this,a)}n=t||"";const i=new wo(this.headers);r&&mf(r,function(a,l){i.set(l,a)}),r=function Ag(n){e:{var e=GS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=sn.FormData&&n instanceof sn.FormData,!(0<=By($S,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Il(this),0<this.B&&((this.K=function HS(n){return qa&&function Ka(){return function Yw(n){var e=_P;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Rg(String($y)).split("."),t=Rg("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=jy(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||jy(0==i[2].length,0==a[2].length)||jy(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.pa,this)):this.A=Yy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){UI(this,a)}},Tt.pa=function(){void 0!==Vy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},Tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),wl(this))},Tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wl(this,!0)),Er.Z.M.call(this)},Tt.Fa=function(){this.s||(this.F||this.v||this.l?jI(this):this.cb())},Tt.cb=function(){jI(this)},Tt.ba=function(){try{return 2<ta(this)?this.g.status:-1}catch(n){return-1}},Tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),LI(e)}},Tt.Da=function(){return this.m},Tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tt=Ws.prototype).ma=8,Tt.G=1,Tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new hf(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=CS(a),bS(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Dl(this,i,e),jn(t=Xo(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),Co(this,t),this.o&&a&&hv(t,this.o,a),OI(this.i,i),this.Ra&&jn(t,"TYPE","init"),this.ja?(jn(t,"$req",e),jn(t,"SID","null"),i.$=!0,jg(i,t,null)):jg(i,t,e),this.G=2}}else 3==this.G&&(n?Tl(this,n):0==this.l.length||NI(this.i)||Tl(this))},Tt.Ga=function(){if(this.u=null,Al(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=af(jr(this.bb,this),n)}},Tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,di(10),Hr(this),Al(this))},Tt.ab=function(){null!=this.v&&(this.v=null,Hr(this),Qa(this),di(19))},Tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),di(2)):(this.h.info("Failed to ping google.com"),di(1))},(Tt=yv.prototype).xa=function(){},Tt.wa=function(){},Tt.va=function(){},Tt.ua=function(){},Tt.Oa=function(){},wf.prototype.g=function(n,e){return new xi(n,e)},$r(xi,Ar),xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ky(jr(n.hb,n,e))),di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=mv(n,null,n.W),Ci(n)},xi.prototype.close=function(){bl(this.g)},xi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ld(this.g,e)}else this.v?((e={}).__data__=sI(n),ld(this.g,e)):ld(this.g,n)},xi.prototype.M=function(){this.g.j=null,delete this.j,bl(this.g),delete this.g,xi.Z.M.call(this)},$r(vv,Xy),$r($I,lf),$r(Ml,yv),Ml.prototype.xa=function(){ni(this.g,"a")},Ml.prototype.wa=function(n){ni(this.g,new vv(n))},Ml.prototype.va=function(n){ni(this.g,new $I(n))},Ml.prototype.ua=function(){ni(this.g,"b")},wf.prototype.createWebChannel=wf.prototype.g,xi.prototype.send=xi.prototype.u,xi.prototype.open=xi.prototype.m,xi.prototype.close=xi.prototype.close,Vg.NO_ERROR=0,Vg.TIMEOUT=8,Vg.HTTP_ERROR=6,Ug.COMPLETE="complete",uf.EventType=El,El.OPEN="a",El.CLOSE="b",El.ERROR="c",El.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var zS=Eo.createWebChannelTransport=function(){return new wf},qS=Eo.getStatEventTarget=function(){return rd()},Yg=Eo.ErrorCode=Vg,KS=Eo.EventType=Ug,ZS=Eo.Event=vl,Ev=Eo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},YS=Eo.FetchXmlHttpFactory=qg,If=Eo.WebChannel=uf,QS=Eo.XhrIo=Er;const HI="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let cd="9.6.11";const bo=new gs.Yd("@firebase/firestore");function Cf(){return bo.logLevel}function Qe(n,...e){if(bo.logLevel<=gs.in.DEBUG){const t=e.map(wv);bo.debug(`Firestore (${cd}): ${n}`,...t)}}function Gr(n,...e){if(bo.logLevel<=gs.in.ERROR){const t=e.map(wv);bo.error(`Firestore (${cd}): ${n}`,...t)}}function Qg(n,...e){if(bo.logLevel<=gs.in.WARN){const t=e.map(wv);bo.warn(`Firestore (${cd}): ${n}`,...t)}}function wv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function At(n="Unexpected state"){const e=`FIRESTORE (${cd}) INTERNAL ASSERTION FAILED: `+n;throw Gr(e),new Error(e)}function tn(n,e){n||At()}function ut(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends K.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Iv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class eA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GI{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},g=y=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tn("string"==typeof r.accessToken),new Iv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return tn(null===e||"string"==typeof e),new hi(e)}}class tA{constructor(e,t,r){this.type="FirstParty",this.user=hi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class nA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Qe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(tn("string"==typeof t.token),this.p=t.token,new WI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Pi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function iA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Pi.A=-1;class Cv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=iA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function cn(n,e){return n<e?-1:n>e?1:0}function eu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sA(n){return n+"\0"}class gr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gr.fromMillis(Date.now())}static fromDate(e){return gr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Kt(e)}static min(){return new Kt(new gr(0,0))}static max(){return new Kt(new gr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function oA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nl{constructor(e,t,r){void 0===t?t=0:t>e.length&&At(),void 0===r?r=e.length-t:r>e.length-t&&At(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Nl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cn extends Nl{construct(e,t,r){return new Cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Cn(t)}static emptyPath(){return new Cn([])}}const aA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Nl{construct(e,t,r){return new Rr(e,t,r)}static isValidIdentifier(e){return aA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new He(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new He(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new He(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new He(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class ra{constructor(e){this.fields=e,e.sort(Rr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Qr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const uA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(n){if(tn(!!n),"string"==typeof n){let e=0;const t=uA.exec(n);if(tn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tu(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function Xg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function em(n){const e=n.mapValue.fields.__previous_value__;return Xg(e)?em(e):e}function dd(n){const e=To(n.mapValue.fields.__local_write_time__.timestampValue);return new gr(e.seconds,e.nanos)}class zI{constructor(e,t,r,i,a,l,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class qs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qs&&e.projectId===this.projectId&&e.database===this.database}}function nu(n){return null==n}function bf(n){return 0===n&&1/n==-1/0}function Dv(n){return"number"==typeof n&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class at{constructor(e){this.path=e}static fromPath(e){return new at(Cn.fromString(e))}static fromName(e){return new at(Cn.fromString(e).popFirst(5))}static empty(){return new at(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Cn(e.slice()))}}const tm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sv={nullValue:"NULL_VALUE"};function xl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xg(n)?4:qI(n)?9:10:At()}function Ks(n,e){if(n===e)return!0;const t=xl(n);if(t!==xl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dd(n).isEqual(dd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=To(r.timestampValue),l=To(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,tu(n.bytesValue).isEqual(tu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return dr(r.geoPointValue.latitude)===dr(i.geoPointValue.latitude)&&dr(r.geoPointValue.longitude)===dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return dr(r.integerValue)===dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=dr(r.doubleValue),l=dr(i.doubleValue);return a===l?bf(a)===bf(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return eu(n.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(oA(a)!==oA(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!Ks(a[d],l[d])))return!1;return!0}(n,e);default:return At()}var i}function hd(n,e){return void 0!==(n.values||[]).find(t=>Ks(t,e))}function ia(n,e){if(n===e)return 0;const t=xl(n),r=xl(e);if(t!==r)return cn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=dr(i.integerValue||i.doubleValue),d=dr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return nm(n.timestampValue,e.timestampValue);case 4:return nm(dd(n),dd(e));case 5:return cn(n.stringValue,e.stringValue);case 6:return function(i,a){const l=tu(i),d=tu(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let g=0;g<l.length&&g<d.length;g++){const y=cn(l[g],d[g]);if(0!==y)return y}return cn(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=cn(dr(i.latitude),dr(a.latitude));return 0!==l?l:cn(dr(i.longitude),dr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let g=0;g<l.length&&g<d.length;++g){const y=ia(l[g],d[g]);if(y)return y}return cn(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},d=Object.keys(l),g=a.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let b=0;b<d.length&&b<y.length;++b){const T=cn(d[b],y[b]);if(0!==T)return T;const S=ia(l[d[b]],g[y[b]]);if(0!==S)return S}return cn(d.length,y.length)}(n.mapValue,e.mapValue);default:throw At()}}function nm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return cn(n,e);const t=To(n),r=To(e),i=cn(t.seconds,r.seconds);return 0!==i?i:cn(t.nanos,r.nanos)}function Pl(n){return rm(n)}function rm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=To(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tu(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=rm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${rm(r.fields[d])}`;return a+"}"}(n.mapValue):At();var e}function ru(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function im(n){return!!n&&"integerValue"in n}function fd(n){return!!n&&"arrayValue"in n}function Av(n){return!!n&&"nullValue"in n}function Rv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tf(n){return!!n&&"mapValue"in n}function sm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lA(n){return"nullValue"in n?Sv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ru(qs.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:At()}function KI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ru(qs.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tm:At()}function ZI(n,e){return void 0===n?e:void 0===e||ia(n,e)>0?n:e}function Lr(n,e){return void 0===n?e:void 0===e||ia(n,e)<0?n:e}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sm(t)}setAll(e){let t=Rr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=sm(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zs(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ri(sm(this.value))}}function YI(n){const e=[];return zs(n.fields,(t,r)=>{const i=new Rr([t]);if(Tf(r)){const a=YI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new ra(e)}class sr{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new sr(e,0,Kt.min(),Kt.min(),ri.empty(),0)}static newFoundDocument(e,t,r){return new sr(e,1,t,Kt.min(),r,0)}static newNoDocument(e,t){return new sr(e,2,t,Kt.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,Kt.min(),ri.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Df{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Mv(n){return n.fields.find(e=>2===e.kind)}function iu(n){return n.fields.filter(e=>2!==e.kind)}Df.UNKNOWN_ID=-1;class Sf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Do{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Do(0,So.min())}}function QI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Kt.fromTimestamp(1e9===r?new gr(t+1,0):new gr(t,r));return new So(i,at.empty(),e)}function cA(n){return new So(n.readTime,n.key,-1)}class So{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new So(Kt.min(),at.empty(),-1)}static max(){return new So(Kt.max(),at.empty(),-1)}}function dA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:cn(n.largestBatchId,e.largestBatchId))}class JI{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.P=null}}function hA(n,e=null,t=[],r=[],i=null,a=null,l=null){return new JI(n,e,t,r,i,a,l)}function su(n){const e=ut(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Pl(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),nu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pl(r)).join(",")),e.P=t}return e.P}function Oi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!mA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ks(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ov(n.startAt,e.startAt)&&Ov(n.endAt,e.endAt)}function om(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Af(n,e){return n.filters.filter(t=>t instanceof Yn&&t.field.isEqual(e))}function Zs(n,e,t){let r,i=!0;for(const a of Af(n,e)){let l,d=!0;switch(a.op){case"<":case"<=":l=lA(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=Sv}ZI(r,l)===l&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];ZI(r,l)===l&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function ys(n,e,t){let r,i=!0;for(const a of Af(n,e)){let l,d=!0;switch(a.op){case">=":case">":l=KI(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=tm}Lr(r,l)===l&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Lr(r,l)===l&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Yn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new XI(e,t,r):"array-contains"===t?new pA(e,r):"in"===t?new gA(e,r):"not-in"===t?new xv(e,r):"array-contains-any"===t?new Rf(e,r):new Yn(e,t,r)}static V(e,t,r){return"in"===t?new eC(e,r):new fA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ia(t,this.value)):null!==t&&xl(this.value)===xl(t)&&this.v(ia(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return At()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class XI extends Yn{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.v(t)}}class eC extends Yn{constructor(e,t){super(e,"in",t),this.keys=tC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fA extends Yn{constructor(e,t){super(e,"not-in",t),this.keys=tC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class pA extends Yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fd(t)&&hd(t.arrayValue,this.value)}}class gA extends Yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hd(this.value.arrayValue,t)}}class xv extends Yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hd(this.value.arrayValue,t)}}class Rf extends Yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hd(this.value.arrayValue,r))}}class ou{constructor(e,t){this.position=e,this.inclusive=t}}class Ol{constructor(e,t="asc"){this.field=e,this.dir=t}}function mA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Pv(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?at.comparator(at.fromName(l.referenceValue),t.key):ia(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ov(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ks(n.position[t],e.position[t]))return!1;return!0}class vs{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=g,this.D=null,this.C=null}}function nC(n,e,t,r,i,a,l,d){return new vs(n,e,t,r,i,a,l,d)}function kl(n){return new vs(n)}function Mf(n){return!nu(n.limit)&&"F"===n.limitType}function Nf(n){return!nu(n.limit)&&"L"===n.limitType}function pd(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function am(n){for(const e of n.filters)if(e.S())return e.field;return null}function um(n){return null!==n.collectionGroup}function Fl(n){const e=ut(n);if(null===e.D){e.D=[];const t=am(e),r=pd(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ol(t)),e.D.push(new Ol(Rr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ol(Rr.keyField(),a))}}}return e.D}function zi(n){const e=ut(n);if(!e.C)if("F"===e.limitType)e.C=hA(e.path,e.collectionGroup,Fl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Fl(e))t.push(new Ol(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ou(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new ou(e.startAt.position,!e.startAt.inclusive):null;e.C=hA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function kv(n,e,t){return new vs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gd(n,e){return Oi(zi(n),zi(e))&&n.limitType===e.limitType}function Fv(n){return`${su(zi(n))}|lt:${n.limitType}`}function lm(n){return`Query(target=${function Nv(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Pl(r.value)}`;var r}).join(", ")}]`),nu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Pl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Pl(t)).join(",")),`Target(${e})`}(zi(n))}; limitType=${n.limitType})`}function Lv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):at.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=Pv(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,Fl(t),r)||t.endAt&&!function(i,a,l){const d=Pv(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,Fl(t),r)));var t,r}function rC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iC(n){return(e,t)=>{let r=!1;for(const i of Fl(n)){const a=_A(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function _A(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),g=l.data.field(i);return null!==d&&null!==g?ia(d,g):At()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return At()}}function sC(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function oC(n){return{integerValue:""+n}}function aC(n,e){return Dv(e)?oC(e):sC(n,e)}class cm{constructor(){this._=void 0}}function yA(n,e,t){return n instanceof md?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Ll?lC(n,e):n instanceof Vl?cC(n,e):function(r,i){const a=uC(r,i),l=dC(a)+dC(r.k);return im(a)&&im(r.k)?oC(l):sC(r.M,l)}(n,e)}function vA(n,e,t){return n instanceof Ll?lC(n,e):n instanceof Vl?cC(n,e):t}function uC(n,e){return n instanceof _d?im(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class md extends cm{}class Ll extends cm{constructor(e){super(),this.elements=e}}function lC(n,e){const t=Vv(e);for(const r of n.elements)t.some(i=>Ks(i,r))||t.push(r);return{arrayValue:{values:t}}}class Vl extends cm{constructor(e){super(),this.elements=e}}function cC(n,e){let t=Vv(e);for(const r of n.elements)t=t.filter(i=>!Ks(i,r));return{arrayValue:{values:t}}}class _d extends cm{constructor(e,t){super(),this.M=e,this.k=t}}function dC(n){return dr(n.integerValue||n.doubleValue)}function Vv(n){return fd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yd{constructor(e,t){this.field=e,this.transform=t}}class fC{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Pf{}function pC(n,e,t){n instanceof Of?function(r,i,a){const l=r.value.clone(),d=EA(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ul?function(r,i,a){if(!xf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=EA(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(Bl(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dm(n,e,t){var i;n instanceof Of?function(r,i,a){if(!xf(r.precondition,i))return;const l=r.value.clone(),d=hm(r.fieldTransforms,a,i);l.setAll(d),i.convertToFoundDocument(au(i),l).setHasLocalMutations()}(n,e,t):n instanceof Ul?function(r,i,a){if(!xf(r.precondition,i))return;const l=hm(r.fieldTransforms,a,i),d=i.data;d.setAll(Bl(r)),d.setAll(l),i.convertToFoundDocument(au(i),d).setHasLocalMutations()}(n,e,t):xf(n.precondition,i=e)&&i.convertToNoDocument(Kt.min())}function gC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=uC(r.transform,i||null);null!=a&&(null==t&&(t=ri.empty()),t.set(r.field,a))}return t||null}function Uv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&eu(t,r,(i,a)=>function hC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ll&&r instanceof Ll||t instanceof Vl&&r instanceof Vl?eu(t.elements,r.elements,Ks):t instanceof _d&&r instanceof _d?Ks(t.k,r.k):t instanceof md&&r instanceof md);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function au(n){return n.isFoundDocument()?n.version:Kt.min()}class Of extends Pf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ul extends Pf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Bl(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function EA(n,e,t){const r=new Map;tn(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,vA(l,d,t[i]))}return r}function hm(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,yA(a,l,e))}return r}class fm extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class pm extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class mC{constructor(e){this.count=e}}var Wr,nt;function _C(n){switch(n){default:return At();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function yC(n){if(void 0===n)return Gr("GRPC error has no .code"),ve.UNKNOWN;switch(n){case Wr.OK:return ve.OK;case Wr.CANCELLED:return ve.CANCELLED;case Wr.UNKNOWN:return ve.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return ve.INTERNAL;case Wr.UNAVAILABLE:return ve.UNAVAILABLE;case Wr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Wr.NOT_FOUND:return ve.NOT_FOUND;case Wr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Wr.ABORTED:return ve.ABORTED;case Wr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Wr.DATA_LOSS:return ve.DATA_LOSS;default:return At()}}(nt=Wr||(Wr={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";class uu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return bv(this.inner)}size(){return this.innerSize}}class hr{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gm(this.root,e,this.comparator,!0)}}class gm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Vr.RED,this.left=null!=i?i:Vr.EMPTY,this.right=null!=a?a:Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Vr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mr(this.data.getIterator())}getIteratorFrom(e){return new mr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class mr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kf(n){return n.hasNext()?n.getNext():void 0}const vC=new hr(at.comparator);function Es(){return vC}const wA=new hr(at.comparator);function mm(){return wA}function vd(){return new uu(n=>n.toString(),(n,e)=>n.isEqual(e))}const EC=new hr(at.comparator),wC=new zn(at.comparator);function Un(...n){let e=wC;for(const t of n)e=e.add(t);return e}const IA=new zn(cn);function _m(){return IA}class sa{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ff.createSynthesizedTargetChangeForCurrentChange(e,t)),new sa(Kt.min(),r,_m(),Es(),Un())}}class Ff{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ff(Qr.EMPTY_BYTE_STRING,t,Un(),Un(),Un())}}class ym{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class IC{constructor(e,t){this.targetId=e,this.$=t}}class Lf{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Bv{constructor(){this.B=0,this.L=bC(),this.U=Qr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Un(),t=Un(),r=Un();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:At()}}),new Ff(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=bC()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class CC{constructor(e){this.nt=e,this.st=new Map,this.it=Es(),this.rt=jv(),this.ot=new zn(cn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:At()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(om(a))if(0===r){const l=new at(a.path);this.ct(t,l,sr.newNoDocument(l,Kt.min()))}else tn(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const d=this.wt(l);if(d){if(a.current&&om(d.target)){const g=new at(d.target.path);null!==this.it.get(g)||this.It(l,g)||this.ct(l,g,sr.newNoDocument(g,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=Un();this.rt.forEach((a,l)=>{let d=!0;l.forEachWhile(g=>{const y=this.wt(g);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new sa(e,t,this.ot,this.it,r);return this.it=Es(),this.rt=jv(),this.ot=new zn(cn),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Bv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new zn(cn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Bv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function jv(){return new hr(at.comparator)}function bC(){return new hr(at.comparator)}const Vf={asc:"ASCENDING",desc:"DESCENDING"},Uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class CA{constructor(e,t){this.databaseId=e,this.N=t}}function Bf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TC(n,e){return n.N?e.toBase64():e.toUint8Array()}function DC(n,e){return Bf(n,e.toTimestamp())}function zr(n){return tn(!!n),Kt.fromTimestamp(function(e){const t=To(e);return new gr(t.seconds,t.nanos)}(n))}function vm(n,e){return(t=n,new Cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function SC(n){const e=Cn.fromString(n);return tn(Gv(e)),e}function Ed(n,e){return vm(n.databaseId,e.path)}function Ao(n,e){const t=SC(e);if(t.get(1)!==n.databaseId.projectId)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(TA(t))}function $v(n,e){return vm(n.databaseId,e)}function bA(n){const e=SC(n);return 4===e.length?Cn.emptyPath():TA(e)}function Em(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TA(n){return tn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DA(n,e,t){return{name:Ed(n,e),fields:t.value.mapValue.fields}}function Hv(n,e,t){const r=Ao(n,e.name),i=zr(e.updateTime),a=new ri({mapValue:{fields:e.fields}}),l=sr.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function jf(n,e){let t;if(e instanceof Of)t={update:DA(n,e.key,e.value)};else if(e instanceof fm)t={delete:Ed(n,e.key)};else if(e instanceof Ul)t={update:DA(n,e.key,e.data),updateMask:NA(e.fieldMask)};else{if(!(e instanceof pm))return At();t={verify:Ed(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof md)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ll)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _d)return{fieldPath:a.field.canonicalString(),increment:l.k};throw At()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:DC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:At()),t;var i}function Im(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Mr.updateTime(zr(i.updateTime)):void 0!==i.exists?Mr.exists(i.exists):Mr.none():Mr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(tn("REQUEST_TIME"===l.setToServerValue),d=new md):"appendMissingElements"in l?d=new Ll(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Vl(l.removeAllFromArray.values||[]):"increment"in l?d=new _d(a,l.increment):At();const g=Rr.fromServerFormat(l.fieldPath);return new yd(g,d)}(n,i)):[];var i;if(e.update){const i=Ao(n,e.update.name),a=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ra((e.updateMask.fieldPaths||[]).map(y=>Rr.fromServerFormat(y)));return new Ul(i,a,l,t,r)}return new Of(i,a,t,r)}if(e.delete){const i=Ao(n,e.delete);return new fm(i,t)}if(e.verify){const i=Ao(n,e.verify);return new pm(i,t)}return At()}function AC(n,e){return{documents:[$v(n,e.path)]}}function RC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=$v(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=$v(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(b=>function(T){if("=="===T.op){if(Rv(T.value))return{unaryFilter:{field:wd(T.field),op:"IS_NAN"}};if(Av(T.value))return{unaryFilter:{field:wd(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(Rv(T.value))return{unaryFilter:{field:wd(T.field),op:"IS_NOT_NAN"}};if(Av(T.value))return{unaryFilter:{field:wd(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wd(T.field),op:RA(T.op),value:T.value}}}(b));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(y=>{return{field:wd((b=y).field),direction:xC(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(y=e.limit,n.N||nu(y)?y:{value:y});var y,d,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function MC(n){let e=bA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){tn(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=NC(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Ol(Ys((T=b).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(b){let T;return T="object"==typeof b?b.value:b,nu(T)?null:T}(t.limit));let g=null;var b;t.startAt&&(g=new ou((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new ou(b.values||[],!b.before)}(t.endAt)),nC(e,i,l,a,d,"F",g,y)}function NC(n){return n?void 0!==n.unaryFilter?[PC(n)]:void 0!==n.fieldFilter?[MA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>NC(e)).reduce((e,t)=>e.concat(t)):At():[]}function xC(n){return Vf[n]}function RA(n){return Uf[n]}function wd(n){return{fieldPath:n.canonicalString()}}function Ys(n){return Rr.fromServerFormat(n.fieldPath)}function MA(n){return Yn.create(Ys(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}}(n.fieldFilter.op),n.fieldFilter.value)}function PC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ys(n.unaryFilter.field);return Yn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ys(n.unaryFilter.field);return Yn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ys(n.unaryFilter.field);return Yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ys(n.unaryFilter.field);return Yn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return At()}}function NA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function bi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kC(e)),e=OC(n.get(t),e);return kC(e)}function OC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function kC(n){return n+"\x01\x01"}function ws(n){const e=n.length;if(tn(e>=2),2===e)return tn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&At(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:At()}a=l+2}return new Cn(r)}const FC=["userId","batchId"];function Hf(n,e){return[n,bi(e)]}function Wv(n,e,t){return[n,bi(e),t]}const xA={},PA=["prefixPath","collectionGroup","readTime","documentId"],OA=["prefixPath","collectionGroup","documentId"],zv=["collectionGroup","readTime","prefixPath","documentId"],kA=["canonicalId","targetId"],LC=["targetId","path"],FA=["path","targetId"],LA=["collectionId","parent"],VA=["indexId","uid"],UA=["uid","sequenceNumber"],BA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jA=["indexId","uid","orderedDocumentKey"],$A=["userId","collectionPath","documentId"],HA=["userId","collectionPath","largestBatchId"],VC=["userId","collectionGroup","largestBatchId"],qv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GA=[...qv,"documentOverlays"],UC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BC=[...UC,"indexConfiguration","indexState","indexEntries"],jC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(t){return Ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ie.reject(t)}static resolve(e){return new Ie((t,r)=>{t(e)})}static reject(e){return new Ie((t,r)=>{r(e)})}static waitFor(e){return new Ie((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},g=>r(g))}),l=!0,a===i&&t()})}static or(e){let t=Ie.resolve(!1);for(const r of e)t=t.next(i=>i?Ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Id{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new jl(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Cm(r.target.error);this.At.reject(new jl(e,i))}}static open(e,t,r,i){try{return new Id(t,e.transaction(i,r))}catch(a){throw new jl(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new WA(t)}}class qi{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===qi.Vt((0,K.z$)())&&Gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qe("SimpleDb","Removing database:",e),oa(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,K.hl)())return!1;if(qi.St())return!0;const e=(0,K.z$)(),t=qi.Vt(e),r=0<t&&t<10,i=qi.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new jl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new He(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new He(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new jl(e,d))},a.onupgradeneeded=l=>{Qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.bt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.Nt(e);const g=Id.open(a.db,e,l?"readonly":"readwrite",r),y=i(g).next(b=>(g.Pt(),b)).catch(b=>(g.abort(b),Ie.reject(b))).toPromise();return y.catch(()=>{}),yield g.Rt,y}catch(g){const y="FirebaseError"!==g.name&&d<3;if(Qe("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),a.close(),!y)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class HC{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return oa(this.Ft.delete())}}class jl extends He{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $l(n){return"IndexedDbTransactionError"===n.name}class WA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oa(r)}add(e){return Qe("SimpleDb","ADD",this.store.name,e,e),oa(this.store.add(e))}get(e){return oa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Qe("SimpleDb","DELETE",this.store.name,e),oa(this.store.delete(e))}count(){return Qe("SimpleDb","COUNT",this.store.name),oa(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new Ie((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Ie((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){Qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new Ie((r,i)=>{t.onerror=a=>{const l=Cm(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new Ie((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const g=new HC(d),y=t(d.primaryKey,d.value,g);if(y instanceof Ie){const b=y.catch(T=>(g.done(),Ie.reject(T)));r.push(b)}g.isDone?i():null===g.Lt?d.continue():d.continue(g.Lt)}}).next(()=>Ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oa(n){return new Ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Cm(r.target.error);t(i)}})}let GC=!1;function Cm(n){const e=qi.Vt((0,K.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GC||(GC=!0,setTimeout(()=>{throw r},0)),r}}return n}class WC extends $C{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function qr(n,e){const t=ut(n);return qi.xt(t.Ht,e)}class Kv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&pC(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&dm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&dm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Kt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Un())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(t,r)=>Uv(t,r))&&eu(this.baseMutations,e.baseMutations,(t,r)=>Uv(t,r))}}class bm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){tn(e.mutations.length===r.length);let i=EC;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new bm(e,t,r,i)}}class zC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lu{constructor(e,t,r,i,a=Kt.min(),l=Kt.min(),d=Qr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gf{constructor(e){this.Jt=e}}function Hl(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ed(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Bf(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gl(e.version)};else{if(!e.isUnknownDocument())return At();r.unknownDocument={path:t.path.toArray(),version:Gl(e.version)}}var i,a;return r}function cu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cd(n){const e=new gr(n.seconds,n.nanoseconds);return Kt.fromTimestamp(e)}function Wl(n,e){const t=(e.baseMutations||[]).map(a=>Im(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Im(n.Jt,a)),i=gr.fromMillis(e.localWriteTimeMs);return new Kv(e.batchId,i,t,r)}function Wf(n){const e=Cd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cd(n.lastLimboFreeSnapshotVersion):Kt.min();let r;var i;return void 0!==n.query.documents?(tn(1===(i=n.query).documents.length),r=zi(kl(bA(i.documents[0])))):r=zi(MC(n.query)),new lu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function qC(n,e){const t=Gl(e.snapshotVersion),r=Gl(e.lastLimboFreeSnapshotVersion);let i;i=om(e.target)?AC(n.Jt,e.target):RC(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:su(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zv(n){const e=MC({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kv(e,e.limit,"L"):e}function Yv(n,e){return new zC(e.largestBatchId,Im(n.Jt,e.overlayMutation))}function Qv(n,e){const t=e.path.lastSegment();return[n,bi(e.path.popLast()),t]}class KC{getBundleMetadata(e,t){return Tm(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Cd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Tm(e).put({bundleId:(r=t).id,createTime:Gl(zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zf(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Zv(i.bundledQuery),readTime:Cd(i.readTime)};var i})}saveNamedQuery(e,t){return zf(e).put({name:(r=t).name,readTime:Gl(zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Tm(n){return qr(n,"bundles")}function zf(n){return qr(n,"namedQueries")}class zl{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new zl(e,t.uid||"")}getOverlay(e,t){return qf(e).get(Qv(this.userId,t)).next(r=>r?Yv(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new zC(t,l);i.push(this.Xt(e,d))}),Ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(bi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(qf(e).Qt("collectionPathOverlayIndex",d))}),Ie.waitFor(a)}getOverlaysForCollection(e,t,r){const i=vd(),a=bi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qf(e).qt("collectionPathOverlayIndex",l).next(d=>{for(const g of d){const y=Yv(this.M,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=vd();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qf(e).Wt({index:"collectionGroupOverlayIndex",range:d},(g,y,b)=>{const T=Yv(this.M,y);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):b.done()}).next(()=>a)}Xt(e,t){return qf(e).put(function(r,i,a){const[l,d,g]=Qv(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:jf(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function qf(n){return qr(n,"documentOverlays")}class du{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),bf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(tu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?qI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):At()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),at.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function ZC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function YC(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=ZC(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}du.fe=new du;class qA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=YC(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=YC(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Jv{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class KA{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Dm{constructor(){this.De=new qA,this.Ce=new Jv(this.De),this.xe=new KA(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class hu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hu(this.indexId,this.documentKey,this.arrayValue,r)}}function ql(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Kl(n.arrayValue,e.arrayValue),0!==t?t:(t=Kl(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function Kl(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class QC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Mv(e);if(void 0!==t&&!this.Be(t))return!1;const r=iu(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class bd{constructor(){this.qe=new JC}addToCollectionParentIndex(e,t){return this.qe.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getFieldIndex(e,t){return Ie.resolve(null)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}updateCollectionGroup(e,t,r){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class JC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(Cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(Cn.comparator)).toArray()}}const Zl=new Uint8Array(0);class ZA{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new JC,this.Ge=new uu(r=>su(r),(r,i)=>Oi(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:bi(i)};return YA(e).put(a)}return Ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sA(t),""],!1,!0);return YA(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ws(l.parent))}return r})}addFieldIndex(e,t){const r=Xv(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Xv(e),i=Kf(e),a=Td(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Td(e);let i=!0;const a=new Map;return Ie.forEach(this.Qe(t),l=>this.getFieldIndex(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=Un();const d=[];return Ie.forEach(a,(g,y)=>{var b;Qe("IndexedDbIndexManager",`Using index ${b=g,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(yt=>`${yt.fieldPath}:${yt.kind}`).join(",")}`} to execute ${su(t)}`);const T=function(yt,lt){const Zt=Mv(lt);if(void 0===Zt)return null;for(const Xt of Af(yt,Zt.fieldPath))switch(Xt.op){case"array-contains-any":return Xt.value.arrayValue.values||[];case"array-contains":return[Xt.value]}return null}(y,g),S=function(yt,lt){const Zt=new Map;for(const Xt of iu(lt))for(const Rn of Af(yt,Xt.fieldPath))switch(Rn.op){case"==":case"in":Zt.set(Xt.fieldPath.canonicalString(),Rn.value);break;case"not-in":case"!=":return Zt.set(Xt.fieldPath.canonicalString(),Rn.value),Array.from(Zt.values())}return null}(y,g),P=function(yt,lt){const Zt=[];let Xt=!0;for(const Rn of iu(lt)){const xr=0===Rn.kind?Zs(yt,Rn.fieldPath,yt.startAt):ys(yt,Rn.fieldPath,yt.startAt);if(!xr.value)return null;Zt.push(xr.value),Xt&&(Xt=xr.inclusive)}return new ou(Zt,Xt)}(y,g),B=function(yt,lt){const Zt=[];let Xt=!0;for(const Rn of iu(lt)){const xr=0===Rn.kind?ys(yt,Rn.fieldPath,yt.endAt):Zs(yt,Rn.fieldPath,yt.endAt);if(!xr.value)return null;Zt.push(xr.value),Xt&&(Xt=xr.inclusive)}return new ou(Zt,Xt)}(y,g),J=this.je(g,y,P),ye=this.je(g,y,B),ft=this.We(g,y,S),dt=this.ze(g.indexId,T,J,!!P&&P.inclusive,ye,!!B&&B.inclusive,ft);return Ie.forEach(dt,yt=>r.Gt(yt,t.limit).next(lt=>{lt.forEach(Zt=>{const Xt=at.fromSegments(Zt.documentKey);l.has(Xt)||(l=l.add(Xt),d.push(Xt))})}))}).next(()=>d)}return Ie.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,a,l,d){const g=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),y=g/(null!=t?t.length:1),b=[];for(let T=0;T<g;++T){const S=t?this.He(t[T/y]):Zl,P=r?this.Je(e,S,r[T%y],i):this.Ye(e),B=a?this.Xe(e,S,a[T%y],l):this.Ye(e+1);b.push(...this.createRange(P,B,d.map(J=>this.Je(e,S,J,!0))))}return b}Je(e,t,r,i){const a=new hu(e,at.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new hu(e,at.empty(),t,r);return i?a.ke():a}Ye(e){return new hu(e,at.empty(),Zl,Zl)}getFieldIndex(e,t){const r=new QC(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const l=a.filter(d=>r.$e(d));return l.sort((d,g)=>g.fields.length-d.fields.length),l.length>0?l[0]:null})}Ze(e,t){const r=new Dm;for(const i of iu(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);du.fe.Zt(a,l)}return r.Se()}He(e){const t=new Dm;return du.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Dm;return du.fe.Zt(ru(this.databaseId,t),r.Ne(function(i){const a=iu(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Dm);let a=0;for(const l of iu(e)){const d=r[a++];for(const g of i)if(this.en(t,l.fieldPath)&&fd(d))i=this.nn(i,l,d);else{const y=g.Ne(l.kind);du.fe.Zt(d,y)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const g=new Dm;g.seed(d.Se()),du.fe.Zt(l,g.Ne(t.kind)),a.push(g)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Yn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xv(e),i=Kf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return Ie.forEach(a,d=>i.get([d.indexId,this.uid]).next(g=>{l.push(function(y,b){const T=b?new Do(b.sequenceNumber,new So(Cd(b.readTime),new at(ws(b.documentKey)),b.largestBatchId)):Do.empty(),S=y.fields.map(([P,B])=>new Sf(Rr.fromServerFormat(P),B));return new Df(y.indexId,y.collectionGroup,S,T)}(d,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:cn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xv(e),a=Kf(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>Ie.forEach(d,g=>{return a.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:Gl((S=r).readTime),documentKey:bi(S.documentKey.path),largestBatchId:S.largestBatchId});var S})))}updateIndexEntries(e,t){const r=new Map;return Ie.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?Ie.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),Ie.forEach(d,g=>this.on(e,i,g).next(y=>{const b=this.un(a,g);return y.isEqual(b)?Ie.resolve():this.an(e,a,g,y,b)}))))})}cn(e,t,r,i){return Td(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Td(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Td(e);let a=new zn(ql);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,d)=>{a=a.add(new hu(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}un(e,t){let r=new zn(ql);const i=this.Ze(t,e);if(null==i)return r;const a=Mv(t);if(null!=a){const l=e.data.field(a.fieldPath);if(fd(l))for(const d of l.arrayValue.values||[])r=r.add(new hu(t.indexId,e.key,this.He(d),i))}else r=r.add(new hu(t.indexId,e.key,Zl,i));return r}an(e,t,r,i,a){Qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,g,y,b,T){const S=d.getIterator(),P=g.getIterator();let B=kf(S),J=kf(P);for(;B||J;){let ye=!1,ft=!1;if(B&&J){const dt=y(B,J);dt<0?ft=!0:dt>0&&(ye=!0)}else null!=B?ft=!0:ye=!0;ye?(b(J),J=kf(P)):ft?(T(B),B=kf(S)):(B=kf(S),J=kf(P))}}(i,a,ql,d=>{l.push(this.cn(e,t,r,d))},d=>{l.push(this.hn(e,t,r,d))}),Ie.waitFor(l)}rn(e){let t=1;return Kf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>ql(l,d)).filter((l,d,g)=>!d||0!==ql(l,g[d-1]));const i=[];i.push(e);for(const l of r){const d=ql(l,e),g=ql(l,t);if(0===d)i[0]=e.ke();else if(d>0&&g<0)i.push(l),i.push(l.ke());else if(g>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Zl,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Zl,[]]));return a}}function YA(n){return qr(n,"collectionParents")}function Td(n){return qr(n,"indexEntries")}function Xv(n){return qr(n,"indexConfiguration")}function Kf(n){return qr(n,"indexState")}const Sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const g=r.Wt({range:l},(b,T,S)=>(d++,S.delete()));a.push(g.next(()=>{tn(1===d)}));const y=[];for(const b of t.mutations){const T=Wv(e,b.key.path,t.batchId);a.push(i.delete(T)),y.push(b.key)}return Ie.waitFor(a).next(()=>y)}function Am(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw At();e=n.noDocument}return JSON.stringify(e).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class eE{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){tn(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new eE(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fu(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Dd(e),l=fu(e);return l.add({}).next(d=>{tn("number"==typeof d);const g=new Kv(d,t,r,i),y=function(S,P,B){const J=B.baseMutations.map(ft=>jf(S.Jt,ft)),ye=B.mutations.map(ft=>jf(S.Jt,ft));return{userId:P,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:J,mutations:ye}}(this.M,this.userId,g),b=[];let T=new zn((S,P)=>cn(S.canonicalString(),P.canonicalString()));for(const S of i){const P=Wv(this.userId,S.key.path,d);T=T.add(S.key.path.popLast()),b.push(l.put(y)),b.push(a.put(P,xA))}return T.forEach(S=>{b.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.ln[d]=g.keys()}),Ie.waitFor(b).next(()=>g)})}lookupMutationBatch(e,t){return fu(e).get(t).next(r=>r?(tn(r.userId===this.userId),Wl(this.M,r)):null)}fn(e,t){return this.ln[t]?Ie.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return fu(e).Wt({index:"userMutationsIndex",range:i},(l,d,g)=>{d.userId===this.userId&&(tn(d.batchId>=r),a=Wl(this.M,d)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return fu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Wl(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Hf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Dd(e).Wt({range:i},(l,d,g)=>{const[y,b,T]=l,S=ws(b);if(y===this.userId&&t.path.isEqual(S))return fu(e).get(T).next(P=>{if(!P)throw At();tn(P.userId===this.userId),a.push(Wl(this.M,P))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(cn);const i=[];return t.forEach(a=>{const l=Hf(this.userId,a.path),d=IDBKeyRange.lowerBound(l),g=Dd(e).Wt({range:d},(y,b,T)=>{const[S,P,B]=y,J=ws(P);S===this.userId&&a.path.isEqual(J)?r=r.add(B):T.done()});i.push(g)}),Ie.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Hf(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new zn(cn);return Dd(e).Wt({range:l},(g,y,b)=>{const[T,S,P]=g,B=ws(S);T===this.userId&&r.isPrefixOf(B)?B.length===i&&(d=d.add(P)):b.done()}).next(()=>this.dn(e,d))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(fu(e).get(a).next(l=>{if(null===l)throw At();tn(l.userId===this.userId),r.push(Wl(this.M,l))}))}),Ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return XC(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),Ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Dd(e).Wt({range:r},(a,l,d)=>{if(a[0]===this.userId){const g=ws(a[1]);i.push(g)}else d.done()}).next(()=>{tn(0===i.length)})})}containsKey(e,t){return eb(e,this.userId,t)}wn(e){return tb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eb(n,e,t){const r=Hf(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Dd(n).Wt({range:a,jt:!0},(d,g,y)=>{const[b,T,S]=d;b===e&&T===i&&(l=!0),y.done()}).next(()=>l)}function fu(n){return qr(n,"mutations")}function Dd(n){return qr(n,"documentMutations")}function tb(n){return qr(n,"mutationQueues")}class Yl{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Yl(0)}static yn(){return new Yl(-1)}}class QA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Yl(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Kt.fromTimestamp(new gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ro(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(tn(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Ro(e).Wt((l,d)=>{const g=Wf(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>Ie.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Ro(e).Wt((r,i)=>{const a=Wf(i);t(a)})}pn(e){return tE(e).get("targetGlobalKey").next(t=>(tn(null!==t),t))}In(e,t){return tE(e).put("targetGlobalKey",t)}Tn(e,t){return Ro(e).put(qC(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=su(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ro(e).Wt({range:i,index:"queryTargetsIndex"},(l,d,g)=>{const y=Wf(d);Oi(t,y.target)&&(a=y,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=aa(e);return t.forEach(l=>{const d=bi(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),Ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=aa(e);return Ie.forEach(t,a=>{const l=bi(a.path);return Ie.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=aa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=aa(e);let a=Un();return i.Wt({range:r,jt:!0},(l,d,g)=>{const y=ws(l[1]),b=new at(y);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=bi(t.path),i=IDBKeyRange.bound([r],[sA(r)],!1,!0);let a=0;return aa(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,d],g,y)=>{0!==l&&(a++,y.done())}).next(()=>a>0)}Et(e,t){return Ro(e).get(t).next(r=>r?Wf(r):null)}}function Ro(n){return qr(n,"targets")}function tE(n){return qr(n,"targetGlobal")}function aa(n){return qr(n,"targetDocuments")}function pu(n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,Ce.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==jC)throw n;Qe("LocalStore","Unexpectedly lost primary lease")}),Rm.apply(this,arguments)}function nE([n,e],[t,r]){const i=cn(n,t);return 0===i?cn(e,r):i}class nb{constructor(e){this.An=e,this.buffer=new zn(nE),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Qe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){$l(i)?Qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield pu(i)}yield t.Sn(e)}))}}class rb{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ie.resolve(Pi.A);const r=new nb(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(Sm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sm):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,d,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),Cf()<=gs.in.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(g-d)+`ms\n\tRemoved ${T} documents in `+(y-g)+`ms\nTotal Duration: ${y-b}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class ib{constructor(e,t){this.db=e,this.garbageCollector=new rb(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Mm(e,r)}removeReference(e,t,r){return Mm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mm(e,t)}On(e,t){return function(r,i){let a=!1;return tb(r).zt(l=>eb(r,l,i).next(d=>(d&&(a=!0),Ie.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,d)=>{if(d<=t){const g=this.On(e,l).next(y=>{if(!y)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Kt.min()),aa(e).delete([0,bi(l.path)])))});i.push(g)}}).next(()=>Ie.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mm(e,t)}Mn(e,t){const r=aa(e);let i,a=Pi.A;return r.Wt({index:"documentTargetsIndex"},([l,d],{path:g,sequenceNumber:y})=>{0===l?(a!==Pi.A&&t(new at(ws(i)),a),a=y,i=g):a=Pi.A}).next(()=>{a!==Pi.A&&t(new at(ws(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mm(n,e){return aa(n).put((r=n.currentSequenceNumber,{targetId:0,path:bi(e.path),sequenceNumber:r}));var r}class sb{constructor(){this.changes=new uu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class XA{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ua(e).put(r)}removeEntry(e,t,r){return ua(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],cu(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=sr.newInvalidDocument(t);return ua(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Fi(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:sr.newInvalidDocument(t)};return ua(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Fi(t))},(i,a)=>{r={document:this.$n(t,a),size:Am(a)}}).next(()=>r)}getEntries(e,t){let r=Es();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=Es(),i=new hr(at.comparator);return this.Ln(e,t,(a,l)=>{const d=this.$n(a,l);r=r.insert(a,d),i=i.insert(a,Am(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return Ie.resolve();let i=new zn(Nm);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(Fi(i.first()),Fi(i.last())),l=i.getIterator();let d=l.getNext();return ua(e).Wt({index:"documentKeyIndex",range:a},(g,y,b)=>{const T=at.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Nm(d,T)<0;)r(d,null),d=l.getNext();d&&d.isEqual(T)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?b.Ut(Fi(d)):b.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),cu(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ua(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let d=Es();for(const g of l){const y=this.$n(at.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=Es();const l=ab(t,r),d=ab(t,So.max());return ua(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(g,y,b)=>{const T=this.$n(at.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(T.key,T),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new Zf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ob(e).get("remoteDocumentGlobalKey").next(t=>(tn(!!t),t))}Fn(e,t){return ob(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function zA(n,e){let t;if(e.document)t=Hv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),i=Cd(e.noDocument.readTime);t=sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return At();{const r=at.fromSegments(e.unknownDocument.path),i=Cd(e.unknownDocument.version);t=sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new gr(r[0],r[1]);return Kt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Kt.min()))return r}return sr.newInvalidDocument(e)}}class Zf extends sb{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new uu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new zn((a,l)=>cn(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const g=Hl(this.Kn.M,l);i=i.add(a.path.popLast()),r+=Am(g)-d.size,t.push(this.Kn.addEntry(e,a,g))}else if(r-=d.size,this.trackRemovals){const g=Hl(this.Kn.M,l.convertToNoDocument(Kt.min()));t.push(this.Kn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),Ie.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function ob(n){return qr(n,"remoteDocumentGlobal")}function ua(n){return qr(n,"remoteDocumentsV14")}function Fi(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ab(n,e){const t=e.documentKey.path.toArray();return[n,cu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Nm(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=cn(t[a],r[a]),i)return i;return i=cn(t.length,r.length),i||(i=cn(t[t.length-2],r[r.length-2]),i||cn(t[t.length-1],r[r.length-1]))}class Yf{constructor(e){this.M=e}kt(e,t,r,i){const a=new Id("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FC,{unique:!0}),d.createObjectStore("documentMutations"),ub(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=Ie.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),ub(e)),l=l.next(()=>function(d){const g=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,g){return g.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FC,{unique:!0});const b=g.store("mutations"),T=y.map(S=>b.put(S));return Ie.waitFor(T)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:$A});g.createIndex("collectionPathOverlayIndex",HA,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",VC,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:PA});g.createIndex("documentKeyIndex",OA),g.createIndex("collectionGroupIndex",zv)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:VA}).createIndex("sequenceNumberIndex",UA,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:BA}).createIndex("documentKeyIndex",jA,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Am(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>Ie.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(d=>Ie.forEach(d,g=>{tn(g.userId===a.userId);const y=Wl(this.M,g);return XC(e,a.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,d)=>{const g=new Cn(l),y=[0,bi(g)];a.push(t.get(y).next(b=>b?Ie.resolve():t.put({targetId:0,path:bi(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Ie.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:LA});const r=t.store("collectionParents"),i=new JC,a=l=>{if(i.add(l)){const d=l.lastSegment(),g=l.popLast();return r.put({collectionId:d,parent:bi(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,d)=>{const g=new Cn(l);return a(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,d,g],y)=>{const b=ws(d);return a(b.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=Wf(i),l=qC(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const d=t.store("remoteDocumentsV14"),g=(y=l,y.document?new at(Cn.fromString(y.document.name).popFirst(5)):y.noDocument?at.fromSegments(y.noDocument.path):y.unknownDocument?at.fromSegments(y.unknownDocument.path):At()).path.toArray();var y;const b={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(b))}).next(()=>Ie.waitFor(i))}}function ub(n){n.createObjectStore("targetDocuments",{keyPath:LC}).createIndex("documentTargetsIndex",FA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kA,{unique:!0}),n.createObjectStore("targetGlobal")}const rE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iE{constructor(e,t,r,i,a,l,d,g,y,b,T=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=d,this.Xn=y,this.Zn=b,this.ts=T,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=S=>Promise.resolve(),!iE.vt())throw new He(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ib(this,i),this.hs=t+"main",this.M=new Gf(g),this.ls=new qi(this.hs,this.ts,new Yf(this.M)),this.fs=new QA(this.referenceDelegate,this.M),this.ds=new XA(this.M),this._s=new KC,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===b&&Gr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(ve.FAILED_PRECONDITION,rE);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Pi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ql(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if($l(e))return Qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return gu(e).get("owner").next(t=>Ie.resolve(this.bs(t)))}Vs(e){return Ql(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=qr(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),d=a.filter(g=>-1===l.indexOf(g));return Ie.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Ie.resolve(!0):gu(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new He(ve.FAILED_PRECONDITION,rE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ql(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new WC(t,Pi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ql(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return eE.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new ZA(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return zl.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?BC:13===l?UC:12===l?GA:11===l?qv:void At();var l;let d;return this.ls.runTransaction(e,i,a,g=>(d=new WC(g,this.es?this.es.next():Pi.A),"readwrite-primary"===t?this.Es(d).next(y=>!!y||this.As(d)).next(y=>{if(!y)throw Gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new He(ve.FAILED_PRECONDITION,jC);return r(d)}).next(y=>this.Ps(d).next(()=>y)):this.$s(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}$s(e){return gu(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new He(ve.FAILED_PRECONDITION,rE)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gu(e).put("owner",t)}static vt(){return qi.vt()}Rs(e){const t=gu(e);return t.get("owner").next(r=>this.bs(r)?(Qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ie.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Gr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,K.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Gr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gu(n){return qr(n,"owner")}function Ql(n){return qr(n,"clientMetadata")}function sE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eR{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return at.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):um(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new at(t)).next(r=>{let i=mm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=mm();return this.indexManager.getCollectionParents(e,i).next(l=>Ie.forEach(l,d=>{const g=(y=t,b=d.child(i),new vs(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.zs(e,g,r).next(y=>{y.forEach((b,T)=>{a=a.insert(b,T)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const d of l.mutations){const g=d.key;let y=i.get(g);null==y&&(y=sr.newInvalidDocument(g),i=i.insert(g,y)),dm(d,y,l.localWriteTime),y.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((a,l)=>{Lv(t,l)||(i=i.remove(a))}),i))}}class xm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Un(),i=Un();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new xm(e,t.fromCache,r,i)}}class oE{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Kt.min())?this.ti(e,t):this.Zs.Ks(e,i).next(a=>{const l=this.ei(t,a);return(Mf(t)||Nf(t))&&this.ni(t.limitType,l,i,r)?this.ti(e,t):(Cf()<=gs.in.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lm(t)),this.Zs.Qs(e,t,QI(r,-1)).next(d=>(l.forEach(g=>{d=d.insert(g.key,g)}),d)))});var a}ei(e,t){let r=new zn(iC(e));return t.forEach((i,a)=>{Lv(e,a)&&(r=r.add(a))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(e,t){return Cf()<=gs.in.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",lm(t)),this.Zs.Qs(e,t,So.min())}}class aE{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new hr(cn),this.ri=new uu(a=>su(a),Oi),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new eR(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function uE(n,e,t,r){return new aE(n,e,t,r)}function lb(n,e){return lE.apply(this,arguments)}function lE(){return lE=(0,Ce.Z)(function*(n,e){const t=ut(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.ai(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let g=Un();for(const y of i){l.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of a){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.ci.Ks(r,g).next(y=>({hi:y,removedBatchIds:l,addedBatchIds:d}))})})}),lE.apply(this,arguments)}function wP(n,e){const t=ut(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ui.newChangeBuffer({trackRemovals:!0});return function(l,d,g,y){const b=g.batch,T=b.keys();let S=Ie.resolve();return T.forEach(P=>{S=S.next(()=>y.getEntry(d,P)).next(B=>{const J=g.docVersions.get(P);tn(null!==J),B.version.compareTo(J)<0&&(b.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),y.addEntry(B)))})}),S.next(()=>l.Bs.removeMutationBatch(d,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function Pm(n){const e=ut(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function cE(n,e){const t=ut(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const d=[];e.targetChanges.forEach((y,b)=>{const T=i.get(b);if(!T)return;d.push(t.fs.removeMatchingKeys(a,y.removedDocuments,b).next(()=>t.fs.addMatchingKeys(a,y.addedDocuments,b)));let S=T.withSequenceNumber(a.currentSequenceNumber);var P,B,J;e.targetMismatches.has(b)?S=S.withResumeToken(Qr.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),i=i.insert(b,S),B=S,J=y,(0===(P=T).resumeToken.approximateByteSize()||B.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&d.push(t.fs.updateTargetData(a,S))});let g=Es();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),d.push(dE(a,l,e.documentUpdates).next(y=>{g=y})),!r.isEqual(Kt.min())){const y=t.fs.getLastRemoteSnapshotVersion(a).next(b=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(y)}return Ie.waitFor(d).next(()=>l.apply(a)).next(()=>t.ci.Gs(a,g)).next(()=>g)}).then(a=>(t.ii=i,a))}function dE(n,e,t){let r=Un();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Es();return t.forEach((l,d)=>{const g=i.get(l);d.isNoDocument()&&d.version.isEqual(Kt.min())?(e.removeEntry(l,d.readTime),a=a.insert(l,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||0===d.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(d),a=a.insert(l,d)):Qe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",g.version," Watch version:",d.version)}),a})}function hE(n,e){const t=ut(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function mu(n,e){const t=ut(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,Ie.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new lu(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Sd(n,e,t){return fE.apply(this,arguments)}function fE(){return fE=(0,Ce.Z)(function*(n,e,t){const r=ut(n),i=r.ii.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!$l(l))throw l;Qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),fE.apply(this,arguments)}function Om(n,e,t){const r=ut(n);let i=Kt.min(),a=Un();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,g,y){const b=ut(d),T=b.ri.get(y);return void 0!==T?Ie.resolve(b.ii.get(T)):b.fs.getTargetData(g,y)}(r,l,zi(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,d.targetId).next(g=>{a=g})}).next(()=>r.si.Qs(l,e,t?i:Kt.min(),t?a:Un())).next(d=>(km(r,rC(e),d),{documents:d,li:a})))}function cb(n,e){const t=ut(n),r=ut(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function pE(n,e){const t=ut(n),r=t.oi.get(e)||Kt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,QI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(km(t,e,i),i))}function km(n,e,t){let r=Kt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(e,r)}function gE(){return gE=(0,Ce.Z)(function*(n,e,t,r){const i=ut(n);let a=Un(),l=Es();for(const y of t){const b=e.fi(y.metadata.name);y.document&&(a=a.add(b));const T=e.di(y);T.setReadTime(e._i(y.metadata.readTime)),l=l.insert(b,T)}const d=i.ui.newChangeBuffer({trackRemovals:!0}),g=yield mu(i,(y=r,zi(kl(Cn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>dE(y,d,l).next(b=>(d.apply(y),b)).next(b=>i.fs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.fs.addMatchingKeys(y,a,g.targetId)).next(()=>i.ci.Gs(y,b)).next(()=>b)))}),gE.apply(this,arguments)}function hb(n,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ce.Z)(function*(n,e,t=Un()){const r=yield mu(n,zi(Zv(e.bundledQuery))),i=ut(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=zr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const d=r.withResumeToken(Qr.EMPTY_BYTE_STRING,l);return i.ii=i.ii.insert(d.targetId,d),i.fs.updateTargetData(a,d).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),Fm.apply(this,arguments)}class tR{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return Ie.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:zr(r.createTime)}),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:Zv(r.bundledQuery),readTime:zr(r.readTime)}),Ie.resolve();var r}}class fb{constructor(){this.overlays=new hr(at.comparator),this.gi=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),Ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),Ie.resolve()}getOverlaysForCollection(e,t,r){const i=vd(),a=t.length+1,l=new at(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new hr((y,b)=>y-b);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=a.get(y.largestBatchId);null===b&&(b=vd(),a=a.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const d=vd(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,b)=>d.set(y,b)),!(d.size()>=i)););return Ie.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new zC(t,r));let a=this.gi.get(t);void 0===a&&(a=Un(),this.gi.set(t,a)),this.gi.set(t,a.add(r.key))}}class Lm{constructor(){this.yi=new zn(Jr.pi),this.Ii=new zn(Jr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Jr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Jr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new at(new Cn([])),r=new Jr(t,e),i=new Jr(t,e+1),a=[];return this.Ii.forEachInRange([r,i],l=>{this.Ai(l),a.push(l.key)}),a}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new at(new Cn([])),r=new Jr(t,e),i=new Jr(t,e+1);let a=Un();return this.Ii.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Jr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Jr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return at.comparator(e.key,t.key)||cn(e.vi,t.vi)}static Ti(e,t){return cn(e.vi,t.vi)||at.comparator(e.key,t.key)}}class pb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new zn(Jr.pi)}checkEmpty(e){return Ie.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.Si;this.Si++;const l=new Kv(a,t,r,i);this.Bs.push(l);for(const d of i)this.Di=this.Di.add(new Jr(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Ie.resolve(l)}lookupMutationBatch(e,t){return Ie.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),a=i<0?0:i;return Ie.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return Ie.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jr(t,0),i=new Jr(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],l=>{const d=this.Ci(l.vi);a.push(d)}),Ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(cn);return t.forEach(i=>{const a=new Jr(i,0),l=new Jr(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,l],d=>{r=r.add(d.vi)})}),Ie.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;at.isDocumentKey(a)||(a=a.child(""));const l=new Jr(new at(a),0);let d=new zn(cn);return this.Di.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(g.vi)),!0)},l),Ie.resolve(this.Ni(d))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){tn(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return Ie.forEach(t.mutations,i=>{const a=new Jr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Jr(t,0),i=this.Di.firstAfterOrEqual(r);return Ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ie.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class nR{constructor(e){this.Mi=e,this.docs=new hr(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ie.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=Es();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():sr.newInvalidDocument(i))}),Ie.resolve(r)}getAllFromCollection(e,t,r){let i=Es();const a=new at(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:g}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||dA(cA(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,t,r,i){At()}Oi(e,t){return Ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ti(this)}getSize(e){return Ie.resolve(this.size)}}class Ti extends sb{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),Ie.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Ad{constructor(e){this.persistence=e,this.Fi=new uu(t=>su(t),Oi),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Lm,this.targetCount=0,this.Li=Yl.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),Ie.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Yl(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.Tn(t),Ie.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Fi.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Fi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),Ie.waitFor(a).next(()=>i)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return Ie.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),Ie.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),Ie.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return Ie.resolve(r)}containsKey(e,t){return Ie.resolve(this.Bi.containsKey(t))}}class rR{constructor(e,t){this.Ui={},this.overlays={},this.es=new Pi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Ad(this),this.indexManager=new bd,this.ds=new nR(r=>this.referenceDelegate.qi(r)),this.M=new Gf(t),this._s=new tR(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new pb(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Qe("MemoryPersistence","Starting transaction:",e);const i=new iR(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(e,t){return Ie.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class iR extends $C{constructor(e){super(),this.currentSequenceNumber=e}}class gb{constructor(e){this.persistence=e,this.ji=new Lm,this.Wi=null}static zi(e){return new gb(e)}get Hi(){if(this.Wi)return this.Wi;throw At()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),Ie.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Hi,r=>{const i=at.fromPath(r);return this.Ji(e,i).next(a=>{a||t.removeEntry(i,Kt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return Ie.or([()=>Ie.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Rd(n,e){return`firestore_clients_${n}_${e}`}function mb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qf(n,e){return`firestore_targets_${n}_${e}`}class Vm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new He(i.error.code,i.error.message))),l?new Vm(e,t,i.state,a):(Gr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Md{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new He(r.error.code,r.error.message))),a?new Md(e,r.state,i):(Gr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Um{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=_m();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Dv(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Um(e,a):(Gr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mE{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mE(t.clientId,t.onlineState):(Gr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jf{constructor(){this.activeTargetIds=_m()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bm{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new hr(cn),this.started=!1,this.rr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=Rd(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Jf),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const a=e.getItem(Rd(e.persistenceKey,i));if(a){const l=Um.Yi(i,a);l&&(e.ir=e.ir.insert(l.clientId,l))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Qf(this.persistenceKey,e));if(r){const i=Md.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qf(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Qe("SharedClientState","READ",e,t),t}setItem(e,t){Qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Gr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(a){let l=Pi.A;if(null!=a)try{const d=JSON.parse(a);tn("number"==typeof d),l=d}catch(d){Gr("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Pi.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.kr(a)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new Vm(this.currentUser,e,t,r),a=mb(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Ir(e){const t=mb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=Qf(this.persistenceKey,e),a=new Md(e,t,r);this.setItem(i,a.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Um.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Vm.Yi(new hi(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return Md.Yi(i,t)}mr(e){return mE.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),l=[],d=[];return a.forEach(g=>{i.has(g)||l.push(g)}),i.forEach(g=>{a.has(g)||d.push(g)}),this.syncEngine.Fr(l,d).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=_m();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class _E{constructor(){this.$r=new Jf,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Jf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jm{Lr(e){}shutdown(){}}class $m{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const IP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class _b{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class sR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,a){const l=this.uo(e,t);Qe("RestConnection","Sending: ",l,r);const d={};return this.ao(d,i,a),this.co(e,l,d,r).then(g=>(Qe("RestConnection","Received: ",g),g),g=>{throw Qg("RestConnection",`${e} failed with error: `,g,"url: ",l,"request:",r),g})}ho(e,t,r,i,a){return this.oo(e,t,r,i,a)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+cd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}uo(e,t){return`${this.io}/v1/${t}:${IP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const d=new QS;d.listenOnce(KS.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Yg.NO_ERROR:const y=d.getResponseJson();Qe("Connection","XHR received:",JSON.stringify(y)),a(y);break;case Yg.TIMEOUT:Qe("Connection",'RPC "'+e+'" timed out'),l(new He(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Yg.HTTP_ERROR:const b=d.getStatus();if(Qe("Connection",'RPC "'+e+'" failed with status:',b,"response text:",d.getResponseText()),b>0){const T=d.getResponseJson().error;if(T&&T.status&&T.message){const S=function(P){const B=P.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(B)>=0?B:ve.UNKNOWN}(T.status);l(new He(S,T.message))}else l(new He(ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new He(ve.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{Qe("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zS(),l=qS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new YS({})),this.ao(d.initMessageHeaders,t,r),(0,K.uI)()||(0,K.b$)()||(0,K.d)()||(0,K.w1)()||(0,K.Mn)()||(0,K.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Qe("Connection","Creating WebChannel: "+g,d);const y=a.createWebChannel(g,d);let b=!1,T=!1;const S=new _b({Wr:B=>{T?Qe("Connection","Not sending because WebChannel is closed:",B):(b||(Qe("Connection","Opening WebChannel transport."),y.open(),b=!0),Qe("Connection","WebChannel sending:",B),y.send(B))},zr:()=>y.close()}),P=(B,J,ye)=>{B.listen(J,ft=>{try{ye(ft)}catch(dt){setTimeout(()=>{throw dt},0)}})};return P(y,If.EventType.OPEN,()=>{T||Qe("Connection","WebChannel transport opened.")}),P(y,If.EventType.CLOSE,()=>{T||(T=!0,Qe("Connection","WebChannel transport closed"),S.no())}),P(y,If.EventType.ERROR,B=>{T||(T=!0,Qg("Connection","WebChannel transport errored:",B),S.no(new He(ve.UNAVAILABLE,"The operation could not be completed")))}),P(y,If.EventType.MESSAGE,B=>{var J;if(!T){const ye=B.data[0];tn(!!ye);const ft=ye,dt=ft.error||(null===(J=ft[0])||void 0===J?void 0:J.error);if(dt){Qe("Connection","WebChannel received error:",dt);const yt=dt.status;let lt=function(Xt){const Rn=Wr[Xt];if(void 0!==Rn)return yC(Rn)}(yt),Zt=dt.message;void 0===lt&&(lt=ve.INTERNAL,Zt="Unknown error status: "+yt+" with message "+dt.message),T=!0,S.no(new He(lt,Zt)),y.close()}else Qe("Connection","WebChannel received:",ye),S.so(ye)}}),P(l,ZS.STAT_EVENT,B=>{B.stat===Ev.PROXY?Qe("Connection","Detected buffering proxy"):B.stat===Ev.NOPROXY&&Qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.eo()},0),S}}function yE(){return"undefined"!=typeof window?window:null}function Jl(){return"undefined"!=typeof document?document:null}function Nd(n){return new CA(n,!0)}class vE{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Hm{constructor(e,t,r,i,a,l,d,g){this.Yn=e,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new vE(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(Gr(t.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new He(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,Ce.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EE extends Hm{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function SA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:At(),i=e.targetChange.targetIds||[],a=function(g,y){return g.N?(tn(void 0===y||"string"==typeof y),Qr.fromBase64String(y||"")):(tn(void 0===y||y instanceof Uint8Array),Qr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(g){const y=void 0===g.code?ve.UNKNOWN:yC(g.code);return new He(y,g.message||"")}(l);t=new Lf(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Ao(n,r.document.name),a=zr(r.document.updateTime),l=new ri({mapValue:{fields:r.document.fields}}),d=sr.newFoundDocument(i,a,l);t=new ym(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Ao(n,r.document),a=r.readTime?zr(r.readTime):Kt.min(),l=sr.newNoDocument(i,a);t=new ym([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ao(n,r.document);t=new ym([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return At();{const r=e.filter,a=new mC(r.count||0);t=new IC(r.targetId,a)}}var g;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Kt.min():a.readTime?zr(a.readTime):Kt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Em(this.M),t.addTarget=function(i,a){let l;const d=a.target;return l=om(d)?{documents:AC(i,d)}:{query:RC(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=TC(i,a.resumeToken):a.snapshotVersion.compareTo(Kt.min())>0&&(l.readTime=Bf(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function AA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return At()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Em(this.M),t.removeTarget=e,this.Fo(t)}}class CP extends Hm{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(tn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function $f(n,e){return n&&n.length>0?(tn(void 0!==e),n.map(t=>function(r,i){let a=zr(r.updateTime?r.updateTime:i);return a.isEqual(Kt.min())&&(a=zr(i)),new fC(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.Yo(r,t)}return tn(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Em(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jf(this.M,r))};this.Fo(t)}}class oR extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(ve.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(ve.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class aR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Gr(t),this.iu=!1):Qe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class yb{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(d=>{r.enqueueAndForget((0,Ce.Z)(function*(){var g;la(l)&&(Qe("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ce.Z)(function*(y){const b=ut(y);b.fu.add(4),yield Xl(b),b.wu.set("Unknown"),b.fu.delete(4),yield xd(b)}),function(y){return g.apply(this,arguments)})(l))}))}),this.wu=new aR(r,i)}}function xd(n){return wE.apply(this,arguments)}function wE(){return wE=(0,Ce.Z)(function*(n){if(la(n))for(const e of n.du)yield e(!0)}),wE.apply(this,arguments)}function Xl(n){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,Ce.Z)(function*(n){for(const e of n.du)yield e(!1)}),Gm.apply(this,arguments)}function Wm(n,e){const t=ut(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Km(t)?qm(t):Pd(t).xo()&&zm(t,e))}function Xf(n,e){const t=ut(n),r=Pd(t);t.lu.delete(e),r.xo()&&vb(t,e),0===t.lu.size&&(r.xo()?r.Mo():la(t)&&t.wu.set("Unknown"))}function zm(n,e){n.mu.Z(e.targetId),Pd(n).jo(e)}function vb(n,e){n.mu.Z(e),Pd(n).Wo(e)}function qm(n){n.mu=new CC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Pd(n).start(),n.wu.ru()}function Km(n){return la(n)&&!Pd(n).Co()&&n.lu.size>0}function la(n){return 0===ut(n).fu.size}function IE(n){n.mu=void 0}function uR(n){return CE.apply(this,arguments)}function CE(){return CE=(0,Ce.Z)(function*(n){n.lu.forEach((e,t)=>{zm(n,e)})}),CE.apply(this,arguments)}function bP(n,e){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Ce.Z)(function*(n,e){IE(n),Km(n)?(n.wu.au(e),qm(n)):n.wu.set("Unknown")}),Zm.apply(this,arguments)}function TP(n,e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,Ce.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Lf&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.lu.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.lu.delete(d),i.mu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bE(n,r)}else if(e instanceof ym?n.mu.ut(e):e instanceof IC?n.mu._t(e):n.mu.ht(e),!t.isEqual(Kt.min()))try{const r=yield Pm(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.mu.yt(a);return l.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.lu.get(g);y&&i.lu.set(g,y.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const g=i.lu.get(d);if(!g)return;i.lu.set(d,g.withResumeToken(Qr.EMPTY_BYTE_STRING,g.snapshotVersion)),vb(i,d);const y=new lu(g.target,d,1,g.sequenceNumber);zm(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Qe("RemoteStore","Failed to raise snapshot:",r),yield bE(n,r)}var r}),Eb.apply(this,arguments)}function bE(n,e,t){return wb.apply(this,arguments)}function wb(){return wb=(0,Ce.Z)(function*(n,e,t){if(!$l(e))throw e;n.fu.add(1),yield Xl(n),n.wu.set("Offline"),t||(t=()=>Pm(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield xd(n)}))}),wb.apply(this,arguments)}function lR(n,e){return e().catch(t=>bE(n,t,e))}function ep(n){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,Ce.Z)(function*(n){const e=ut(n),t=ec(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;DP(e);)try{const i=yield hE(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,Ym(e,i)}catch(i){yield bE(e,i)}cR(e)&&TE(e)}),Ib.apply(this,arguments)}function DP(n){return la(n)&&n.hu.length<10}function Ym(n,e){n.hu.push(e);const t=ec(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function cR(n){return la(n)&&!ec(n).Co()&&n.hu.length>0}function TE(n){ec(n).start()}function DE(n){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,Ce.Z)(function*(n){ec(n).Zo()}),Qm.apply(this,arguments)}function Cb(n){return bb.apply(this,arguments)}function bb(){return bb=(0,Ce.Z)(function*(n){const e=ec(n);for(const t of n.hu)e.Jo(t.mutations)}),bb.apply(this,arguments)}function SE(n,e,t){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ce.Z)(function*(n,e,t){const r=n.hu.shift(),i=bm.from(r,e,t);yield lR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ep(n)}),Jm.apply(this,arguments)}function Tb(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ce.Z)(function*(n,e){var t;e&&ec(n).Ho&&(yield(t=(0,Ce.Z)(function*(r,i){if(_C(a=i.code)&&a!==ve.ABORTED){const l=r.hu.shift();ec(r).ko(),yield lR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield ep(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),cR(n)&&TE(n)}),Xm.apply(this,arguments)}function dR(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,Ce.Z)(function*(n,e){const t=ut(n);t.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const r=la(t);t.fu.add(3),yield Xl(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield xd(t)}),e_.apply(this,arguments)}function AE(n,e){return tp.apply(this,arguments)}function tp(){return tp=(0,Ce.Z)(function*(n,e){const t=ut(n);e?(t.fu.delete(2),yield xd(t)):e||(t.fu.add(2),yield Xl(t),t.wu.set("Unknown"))}),tp.apply(this,arguments)}function Pd(n){return n.gu||(n.gu=function(e,t,r){const i=ut(e);return i.eu(),new EE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:uR.bind(null,n),Yr:bP.bind(null,n),Qo:TP.bind(null,n)}),n.du.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.gu.ko(),Km(n)?qm(n):n.wu.set("Unknown")):(yield n.gu.stop(),IE(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function ec(n){return n.yu||(n.yu=function(e,t,r){const i=ut(e);return i.eu(),new CP(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:DE.bind(null,n),Yr:Tb.bind(null,n),Xo:Cb.bind(null,n),Yo:SE.bind(null,n)}),n.du.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.yu.ko(),yield ep(n)):(yield n.yu.stop(),n.hu.length>0&&(Qe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class Db{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new Db(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(n,e){if(Gr("AsyncQueue",`${e}: ${n}`),$l(n))return new He(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Od{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=mm(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new Od(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Od)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Od;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Sb{constructor(){this.pu=new hr(at.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):At():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class kd{constructor(e,t,r,i,a,l,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new kd(e,t,Od.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class SP{constructor(){this.Tu=void 0,this.listeners=[]}}class hR{constructor(){this.queries=new uu(e=>Fv(e),gd),this.onlineState="Unknown",this.Eu=new Set}}function rp(n,e){return RE.apply(this,arguments)}function RE(){return RE=(0,Ce.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new SP),i)try{a.Tu=yield t.onListen(r)}catch(l){const d=np(l,`Initialization of query '${lm(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Au(t.onlineState),a.Tu&&e.Ru(a.Tu)&&xE(t)}),RE.apply(this,arguments)}function Ki(n,e){return ME.apply(this,arguments)}function ME(){return ME=(0,Ce.Z)(function*(n,e){const t=ut(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ME.apply(this,arguments)}function NE(n,e){const t=ut(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.Ru(i)&&(r=!0);l.Tu=i}}r&&xE(t)}function fR(n,e,t){const r=ut(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function xE(n){n.Eu.forEach(e=>{e.next()})}class ip{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new kd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Ab{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class PE{constructor(e){this.M=e}fi(e){return Ao(this.M,e)}di(e){return e.metadata.exists?Hv(this.M,e.document,!1):sr.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return zr(e)}}class pR{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OE(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new PE(this.M);for(const i of e)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Un()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function db(n,e,t,r){return gE.apply(this,arguments)}(e.localStore,new PE(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield hb(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function OE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kE{constructor(e){this.key=e}}class Rb{constructor(e){this.key=e}}class Mb{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Un(),this.mutatedKeys=Un(),this.Uu=iC(e),this.qu=new Od(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new Sb,i=t?t.qu:this.qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const g=Mf(this.query)&&i.size===this.query.limit?i.last():null,y=Nf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const S=i.get(b),P=Lv(this.query,T)?T:null,B=!!S&&this.mutatedKeys.has(S.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let ye=!1;S&&P?S.data.isEqual(P.data)?B!==J&&(r.track({type:3,doc:P}),ye=!0):this.ju(S,P)||(r.track({type:2,doc:P}),ye=!0,(g&&this.Uu(P,g)>0||y&&this.Uu(P,y)<0)&&(d=!0)):!S&&P?(r.track({type:0,doc:P}),ye=!0):S&&!P&&(r.track({type:1,doc:S}),ye=!0,(g||y)&&(d=!0)),ye&&(P?(l=l.add(P),a=J?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),Mf(this.query)||Nf(this.query))for(;l.size>this.query.limit;){const b=Mf(this.query)?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{qu:l,Qu:r,ni:d,mutatedKeys:a}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const a=e.Qu.Iu();a.sort((y,b)=>function(T,S){const P=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return P(T)-P(S)}(y.type,b.type)||this.Uu(y.doc,b.doc)),this.Wu(r);const l=t?this.zu():[],d=0===this.Lu.size&&this.current?1:0,g=d!==this.Bu;return this.Bu=d,0!==a.length||g?{snapshot:new kd(this.query,e.qu,i,a,e.mutatedKeys,0===d,g,!1),Hu:l}:{Hu:l}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Sb,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Un(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Rb(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new kE(r))}),t}Yu(e){this.$u=e.li,this.Lu=Un();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return kd.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class FE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Qs{constructor(e){this.key=e,this.Zu=!1}}class gR{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.ta={},this.ea=new uu(d=>Fv(d),gd),this.na=new Map,this.sa=new Set,this.ia=new hr(at.comparator),this.ra=new Map,this.oa=new Lm,this.ua={},this.aa=new Map,this.ca=Yl.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function AP(n,e){return LE.apply(this,arguments)}function LE(){return LE=(0,Ce.Z)(function*(n,e){const t=Ub(n);let r,i;const a=t.ea.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const l=yield mu(t.localStore,zi(e));t.isPrimaryClient&&Wm(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield t_(t,e,r,"current"===d)}return i}),LE.apply(this,arguments)}function t_(n,e,t,r){return VE.apply(this,arguments)}function VE(){return VE=(0,Ce.Z)(function*(n,e,t,r){n.la=(b,T,S)=>{return(P=(0,Ce.Z)(function*(B,J,ye,ft){let dt=J.view.Gu(ye);dt.ni&&(dt=yield Om(B.localStore,J.query,!1).then(({documents:Zt})=>J.view.Gu(Zt,dt)));const yt=ft&&ft.targetChanges.get(J.targetId),lt=J.view.applyChanges(dt,B.isPrimaryClient,yt);return o_(B,J.targetId,lt.Hu),lt.snapshot}),function(B,J,ye,ft){return P.apply(this,arguments)})(n,b,T,S);var P};const i=yield Om(n.localStore,e,!0),a=new Mb(e,i.li),l=a.Gu(i.documents),d=Ff.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(l,n.isPrimaryClient,d);o_(n,t,g.Hu);const y=new FE(e,t,a);return n.ea.set(e,y),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),g.snapshot}),VE.apply(this,arguments)}function mR(n,e){return n_.apply(this,arguments)}function n_(){return n_=(0,Ce.Z)(function*(n,e){const t=ut(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(a=>!gd(a,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Xf(t.remoteStore,r.targetId),op(t,r.targetId)}).catch(pu))):(op(t,r.targetId),yield Sd(t.localStore,r.targetId,!0))}),n_.apply(this,arguments)}function Nb(){return Nb=(0,Ce.Z)(function*(n,e,t){const r=Bb(n);try{const i=yield function(a,l){const d=ut(a),g=gr.now(),y=l.reduce((T,S)=>T.add(S.key),Un());let b;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>d.ci.Ks(T,y).next(S=>{b=S;const P=[];for(const B of l){const J=gC(B,b.get(B.key));null!=J&&P.push(new Ul(B.key,J,YI(J.value.mapValue),Mr.exists(!0)))}return d.Bs.addMutationBatch(T,g,P,l)})).then(T=>(T.applyToLocalDocumentSet(b),{batchId:T.batchId,changes:b}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let g=a.ua[a.currentUser.toKey()];g||(g=new hr(cn)),g=g.insert(l,d),a.ua[a.currentUser.toKey()]=g}(r,i.batchId,t),yield ca(r,i.changes),yield ep(r.remoteStore)}catch(i){const a=np(i,"Failed to persist write");t.reject(a)}}),Nb.apply(this,arguments)}function UE(n,e){return r_.apply(this,arguments)}function r_(){return r_=(0,Ce.Z)(function*(n,e){const t=ut(n);try{const r=yield cE(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ra.get(a);l&&(tn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Zu=!0:i.modifiedDocuments.size>0?tn(l.Zu):i.removedDocuments.size>0&&(tn(l.Zu),l.Zu=!1))}),yield ca(t,r,e)}catch(r){yield pu(r)}}),r_.apply(this,arguments)}function xb(n,e,t){const r=ut(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((a,l)=>{const d=l.view.Au(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=ut(a);d.onlineState=l;let g=!1;d.queries.forEach((y,b)=>{for(const T of b.listeners)T.Au(l)&&(g=!0)}),g&&xE(d)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yR(n,e,t){return i_.apply(this,arguments)}function i_(){return i_=(0,Ce.Z)(function*(n,e,t){const r=ut(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),a=i&&i.key;if(a){let l=new hr(at.comparator);l=l.insert(a,sr.newNoDocument(a,Kt.min()));const d=Un().add(a),g=new sa(Kt.min(),new Map,new zn(cn),l,d);yield UE(r,g),r.ia=r.ia.remove(a),r.ra.delete(e),GE(r)}else yield Sd(r.localStore,e,!1).then(()=>op(r,e,t)).catch(pu)}),i_.apply(this,arguments)}function BE(n,e){return sp.apply(this,arguments)}function sp(){return sp=(0,Ce.Z)(function*(n,e){const t=ut(n),r=e.batch.batchId;try{const i=yield wP(t.localStore,e);HE(t,r,null),$E(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ca(t,i)}catch(i){yield pu(i)}}),sp.apply(this,arguments)}function Pb(n,e,t){return jE.apply(this,arguments)}function jE(){return jE=(0,Ce.Z)(function*(n,e,t){const r=ut(n);try{const i=yield function(a,l){const d=ut(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.Bs.lookupMutationBatch(g,l).next(b=>(tn(null!==b),y=b.keys(),d.Bs.removeMutationBatch(g,b))).next(()=>d.Bs.performConsistencyCheck(g)).next(()=>d.ci.Ks(g,y))})}(r.localStore,e);HE(r,e,t),$E(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ca(r,i)}catch(i){yield pu(i)}}),jE.apply(this,arguments)}function s_(){return s_=(0,Ce.Z)(function*(n,e){const t=ut(n);la(t.remoteStore)||Qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=ut(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.Bs.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=np(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),s_.apply(this,arguments)}function $E(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function HE(n,e,t){const r=ut(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||vR(n,r)})}function vR(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Xf(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),GE(n))}function o_(n,e,t){for(const r of t)r instanceof kE?(n.oa.addReference(r.key,e),ER(n,r)):r instanceof Rb?(Qe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||vR(n,r.key)):At()}function ER(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Qe("SyncEngine","New document in limbo: "+t),n.sa.add(r),GE(n))}function GE(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new at(Cn.fromString(e)),r=n.ca.next();n.ra.set(r,new Qs(t)),n.ia=n.ia.insert(t,r),Wm(n.remoteStore,new lu(zi(kl(t.path)),r,2,Pi.A))}}function ca(n,e,t){return kb.apply(this,arguments)}function kb(){return kb=(0,Ce.Z)(function*(n,e,t){const r=ut(n),i=[],a=[],l=[];var d;r.ea.isEmpty()||(r.ea.forEach((d,g)=>{l.push(r.la(g,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),i.push(y);const b=xm.Ys(g.targetId,y);a.push(b)}}))}),yield Promise.all(l),r.ta.Qo(i),yield(d=(0,Ce.Z)(function*(g,y){const b=ut(g);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>Ie.forEach(y,S=>Ie.forEach(S.Hs,P=>b.persistence.referenceDelegate.addReference(T,S.targetId,P)).next(()=>Ie.forEach(S.Js,P=>b.persistence.referenceDelegate.removeReference(T,S.targetId,P)))))}catch(T){if(!$l(T))throw T;Qe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const P=b.ii.get(S),J=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);b.ii=b.ii.insert(S,J)}}}),function(g,y){return d.apply(this,arguments)})(r.localStore,a))}),kb.apply(this,arguments)}function RP(n,e){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,Ce.Z)(function*(n,e){const t=ut(n);if(!t.currentUser.isEqual(e)){Qe("SyncEngine","User change. New user:",e.toKey());const r=yield lb(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(l=>{l.forEach(d=>{d.reject(new He(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ca(t,r.hi)}var i}),Fb.apply(this,arguments)}function MP(n,e){const t=ut(n),r=t.ra.get(e);if(r&&r.Zu)return Un().add(r.key);{let i=Un();const a=t.na.get(e);if(!a)return i;for(const l of a){const d=t.ea.get(l);i=i.unionWith(d.view.Ku)}return i}}function NP(n,e){return WE.apply(this,arguments)}function WE(){return WE=(0,Ce.Z)(function*(n,e){const t=ut(n),r=yield Om(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&o_(t,e.targetId,i.Hu),i}),WE.apply(this,arguments)}function a_(n,e){return zE.apply(this,arguments)}function zE(){return zE=(0,Ce.Z)(function*(n,e){const t=ut(n);return pE(t.localStore,e).then(r=>ca(t,r))}),zE.apply(this,arguments)}function wR(n,e,t,r){return u_.apply(this,arguments)}function u_(){return u_=(0,Ce.Z)(function*(n,e,t,r){const i=ut(n),a=yield function(l,d){const g=ut(l),y=ut(g.Bs);return g.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.fn(b,d).next(T=>T?g.ci.Ks(b,T):Ie.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield ep(i.remoteStore):"acknowledged"===t||"rejected"===t?(HE(i,e,r||null),$E(i,e),d=e,ut(ut(i.localStore).Bs)._n(d)):At(),yield ca(i,a)):Qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),u_.apply(this,arguments)}function l_(){return l_=(0,Ce.Z)(function*(n,e){const t=ut(n);if(Ub(t),Bb(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield c_(t,r.toArray());t.ha=!0,yield AE(t.remoteStore,!0);for(const a of i)Wm(t.remoteStore,a)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(op(t,l),Sd(t.localStore,l,!0))),Xf(t.remoteStore,l)}),yield i,yield c_(t,r),function(a){const l=ut(a);l.ra.forEach((d,g)=>{Xf(l.remoteStore,g)}),l.oa.bi(),l.ra=new Map,l.ia=new hr(at.comparator)}(t),t.ha=!1,yield AE(t.remoteStore,!1)}}),l_.apply(this,arguments)}function c_(n,e,t){return ap.apply(this,arguments)}function ap(){return ap=(0,Ce.Z)(function*(n,e,t){const r=ut(n),i=[],a=[];for(const l of e){let d;const g=r.na.get(l);if(g&&0!==g.length){d=yield mu(r.localStore,zi(g[0]));for(const y of g){const b=r.ea.get(y),T=yield NP(r,b);T.snapshot&&a.push(T.snapshot)}}else{const y=yield cb(r.localStore,l);d=yield mu(r.localStore,y),yield t_(r,Lb(y),l,!1)}i.push(d)}return r.ta.Qo(a),i}),ap.apply(this,arguments)}function Lb(n){return nC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qE(n){const e=ut(n);return ut(ut(e.localStore).persistence).Fs()}function KE(n,e,t,r){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,Ce.Z)(function*(n,e,t,r){const i=ut(n);if(i.ha)return void Qe("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield pE(i.localStore,rC(a[0])),d=sa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ca(i,l,d);break}case"rejected":yield Sd(i.localStore,e,!0),op(i,e,r);break;default:At()}}),Fd.apply(this,arguments)}function xP(n,e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,Ce.Z)(function*(n,e,t){const r=Ub(n);if(r.ha){for(const i of e){if(r.na.has(i)){Qe("SyncEngine","Adding an already active target "+i);continue}const a=yield cb(r.localStore,i),l=yield mu(r.localStore,a);yield t_(r,Lb(a),l.targetId,!1),Wm(r.remoteStore,l)}for(const i of t)r.na.has(i)&&(yield Sd(r.localStore,i,!1).then(()=>{Xf(r.remoteStore,i),op(r,i)}).catch(pu))}}),Vb.apply(this,arguments)}function Ub(n){const e=ut(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yR.bind(null,e),e.ta.Qo=NE.bind(null,e.eventManager),e.ta.fa=fR.bind(null,e.eventManager),e}function Bb(n){const e=ut(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pb.bind(null,e),e}class $b{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=Nd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return uE(this.persistence,new oE,e.initialUser,this.M)}wa(e){return new rR(gb.zi,this.M)}_a(e){return new _E}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Hb extends $b{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield Bb(r.ya.syncEngine),yield ep(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return uE(this.persistence,new oE,e.initialUser,this.M)}ma(e){return new JA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=sE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new iE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,yE(),Jl(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new _E}}class IR extends Hb{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof Bm&&(r.sharedClientState.syncEngine={Mr:wR.bind(null,i),Or:KE.bind(null,i),Fr:xP.bind(null,i),Fs:qE.bind(null,i),kr:a_.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,Ce.Z)(function*(l){yield function tc(n,e){return l_.apply(this,arguments)}(r.ya.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}_a(e){const t=yE();if(!Bm.vt(t))throw new He(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ZE{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>xb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=RP.bind(null,r.syncEngine),yield AE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hR}createDatastore(e){const t=Nd(e.databaseInfo.databaseId),r=new sR(e.databaseInfo);return new oR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>xb(this.syncEngine,d,0),l=$m.vt()?new $m:new jm,new yb(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,g,y){const b=new gR(r,i,a,l,d,g);return y&&(b.ha=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=ut(t);Qe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Xl(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YE(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class up{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gb{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new Ab(JSON.parse(a),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ce.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class CR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new He(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,l){const d=ut(a),g=Em(d.M)+"/documents",y={documents:l.map(P=>Ed(d.M,P))},b=yield d.ho("BatchGetDocuments",g,y),T=new Map;b.forEach(P=>{const B=function wm(n,e){return"found"in e?function(t,r){tn(!!r.found);const i=Ao(t,r.found.name),a=zr(r.found.updateTime),l=new ri({mapValue:{fields:r.found.fields}});return sr.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){tn(!!r.missing),tn(!!r.readTime);const i=Ao(t,r.missing),a=zr(r.readTime);return sr.newNoDocument(i,a)}(n,e):At()}(d.M,P);T.set(B.key.toString(),B)});const S=[];return l.forEach(P=>{const B=T.get(P.toString());tn(!!B),S.push(B)}),S}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=at.fromPath(i);e.mutations.push(new pm(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const l=ut(i),d=Em(l.M)+"/documents",g={writes:a.map(y=>jf(l.M,y))};yield l.oo("Commit",d,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw At();t=Kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new He(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Mr.updateTime(t):Mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Kt.min()))throw new He(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(t)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bR{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new vE(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ce.Z)(function*(){const t=new CR(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.xa(a)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!nu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!_C(t)}return!1}}class Wb{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=Cv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ce.Z)(function*(d){Qe("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Qe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=np(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function d_(n,e){return zb.apply(this,arguments)}function zb(){return zb=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield lb(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),zb.apply(this,arguments)}function QE(n,e){return lp.apply(this,arguments)}function lp(){return lp=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JE(n);Qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>dR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>dR(e.remoteStore,a)),n.onlineComponents=e}),lp.apply(this,arguments)}function JE(n){return XE.apply(this,arguments)}function XE(){return XE=(0,Ce.Z)(function*(n){return n.offlineComponents||(Qe("FirestoreClient","Using default OfflineComponentProvider"),yield d_(n,new $b)),n.offlineComponents}),XE.apply(this,arguments)}function e0(n){return qb.apply(this,arguments)}function qb(){return qb=(0,Ce.Z)(function*(n){return n.onlineComponents||(Qe("FirestoreClient","Using default OnlineComponentProvider"),yield QE(n,new ZE)),n.onlineComponents}),qb.apply(this,arguments)}function TR(n){return JE(n).then(e=>e.persistence)}function t0(n){return JE(n).then(e=>e.localStore)}function Kb(n){return e0(n).then(e=>e.remoteStore)}function Zb(n){return e0(n).then(e=>e.syncEngine)}function cp(n){return Yb.apply(this,arguments)}function Yb(){return Yb=(0,Ce.Z)(function*(n){const e=yield e0(n),t=e.eventManager;return t.onListen=AP.bind(null,e.syncEngine),t.onUnlisten=mR.bind(null,e.syncEngine),t}),Yb.apply(this,arguments)}function SR(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,d,g){const y=new up({next:T=>{a.enqueueAndForget(()=>Ki(i,b));const S=T.docs.has(l);!S&&T.fromCache?g.reject(new He(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&d&&"server"===d.source?g.reject(new He(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new ip(kl(l.path),y,{includeMetadataChanges:!0,Cu:!0});return rp(i,b)}(yield cp(n),n.asyncQueue,e,t,r)})),r.promise}function AR(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,d,g){const y=new up({next:T=>{a.enqueueAndForget(()=>Ki(i,b)),T.fromCache&&"server"===d.source?g.reject(new He(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new ip(l,y,{includeMetadataChanges:!0,Cu:!0});return rp(i,b)}(yield cp(n),n.asyncQueue,e,t,r)})),r.promise}const c=new Map;function h(n,e,t){if(!t)throw new He(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p(n,e,t,r){if(!0===e&&!0===r)throw new He(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function v(n){if(!at.isDocumentKey(n))throw new He(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w(n){if(at.isDocumentKey(n))throw new He(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function C(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":At()}function D(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=C(n);throw new He(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function R(n,e){if(e<=0)throw new He(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class L{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new He(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,p("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class W{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L({}),this._settingsFrozen=!1,e instanceof qs?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new He(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qs(i.options.projectId)}(e))}get app(){if(!this._app)throw new He(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Jg;switch(t.type){case"gapi":const r=t.client;return tn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new nA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new He(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=c.get(e);t&&(Qe("ComponentProvider","Removing Datastore"),c.delete(e),t.terminate())}(this),Promise.resolve()}}class de{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Je(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new de(this.firestore,e,this._key)}}class je{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new je(this.firestore,e,this._query)}}class Je extends je{constructor(e,t,r){super(e,t,kl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new de(this.firestore,null,new at(e))}withConverter(e){return new Je(this.firestore,e,this._path)}}function Ct(n,e,...t){if(n=(0,K.m9)(n),h("collection","path",e),n instanceof W){const r=Cn.fromString(e,...t);return w(r),new Je(n,null,r)}{if(!(n instanceof de||n instanceof Je))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return w(r),new Je(n.firestore,null,r)}}function kt(n,e,...t){if(n=(0,K.m9)(n),1===arguments.length&&(e=Cv.R()),h("doc","path",e),n instanceof W){const r=Cn.fromString(e,...t);return v(r),new de(n,null,new at(r))}{if(!(n instanceof de||n instanceof Je))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return v(r),new de(n.firestore,n instanceof Je?n.converter:null,new at(r))}}function En(n,e){return n=(0,K.m9)(n),e=(0,K.m9)(e),(n instanceof de||n instanceof Je)&&(e instanceof de||e instanceof Je)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ln(n,e){return n=(0,K.m9)(n),e=(0,K.m9)(e),n instanceof je&&e instanceof je&&n.firestore===e.firestore&&gd(n._query,e._query)&&n.converter===e.converter}class Zi{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new vE(this,"async_queue_retry"),this.qa=()=>{const t=Jl();t&&Qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Jl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Jl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Yr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!$l(t))throw t;Qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Gr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=Db.createAndSchedule(this,e,t,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&At()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function da(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class n0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends W{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Zi,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||h_(this),this._firestoreClient.terminate()}}function s0(n=(0,On.getApp)()){return(0,On._getProvider)(n,"firestore").getImmediate()}function wr(n){return n._firestoreClient||h_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function h_(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zI(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new Wb(n._authCredentials,n._appCheckCredentials,n._queue,r)}function LP(n,e,t){const r=new Yr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield d_(n,t),yield QE(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ve.FAILED_PRECONDITION||a.code===ve.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function VP(n){if(n._initialized||n._terminated)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _u(Qr.fromBase64String(e))}catch(t){throw new He(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _u(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dp{constructor(e){this._methodName=e}}class Jb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}const PU=/^__.*__$/;class OU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ul(e,this.data,this.fieldMask,t,this.fieldTransforms):new Of(e,this.data,t,this.fieldTransforms)}}class UP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ul(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class Xb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Xb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return nT(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(BP(this.Xa)&&PU.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class kU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Nd(e)}ac(e,t,r,i=!1){return new Xb({Xa:e,methodName:t,uc:r,path:Rr.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=Nd(n._databaseId);return new kU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eT(n,e,t,r,i,a={}){const l=n.ac(a.merge||a.mergeFields?2:0,e,t,i);xR("Data must be an object, but it was:",l,r);const d=HP(r,l);let g,y;if(a.merge)g=new ra(l.fieldMask),y=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const T of a.mergeFields){const S=PR(e,T,t);if(!l.contains(S))throw new He(ve.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);WP(b,S)||b.push(S)}g=new ra(b),y=l.fieldTransforms.filter(T=>g.covers(T.field))}else g=null,y=l.fieldTransforms;return new OU(new ri(d),g,y)}class u0 extends dp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof u0}}function jP(n,e,t){return new Xb({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class RR extends dp{_toFieldTransform(e){return new yd(e.path,new md)}isEqual(e){return e instanceof RR}}class FU extends dp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=jP(this,e,!0),r=this.cc.map(a=>fp(a,t)),i=new Ll(r);return new yd(e.path,i)}isEqual(e){return this===e}}class LU extends dp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=jP(this,e,!0),r=this.cc.map(a=>fp(a,t)),i=new Vl(r);return new yd(e.path,i)}isEqual(e){return this===e}}class VU extends dp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new _d(e.M,aC(e.M,this.hc));return new yd(e.path,t)}isEqual(e){return this===e}}function MR(n,e,t,r){const i=n.ac(1,e,t);xR("Data must be an object, but it was:",i,r);const a=[],l=ri.empty();zs(r,(g,y)=>{const b=tT(e,g,t);y=(0,K.m9)(y);const T=i.sc(b);if(y instanceof u0)a.push(b);else{const S=fp(y,T);null!=S&&(a.push(b),l.set(b,S))}});const d=new ra(a);return new UP(l,d,i.fieldTransforms)}function NR(n,e,t,r,i,a){const l=n.ac(1,e,t),d=[PR(e,r,t)],g=[i];if(a.length%2!=0)throw new He(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(PR(e,a[S])),g.push(a[S+1]);const y=[],b=ri.empty();for(let S=d.length-1;S>=0;--S)if(!WP(y,d[S])){const P=d[S];let B=g[S];B=(0,K.m9)(B);const J=l.sc(P);if(B instanceof u0)y.push(P);else{const ye=fp(B,J);null!=ye&&(y.push(P),b.set(P,ye))}}const T=new ra(y);return new UP(b,T,l.fieldTransforms)}function $P(n,e,t,r=!1){return fp(t,n.ac(r?4:3,e))}function fp(n,e){if(GP(n=(0,K.m9)(n)))return xR("Unsupported field value:",e,n),HP(n,e);if(n instanceof dp)return function(t,r){if(!BP(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=fp(l,r.ic(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,K.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return aC(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=gr.fromDate(t);return{timestampValue:Bf(r.M,i)}}if(t instanceof gr){const i=new gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bf(r.M,i)}}if(t instanceof Jb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _u)return{bytesValue:TC(r.M,t._byteString)};if(t instanceof de){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${C(t)}`)}(n,e)}function HP(n,e){const t={};return bv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(n,(r,i)=>{const a=fp(i,e.tc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function GP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof Jb||n instanceof _u||n instanceof de||n instanceof dp)}function xR(n,e,t){if(!GP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=C(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function PR(n,e,t){if((e=(0,K.m9)(e))instanceof nc)return e._internalPath;if("string"==typeof e)return tT(n,e);throw nT("Field path arguments must be of type string or ",n,!1,void 0,t)}const UU=new RegExp("[~\\*/\\[\\]]");function tT(n,e,t){if(e.search(UU)>=0)throw nT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nc(...e.split("."))._internalPath}catch(r){throw nT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||l)&&(g+=" (found",a&&(g+=` in field ${r}`),l&&(g+=` in document ${i}`),g+=")"),new He(ve.INVALID_ARGUMENT,d+n+g)}function WP(n,e){return n.some(t=>t.isEqual(e))}class l0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new de(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new BU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class BU extends l0{data(){return super.data()}}function rT(n,e){return"string"==typeof e?tT(n,e):e instanceof nc?e._internalPath:e._delegate._internalPath}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rc extends l0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new c0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class c0 extends rc{data(e={}){return super.data(e)}}class Ld{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new c0(this._firestore,this._userDataWriter,r.key,r,new pp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new c0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new c0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==l.type&&(g=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),y=a.indexOf(l.doc.key)),{type:jU(l.type),doc:d,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}function zP(n,e){return n instanceof rc&&e instanceof rc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ld&&e instanceof Ld&&n._firestore===e._firestore&&Ln(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function qP(n){if(Nf(n)&&0===n.explicitOrderBy.length)throw new He(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d0{}function Vd(n,...e){for(const t of e)n=t._apply(n);return n}class $U extends d0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=hp(e.firestore),r=function(i,a,l,d,g,y,b){let T;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){XP(b,y);const P=[];for(const B of b)P.push(JP(d,i,B));T={arrayValue:{values:P}}}else T=JP(d,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||XP(b,y),T=$P(l,"where",b,"in"===y||"not-in"===y);const S=Yn.create(g,y,T);return function(P,B){if(B.S()){const ye=am(P);if(null!==ye&&!ye.isEqual(B.field))throw new He(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ye.toString()}' and '${B.field.toString()}'`);const ft=pd(P);null!==ft&&eO(0,B.field,ft)}const J=function(ye,ft){for(const dt of ye.filters)if(ft.indexOf(dt.op)>=0)return dt.op;return null}(P,function(ye){switch(ye){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==J)throw new He(ve.INVALID_ARGUMENT,J===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${J.toString()}' filters.`)}(i,S),S}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new je(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new vs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class GU extends d0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new He(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ol(i,a);return function(d,g){if(null===pd(d)){const y=am(d);null!==y&&eO(0,y,g.field)}}(r,l),l}(e._query,this.lc,this._c);return new je(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new vs(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KP extends d0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new je(e.firestore,e.converter,kv(e._query,this.wc,this.mc))}}class ZP extends d0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=QP(e,this.type,this.gc,this.yc);return new je(e.firestore,e.converter,(i=t,new vs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class YP extends d0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=QP(e,this.type,this.gc,this.yc);return new je(e.firestore,e.converter,(i=t,new vs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function QP(n,e,t,r){if(t[0]=(0,K.m9)(t[0]),t[0]instanceof l0)return function(i,a,l,d,g){if(!d)throw new He(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const b of Fl(i))if(b.field.isKeyField())y.push(ru(a,d.key));else{const T=d.data.field(b.field);if(Xg(T))throw new He(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const S=b.field.canonicalString();throw new He(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}y.push(T)}return new ou(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=hp(n.firestore);return function(a,l,d,g,y,b){const T=a.explicitOrderBy;if(y.length>T.length)throw new He(ve.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let P=0;P<y.length;P++){const B=y[P];if(T[P].field.isKeyField()){if("string"!=typeof B)throw new He(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof B}`);if(!um(a)&&-1!==B.indexOf("/"))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${B}' contains a slash.`);const J=a.path.child(Cn.fromString(B));if(!at.isDocumentKey(J))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const ye=new at(J);S.push(ru(l,ye))}else{const J=$P(d,g,B);S.push(J)}}return new ou(S,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function JP(n,e,t){if("string"==typeof(t=(0,K.m9)(t))){if(""===t)throw new He(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(e)&&-1!==t.indexOf("/"))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Cn.fromString(t));if(!at.isDocumentKey(r))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ru(n,new at(r))}if(t instanceof de)return ru(n,t._key);throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${C(t)}.`)}function XP(n,e){if(!Array.isArray(n)||0===n.length)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function eO(n,e,t){if(!t.isEqual(e))throw new He(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class OR{convertValue(e,t="none"){switch(xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw At()}}convertObject(e,t){const r={};return zs(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Jb(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=em(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dd(e));default:return null}}convertTimestamp(e){const t=To(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Cn.fromString(e);tn(Gv(r));const i=new qs(r.get(1),r.get(3)),a=new at(r.popFirst(5));return i.isEqual(t)||Gr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function iT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class JU extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new de(this.firestore,null,t)}}class tO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hp(e)}set(e,t,r){this._verifyNotCommitted();const i=Ud(e,this._firestore),a=iT(i.converter,t,r),l=eT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Mr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ud(e,this._firestore);let l;return l="string"==typeof(t=(0,K.m9)(t))||t instanceof nc?NR(this._dataReader,"WriteBatch.update",a._key,t,r,i):MR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ud(e,this._firestore);return this._mutations=this._mutations.concat(new fm(t._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ud(n,e){if((n=(0,K.m9)(n)).firestore!==e)throw new He(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gp extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new de(this.firestore,null,t)}}function nO(n,e,t){n=D(n,de);const r=D(n.firestore,rr),i=iT(n.converter,e,t);return f_(r,[eT(hp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Mr.none())])}function rO(n,e,t,...r){n=D(n,de);const i=D(n.firestore,rr),a=hp(i);let l;return l="string"==typeof(e=(0,K.m9)(e))||e instanceof nc?NR(a,"updateDoc",n._key,e,t,r):MR(a,"updateDoc",n._key,e),f_(i,[l.toMutation(n._key,Mr.exists(!0))])}function iO(n,...e){var t,r,i;n=(0,K.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||da(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(da(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let g,y,b;if(n instanceof de)y=D(n.firestore,rr),b=kl(n._key.path),g={next:T=>{e[l]&&e[l](kR(y,n,T))},error:e[l+1],complete:e[l+2]};else{const T=D(n,je);y=D(T.firestore,rr),b=T._query;const S=new gp(y);g={next:P=>{e[l]&&e[l](new Ld(y,S,T,P))},error:e[l+1],complete:e[l+2]},qP(n._query)}return function(T,S,P,B){const J=new up(B),ye=new ip(S,J,P);return T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return rp(yield cp(T),ye)})),()=>{J.Ia(),T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Ki(yield cp(T),ye)}))}}(wr(y),b,d,g)}function f_(n,e){return function(t,r){const i=new Yr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function _R(n,e,t){return Nb.apply(this,arguments)}(yield Zb(t),r,i)})),i.promise}(wr(n),e)}function kR(n,e,t){const r=t.docs.get(e._key),i=new gp(n);return new rc(n,i,e._key,r,new pp(t.hasPendingWrites,t.fromCache),e.converter)}class uB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hp(e)}get(e){const t=Ud(e,this._firestore),r=new JU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return At();const a=i[0];if(a.isFoundDocument())return new l0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new l0(this._firestore,r,t._key,null,t.converter);throw At()})}set(e,t,r){const i=Ud(e,this._firestore),a=iT(i.converter,t,r),l=eT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Ud(e,this._firestore);let l;return l="string"==typeof(t=(0,K.m9)(t))||t instanceof nc?NR(this._dataReader,"Transaction.update",a._key,t,r,i):MR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Ud(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ud(e,this._firestore),r=new gp(this._firestore);return super.get(e).then(i=>new rc(this._firestore,r,t._key,i._document,new pp(!1,!1),t.converter))}}function FR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function oO(){if("undefined"==typeof Uint8Array)throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function aO(){if(!function Tv(){return"undefined"!=typeof atob}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){cd=On.SDK_VERSION,(0,On._registerComponent)(new za.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new rr(i,new GI(t.getProvider("auth-internal")),new rA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,On.registerVersion)(HI,"3.4.8",n),(0,On.registerVersion)(HI,"3.4.8","esm2017")}();class h0{constructor(e){this._delegate=e}static fromBase64String(e){return aO(),new h0(_u.fromBase64String(e))}static fromUint8Array(e){return oO(),new h0(_u.fromUint8Array(e))}toBase64(){return aO(),this._delegate.toBase64()}toUint8Array(){return oO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LR(n){return function _B(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yB{enableIndexedDbPersistence(e,t){return function o0(n,e){VP(n=D(n,rr));const t=wr(n),r=n._freezeSettings(),i=new ZE;return LP(t,i,new Hb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function a0(n){VP(n=D(n,rr));const e=wr(n),t=n._freezeSettings(),r=new ZE;return LP(e,r,new IR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function SU(n){if(n._initialized&&!n._terminated)throw new He(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!qi.vt())return Promise.resolve();const i=r+"main";yield qi.delete(i)}),function(r){return t.apply(this,arguments)})(sE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class uO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function te(n,e,t,r={}){var i;const a=(n=D(n,W))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Qg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=hi.MOCK_USER;else{l=(0,K.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new He(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new hi(g)}n._authCredentials=new eA(new Iv(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function RU(n){return function PP(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield TR(n),t=yield Kb(n);return e.setNetworkEnabled(!0),function(r){const i=ut(r);return i.fu.delete(0),xd(i)}(t)}))}(wr(n=D(n,rr)))}(this._delegate)}disableNetwork(){return function MU(n){return function OP(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield TR(n),t=yield Kb(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=ut(i);a.fu.add(0),yield Xl(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(wr(n=D(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,p("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AU(n){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function Ob(n,e){return s_.apply(this,arguments)}(yield Zb(e),t)})),t.promise}(wr(n=D(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function aB(n,e){return function FP(n,e){const t=new up(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield cp(n),i=t,ut(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield cp(n),i=t,void ut(r).Eu.delete(i);var r,i}))}}(wr(n=D(n,rr)),da(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new p_(this,Ct(this._delegate,e))}catch(t){throw Yi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mo(this,kt(this._delegate,e))}catch(t){throw Yi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qi(this,function Fe(n,e){if(n=D(n,W),h("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new je(n,null,(t=e,new vs(Cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Yi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lB(n,e){return function s(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const r=yield(i=n,e0(i).then(a=>a.datastore));var i;new bR(n.asyncQueue,r,e,t).run()})),t.promise}(wr(n=D(n,rr)),t=>e(new uB(n,t)))}(this._delegate,t=>e(new lO(this,t)))}batch(){return wr(this._delegate),new cO(new tO(this._delegate,e=>f_(this._delegate,e)))}loadBundle(e){return function NU(n,e){const t=wr(n=D(n,rr)),r=new n0;return function o(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,y){if(g instanceof Uint8Array)return YE(g,y);if(g instanceof ArrayBuffer)return YE(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Gb(g,l);var g}(t,Nd(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function jb(n,e,t){const r=ut(n);var i;(i=(0,Ce.Z)(function*(a,l,d){try{const g=yield l.getMetadata();if(yield function(S,P){const B=ut(S),J=zr(P.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",ye=>B._s.getBundleMetadata(ye,P.id)).then(ye=>!!ye&&ye.createTime.compareTo(J)>=0)}(a.localStore,g))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(S=g).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);d._updateProgress(OE(g));const y=new pR(g,a.localStore,l.M);let b=yield l.da();for(;b;){const S=yield y.ku(b);S&&d._updateProgress(S),b=yield l.da()}const T=yield y.complete();return yield ca(a,T.Fu,void 0),yield function(S,P){const B=ut(S);return B.persistence.runTransaction("Save bundle","readwrite",J=>B._s.saveBundleMetadata(J,P))}(a.localStore,g),d._completeWith(T.progress),Promise.resolve(T.Ou)}catch(g){return Qg("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var S}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Zb(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function xU(n,e){return function u(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=ut(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield t0(n),e)}))}(wr(n=D(n,rr)),e).then(t=>t?new je(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Qi(this,t):null)}}class sT extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new h0(new _u(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Mo.forKey(t,this.firestore,null)}}class lO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sT(e)}get(e){const t=_p(e);return this._delegate.get(t).then(r=>new f0(this._firestore,new rc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_p(e);return r?(FR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=_p(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}}class cO{constructor(e){this._delegate=e}set(e,t,r){const i=_p(e);return r?(FR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=_p(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=_p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new c0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new p0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new mp(e,new sT(e),t),i.set(t,a)),a}}mp.INSTANCES=new WeakMap;class Mo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Mo(t,new de(t._delegate,r,new at(e)))}static forKey(e,t,r){return new Mo(t,new de(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new p_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new p_(this.firestore,Ct(this._delegate,e))}catch(t){throw Yi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,K.m9)(e))instanceof de&&En(this._delegate,e)}set(e,t){t=FR("DocumentReference.set",t);try{return t?nO(this._delegate,e,t):nO(this._delegate,e)}catch(r){throw Yi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?rO(this._delegate,e):rO(this._delegate,e,t,...r)}catch(i){throw Yi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function sB(n){return f_(D(n.firestore,rr),[new fm(n._key,Mr.none())])}(this._delegate)}onSnapshot(...e){const t=dO(e),r=hO(e,i=>new f0(this.firestore,new rc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return iO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function eB(n){n=D(n,de);const e=D(n.firestore,rr),t=wr(e),r=new gp(e);return function DR(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const d=yield function(g,y){const b=ut(g);return b.persistence.runTransaction("read document","readonly",T=>b.ci.Ls(T,y))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new He(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=np(d,`Failed to get document '${a} from cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield t0(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rc(e,r,n._key,i,new pp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function tB(n){n=D(n,de);const e=D(n.firestore,rr);return SR(wr(e),n._key,{source:"server"}).then(t=>kR(e,n,t))}(this._delegate):function XU(n){n=D(n,de);const e=D(n.firestore,rr);return SR(wr(e),n._key).then(t=>kR(e,n,t))}(this._delegate),t.then(r=>new f0(this.firestore,new rc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Mo(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function Yi(n,e,t){return n.message=n.message.replace(e,t),n}function dO(n){for(const e of n)if("object"==typeof e&&!LR(e))return e;return{}}function hO(n,e){var t,r;let i;return i=LR(n[0])?n[0]:LR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class f0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zP(this._delegate,e._delegate)}}class p0 extends f0{data(e){const t=this._delegate.data(e);return function XS(n,e){n||At()}(void 0!==t),t}}class Qi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sT(e)}where(e,t,r){try{return new Qi(this.firestore,Vd(this._delegate,function HU(n,e,t){const r=e,i=rT("where",n);return new $U(i,r,t)}(e,t,r)))}catch(i){throw Yi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qi(this.firestore,Vd(this._delegate,function WU(n,e="asc"){const t=e,r=rT("orderBy",n);return new GU(r,t)}(e,t)))}catch(r){throw Yi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qi(this.firestore,Vd(this._delegate,function zU(n){return R("limit",n),new KP("limit",n,"F")}(e)))}catch(t){throw Yi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Qi(this.firestore,Vd(this._delegate,function qU(n){return R("limitToLast",n),new KP("limitToLast",n,"L")}(e)))}catch(t){throw Yi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Qi(this.firestore,Vd(this._delegate,function KU(...n){return new ZP("startAt",n,!0)}(...e)))}catch(t){throw Yi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Qi(this.firestore,Vd(this._delegate,function ZU(...n){return new ZP("startAfter",n,!1)}(...e)))}catch(t){throw Yi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Qi(this.firestore,Vd(this._delegate,function YU(...n){return new YP("endBefore",n,!1)}(...e)))}catch(t){throw Yi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Qi(this.firestore,Vd(this._delegate,function QU(...n){return new YP("endAt",n,!0)}(...e)))}catch(t){throw Yi(t,"endAt()","Query.endAt()")}}isEqual(e){return Ln(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function rB(n){n=D(n,je);const e=D(n.firestore,rr),t=wr(e),r=new gp(e);return function kP(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const d=yield Om(i,a,!0),g=new Mb(a,d.li),y=g.Gu(d.documents),b=g.applyChanges(y,!1);l.resolve(b.snapshot)}catch(d){const g=np(d,`Failed to execute query '${a} against cache`);l.reject(g)}}),function(i,a,l){return r.apply(this,arguments)})(yield t0(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ld(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function iB(n){n=D(n,je);const e=D(n.firestore,rr),t=wr(e),r=new gp(e);return AR(t,n._query,{source:"server"}).then(i=>new Ld(e,r,n,i))}(this._delegate):function nB(n){n=D(n,je);const e=D(n.firestore,rr),t=wr(e),r=new gp(e);return qP(n._query),AR(t,n._query).then(i=>new Ld(e,r,n,i))}(this._delegate),t.then(r=>new VR(this.firestore,new Ld(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dO(e),r=hO(e,i=>new VR(this.firestore,new Ld(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return iO(this._delegate,t,r)}withConverter(e){return new Qi(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}class EB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new p0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new p0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new EB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new p0(this._firestore,r))})}isEqual(e){return zP(this._delegate,e._delegate)}}class p_ extends Qi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Mo(this.firestore,e):null}doc(e){try{return new Mo(this.firestore,void 0===e?kt(this._delegate):kt(this._delegate,e))}catch(t){throw Yi(t,"doc()","CollectionReference.doc()")}}add(e){return function oB(n,e){const t=D(n.firestore,rr),r=kt(n),i=iT(n.converter,e);return f_(t,[eT(hp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Mo(this.firestore,t))}isEqual(e){return En(this._delegate,e._delegate)}withConverter(e){return new p_(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function _p(n){return D(n,de)}class UR{constructor(...e){this._delegate=new nc(...e)}static documentId(){return new UR(Rr.keyField().canonicalString())}isEqual(e){return(e=(0,K.m9)(e))instanceof nc&&this._delegate._internalPath.isEqual(e._internalPath)}}class yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dB(){return new RR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yp(e)}static delete(){const e=function cB(){return new u0("deleteField")}();return e._methodName="FieldValue.delete",new yp(e)}static arrayUnion(...e){const t=function hB(...n){return new FU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yp(t)}static arrayRemove(...e){const t=function fB(...n){return new LU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yp(t)}static increment(e){const t=function pB(n){return new VU("increment",n)}(e);return t._methodName="FieldValue.increment",new yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wB={Firestore:uO,GeoPoint:Jb,Timestamp:gr,Blob:h0,Transaction:lO,WriteBatch:cO,DocumentReference:Mo,DocumentSnapshot:f0,Query:Qi,QueryDocumentSnapshot:p0,QuerySnapshot:VR,CollectionReference:p_,FieldPath:UR,FieldValue:yp,setLogLevel:function vB(n){!function JS(n){bo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function CB(n){(function IB(n,e){n.INTERNAL.registerComponent(new za.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wB)))})(n,(e,t)=>new uO(e,t,new yB)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Bs.Z);var bB=N(6451),oT=N(5363),TB=N(6063);class DB extends as.x{constructor(e=1/0,t=1/0,r=TB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=l;g+=2)d=g;d&&r.splice(0,d+1)}}}var SB=N(3099);function fO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,SB.B)({connector:()=>new DB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function pO(n,e){return(0,zu.m)(e)?yr(()=>n,e):yr(()=>n)}var BR=N(9468),Di=N(5867);class Js{constructor(e){return e}}class yu{constructor(){return(0,Di.C6)()}}const jR=new f.OlP("angularfire2._apps"),RB={provide:Js,useFactory:function AB(n){return n&&1===n.length?n[0]:new Js((0,Di.Mq)())},deps:[[new f.FiY,jR]]},MB={provide:yu,deps:[[new f.FiY,jR]]};function NB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Js(r)}}let xB=(()=>{class n{constructor(t){(0,Di.KN)("angularfire",ot.q4.full,"core"),(0,Di.KN)("angularfire",ot.q4.full,"app"),(0,Di.KN)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[RB,MB]}),n})();function PB(n,...e){return{ngModule:xB,providers:[{provide:jR,useFactory:NB(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,...e]}]}}const OB=(0,ot.u3)(Di.ZF,!0),gO=new Map,kB={activated:!1,tokenObservers:[]},FB={initialized:!1,enabled:!1};function fi(n){return gO.get(n)||kB}function ha(n,e){gO.set(n,e)}function aT(){return FB}class jB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new K.BH,yield function $B(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new K.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ji=new K.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function _O(n){if(!fi(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function GR(n,e){return WR.apply(this,arguments)}function WR(){return WR=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,a)}catch(T){throw Ji.create("fetch-network-error",{originalErrorMessage:T.message})}if(200!==l.status)throw Ji.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(T){throw Ji.create("fetch-parse-error",{originalErrorMessage:T.message})}const g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(g[1]),b=Date.now();return{token:d.attestationToken,expireTimeMillis:b+y,issuedAtTimeMillis:b}}),WR.apply(this,arguments)}function qB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const g0="firebase-app-check-store";let cT=null;function vO(){return cT||(cT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ji.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(g0,{keyPath:"compositeKey"})}}catch(t){e(Ji.create("storage-open",{originalErrorMessage:t.message}))}}),cT)}function zR(){return zR=(0,Ce.Z)(function*(n,e){const r=(yield vO()).transaction(g0,"readwrite"),a=r.objectStore(g0).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=g=>{l()},r.onerror=g=>{var y;d(Ji.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),zR.apply(this,arguments)}const m0=new gs.Yd("@firebase/app-check");function CO(n,e){return(0,K.hl)()?function QB(n,e){return function EO(n,e){return zR.apply(this,arguments)}(function IO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{m0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bO(){return aT().enabled}function TO(){return YR.apply(this,arguments)}function YR(){return YR=(0,Ce.Z)(function*(){const n=aT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),YR.apply(this,arguments)}const r2={error:"UNKNOWN_ERROR"};function i2(n){return K.US.encodeString(JSON.stringify(n),!1)}function dT(n){return QR.apply(this,arguments)}function QR(){return QR=(0,Ce.Z)(function*(n,e=!1){const t=n.app;_O(t);const r=fi(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&hT(g)&&(i=g)}if(!e&&i&&hT(i))return{token:i.token};let d,l=!1;if(bO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=GR(qB(t,yield TO()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),l=!0);const g=yield r.exchangeTokenPromise;return yield CO(t,g),ha(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),l=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?m0.warn(g.message):m0.error(g),a=g}return i?(d={token:i.token},ha(t,Object.assign(Object.assign({},r),{token:i})),yield CO(t,i)):d=o2(a),l&&SO(t,d),d}),QR.apply(this,arguments)}function XR(n,e){const t=fi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ha(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function DO(n){const{app:e}=n,t=fi(e);let r=t.tokenRefresher;r||(r=function s2(n){const{app:e}=n;return new jB((0,Ce.Z)(function*(){let r;if(r=fi(e).token?yield dT(n,!0):yield dT(n),r.error)throw r.error}),()=>!0,()=>{const t=fi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ha(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function SO(n,e){const t=fi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function hT(n){return n.expireTimeMillis-Date.now()>0}function o2(n){return{token:i2(r2),error:n}}class a2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fi(this.app);for(const t of e)XR(this.app,t.next);return Promise.resolve()}}const kO="app-check-internal";!function w2(){(0,On._registerComponent)(new za.wA("app-check",n=>function u2(n,e){return new a2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kO).initialize()})),(0,On._registerComponent)(new za.wA(kO,n=>function l2(n){return{getToken:e=>dT(n,e),addTokenListener:e=>function JR(n,e,t,r){const{app:i}=n,a=fi(i),l={next:t,error:r,type:e};if(ha(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&hT(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),DO(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>DO(n))}(n,"INTERNAL",e),removeTokenListener:e=>XR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,On.registerVersion)("@firebase/app-check","0.5.6")}();class Bd{constructor(){return(0,ot.vb)("app-check")}}"undefined"!=typeof window&&window;var D2=N(127);const LO=new f.OlP("angularfire2.auth.use-emulator"),VO=new f.OlP("angularfire2.auth.settings"),UO=new f.OlP("angularfire2.auth.tenant-id"),BO=new f.OlP("angularfire2.auth.langugage-code"),jO=new f.OlP("angularfire2.auth.use-device-language"),$O=new f.OlP("angularfire.auth.persistence"),HO=(n,e,t,r,i,a,l,d)=>(0,Us.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),l)for(const[y,b]of Object.entries(l))g.settings[y]=b;return d&&g.setPersistence(d),g},[t,r,i,a,l,d]);let GO=(()=>{class n{constructor(t,r,i,a,l,d,g,y,b,T,S,P){const B=new as.x,J=Ot(void 0).pipe((0,oT.Q)(l.outsideAngular),yr(()=>a.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,an.U)(()=>(0,Us.on)(t,a,r)),(0,an.U)(ye=>HO(ye,a,d,y,b,T,g,S)),fO({bufferSize:1,refCount:!1}));if(ku(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ot(null);else{J.pipe(Pa()).subscribe();const ft=J.pipe(yr(lt=>lt.getRedirectResult().then(Zt=>Zt,()=>null)),ot.iC,fO({bufferSize:1,refCount:!1})),dt=J.pipe(yr(lt=>new kr.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>lt.onAuthStateChanged(Xt=>Zt.next(Xt),Xt=>Zt.error(Xt),()=>Zt.complete()))})))),yt=J.pipe(yr(lt=>new kr.y(Zt=>({unsubscribe:a.runOutsideAngular(()=>lt.onIdTokenChanged(Xt=>Zt.next(Xt),Xt=>Zt.error(Xt),()=>Zt.complete()))}))));this.authState=ft.pipe(pO(dt),(0,BR.R)(l.outsideAngular),(0,oT.Q)(l.insideAngular)),this.user=ft.pipe(pO(yt),(0,BR.R)(l.outsideAngular),(0,oT.Q)(l.insideAngular)),this.idToken=this.user.pipe(yr(lt=>lt?(0,ur.D)(lt.getIdToken()):Ot(null))),this.idTokenResult=this.user.pipe(yr(lt=>lt?(0,ur.D)(lt.getIdTokenResult()):Ot(null))),this.credential=(0,bB.T)(ft,B,this.authState.pipe(Ai(lt=>!lt))).pipe((0,an.U)(lt=>(null==lt?void 0:lt.user)?lt:null),(0,BR.R)(l.outsideAngular),(0,oT.Q)(l.insideAngular))}return(0,Us.pX)(this,J,a,{spy:{apply:(ye,ft,dt)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&dt.then(yt=>B.next(yt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Us.Dh),f.LFG(Us.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ot.HU),f.LFG(LO,8),f.LFG(VO,8),f.LFG(UO,8),f.LFG(BO,8),f.LFG(jO,8),f.LFG($O,8),f.LFG(Bd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function WO(n,e){return function A2(n,e=$w.z){return new kr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function iM(n,e){return WO(n,e).pipe((0,an.U)(t=>({payload:t,type:"query"})))}function pT(n,e){return iM(n,e).pipe(us(void 0),Zh(),(0,an.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const g=i.find(b=>b.doc.ref.isEqual(l.ref)),y=null==t?void 0:t.payload.docs.find(b=>b.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function zO(n,e,t){return pT(n,t).pipe(ls((r,i)=>function M2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function N2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return sM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return sM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Hw(),(0,an.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function sM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function qO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class KO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,an.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(us(void 0),Zh(),Ai(([r,i])=>i.length>0||!r),(0,an.U)(([r,i])=>i),ot.iC)}auditTrail(e){return this.stateChanges(e).pipe(ls((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qO(e);return zO(this.query,t,this.afs.schedulers.outsideAngular).pipe(ot.iC)}valueChanges(e={}){return iM(this.query,this.afs.schedulers.outsideAngular).pipe((0,an.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ot.iC)}get(e){return(0,ur.D)(this.query.get(e)).pipe(ot.iC)}add(e){return this.ref.add(e)}doc(e){return new ZO(this.ref.doc(e),this.afs)}}class ZO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=JO(r,t);return new KO(i,a,this.afs)}snapshotChanges(){return function R2(n,e){return WO(n,e).pipe(us(void 0),Zh(),(0,an.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ot.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,an.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ur.D)(this.ref.get(e)).pipe(ot.iC)}}class x2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pT(this.query,this.afs.schedulers.outsideAngular).pipe((0,an.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ai(t=>t.length>0),ot.iC):pT(this.query,this.afs.schedulers.outsideAngular).pipe(ot.iC)}auditTrail(e){return this.stateChanges(e).pipe(ls((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qO(e);return zO(this.query,t,this.afs.schedulers.outsideAngular).pipe(ot.iC)}valueChanges(e={}){return iM(this.query,this.afs.schedulers.outsideAngular).pipe((0,an.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ot.iC)}get(e){return(0,ur.D)(this.query.get(e)).pipe(ot.iC)}}const YO=new f.OlP("angularfire2.enableFirestorePersistence"),QO=new f.OlP("angularfire2.firestore.persistenceSettings"),P2=new f.OlP("angularfire2.firestore.settings"),O2=new f.OlP("angularfire2.firestore.use-emulator");function JO(n,e=(t=>t)){return{query:e(n),ref:n}}let oM=(()=>{class n{constructor(t,r,i,a,l,d,g,y,b,T,S,P,B,J,ye,ft,dt){this.schedulers=g;const yt=(0,Us.on)(t,d,r),lt=b;T&&HO(yt,d,S,B,J,ye,P,ft),[this.firestore,this.persistenceEnabled$]=(0,Us.cc)(`${yt.name}.firestore`,"AngularFirestore",yt.name,()=>{const Zt=d.runOutsideAngular(()=>yt.firestore());if(a&&Zt.settings(a),lt&&Zt.useEmulator(...lt),i&&!ku(l)){const Xt=()=>{try{return(0,ur.D)(Zt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Rn){return"undefined"!=typeof console&&console.warn(Rn),Ot(!1)}};return[Zt,d.runOutsideAngular(Xt)]}return[Zt,Ot(!1)]},[a,lt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=JO(i,r),d=this.schedulers.ngZone.run(()=>a);return new KO(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new x2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ZO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Us.Dh),f.LFG(Us.xv,8),f.LFG(YO,8),f.LFG(P2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ot.HU),f.LFG(QO,8),f.LFG(O2,8),f.LFG(GO,8),f.LFG(LO,8),f.LFG(VO,8),f.LFG(UO,8),f.LFG(BO,8),f.LFG(jO,8),f.LFG($O,8),f.LFG(Bd,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XO=(()=>{class n{constructor(){D2.Z.registerVersion("angularfire",ot.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:YO,useValue:!0},{provide:QO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[oM]}),n})();const ek=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,a,l)=>void 0===i.find(d=>a[d]!==l[d]))(t,i,e))};let tk=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("images").valueChanges({idField:"id"}).pipe((0,an.U)(r=>ek(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),aM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tk,{provide:Bw,useExisting:tk}],imports:[[XO]]}),n})(),k2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[ss,vo.forChild([{path:"",component:vS}]),qh,Kh,aM]]}),n})();const nk=new f.OlP("GETS_ALL_TASK_DTO"),rk=new f.OlP("SETS_TASK_DTO"),ik=new f.OlP("REMOVES_TASK_DTO");var uM=N(655);function $2(){const n="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(a){const l=this[i];this[i]=a,l!==a&&this[r+n]&&this[r+n].emit(a)}})}}function G2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",2),f.NdJ("click",function(){return f.CHM(t),f.oxw(2).close()}),f.TgZ(1,"span",3),f._uU(2,"\xd7"),f.qZA(),f.TgZ(3,"span",4),f._uU(4,"Close"),f.qZA()()}}function W2(n,e){if(1&n&&(f.TgZ(0,"div",1),f.YNc(1,G2,5,0,"ng-template",0),f.Hsn(2),f.qZA()),2&n){const t=f.oxw();f.Tol("alert alert-"+t.type),f.Q6J("ngClass",t.classes),f.xp6(1),f.Q6J("ngIf",t.dismissible)}}"undefined"!=typeof window&&window,"undefined"==typeof console||console;const z2=["*"];let uk=(()=>{class n{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q2=(()=>{class n{constructor(t,r){this.changeDetection=r,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new f.vpe,this.onClosed=new f.vpe,this.classes="",this.dismissibleChange=new f.vpe,Object.assign(this,t),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){!this.isOpen||(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(uk),f.Y36(f.sBO))},n.\u0275cmp=f.Xpm({type:n,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:z2,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(t,r){1&t&&(f.F$t(),f.YNc(0,W2,3,4,"ng-template",0)),2&t&&f.Q6J("ngIf",r.isOpen)},directives:[Xr,bs],encapsulation:2,changeDetection:0}),(0,uM.gn)([$2(),(0,uM.w6)("design:type",Object)],n.prototype,"dismissible",void 0),n})(),K2=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[ss]]}),n})();function Z2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"alert",3),f.NdJ("onClosed",function(){const a=f.CHM(t).$implicit;return f.oxw().onClosed(a)}),f._uU(2),f.qZA()()}if(2&n){const t=e.$implicit;f.xp6(1),f.Q6J("type",t.type)("dismissOnTimeout",t.timeout),f.xp6(1),f.hij("",t.msg," ")}}function Y2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",11)(1,"input",12),f.NdJ("change",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().onTasksChecked(i)}),f.qZA(),f._uU(2),f.qZA()}if(2&n){const t=f.oxw().$implicit;f.xp6(2),f.hij(" ",t.task," ")}}function Q2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"input",13),f.NdJ("change",function(){f.CHM(t);const i=f.oxw().$implicit;return f.oxw().onTasksChecked(i)}),f.qZA(),f._uU(2),f.qZA()}if(2&n){const t=f.oxw().$implicit;f.xp6(2),f.hij(" ",t.task," ")}}function J2(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",4),f.YNc(1,Y2,3,1,"div",5),f.YNc(2,Q2,3,1,"div",6),f.TgZ(3,"div",7)(4,"button",8),f._uU(5," OOO "),f.qZA(),f.TgZ(6,"ul",9)(7,"li")(8,"a",10),f.NdJ("click",function(){const a=f.CHM(t).$implicit;return f.oxw().onTaskRemoveed(a.id)}),f._uU(9,"Delete"),f.qZA()()()()()}if(2&n){const t=e.$implicit;f.xp6(1),f.Q6J("ngIf",t.done),f.xp6(1),f.Q6J("ngIf",!t.done)}}let X2=(()=>{class n{constructor(t,r,i){this._getsAllTaskDto=t,this._setsTaskDto=r,this._removesTaskDto=i,this.tasks$=this._getsAllTaskDto.getAll().pipe((0,an.U)(a=>a.sort((l,d)=>l.created-d.created))),this.alert$=new ai(!1),this.alerts=[{}]}onClosed(t){this.alerts=this.alerts.filter(r=>r!==t)}onTasksChecked(t){this._setsTaskDto.set({done:!t.done,task:t.task,id:t.id,created:t.created}),t.done?this.alert$.next(!0):(this.alerts.push({type:"success",msg:"Well done, you completed your task!",timeout:5e3}),this.alert$.next(!1))}onTaskRemoveed(t){this._removesTaskDto.remove(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(nk),f.Y36(rk),f.Y36(ik))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-task-list"]],decls:4,vars:4,consts:[[1,"container","mb-","mt-3","p-25"],[4,"ngFor","ngForOf"],["class","form-check-inline d-flex flex-column m-3 ",4,"ngFor","ngForOf"],[3,"type","dismissOnTimeout","onClosed"],[1,"form-check-inline","d-flex","flex-column","m-3"],["class","text-decoration-line-through",4,"ngIf"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton2","data-bs-toggle","dropdown","aria-expanded","false",1,"position-absolute","bottom-0","end-0","btn","btn-sm","text-white","dropdown-toggle"],["aria-labelledby","dropdownMenuButton2",1,"dropdown-menu","dropdown-menu-dark"],["routerLink","/tasks",1,"dropdown-item","active",3,"click"],[1,"text-decoration-line-through"],["type","checkbox","value","","checked","",1,"form-check-input","rounded-circle",3,"change"],["type","checkbox","value","",1,"form-check-input","hover","rounded-circle","hover",3,"change"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,Z2,3,3,"div",1),f.YNc(2,J2,10,2,"div",2),f.ALo(3,"async"),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngForOf",r.alerts),f.xp6(1),f.Q6J("ngForOf",f.lcZ(3,2,r.tasks$)))},directives:[Dr,q2,Xr],pipes:[jp],encapsulation:2,changeDetection:0}),n})(),lk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),vp=(()=>{class n extends lk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const vu=new f.OlP("NgValueAccessor"),nj={provide:vu,useExisting:(0,f.Gpc)(()=>gT),multi:!0},ij=new f.OlP("CompositionEventMode");let gT=(()=>{class n extends lk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rj(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(ij,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([nj]),f.qOj]}),n})();const Li=new f.OlP("NgValidators"),$d=new f.OlP("NgAsyncValidators");function Ek(n){return null!=n}function wk(n){const e=(0,f.QGY)(n)?(0,ur.D)(n):n;return(0,f.CqO)(e),e}function Ik(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ck(n,e){return e.map(t=>t(n))}function bk(n){return n.map(e=>function oj(n){return!n.validate}(e)?e:t=>e.validate(t))}function dM(n){return null!=n?function Tk(n){if(!n)return null;const e=n.filter(Ek);return 0==e.length?null:function(t){return Ik(Ck(t,e))}}(bk(n)):null}function hM(n){return null!=n?function Dk(n){if(!n)return null;const e=n.filter(Ek);return 0==e.length?null:function(t){return function ej(...n){const e=(0,Rc.jO)(n),{args:t,keys:r}=$o(n),i=new kr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const d=new Array(l);let g=l,y=l;for(let b=0;b<l;b++){let T=!1;(0,Ns.Xf)(t[b]).subscribe((0,tr.x)(a,S=>{T||(T=!0,y--),d[b]=S},()=>g--,void 0,()=>{(!g||!T)&&(y||a.next(r?Dh(r,d):d),a.complete())}))}});return e?i.pipe(Wu(e)):i}(Ck(t,e).map(wk)).pipe((0,an.U)(Ik))}}(bk(n)):null}function Sk(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ak(n){return n._rawValidators}function Rk(n){return n._rawAsyncValidators}function fM(n){return n?Array.isArray(n)?n:[n]:[]}function _T(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mk(n,e){const t=fM(e);return fM(n).forEach(i=>{_T(t,i)||t.push(i)}),t}function Nk(n,e){return fM(e).filter(t=>!_T(n,t))}class xk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Hd extends xk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Xi extends xk{get formDirective(){return null}get path(){return null}}class Pk{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Ok=(()=>{class n extends Pk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hd,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),kk=(()=>{class n extends Pk{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Xi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function _0(n,e){mM(n,e),e.valueAccessor.writeValue(n.value),function pj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Lk(n,e)})}(n,e),function mj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function gj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Lk(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fj(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ET(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),IT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mM(n,e){const t=Ak(n);null!==e.validator?n.setValidators(Sk(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Rk(n);null!==e.asyncValidator?n.setAsyncValidators(Sk(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wT(e._rawValidators,i),wT(e._rawAsyncValidators,i)}function IT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Ak(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Rk(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return wT(e._rawValidators,r),wT(e._rawAsyncValidators,r),t}function Lk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const y0="VALID",CT="INVALID",g_="PENDING",v0="DISABLED";function wM(n){return(bT(n)?n.validators:n)||null}function jk(n){return Array.isArray(n)?dM(n):n||null}function IM(n,e){return(bT(e)?e.asyncValidators:n)||null}function $k(n){return Array.isArray(n)?hM(n):n||null}function bT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Hk=n=>n instanceof TT,CM=n=>n instanceof DT;function Gk(n){return Hk(n)?n.value:n.getRawValue()}function Wk(n,e){const t=CM(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function zk(n,e){CM(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class bM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=jk(this._rawValidators),this._composedAsyncValidatorFn=$k(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===y0}get invalid(){return this.status===CT}get pending(){return this.status==g_}get disabled(){return this.status===v0}get enabled(){return this.status!==v0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=jk(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=$k(e)}addValidators(e){this.setValidators(Mk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Nk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Nk(e,this._rawAsyncValidators))}hasValidator(e){return _T(this._rawValidators,e)}hasAsyncValidator(e){return _T(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=g_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=v0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=y0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===y0||this.status===g_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?v0:y0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=g_,this._hasOwnPendingAsyncValidator=!0;const t=wk(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Ej(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=CM(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof Ij)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?v0:this.errors?CT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(g_)?g_:this._anyControlsHaveStatus(CT)?CT:y0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class TT extends bM{constructor(e=null,t,r){super(wM(t),IM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class DT extends bM{constructor(e,t,r){super(wM(t),IM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zk(this,e),Object.keys(e).forEach(r=>{Wk(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Gk(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Ij extends bM{constructor(e,t,r){super(wM(t),IM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zk(this,e),e.forEach((r,i)=>{Wk(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Gk(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Qk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Xk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const DM=new f.OlP("NgModelWithFormControlWarning"),Nj={provide:Xi,useExisting:(0,f.Gpc)(()=>ST)};let ST=(()=>{class n extends Xi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(IT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return _0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ET(t.control||null,t,!1),vM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Bk(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ET(r||null,t),Hk(i)&&(_0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Vk(n,e){mM(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function _j(n,e){return IT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mM(this.form,this),this._oldForm&&IT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Li,10),f.Y36($d,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Nj]),f.qOj,f.TTD]}),n})();const Oj={provide:Hd,useExisting:(0,f.Gpc)(()=>RM)};let RM=(()=>{class n extends Hd{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function yM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===gT?t=a:function vj(n){return Object.getPrototypeOf(n.constructor)===vp}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function _M(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function vT(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Xi,13),f.Y36(Li,10),f.Y36($d,10),f.Y36(vu,10),f.Y36(DM,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Oj]),f.qOj,f.TTD]}),n})(),Yj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Xk]]}),n})(),Qj=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Yj]}),n})();const g1=new f.OlP("ADDS_TASK_DTO");let m1=(()=>{class n{constructor(t,r){this._addsTaskDto=t,this.router=r,this.createTask=new DT({task:new TT,id:new TT})}onCreateTaskSubmited(t){var r,i;t.invalid||(this._addsTaskDto.add({task:null===(r=t.get("task"))||void 0===r?void 0:r.value,done:!1,id:null===(i=t.get("id"))||void 0===i?void 0:i.value,created:Date.now()}),this.createTask.reset(),this.router.navigate(["/tasks"]))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(g1),f.Y36(Ei))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-add-task"]],decls:8,vars:1,consts:[[1,"container","mb-5","mt-5","p-25","m-20"],[1,"form-floating","w-50",3,"formGroup","ngSubmit"],["type","text","formControlName","task","placeholder","Type your task here","id","floatingTextarea2",1,"form-control",2,"height","100px"],["for","floatingTextarea2"],["type","submit","value","Add task",1,"btn","text-white","mt-3","m-3"],["routerLink","/","role","button",1,"btn","bg-white","border-dark","mt-3","m-3"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"form",1),f.NdJ("ngSubmit",function(){return r.onCreateTaskSubmited(r.createTask)}),f._UZ(2,"input",2),f.TgZ(3,"label",3),f._uU(4,"Type your task here:"),f.qZA(),f._UZ(5,"input",4),f.TgZ(6,"a",5),f._uU(7,"Cancel"),f.qZA()()()),2&t&&(f.xp6(1),f.Q6J("formGroup",r.createTask))},directives:[Qk,kk,ST,gT,Ok,RM,zh],encapsulation:2,changeDetection:0}),n})(),Jj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-task-list-page"]],decls:3,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-task-list")(1,"lib-add-task")(2,"lib-images")},directives:[X2,m1,Ly],encapsulation:2,changeDetection:0}),n})(),Xj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[uk],imports:[[ss,K2.forRoot()]]}),n})(),w0=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks-list").add(t)}getAll(t){return this._client.collection("tasks-list").valueChanges({idField:"id"}).pipe((0,an.U)(r=>ek(r,t)))}set(t){this._client.doc("tasks-list/"+t.id).update(t)}remove(t){this._client.doc("tasks-list/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),PM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[w0,{provide:g1,useExisting:w0},{provide:nk,useExisting:w0},{provide:rk,useExisting:w0},{provide:ik,useExisting:w0}],imports:[[XO]]}),n})(),_1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[ss,Qj,vo]]}),n})(),e$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[ss,PM,vo.forChild([{path:"",component:Jj}]),Xj,Kh,aM,_1,qh]]}),n})(),t$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-add-task-page"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-add-task")(1,"lib-images")},directives:[m1,Ly],encapsulation:2,changeDetection:0}),n})(),n$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[ss,vo.forChild([{path:"",component:t$}]),_1,PM,Kh,aM,qh]]}),n})();const r$=[{path:"",loadChildren:()=>k2},{path:"tasks",loadChildren:()=>e$},{path:"add-task",loadChildren:()=>n$}];let i$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[vo.forRoot(r$)],vo]}),n})(),s$=(()=>{class n{constructor(){this.today=Date.now()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-date"]],decls:6,vars:4,consts:[[1,"container","border-bottom","py-4","mb-5"],[1,"d-inline","fs-3","fw-bold"],[1,"d-inline","fs-5"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"p",1),f._uU(2," TODAY "),f.qZA(),f.TgZ(3,"p",2),f._uU(4),f.ALo(5,"date"),f.qZA()()),2&t&&(f.xp6(4),f.hij(" ",f.xi3(5,1,r.today,"fullDate"),""))},pipes:[lh],encapsulation:2,changeDetection:0}),n})(),o$=(()=>{class n{constructor(){this.title="todo-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"container-flex","fs-3","text-white","header"],["routerLink","",1,"text-decoration-none","text-white","fw-bold"],[1,"container-flex"]],template:function(t,r){1&t&&(f.TgZ(0,"header")(1,"div",0)(2,"a",1),f._uU(3,"OK TO DO APP"),f.qZA()()(),f._UZ(4,"lib-date"),f.TgZ(5,"div",2),f._UZ(6,"router-outlet"),f.qZA())},directives:[zh,s$,cl],styles:[".header[_ngcontent-%COMP%]{background-color:navy;padding:8px 200px;font-family:Verdana,Geneva,Tahoma,sans-serif}"]}),n})();const OM_firebase={projectId:"todo-app-93ce9",appId:"1:866611904544:web:b47d7fa825fb1fa286fc45",storageBucket:"todo-app-93ce9.appspot.com",locationId:"europe-west",apiKey:"AIzaSyAA815atWJRBktaddJ6vKf2OSdUt4KB-Iw",authDomain:"todo-app-93ce9.firebaseapp.com",messagingSenderId:"866611904544"};var kM=N(6148),y1=N(573);function u$(n){return new kr.y(function(e){return{unsubscribe:(0,y1.t)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class AT{constructor(e){return e}}class I0{constructor(){return(0,ot.vb)("auth")}}const FM=new f.OlP("angularfire2.auth-instances");function d$(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new AT(r)}}const h$={provide:I0,deps:[[new f.FiY,FM]]},f$={provide:AT,useFactory:function c$(n,e){const t=(0,ot.JM)("auth",n,e);return t&&new AT(t)},deps:[[new f.FiY,FM],Js]};let p$=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[f$,h$]}),n})();function g$(n,...e){return{ngModule:p$,providers:[{provide:FM,useFactory:d$(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,[new f.FiY,Bd],...e]}]}}const m$=(0,ot.u3)(u$,!0),_$=(0,ot.u3)(y1.n,!0);class C0{constructor(e){return e}}const E1="analytics",w1=ot.nk.async,v$=(0,ot.u3)(kM.IH,!0),E$=(0,ot.u3)(kM.Kz,!0),w$=(0,ot.u3)(kM.Iv,!0);let LM=(()=>{class n{constructor(t,r,i){let a;this.disposables=[],(0,Di.KN)("angularfire",ot.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(l=>{a=l})),w1().then(()=>{const l=i.get(C0);l?this.disposables=[m$(t).subscribe(d=>{w$(l,null==d?void 0:d.uid),a()})]:a()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(AT),f.LFG(f.R0b),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const I1="firebase_screen_id",VM="outlet",b0="screen_class",C1="screen_name";let P$=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const UM={},O$=n=>{const e=[n[b0],n[VM]].join("#");if(UM.hasOwnProperty(e))return UM[e];{const t=P$++;return UM[e]=t,t}};let b1=(()=>{class n{constructor(t,r,i,a,l,d){(0,Di.KN)("angularfire",ot.q4.full,"screen-tracking"),w1().then(()=>{const g=d.get(C0);!t||!g||a.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Ai(i=>i instanceof rg)).pipe(yr(i=>{var a;const d=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,P=>P.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",g=n.routerState.root.children.map(P=>P).find(P=>P.outlet===i.snapshot.outlet);if(!g)return Ot(null);let y=g;for(;y.firstChild;)y=y.firstChild;const b=y.pathFromRoot.map(P=>{var B;return null===(B=P.routeConfig)||void 0===B?void 0:B.path}).filter(P=>P).join("/")||"/",T={[C1]:b,page_path:`/${d}`,firebase_event_origin:"auto",firebase_screen:b,[VM]:i.snapshot.outlet};e&&(T.page_title=e.getTitle());let S=g.component;if(S){if(S===Wc){let P=i.snapshot;for(;P.firstChild;)P=P.firstChild;S=P.component}}else S=i.snapshot.component;if("string"==typeof S)return Ot(Object.assign(Object.assign({},T),{[b0]:S}));if(S){const P=t.resolveComponentFactory(S);return Ot(Object.assign(Object.assign({},T),{[b0]:P.selector}))}return Ot(null)}),Ai(i=>!!i),(0,an.U)(i=>Object.assign({firebase_screen_class:i[b0],[I1]:O$(i)},i)),function a$(n,e,t,r){return(0,Br.e)((i,a)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const d=new Map,g=B=>{d.forEach(B),B(a)},y=B=>g(J=>J.error(B));let b=0,T=!1;const S=new tr.Q(a,B=>{try{const J=n(B);let ye=d.get(J);if(!ye){d.set(J,ye=r?r():new as.x);const ft=function P(B,J){const ye=new kr.y(ft=>{b++;const dt=J.subscribe(ft);return()=>{dt.unsubscribe(),0==--b&&T&&S.unsubscribe()}});return ye.key=B,ye}(J,ye);if(a.next(ft),t){const dt=(0,tr.x)(ye,()=>{ye.complete(),null==dt||dt.unsubscribe()},void 0,void 0,()=>d.delete(J));S.add((0,Ns.Xf)(t(ft)).subscribe(dt))}}ye.next(l?l(B):B)}catch(J){y(J)}},()=>g(B=>B.complete()),y,()=>d.clear(),()=>(T=!0,0===b));i.subscribe(S)})}(i=>i[VM]),(0,nr.z)(i=>i.pipe(Hw((a,l)=>JSON.stringify(a)===JSON.stringify(l)),us(void 0),Zh(),(0,an.U)(([a,l])=>a?Object.assign({firebase_previous_class:a[b0],firebase_previous_screen:a[C1],firebase_previous_id:a[I1]},l):l)))))(t,r,i).pipe(yr(y=>(0,uM.mG)(this,void 0,void 0,function*(){return l&&(yield l.initialized),E$(g,"screen_view",y)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ei,8),f.LFG(ju,8),f.LFG(f._Vd),f.LFG(f.R0b),f.LFG(LM,8),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const BM=new f.OlP("angularfire2.analytics-instances");function L$(n){return(e,t)=>{if(!ot.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new C0(r)}}const V$={provide:class y${constructor(){return(0,ot.vb)(E1)}},deps:[[new f.FiY,BM]]},U$={provide:C0,useFactory:function F$(n,e){if(!ot.nk.sync())return null;const t=(0,ot.JM)(E1,n,e);return t&&new C0(t)},deps:[[new f.FiY,BM],Js]};let B$=(()=>{class n{constructor(t,r){(0,Di.KN)("angularfire",ot.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(b1,8),f.LFG(LM,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[U$,V$,{provide:f.ip1,useValue:ot.nk.async,multi:!0}]}),n})();function j$(n,...e){return{ngModule:B$,providers:[{provide:BM,useFactory:L$(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,...e]}]}}const T1="@firebase/database";let jM="";class H${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,K.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,K.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class G${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,K.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const S1=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new H$(e)}}catch(e){}return new G$},wp=S1("localStorage"),$M=S1("sessionStorage"),m_=new gs.Yd("@firebase/database"),A1=function(){let n=1;return function(){return n++}}(),R1=function(n){const e=(0,K.dS)(n),t=new K.gQ;t.update(e);const r=t.digest();return K.US.encodeByteArray(r)},T0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=T0.apply(null,r):e+="object"==typeof r?(0,K.Pz)(r):r,e+=" "}return e};let Ip=null,M1=!0;const pi=function(...n){if(!0===M1&&(M1=!1,null===Ip&&!0===$M.get("logging_enabled")&&function(n,e){(0,K.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(m_.logLevel=gs.in.VERBOSE,Ip=m_.log.bind(m_),e&&$M.set("logging_enabled",!0)):"function"==typeof n?Ip=n:(Ip=null,$M.remove("logging_enabled"))}(!0)),Ip){const e=T0.apply(null,n);Ip(e)}},D0=function(n){return function(...e){pi(n,...e)}},HM=function(...n){const e="FIREBASE INTERNAL ERROR: "+T0(...n);m_.error(e)},Eu=function(...n){const e=`FIREBASE FATAL ERROR: ${T0(...n)}`;throw m_.error(e),new Error(e)},es=function(...n){const e="FIREBASE WARNING: "+T0(...n);m_.warn(e)},RT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ic="[MIN_NAME]",wu="[MAX_NAME]",Cp=function(n,e){if(n===e)return 0;if(n===ic||e===wu)return-1;if(e===ic||n===wu)return 1;{const t=MT(n),r=MT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},q$=function(n,e){return n===e?0:n<e?-1:1},S0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,K.Pz)(e))},GM=function(n){if("object"!=typeof n||null===n)return(0,K.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,K.Pz)(e[r]),t+=":",t+=GM(n[e[r]]);return t+="}",t},x1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const P1=function(n){(0,K.hu)(!RT(n),"Invalid JSON number");const r=1023;let i,a,l,d,g;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(g=11;g;g-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const b=y.join("");let T="";for(g=0;g<64;g+=8){let S=parseInt(b.substr(g,8),2).toString(16);1===S.length&&(S="0"+S),T+=S}return T.toLowerCase()},Q$=new RegExp("^-?(0*)\\d{1,10}$"),MT=function(n){if(Q$.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},__=function(n){try{n()}catch(e){setTimeout(()=>{throw es("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},A0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class X${constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){es(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class eH{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(pi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',es(e)}}let R0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const U1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,j1="websocket",$1="long_polling";class qM{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function H1(n,e,t){let r;if((0,K.hu)("string"==typeof e,"typeof type must == string"),(0,K.hu)("object"==typeof t,"typeof params must == object"),e===j1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==$1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function nH(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return gi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class rH{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,K.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,K.p$)(this.counters_)}}const KM={},ZM={};function YM(n){const e=n.toString();return KM[e]||(KM[e]=new rH),KM[e]}class sH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&__(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class y_{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=D0(e),this.stats_=YM(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),H1(t,$1,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,K.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new QM((...a)=>{const[l,d,g,y,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=g;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&U1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){y_.forceAllow_=!0}static forceDisallow(){y_.forceDisallow_=!0}static isAvailable(){return!((0,K.Yr)()||!y_.forceAllow_&&(y_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,K.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,K.h$)(t),i=x1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,K.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,K.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class QM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,K.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=A1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=QM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){pi("frame writing exception"),d.stack&&pi(d.stack),pi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||pi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,K.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{pi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let M0=null;"undefined"!=typeof MozWebSocket?M0=MozWebSocket:"undefined"!=typeof WebSocket&&(M0=WebSocket);let N0=(()=>{class n{constructor(t,r,i,a,l,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=D0(this.connId),this.stats_=YM(r),this.connURL=n.connectionURL_(r,d,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,K.Yr)()&&"undefined"!=typeof location&&location.hostname&&U1.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),H1(t,j1,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wp.set("previous_websocket_failure",!0);try{if((0,K.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${jM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(a.proxy={origin:d}),this.mySock=new M0(this.connURL,[],a)}else this.mySock=new M0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==M0&&!n.forceDisallow_}static previouslyFailed(){return wp.isInMemoryStorage||!0===wp.get("previous_websocket_failure")}markConnectionHealthy(){wp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,K.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,K.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,K.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=x1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class JM{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[y_,N0]}initTransports_(e){const t=N0&&N0.isAvailable();let r=t&&!N0.previouslyFailed();if(e.webSocketOnly&&(t||es("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[N0];else{const i=this.transports_=[];for(const a of JM.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class nF{constructor(e,t,r,i,a,l,d,g,y,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=D0("c:"+this.id+":"),this.transportManager_=new JM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=A0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=S0("t",e),r=S0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=S0("t",e),r=S0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=S0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?HM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&es("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),A0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):A0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class rF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class iF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,K.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,K.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class xT extends iF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,K.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xT}getInitialEvent(e){return(0,K.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class qn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Bn(){return new qn("")}function wn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Gd(n){return n.pieces_.length-n.pieceNum_}function or(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new qn(n.pieces_,e)}function eN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function x0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function aF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new qn(e,0)}function Cr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof qn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new qn(t,0)}function In(n){return n.pieceNum_>=n.pieces_.length}function ts(n,e){const t=wn(n),r=wn(e);if(null===t)return e;if(t===r)return ts(or(n),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tN(n,e){if(Gd(n)!==Gd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function No(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Gd(n)>Gd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class AH{constructor(e,t){this.errorPrefix_=t,this.parts_=x0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,K.ug)(this.parts_[r]);uF(this)}}function uF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bp(n))}function bp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class nN extends iF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new nN}getInitialEvent(e){return(0,K.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const P0=1e3;let OT,Tp=(()=>{class n extends rF{constructor(t,r,i,a,l,d,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=D0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=P0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,K.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");nN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,K.Pz)(l)),(0,K.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new K.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[l];void 0===d||a!==d||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,K.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,K.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,g=>{const y=g.d,b=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,K.r3)(t,"w")){const i=(0,K.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();es(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,K.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,K.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,K.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,K.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):HM("Unrecognized action received from server: "+(0,K.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,K.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=P0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=P0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=P0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,y=null;const b=function(){y?y.close():(g=!0,a())};t.realtime_={close:b,sendRequest:function(P){(0,K.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,B]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);g?pi("getToken() completed but was canceled"):(pi("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=B&&B.token,y=new nF(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,J=>{es(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(P){t.log_("Failed to get token: "+P),g||(t.repoInfo_.nodeAdmin&&es(P),b())}}})()}interrupt(t){pi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){pi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,K.xb)(this.interruptReasons_)&&(this.reconnectDelay_=P0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>GM(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new qn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){pi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){pi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,K.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+jM.replace(/\./g,"-")]=1,(0,K.uI)()?t["framework.cordova"]=1:(0,K.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xT.getInstance().currentlyOnline();return(0,K.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class bn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new bn(e,t)}}class PT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new bn(ic,e),i=new bn(ic,t);return 0!==this.compare(r,i)}minPost(){return bn.MIN}}class dF extends PT{static get __EMPTY_NODE(){return OT}static set __EMPTY_NODE(e){OT=e}compare(e,t){return Cp(e.name,t.name)}isDefinedOn(e){throw(0,K.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return bn.MIN}maxPost(){return new bn(wu,OT)}makePost(e,t){return(0,K.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new bn(e,OT)}toString(){return".key"}}const Iu=new dF;class kT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let iN,fa=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Is.EMPTY_NODE,this.right=null!=l?l:Is.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Is.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Is.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Is{constructor(e,t=Is.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Is(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fa.BLACK,null,null))}remove(e){return new Is(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kT(this.root_,null,this.comparator_,!0,e)}}function LH(n,e){return Cp(n.name,e.name)}function rN(n,e){return Cp(n,e)}Is.EMPTY_NODE=new class FH{copy(e,t,r,i,a){return this}insert(e,t,r){return new fa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hF=function(n){return"number"==typeof n?"number:"+P1(n):"string:"+n},fF=function(n){if(n.isLeafNode()){const e=n.val();(0,K.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,K.r3)(e,".sv"),"Priority must be a string or number.")}else(0,K.hu)(n===iN||n.isEmpty(),"priority of unexpected type.");(0,K.hu)(n===iN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pF,gF,mF,v_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,K.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),fF(this.priorityNode_)}static set __childrenNodeConstructor(t){pF=t}static get __childrenNodeConstructor(){return pF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return In(t)?this:".priority"===wn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=wn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,K.hu)(".priority"!==i||1===Gd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?P1(this.value_):this.value_,this.lazyHash_=R1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,K.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,K.hu)(a>=0,"Unknown leaf type: "+r),(0,K.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const fr=new class jH extends PT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Cp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return bn.MIN}maxPost(){return new bn(wu,new v_("[PRIORITY-POST]",mF))}makePost(e,t){const r=gF(e);return new bn(t,new v_("[PRIORITY-POST]",r))}toString(){return".priority"}},$H=Math.log(2);class HH{constructor(e){this.count=parseInt(Math.log(e+1)/$H,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const FT=function(n,e,t,r){n.sort(e);const i=function(g,y){const b=y-g;let T,S;if(0===b)return null;if(1===b)return T=n[g],S=t?t(T):T,new fa(S,T.node,fa.BLACK,null,null);{const P=parseInt(b/2,10)+g,B=i(g,P),J=i(P+1,y);return T=n[P],S=t?t(T):T,new fa(S,T.node,fa.BLACK,B,J)}},d=function(g){let y=null,b=null,T=n.length;const S=function(B,J){const ye=T-B,ft=T;T-=B;const dt=i(ye+1,ft),yt=n[ye],lt=t?t(yt):yt;P(new fa(lt,yt.node,J,null,dt))},P=function(B){y?(y.left=B,y=B):(b=B,y=B)};for(let B=0;B<g.count;++B){const J=g.nextBitIsOne(),ye=Math.pow(2,g.count-(B+1));J?S(ye,fa.BLACK):(S(ye,fa.BLACK),S(ye,fa.RED))}return b}(new HH(n.length));return new Is(r||e,d)};let sN;const E_={};class sc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,K.hu)(E_&&fr,"ChildrenNode.ts has not been loaded"),sN=sN||new sc({".priority":E_},{".priority":fr}),sN}get(e){const t=(0,K.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Is?t:null}hasIndex(e){return(0,K.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,K.hu)(e!==Iu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(bn.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?FT(r,e.getCompare()):E_;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const b=Object.assign({},this.indexes_);return b[g]=d,new sc(b,y)}addToIndexes(e,t){const r=(0,K.UI)(this.indexes_,(i,a)=>{const l=(0,K.DV)(this.indexSet_,a);if((0,K.hu)(l,"Missing index implementation for "+a),i===E_){if(l.isDefinedOn(e.node)){const d=[],g=t.getIterator(bn.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&d.push(y),y=g.getNext();return d.push(e),FT(d,l.getCompare())}return E_}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new bn(e.name,d))),g.insert(e,e.node)}});return new sc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,K.UI)(this.indexes_,i=>{if(i===E_)return i;{const a=t.get(e.name);return a?i.remove(new bn(e.name,a)):i}});return new sc(r,this.indexSet_)}}let O0,fn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fF(this.priorityNode_),this.children_.isEmpty()&&(0,K.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return O0||(O0=new n(new Is(rN),null,sc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||O0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?O0:r}}getChild(t){const r=wn(t);return null===r?this:this.getImmediateChild(r).getChild(or(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,K.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new bn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?O0:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=wn(t);if(null===i)return r;{(0,K.hu)(".priority"!==wn(t)||1===Gd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(or(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(fr,(d,g)=>{r[d]=g.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+hF(this.getPriority().val())+":"),this.forEachChild(fr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":R1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new bn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new bn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new bn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,bn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,bn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===k0?-1:0}withIndex(t){if(t===Iu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Iu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(fr),a=r.getIterator(fr);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Iu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const k0=new class GH extends fn{constructor(){super(new Is(rN),fn.EMPTY_NODE,sc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fn.EMPTY_NODE}isEmpty(){return!1}};function Nr(n,e=null){if(null===n)return fn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,K.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new v_(n,Nr(e));if(n instanceof Array){let t=fn.EMPTY_NODE;return gi(n,(r,i)=>{if((0,K.r3)(n,r)&&"."!==r.substring(0,1)){const a=Nr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Nr(e))}{const t=[];let r=!1;if(gi(n,(l,d)=>{if("."!==l.substring(0,1)){const g=Nr(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new bn(l,g)))}}),0===t.length)return fn.EMPTY_NODE;const a=FT(t,LH,l=>l.name,rN);if(r){const l=FT(t,fr.getCompare());return new fn(a,Nr(e),new sc({".priority":l},{".priority":fr}))}return new fn(a,Nr(e),sc.Default)}}Object.defineProperties(bn,{MIN:{value:new bn(ic,fn.EMPTY_NODE)},MAX:{value:new bn(wu,k0)}}),dF.__EMPTY_NODE=fn.EMPTY_NODE,v_.__childrenNodeConstructor=fn,function VH(n){iN=n}(k0),function BH(n){mF=n}(k0),function UH(n){gF=n}(Nr);class oN extends PT{constructor(e){super(),this.indexPath_=e,(0,K.hu)(!In(e)&&".priority"!==wn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Cp(e.name,t.name):a}makePost(e,t){const r=Nr(e),i=fn.EMPTY_NODE.updateChild(this.indexPath_,r);return new bn(t,i)}maxPost(){const e=fn.EMPTY_NODE.updateChild(this.indexPath_,k0);return new bn(wu,e)}toString(){return x0(this.indexPath_,0).join("/")}}const aN=new class zH extends PT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Cp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return bn.MIN}maxPost(){return bn.MAX}makePost(e,t){const r=Nr(e);return new bn(t,r)}toString(){return".value"}};function L0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class cN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ic}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,K.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fr}copy(){const e=new cN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IF(n){const e={};if(n.isDefault())return e;let t;return n.index_===fr?t="$priority":n.index_===aN?t="$value":n.index_===Iu?t="$key":((0,K.hu)(n.index_ instanceof oN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,K.Pz)(t),n.startSet_&&(e.startAt=(0,K.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,K.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,K.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,K.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function CF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==fr&&(e.i=n.index_.toString()),e}class VT extends rF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=D0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,K.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=VT.getListenId_(e,r),d={};this.listens_[l]=d;const g=IF(e._queryParams);this.restRequest_(a+".json",g,(y,b)=>{let T=b;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(a,T,!1,r),(0,K.DV)(this.listens_,l)===d){let S;S=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(S,null)}})}unlisten(e,t){const r=VT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=IF(e._queryParams),r=e._path.toString(),i=new K.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,K.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,K.cI)(d.responseText)}catch(y){es("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&es("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class tG{constructor(){this.rootNode_=fn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function UT(){return{value:null,children:new Map}}function C_(n,e,t){if(In(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=wn(e);n.children.has(r)||n.children.set(r,UT()),C_(n.children.get(r),e=or(e),t)}}function pN(n,e,t){null!==n.value?t(e,n.value):function nG(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{pN(i,new qn(e.toString()+"/"+r),t)})}class rG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class oG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new rG(e);const r=1e4+2e4*Math.random();A0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;gi(e,(i,a)=>{a>0&&(0,K.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),A0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var xo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(xo||(xo={})),xo))();function _N(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class BT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=xo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(In(this.path)){if(null!=this.affectedTree.value)return(0,K.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new qn(e));return new BT(Bn(),t,this.revert)}}return(0,K.hu)(wn(this.path)===e,"operationForChild called for unrelated child."),new BT(or(this.path),this.affectedTree,this.revert)}}class Dp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=xo.OVERWRITE}operationForChild(e){return In(this.path)?new Dp(this.source,Bn(),this.snap.getImmediateChild(e)):new Dp(this.source,or(this.path),this.snap)}}class b_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=xo.MERGE}operationForChild(e){if(In(this.path)){const t=this.children.subtree(new qn(e));return t.isEmpty()?null:t.value?new Dp(this.source,Bn(),t.value):new b_(this.source,Bn(),t)}return(0,K.hu)(wn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new b_(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(In(e))return this.isFullyInitialized()&&!this.filtered_;const t=wn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function B0(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,g)=>function cG(n,e,t){if(null==e.childName||null==t.childName)throw(0,K.g5)("Should only compare child_ events.");const r=new bn(e.childName,e.snapshotNode),i=new bn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),l.forEach(d=>{const g=function lG(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(g,n.query_))})})}function jT(n,e){return{eventCache:n,serverCache:e}}function j0(n,e,t,r){return jT(new Wd(e,t,r),n.serverCache)}function TF(n,e,t,r){return jT(n.eventCache,new Wd(e,t,r))}function $T(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Sp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yN;class pr{constructor(e,t=(()=>(yN||(yN=new Is(q$)),yN))()){this.value=e,this.children=t}static fromObject(e){let t=new pr(null);return gi(e,(r,i)=>{t=t.set(new qn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Bn(),value:this.value};if(In(e))return null;{const r=wn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(or(e),t);return null!=a?{path:Cr(new qn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(In(e))return this;{const t=wn(e),r=this.children.get(t);return null!==r?r.subtree(or(e)):new pr(null)}}set(e,t){if(In(e))return new pr(t,this.children);{const r=wn(e),a=(this.children.get(r)||new pr(null)).set(or(e),t),l=this.children.insert(r,a);return new pr(this.value,l)}}remove(e){if(In(e))return this.children.isEmpty()?new pr(null):new pr(null,this.children);{const t=wn(e),r=this.children.get(t);if(r){const i=r.remove(or(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new pr(null):new pr(this.value,a)}return this}}get(e){if(In(e))return this.value;{const t=wn(e),r=this.children.get(t);return r?r.get(or(e)):null}}setTree(e,t){if(In(e))return t;{const r=wn(e),a=(this.children.get(r)||new pr(null)).setTree(or(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new pr(this.value,l)}}fold(e){return this.fold_(Bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Cr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(In(e))return null;{const a=wn(e),l=this.children.get(a);return l?l.findOnPath_(or(e),Cr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Bn(),t)}foreachOnPath_(e,t,r){if(In(e))return this;{this.value&&r(t,this.value);const i=wn(e),a=this.children.get(i);return a?a.foreachOnPath_(or(e),Cr(t,i),r):new pr(null)}}foreach(e){this.foreach_(Bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Cr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class pa{constructor(e){this.writeTree_=e}static empty(){return new pa(new pr(null))}}function $0(n,e,t){if(In(e))return new pa(new pr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=ts(i,e);return a=a.updateChild(l,t),new pa(n.writeTree_.set(i,a))}{const i=new pr(t),a=n.writeTree_.setTree(e,i);return new pa(a)}}}function vN(n,e,t){let r=n;return gi(t,(i,a)=>{r=$0(r,Cr(e,i),a)}),r}function DF(n,e){if(In(e))return pa.empty();{const t=n.writeTree_.setTree(e,new pr(null));return new pa(t)}}function EN(n,e){return null!=Ap(n,e)}function Ap(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ts(t.path,e)):null}function SF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(fr,(r,i)=>{e.push(new bn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new bn(r,i.value))}),e}function zd(n,e){if(In(e))return n;{const t=Ap(n,e);return new pa(null!=t?new pr(t):n.writeTree_.subtree(e))}}function wN(n){return n.writeTree_.isEmpty()}function T_(n,e){return AF(Bn(),n.writeTree_,e)}function AF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,K.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=AF(Cr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Cr(n,".priority"),r)),t}}function HT(n,e){return PF(e,n)}function mG(n,e){if(n.snap)return No(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&No(Cr(n.path,t),e))return!0;return!1}function yG(n){return n.visible}function RF(n,e,t){let r=pa.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)No(t,l)?(d=ts(t,l),r=$0(r,d,a.snap)):No(l,t)&&(d=ts(l,t),r=$0(r,Bn(),a.snap.getChild(d)));else{if(!a.children)throw(0,K.g5)("WriteRecord should have .snap or .children");if(No(t,l))d=ts(t,l),r=vN(r,d,a.children);else if(No(l,t))if(d=ts(l,t),In(d))r=vN(r,Bn(),a.children);else{const g=(0,K.DV)(a.children,wn(d));if(g){const y=g.getChild(or(d));r=$0(r,Bn(),y)}}}}}return r}function MF(n,e,t,r,i){if(r||i){const a=zd(n.visibleWrites,e);return!i&&wN(a)?t:i||null!=t||EN(a,Bn())?T_(RF(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(No(y.path,e)||No(e,y.path))},e),t||fn.EMPTY_NODE):null}{const a=Ap(n.visibleWrites,e);if(null!=a)return a;{const l=zd(n.visibleWrites,e);return wN(l)?t:null!=t||EN(l,Bn())?T_(l,t||fn.EMPTY_NODE):null}}}function GT(n,e,t,r){return MF(n.writeTree,n.treePath,e,t,r)}function IN(n,e){return function vG(n,e,t){let r=fn.EMPTY_NODE;const i=Ap(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(fr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=zd(n.visibleWrites,e);return t.forEachChild(fr,(l,d)=>{const g=T_(zd(a,new qn(l)),d);r=r.updateImmediateChild(l,g)}),SF(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return SF(zd(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function NF(n,e,t,r){return function EG(n,e,t,r,i){(0,K.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Cr(e,t);if(EN(n.visibleWrites,a))return null;{const l=zd(n.visibleWrites,a);return wN(l)?i.getChild(t):T_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function WT(n,e){return function IG(n,e){return Ap(n.visibleWrites,e)}(n.writeTree,Cr(n.treePath,e))}function CN(n,e,t){return function wG(n,e,t,r){const i=Cr(e,t),a=Ap(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?T_(zd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function xF(n,e){return PF(Cr(n.treePath,e),n.writeTree)}function PF(n,e){return{treePath:n,writeTree:e}}class DG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,K.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,K.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,L0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function F0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function I_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,K.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,L0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const OF=new class SG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class bN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Wd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Sp(this.viewCache_),a=function TG(n,e,t,r,i,a){return function CG(n,e,t,r,i,a,l){let d;const g=zd(n.visibleWrites,e),y=Ap(g,Bn());if(null!=y)d=y;else{if(null==t)return[];d=T_(g,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const b=[],T=l.getCompare(),S=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let P=S.getNext();for(;P&&b.length<i;)0!==T(P,r)&&b.push(P),P=S.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function kF(n,e,t,r,i,a){const l=e.eventCache;if(null!=WT(r,t))return e;{let d,g;if(In(t))if((0,K.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Sp(e),T=IN(r,y instanceof fn?y:fn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const y=GT(r,Sp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=wn(t);if(".priority"===y){(0,K.hu)(1===Gd(t),"Can't have a priority with additional path components");const b=l.getNode();g=e.serverCache.getNode();const T=NF(r,t,b,g);d=null!=T?n.filter.updatePriority(b,T):l.getNode()}else{const b=or(t);let T;if(l.isCompleteForChild(y)){g=e.serverCache.getNode();const S=NF(r,t,l.getNode(),g);T=null!=S?l.getNode().getImmediateChild(y).updateChild(b,S):l.getNode().getImmediateChild(y)}else T=CN(r,y,e.serverCache);d=null!=T?n.filter.updateChild(l.getNode(),y,T,b,i,a):l.getNode()}}return j0(e,d,l.isFullyInitialized()||In(t),n.filter.filtersNodes())}}function zT(n,e,t,r,i,a,l,d){const g=e.serverCache;let y;const b=l?n.filter:n.filter.getIndexedFilter();if(In(t))y=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const P=g.getNode().updateChild(t,r);y=b.updateFullNode(g.getNode(),P,null)}else{const P=wn(t);if(!g.isCompleteForPath(t)&&Gd(t)>1)return e;const B=or(t),ye=g.getNode().getImmediateChild(P).updateChild(B,r);y=".priority"===P?b.updatePriority(g.getNode(),ye):b.updateChild(g.getNode(),P,ye,B,OF,null)}const T=TF(e,y,g.isFullyInitialized()||In(t),b.filtersNodes());return kF(n,T,t,i,new bN(i,T,a),d)}function TN(n,e,t,r,i,a,l){const d=e.eventCache;let g,y;const b=new bN(i,e,a);if(In(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),g=j0(e,y,!0,n.filter.filtersNodes());else{const T=wn(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=j0(e,y,d.isFullyInitialized(),d.isFiltered());else{const S=or(t),P=d.getNode().getImmediateChild(T);let B;if(In(S))B=r;else{const J=b.getCompleteChild(T);B=null!=J?".priority"===eN(S)&&J.getChild(aF(S)).isEmpty()?J:J.updateChild(S,r):fn.EMPTY_NODE}g=P.equals(B)?e:j0(e,n.filter.updateChild(d.getNode(),T,B,S,b,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function FF(n,e){return n.eventCache.isCompleteForChild(e)}function LF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function DN(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=In(t)?r:new pr(null).setTree(t,r);const b=e.serverCache.getNode();return y.children.inorderTraversal((T,S)=>{if(b.hasChild(T)){const B=LF(0,e.serverCache.getNode().getImmediateChild(T),S);g=zT(n,g,new qn(T),B,i,a,l,d)}}),y.children.inorderTraversal((T,S)=>{const P=!e.serverCache.isCompleteForChild(T)&&void 0===S.value;if(!b.hasChild(T)&&!P){const J=LF(0,e.serverCache.getNode().getImmediateChild(T),S);g=zT(n,g,new qn(T),J,i,a,l,d)}}),g}function UG(n,e){const t=Sp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!In(e)&&!t.getImmediateChild(wn(e)).isEmpty())?t.getChild(e):null}function BF(n,e,t,r){e.type===xo.MERGE&&null!==e.source.queryId&&((0,K.hu)(Sp(n.viewCache_),"We should always have a full cache before handling merges"),(0,K.hu)($T(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function MG(n,e,t,r,i){const a=new DG;let l,d;if(t.type===xo.OVERWRITE){const y=t;y.source.fromUser?l=TN(n,e,y.path,y.snap,r,i,a):((0,K.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!In(y.path),l=zT(n,e,y.path,y.snap,r,i,d,a))}else if(t.type===xo.MERGE){const y=t;y.source.fromUser?l=function xG(n,e,t,r,i,a,l){let d=e;return r.foreach((g,y)=>{const b=Cr(t,g);FF(e,wn(b))&&(d=TN(n,d,b,y,i,a,l))}),r.foreach((g,y)=>{const b=Cr(t,g);FF(e,wn(b))||(d=TN(n,d,b,y,i,a,l))}),d}(n,e,y.path,y.children,r,i,a):((0,K.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=DN(n,e,y.path,y.children,r,i,d,a))}else if(t.type===xo.ACK_USER_WRITE){const y=t;l=y.revert?function kG(n,e,t,r,i,a){let l;if(null!=WT(r,t))return e;{const d=new bN(r,e,i),g=e.eventCache.getNode();let y;if(In(t)||".priority"===wn(t)){let b;if(e.serverCache.isFullyInitialized())b=GT(r,Sp(e));else{const T=e.serverCache.getNode();(0,K.hu)(T instanceof fn,"serverChildren would be complete if leaf node"),b=IN(r,T)}b=b,y=n.filter.updateFullNode(g,b,a)}else{const b=wn(t);let T=CN(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=g.getImmediateChild(b)),y=null!=T?n.filter.updateChild(g,b,T,or(t),d,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(g,b,fn.EMPTY_NODE,or(t),d,a):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=GT(r,Sp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=WT(r,Bn()),j0(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function PG(n,e,t,r,i,a,l){if(null!=WT(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(In(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return zT(n,e,t,g.getNode().getChild(t),i,a,d,l);if(In(t)){let y=new pr(null);return g.getNode().forEachChild(Iu,(b,T)=>{y=y.set(new qn(b),T)}),DN(n,e,t,y,i,a,d,l)}return e}{let y=new pr(null);return r.foreach((b,T)=>{const S=Cr(t,b);g.isCompleteForPath(S)&&(y=y.set(b,g.getNode().getChild(S)))}),DN(n,e,t,y,i,a,d,l)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==xo.LISTEN_COMPLETE)throw(0,K.g5)("Unknown operation type: "+t.type);l=function OG(n,e,t,r,i){const a=e.serverCache;return kF(n,TF(e,a.getNode(),a.isFullyInitialized()||In(t),a.isFiltered()),t,r,OF,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function NG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=$T(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function wF(n){return{type:"value",snapshotNode:n}}($T(e)))}}(e,l,g),{viewCache:l,changes:g}}(n.processor_,i,e,t,r);return function RG(n,e){(0,K.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,K.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,K.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function jF(n,e,t,r){return function uG(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function KH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),B0(n,i,"child_removed",e,r,t),B0(n,i,"child_added",e,r,t),B0(n,i,"child_moved",a,r,t),B0(n,i,"child_changed",e,r,t),B0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let qT,ZT;function SN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,K.hu)(null!=a,"SyncTree gave us an op for an invalid query."),BF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(BF(l,e,t,r));return a}}function qd(n,e){let t=null;for(const r of n.views.values())t=t||UG(r,e);return t}class qF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pr(null),this.pendingWriteTree_=function bG(){return{visibleWrites:pa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function AN(n,e,t,r,i){return function hG(n,e,t,r,i){(0,K.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?D_(n,new Dp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Zd(n,e,t=!1){const r=function pG(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function gG(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,K.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&mG(d,r.path)?i=!1:No(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function _G(n){n.visibleWrites=RF(n.allWrites,yG,Bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=DF(n.visibleWrites,r.path):gi(r.children,g=>{n.visibleWrites=DF(n.visibleWrites,Cr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new pr(null);return null!=r.snap?a=a.set(Bn(),!0):gi(r.children,l=>{a=a.set(new qn(l),!0)}),D_(n,new BT(r.path,a,t))}return[]}function H0(n,e,t){return D_(n,new Dp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function YT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=qd(d,ts(l,e));if(y)return y});return MF(i,e,a,t,!0)}function D_(n,e){return ZF(e,n.syncPointTree_,null,HT(n.pendingWriteTree_,Bn()))}function ZF(n,e,t,r){if(In(n.path))return YF(n,e,t,r);{const i=e.get(Bn());null==t&&null!=i&&(t=qd(i,Bn()));let a=[];const l=wn(n.path),d=n.operationForChild(l),g=e.children.get(l);if(g&&d){const y=t?t.getImmediateChild(l):null,b=xF(r,l);a=a.concat(ZF(d,g,y,b))}return i&&(a=a.concat(SN(i,n,r,t))),a}}function YF(n,e,t,r){const i=e.get(Bn());null==t&&null!=i&&(t=qd(i,Bn()));let a=[];return e.children.inorderTraversal((l,d)=>{const g=t?t.getImmediateChild(l):null,y=xF(r,l),b=n.operationForChild(l);b&&(a=a.concat(YF(b,d,g,y)))}),i&&(a=a.concat(SN(i,n,r,t))),a}function MN(n,e){return n.tagToQueryMap.get(e)}function NN(n){const e=n.indexOf("$");return(0,K.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new qn(n.substr(0,e))}}function xN(n,e,t){const r=n.syncPointTree_.get(e);return(0,K.hu)(r,"Missing sync point for query tag that we're tracking"),SN(r,t,HT(n.pendingWriteTree_,e),null)}class PN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new PN(t)}node(){return this.node_}}class ON{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Cr(this.path_,e);return new ON(this.syncTree_,t)}node(){return YT(this.syncTree_,this.path_)}}const JF=function(n,e,t){return n&&"object"==typeof n?((0,K.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?uW(n[".sv"],e,t):"object"==typeof n[".sv"]?lW(n[".sv"],e):void(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},uW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,K.hu)(!1,"Unexpected server value: "+n)},lW=function(n,e,t){n.hasOwnProperty("increment")||(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,K.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,K.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},kN=function(n,e,t){return FN(n,new PN(e),t)};function FN(n,e,t){const r=n.getPriority().val(),i=JF(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=JF(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new v_(d,Nr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new v_(i))),l.forEachChild(fr,(d,g)=>{const y=FN(g,e.getImmediateChild(d),t);y!==g&&(a=a.updateImmediateChild(d,y))}),a}}class LN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function XT(n,e){let t=e instanceof qn?e:new qn(e),r=n,i=wn(t);for(;null!==i;){const a=(0,K.DV)(r.node.children,i)||{children:{},childCount:0};r=new LN(i,r,a),t=or(t),i=wn(t)}return r}function Rp(n){return n.node.value}function VN(n,e){n.node.value=e,UN(n)}function eL(n){return n.node.childCount>0}function eD(n,e){gi(n.node.children,(t,r)=>{e(new LN(t,n,r))})}function tL(n,e,t,r){t&&!r&&e(n),eD(n,i=>{tL(i,e,!0,r)}),t&&r&&e(n)}function W0(n){return new qn(null===n.parent?n.name:W0(n.parent)+"/"+n.name)}function UN(n){null!==n.parent&&function hW(n,e,t){const r=function cW(n){return void 0===Rp(n)&&!eL(n)}(t),i=(0,K.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,UN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,UN(n))}(n.parent,n.name,n)}const fW=/[\[\].#$\/\u0000-\u001F\u007F]/,pW=/[\[\].#$\u0000-\u001F\u007F]/,BN=10485760,tD=function(n){return"string"==typeof n&&0!==n.length&&!fW.test(n)},q0=function(n,e,t){const r=t instanceof qn?new AH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+bp(r));if("function"==typeof e)throw new Error(n+"contains a function "+bp(r)+" with contents = "+e.toString());if(RT(e))throw new Error(n+"contains "+e.toString()+" "+bp(r));if("string"==typeof e&&e.length>BN/3&&(0,K.ug)(e)>BN)throw new Error(n+"contains a string greater than "+BN+" utf8 bytes "+bp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(gi(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!tD(l)))throw new Error(n+" contains an invalid key ("+l+") "+bp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function RH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,K.ug)(e),uF(n)})(r,l),q0(n,d,r),function MH(n){const e=n.parts_.pop();n.byteLength_-=(0,K.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+bp(r)+" in addition to actual children.")}},iL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!tD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!pW.test(n)}(n)}(t))throw new Error((0,K.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class yW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Po(n,e,t){(function nD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!tN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function sL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(vW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>No(r,e)||No(e,r))}function vW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ip&&pi("event: "+t.toString()),__(r)}}}class wW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=UT(),this.transactionQueueTree_=new LN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aL(n){const t=n.infoData_.getNode(new qn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Z0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:aL(n)})}function uL(n,e,t,r,i){n.dataUpdateCount++;const a=new qn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const g=(0,K.UI)(t,y=>Nr(y));l=function tW(n,e,t,r){const i=MN(n,r);if(i){const a=NN(i),l=a.path,d=a.queryId,g=ts(l,e),y=pr.fromObject(t);return xN(n,l,new b_(_N(d),g,y))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Nr(t);l=function eW(n,e,t,r){const i=MN(n,r);if(null!=i){const a=NN(i),l=a.path,d=a.queryId,g=ts(l,e);return xN(n,l,new Dp(_N(d),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,K.UI)(t,y=>Nr(y));l=function QG(n,e,t){const r=pr.fromObject(t);return D_(n,new b_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Nr(t);l=H0(n.serverSyncTree_,a,g)}let d=a;l.length>0&&(d=A_(n,a)),Po(n.eventQueue_,d,l)}function lL(n,e){GN(n,"connected",e),!1===e&&function DW(n){S_(n,"onDisconnectEvents");const e=Z0(n),t=UT();pN(n.onDisconnect_,Bn(),(i,a)=>{const l=function(n,e,t,r){return FN(e,new ON(t,n),r)}(i,a,n.serverSyncTree_,e);C_(t,i,l)});let r=[];pN(t,Bn(),(i,a)=>{r=r.concat(H0(n.serverSyncTree_,i,a));const l=function KN(n,e){const t=W0(hL(n,e)),r=XT(n.transactionQueueTree_,e);return function dW(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ZN(n,i)}),ZN(n,r),tL(r,i=>{ZN(n,i)}),t}(n,i);A_(n,l)}),n.onDisconnect_=UT(),Po(n.eventQueue_,Bn(),r)}(n)}function GN(n,e,t){const r=new qn("/.info/"+e),i=Nr(t);n.infoData_.updateSnapshot(r,i);const a=H0(n.infoSyncTree_,r,i);Po(n.eventQueue_,r,a)}function rD(n){return n.nextWriteId_++}function S_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),pi(t,...e)}function qN(n,e,t){return YT(n.serverSyncTree_,e,t)||fn.EMPTY_NODE}function iD(n,e=n.transactionQueueTree_){if(e||sD(n,e),Rp(e)){const t=fL(n,e);(0,K.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function PW(n,e,t){const r=t.map(y=>y.currentWriteId),i=qN(n,e,r);let a=i;const l=i.hash();for(let y=0;y<t.length;y++){const b=t[y];(0,K.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=ts(e,b.path);a=a.updateChild(T,b.currentOutputSnapshotRaw)}const d=a.val(!0),g=e;n.server_.put(g.toString(),d,y=>{S_(n,"transaction put response",{path:g.toString(),status:y});let b=[];if("ok"===y){const T=[];for(let S=0;S<t.length;S++)t[S].status=2,b=b.concat(Zd(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&T.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();sD(n,XT(n.transactionQueueTree_,e)),iD(n,n.transactionQueueTree_),Po(n.eventQueue_,e,b);for(let S=0;S<T.length;S++)__(T[S])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{es("transaction at "+g.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}A_(n,e)}},l)}(n,W0(e),t)}else eL(e)&&eD(e,t=>{iD(n,t)})}function A_(n,e){const t=hL(n,e),r=W0(t);return function OW(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],y=ts(t,g.path);let T,b=!1;if((0,K.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)b=!0,T=g.abortReason,i=i.concat(Zd(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)b=!0,T="maxretry",i=i.concat(Zd(n.serverSyncTree_,g.currentWriteId,!0));else{const S=qN(n,g.path,l);g.currentInputSnapshot=S;const P=e[d].update(S.val());if(void 0!==P){q0("transaction failed: Data returned ",P,g.path);let B=Nr(P);"object"==typeof P&&null!=P&&(0,K.r3)(P,".priority")||(B=B.updatePriority(S.getPriority()));const ye=g.currentWriteId,ft=Z0(n),dt=kN(B,S,ft);g.currentOutputSnapshotRaw=B,g.currentOutputSnapshotResolved=dt,g.currentWriteId=rD(n),l.splice(l.indexOf(ye),1),i=i.concat(AN(n.serverSyncTree_,g.path,dt,g.currentWriteId,g.applyLocally)),i=i.concat(Zd(n.serverSyncTree_,ye,!0))}else b=!0,T="nodata",i=i.concat(Zd(n.serverSyncTree_,g.currentWriteId,!0))}Po(n.eventQueue_,t,i),i=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}sD(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)__(r[d]);iD(n,n.transactionQueueTree_)}(n,fL(n,t),r),r}function hL(n,e){let t,r=n.transactionQueueTree_;for(t=wn(e);null!==t&&void 0===Rp(r);)r=XT(r,t),t=wn(e=or(e));return r}function fL(n,e){const t=[];return pL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function pL(n,e,t){const r=Rp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);eD(e,i=>{pL(n,i,t)})}function sD(n,e){const t=Rp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,VN(e,t.length>0?t:void 0)}eD(e,r=>{sD(n,r)})}function ZN(n,e){const t=Rp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,K.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,K.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Zd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?VN(e,void 0):t.length=a+1,Po(n.eventQueue_,W0(e),i);for(let l=0;l<r.length;l++)__(r[l])}}const YN=function(n,e){const t=LW(n),r=t.namespace;return"firebase.com"===t.domain&&Eu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Eu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&es("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new qn(t.pathString)}},LW=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function kW(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(b,T)));const S=function FW(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):es(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,g=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),a=r}"ns"in S&&(a=S.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class eo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return In(this._path)?null:eN(this._path)}get ref(){return new ga(this._repo,this._path)}get _queryIdentifier(){const e=CF(this._queryParams),t=GM(e);return"{}"===t?"default":t}get _queryObject(){return CF(this._queryParams)}isEqual(e){if(!((e=(0,K.m9)(e))instanceof eo))return!1;const t=this._repo===e._repo,r=tN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function DH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class ga extends eo{constructor(e,t){super(e,t,new cN,!1)}get parent(){const e=aF(this._path);return null===e?null:new ga(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function $G(n){(0,K.hu)(!qT,"__referenceConstructor has already been defined"),qT=n})(ga),function qG(n){(0,K.hu)(!ZT,"__referenceConstructor has already been defined"),ZT=n}(ga);const QN={};class nz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function IW(n,e,t){if(n.stats_=YM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new VT(n.repoInfo_,(r,i,a,l)=>{uL(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>lL(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,K.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Tp(n.repoInfo_,e,(r,i,a,l)=>{uL(n,r,i,a,l)},r=>{lL(n,r)},r=>{!function CW(n,e){gi(e,(t,r)=>{GN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function iH(n,e){const t=n.toString();return ZM[t]||(ZM[t]=e()),ZM[t]}(n.repoInfo_,()=>new oG(n.stats_,n.server_)),n.infoData_=new tG,n.infoSyncTree_=new qF({startListening:(r,i,a,l)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=H0(n.infoSyncTree_,r._path,g),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),GN(n,"connected",!1),n.serverSyncTree_=new qF({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,g)=>{const y=l(d,g);Po(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ga(this._repo,Bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function XW(n,e){const t=QN[e];(!t||t[n.key]!==n)&&Eu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function dL(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Eu("Cannot call "+e+" on a deleted database.")}}function rz(n=(0,On.getApp)(),e){return(0,On._getProvider)(n,"database").getImmediate({identifier:e})}Tp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Tp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function iz(n){(function $$(n){jM=n})(On.SDK_VERSION),(0,On._registerComponent)(new za.wA("database",(e,{instanceIdentifier:t})=>function JW(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Eu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,l=YN(a,i),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,a=`http://${y}?ns=${d.namespace}`,l=YN(a,i),d=l.repoInfo):g=!l.repoInfo.secure;const b=i&&g?new R0(R0.OWNER):new eH(n.name,n.options,e);iL("Invalid Firebase Database URL",l),In(l.path)||Eu("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function ez(n,e,t,r){let i=QN[e.name];i||(i={},QN[e.name]=i);let a=i[n.toURLString()];return a&&Eu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new wW(n,!1,t,r),i[n.toURLString()]=a,a}(d,n,b,new X$(n.name,t));return new nz(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(T1,"0.12.8",n),(0,On.registerVersion)(T1,"0.12.8","esm2017")}();class JN{constructor(e){return e}}const IL="database",XN=new f.OlP("angularfire2.database-instances");function lz(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new JN(r)}}const cz={provide:class az{constructor(){return(0,ot.vb)(IL)}},deps:[[new f.FiY,XN]]},dz={provide:JN,useFactory:function uz(n,e){const t=(0,ot.JM)(IL,n,e);return t&&new JN(t)},deps:[[new f.FiY,XN],Js]};let hz=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[dz,cz]}),n})();function fz(n,...e){return{ngModule:hz,providers:[{provide:XN,useFactory:lz(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,[new f.FiY,I0],[new f.FiY,Bd],...e]}]}}const pz=(0,ot.u3)(rz,!0);class ex{constructor(e){return e}}const CL="firestore",tx=new f.OlP("angularfire2.firestore-instances");function _z(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ex(r)}}const yz={provide:class gz{constructor(){return(0,ot.vb)(CL)}},deps:[[new f.FiY,tx]]},vz={provide:ex,useFactory:function mz(n,e){const t=(0,ot.JM)(CL,n,e);return t&&new ex(t)},deps:[[new f.FiY,tx],Js]};let Ez=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[vz,yz]}),n})();function wz(n,...e){return{ngModule:Ez,providers:[{provide:tx,useFactory:_z(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,[new f.FiY,I0],[new f.FiY,Bd],...e]}]}}const Iz=(0,ot.u3)(s0,!0),rx="functions";class Sz{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return(0,Ce.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Ce.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const ix="us-central1";class Rz{constructor(e,t,r,i,a=ix,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Sz(t,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin,this.region=ix}catch(d){this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const DL="@firebase/functions";function Vz(n=(0,On.getApp)(),e=ix){return(0,On._getProvider)((0,K.m9)(n),rx).getImmediate({identifier:e})}!function Lz(n,e){(0,On._registerComponent)(new za.wA(rx,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),d=r.getProvider("messaging-internal"),g=r.getProvider("app-check-internal");return new Rz(a,l,d,g,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(DL,"0.7.11",e),(0,On.registerVersion)(DL,"0.7.11","esm2017")}(fetch.bind(self));class ax{constructor(e){return e}}const AL="functions",ux=new f.OlP("angularfire2.functions-instances");function jz(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ax(r)}}const $z={provide:class Uz{constructor(){return(0,ot.vb)(AL)}},deps:[[new f.FiY,ux]]},Hz={provide:ax,useFactory:function Bz(n,e){const t=(0,ot.JM)(AL,n,e);return t&&new ax(t)},deps:[[new f.FiY,ux],Js]};let Gz=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Hz,$z]}),n})();function Wz(n,...e){return{ngModule:Gz,providers:[{provide:ux,useFactory:jz(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,[new f.FiY,I0],[new f.FiY,Bd],...e]}]}}const zz=(0,ot.u3)(Vz,!0);var qz=N(2375);class lx{constructor(e){return e}}const RL="messaging",cx=new f.OlP("angularfire2.messaging-instances");function Yz(n){return(e,t)=>{if(!ot.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new lx(r)}}const Qz={provide:class Kz{constructor(){return(0,ot.vb)(RL)}},deps:[[new f.FiY,cx]]},Jz={provide:lx,useFactory:function Zz(n,e){if(!ot.n1.sync())return null;const t=(0,ot.JM)(RL,n,e);return t&&new lx(t)},deps:[[new f.FiY,cx],Js]};let Xz=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Jz,Qz,{provide:f.ip1,useValue:ot.n1.async,multi:!0}]}),n})();function e3(n,...e){return{ngModule:Xz,providers:[{provide:cx,useFactory:Yz(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,...e]}]}}const t3=(0,ot.u3)(qz.KL,!0);N(2833);const ML="@firebase/performance",dx="0.5.8",hx="FB-PERF-TRACE-MEASURE",FL="@firebase/performance/config",LL="@firebase/performance/configexpire",VL="Performance",Si=new K.LL("performance",VL,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Tu=new gs.Yd(VL);let fx,UL,BL,gx;Tu.logLevel=gs.in.INFO;class mi{constructor(e){if(this.window=e,!e)throw Si.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,K.zI)()?!!(0,K.hl)()||(Tu.info("IndexedDB is not supported by current browswer"),!1):(Tu.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===fx&&(fx=new mi(UL)),fx}}function px(){return BL}function jL(n,e){const t=n.length-e.length;if(t<0||t>1)throw Si.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class to{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=jL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=jL("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===gx&&(gx=new to),gx}}var Np=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(Np||(Np={})),Np))();const l3=["firebase_","google_","ga_"],c3=new RegExp("^[a-zA-Z]\\w*$");function f3(){const n=mi.getInstance().navigator;return"serviceWorker"in n?n.serviceWorker.controller?2:3:1}function $L(){switch(mi.getInstance().document.visibilityState){case"visible":return Np.VISIBLE;case"hidden":return Np.HIDDEN;default:return Np.UNKNOWN}}function p3(){const e=mi.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function HL(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Si.create("no app id");return t}const T3="Could not fetch config, will use default configs";function GL(n){if(!n)return n;const e=to.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0===t.fpr_enabled||"true"===String(t.fpr_enabled),t.fpr_log_source&&(e.logSource=Number(t.fpr_log_source)),t.fpr_log_endpoint_url&&(e.logEndPointUrl=t.fpr_log_endpoint_url),t.fpr_log_transport_key&&(e.transportKey=t.fpr_log_transport_key),void 0!==t.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate)),void 0!==t.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=WL(e.tracesSamplingRate),e.logNetworkAfterSampling=WL(e.networkRequestsSamplingRate),n}function WL(n){return Math.random()<=n}let _x,mx=1;function zL(n){return mx=2,_x=_x||function R3(n){return function M3(){const n=mi.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function a3(n){const e=n.getId();return e.then(t=>{BL=t}),e}(n.installations)).then(e=>function I3(n,e){const t=function C3(){const n=mi.getInstance().localStorage;if(!n)return;const e=n.getItem(LL);if(!e||!function S3(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(FL);if(t)try{return JSON.parse(t)}catch(r){return}}();return t?(GL(t),Promise.resolve()):function D3(n,e){return function u3(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function _3(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Si.create("no project id");return t}(n.app),i=function y3(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Si.create("no api key");return t}(n.app),l=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:HL(n.app),app_version:"0.5.8",sdk_version:"0.0.1"})});return fetch(l).then(d=>{if(d.ok)return d.json();throw Si.create("RC response not ok")})}).catch(()=>{Tu.info(T3)})}(n,e).then(GL).then(r=>function b3(n){const e=mi.getInstance().localStorage;!n||!e||(e.setItem(FL,JSON.stringify(n)),e.setItem(LL,String(Date.now()+60*to.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>qL(),()=>qL())}(n),_x}function qL(){mx=3}let vx,dD=3,Jd=[],ZL=!1;function hD(n){setTimeout(()=>{if(0!==dD){if(!Jd.length)return hD(1e4);!function O3(){const n=Jd.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function k3(n,e){return function F3(n){const e=to.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||Tu.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(Jd=[...e,...Jd],Tu.info("Retry transport request later.")),dD=3,hD(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:to.getInstance().logSource,log_event:e},n).catch(()=>{Jd=[...n,...Jd],dD--,Tu.info(`Tries left: ${dD}.`),hD(1e4)})}()}},n)}function YL(n,e){vx||(vx=function V3(n){return(...e)=>{!function L3(n){if(!n.eventTime||!n.message)throw Si.create("invalid cc log");Jd=[...Jd,n]}({message:n(...e),eventTime:Date.now()})}}(B3)),vx(n,e)}function fD(n){const e=to.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!mi.getInstance().requiredApisAvailable()||n.isAuto&&$L()!==Np.VISIBLE||(function A3(){return 3===mx}()?Ex(n):zL(n.performanceController).then(()=>Ex(n),()=>Ex(n)))}function Ex(n){if(!px())return;const e=to.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>YL(n,1),0)}function B3(n,e){return 0===e?function j3(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:QL(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function $3(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:QL(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function QL(n){return{google_app_id:HL(n),app_instance_id:px(),web_app_info:{sdk_version:"0.5.8",page_url:mi.getInstance().getUrl(),service_worker_status:f3(),visibility_state:$L(),effective_connection_type:p3()},application_process_state:0}}const W3=["_fp","_fcp","_fid"];class Xd{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=mi.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${hx}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Si.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Si.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),fD(this)}record(e,t,r){if(e<=0)throw Si.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Si.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));fD(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function z3(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&W3.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Si.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function q3(n){const e=Math.floor(n);return e<n&&Tu.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(null!=t?t:0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function g3(n){return!(0===n.length||n.length>40||l3.some(t=>n.startsWith(t))||!n.match(c3))}(e),i=function m3(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Si.create("invalid attribute name",{attributeName:e});if(!i)throw Si.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=mi.getInstance().getUrl();if(!a)return;const l=new Xd(e,"_wt_"+a,!0),d=Math.floor(1e3*mi.getInstance().getTimeOrigin());if(l.setStartTime(d),t&&t[0]&&(l.setDuration(Math.floor(1e3*t[0].duration)),l.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),l.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),l.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const b=r.find(S=>"first-paint"===S.name);b&&b.startTime&&l.putMetric("_fp",Math.floor(1e3*b.startTime));const T=r.find(S=>"first-contentful-paint"===S.name);T&&T.startTime&&l.putMetric("_fcp",Math.floor(1e3*T.startTime)),i&&l.putMetric("_fid",Math.floor(1e3*i))}fD(l)}static createUserTimingTrace(e,t){fD(new Xd(e,t,!1,t))}}function JL(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=mi.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,l=Math.floor(1e3*(t.responseEnd-t.startTime));!function U3(n){const e=to.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>YL(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:l})}function XL(n){!px()||(setTimeout(()=>function Y3(n){const e=mi.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{Xd.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),Xd.createOobTrace(n,t,r,a))})}else Xd.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function Z3(n){const e=mi.getInstance(),t=e.getEntriesByType("resource");for(const r of t)JL(n,r);e.setupObserver("resource",r=>JL(n,r))}(n),0),setTimeout(()=>function Q3(n){const e=mi.getInstance(),t=e.getEntriesByType("measure");for(const r of t)eV(n,r);e.setupObserver("measure",r=>eV(n,r))}(n),0))}function eV(n,e){const t=e.name;t.substring(0,hx.length)!==hx&&Xd.createUserTimingTrace(n,t)}class J3{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),mi.getInstance().requiredApisAvailable()?(0,K.eu)().then(t=>{t&&(function P3(){ZL||(hD(5500),ZL=!0)}(),zL(this).then(()=>XL(this),()=>XL(this)),this.initialized=!0)}).catch(t=>{Tu.info(`Environment doesn't support IndexedDB: ${t}`)}):Tu.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){to.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return to.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){to.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return to.getInstance().dataCollectionEnabled}}function eq(n=(0,On.getApp)()){return n=(0,K.m9)(n),(0,On._getProvider)(n,"performance").getImmediate()}const tq=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Si.create("FB not default");if("undefined"==typeof window)throw Si.create("no window");!function o3(n){UL=n}(window);const i=new J3(t,r);return i._init(e),i};!function nq(){(0,On._registerComponent)(new za.wA("performance",tq,"PUBLIC")),(0,On.registerVersion)(ML,dx),(0,On.registerVersion)(ML,dx,"esm2017")}();class wx{constructor(e){return e}}const tV="performance",Ix=new f.OlP("angularfire2.performance-instances");function sq(n){return(e,t,r)=>{if(!Jn(t))return null;const i=e.runOutsideAngular(()=>n(r));return new wx(i)}}const oq={provide:class rq{constructor(){return(0,ot.vb)(tV)}},deps:[[new f.FiY,Ix]]},aq={provide:wx,useFactory:function iq(n,e,t){if(!Jn(t))return null;const r=(0,ot.JM)(tV,n,e);return r&&new wx(r)},deps:[[new f.FiY,Ix],Js,f.Lbi]};let uq=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[aq,oq]}),n})();function lq(n,...e){return{ngModule:uq,providers:[{provide:Ix,useFactory:sq(n),multi:!0,deps:[f.R0b,f.Lbi,f.zs3,ot.HU,yu,...e]}]}}const cq=(0,ot.u3)(eq,!0);var dq=N(3226);class Cx{constructor(e){return e}}const nV="remote-config",bx=new f.OlP("angularfire2.remote-config-instances");function pq(n){return(e,t)=>{if(!ot._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new Cx(r)}}const gq={provide:class hq{constructor(){return(0,ot.vb)(nV)}},deps:[[new f.FiY,bx]]},mq={provide:Cx,useFactory:function fq(n,e){if(!ot._J.sync())return null;const t=(0,ot.JM)(nV,n,e);return t&&new Cx(t)},deps:[[new f.FiY,bx],Js]};let _q=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[mq,gq,{provide:f.ip1,useValue:ot._J.async,multi:!0}]}),n})();function yq(n,...e){return{ngModule:_q,providers:[{provide:bx,useFactory:pq(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,...e]}]}}const vq=(0,ot.u3)(dq.sN,!0),rV="firebasestorage.googleapis.com";class Ur extends K.ZR{constructor(e,t){super(Tx(e),`Firebase Storage: ${t} (${Tx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}_codeEquals(e){return Tx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Tx(n){return"storage/"+n}function Sx(n){return new Ur("invalid-argument",n)}function aV(){return new Ur("app-deleted","The Firebase app was deleted.")}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch(i){return new ns(e,"")}if(""===r.path)return r;throw function Rq(n){return new Ur("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(lt){lt.path_=decodeURIComponent(lt.path)}const T=t.replace(/[.]/g,"\\."),yt=[{regex:d,indices:{bucket:1,path:3},postModify:function a(lt){"/"===lt.path.charAt(lt.path.length-1)&&(lt.path_=lt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===rV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let lt=0;lt<yt.length;lt++){const Zt=yt[lt],Xt=Zt.regex.exec(e);if(Xt){let xr=Xt[Zt.indices.path];xr||(xr=""),r=new ns(Xt[Zt.indices.bucket],xr),Zt.postModify(r);break}}if(null==r)throw function Aq(n){return new Ur("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Oq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Rx(n,e,t,r){if(r<e)throw Sx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Sx(`Invalid value for '${n}'. Expected ${t} or less.`)}var eh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(eh||(eh={})),eh))();class Bq{constructor(e,t,r,i,a,l,d,g,y,b,T){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,P)=>{this.resolve_=S,this.reject_=P,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function Lq(n){return void 0!==n}(g)?a():a(g)}catch(g){l(g)}else if(null!==d){const g=function Dx(){return new Ur("unknown","An unknown error occurred, please check the error payload for server response.")}();g.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,g):g)}else l(i.canceled?this.appDelete_?aV():function sV(){return new Ur("canceled","User canceled the upload/download.")}():function Sq(){return new Ur("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new gD(!1,null,!0)):this.backoffId_=function kq(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function g(){return 2===d}let y=!1;function b(...ye){y||(y=!0,e.apply(null,ye))}function T(ye){i=setTimeout(()=>{i=null,n(P,g())},ye)}function S(){a&&clearTimeout(a)}function P(ye,...ft){if(y)return void S();if(ye)return S(),void b.call(null,ye,...ft);if(g()||l)return S(),void b.call(null,ye,...ft);let yt;r<64&&(r*=2),1===d?(d=2,yt=0):yt=1e3*(r+Math.random()),T(yt)}let B=!1;function J(ye){B||(B=!0,S(),!y&&(null!==i?(ye||(d=2),clearTimeout(i),T(0)):ye||(d=1)))}return T(0),a=setTimeout(()=>{l=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new gD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===eh.NO_ERROR,g=a.getStatus();if(!d||this.isRetryStatusCode_(g)){const b=a.getErrorCode()===eh.ABORT;return void r(!1,new gD(!1,null,b))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new gD(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Fq(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class gD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class xp{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xp(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function pV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function e6(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new xp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function Pq(n){return new Ur("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function RV(n,e){const t=null==e?void 0:e.storageBucket;return null==t?null:ns.makeFromBucketSpec(t,n)}class Fx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=rV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ns.makeFromBucketSpec(i,this._host):RV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):RV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Oq(aV());{const a=function Wq(n,e,t,r,i,a){const l=function lV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),d=n.url+l,g=Object.assign({},n.headers);return function Hq(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function jq(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function $q(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function Gq(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new Bq(d,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const MV="@firebase/storage",xV="storage";function U6(n=(0,On.getApp)(),e){return n=(0,K.m9)(n),(0,On._getProvider)(n,xV).getImmediate({identifier:e})}function B6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Fx(t,r,i,e,On.SDK_VERSION)}!function j6(){(0,On._registerComponent)(new za.wA(xV,B6,"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(MV,"0.9.5",""),(0,On.registerVersion)(MV,"0.9.5","esm2017")}();class Lx{constructor(e){return e}}const PV="storage",Vx=new f.OlP("angularfire2.storage-instances");function G6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Lx(r)}}const W6={provide:class $6{constructor(){return(0,ot.vb)(PV)}},deps:[[new f.FiY,Vx]]},z6={provide:Lx,useFactory:function H6(n,e){const t=(0,ot.JM)(PV,n,e);return t&&new Lx(t)},deps:[[new f.FiY,Vx],Js]};let q6=(()=>{class n{constructor(){(0,Di.KN)("angularfire",ot.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[z6,W6]}),n})();function K6(n,...e){return{ngModule:q6,providers:[{provide:Vx,useFactory:G6(n),multi:!0,deps:[f.R0b,f.zs3,ot.HU,yu,[new f.FiY,I0],[new f.FiY,Bd],...e]}]}}const Z6=(0,ot.u3)(U6,!0);class OV{}const uc="*";function kV(n,e=null){return{type:2,steps:n,options:e}}function FV(n){return{type:6,styles:n,offset:null}}function LV(n){Promise.resolve(null).then(n)}class tw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){LV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class VV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?LV(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==a&&this._onFinish()}),l.onDestroy(()=>{++r==a&&this._onDestroy()}),l.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const An=!1;function UV(n){return new f.vHH(3e3,An)}function MK(){return"undefined"!=typeof window&&void 0!==window.document}function Bx(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function th(n){switch(n.length){case 0:return new tw;case 1:return n[0];default:return new VV(n)}}function BV(n,e,t,r,i={},a={}){const l=[],d=[];let g=-1,y=null;if(r.forEach(b=>{const T=b.offset,S=T==g,P=S&&y||{};Object.keys(b).forEach(B=>{let J=B,ye=b[B];if("offset"!==B)switch(J=e.normalizePropertyName(J,l),ye){case"!":ye=i[B];break;case uc:ye=a[B];break;default:ye=e.normalizeStyleValue(B,J,ye,l)}P[J]=ye}),S||d.push(P),y=P,g=T}),l.length)throw function vK(n){return new f.vHH(3502,An)}();return d}function jx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&$x(t,"start",n)));break;case"done":n.onDone(()=>r(t&&$x(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&$x(t,"destroy",n)))}}function $x(n,e,t){const r=t.totalTime,a=Hx(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),l=n._data;return null!=l&&(a._data=l),a}function Hx(n,e,t,r,i="",a=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!l}}function no(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function jV(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Gx=(n,e)=>!1,$V=(n,e,t)=>[],HV=null;function Wx(n){const e=n.parentNode||n.host;return e===HV?null:e}(Bx()||"undefined"!=typeof Element)&&(MK()?(HV=(()=>document.documentElement)(),Gx=(n,e)=>{for(;e;){if(e===n)return!0;e=Wx(e)}return!1}):Gx=(n,e)=>n.contains(e),$V=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Pp=null,GV=!1;function WV(n){Pp||(Pp=function xK(){return"undefined"!=typeof document?document.body:null}()||{},GV=!!Pp.style&&"WebkitAppearance"in Pp.style);let e=!0;return Pp.style&&!function NK(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Pp.style,!e&&GV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Pp.style)),e}const zV=Gx,qV=$V;let KV=(()=>{class n{validateStyleProperty(t){return WV(t)}matchesElement(t,r){return!1}containsElement(t,r){return zV(t,r)}getParentElement(t){return Wx(t)}query(t,r,i){return qV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,l,d=[],g){return new tw(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),zx=(()=>{class n{}return n.NOOP=new KV,n})();const qx="ng-enter",ED="ng-leave",wD="ng-trigger",ID=".ng-trigger",YV="ng-animating",Kx=".ng-animating";function Op(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zx(parseFloat(e[1]),e[2])}function Zx(n,e){return"s"===e?1e3*n:n}function CD(n,e,t){return n.hasOwnProperty("duration")?n:function kK(n,e,t){let i,a=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(UV()),{duration:0,delay:0,easing:""};i=Zx(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(a=Zx(parseFloat(g),d[4]));const y=d[5];y&&(l=y)}else i=n;if(!t){let d=!1,g=e.length;i<0&&(e.push(function Q6(){return new f.vHH(3100,An)}()),d=!0),a<0&&(e.push(function J6(){return new f.vHH(3101,An)}()),d=!0),d&&e.splice(g,0,UV())}return{duration:i,delay:a,easing:l}}(n,e,t)}function P_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function nh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else P_(n,t);return t}function JV(n,e,t){return t?e+":"+t+";":""}function XV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=JV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=JV(0,VK(t),n.style[t]));n.setAttribute("style",e)}function Au(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Qx(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Bx()&&XV(n))}function kp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Qx(t);n.style[r]=""}),Bx()&&XV(n))}function nw(n){return Array.isArray(n)?1==n.length?n[0]:kV(n):n}const Yx=new RegExp("{{\\s*(.+?)\\s*}}","g");function eU(n){let e=[];if("string"==typeof n){let t;for(;t=Yx.exec(n);)e.push(t[1]);Yx.lastIndex=0}return e}function bD(n,e,t){const r=n.toString(),i=r.replace(Yx,(a,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(function eK(n){return new f.vHH(3003,An)}()),d=""),d.toString()});return i==r?n:i}function TD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const LK=/-+([a-z0-9])/g;function Qx(n){return n.replace(LK,(...e)=>e[1].toUpperCase())}function VK(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ro(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function tK(n){return new f.vHH(3004,An)}()}}function tU(n,e){return window.getComputedStyle(n)[e]}function GK(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function WK(n,e,t){if(":"==n[0]){const g=function zK(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function gK(n){return new f.vHH(3016,An)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function pK(n){return new f.vHH(3015,An)}()),e;const i=r[1],a=r[2],l=r[3];e.push(nU(i,l));"<"==a[0]&&!("*"==i&&"*"==l)&&e.push(nU(l,i))}(r,t,e)):t.push(n),t}const RD=new Set(["true","1"]),MD=new Set(["false","0"]);function nU(n,e){const t=RD.has(n)||MD.has(n),r=RD.has(e)||MD.has(e);return(i,a)=>{let l="*"==n||n==i,d="*"==e||e==a;return!l&&t&&"boolean"==typeof i&&(l=i?RD.has(n):MD.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?RD.has(e):MD.has(e)),l&&d}}const qK=new RegExp("s*:selfs*,?","g");function Jx(n,e,t,r){return new KK(n).build(e,t,r)}class KK{constructor(e){this._driver=e}build(e,t,r){const i=new QK(t);this._resetContextStyleTimingState(i);const a=ro(this,nw(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function rK(){return new f.vHH(3006,An)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,y=g.name;y.toString().split(/\s*,\s*/).forEach(b=>{g.name=b,a.push(this.visitState(g,t))}),g.name=y}else if(1==d.type){const g=this.visitTransition(d,t);r+=g.queryCount,i+=g.depCount,l.push(g)}else t.errors.push(function iK(){return new f.vHH(3007,An)}())}),{type:7,name:e.name,states:a,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,l=i||{};r.styles.forEach(d=>{if(ND(d)){const g=d;Object.keys(g).forEach(y=>{eU(g[y]).forEach(b=>{l.hasOwnProperty(b)||a.add(b)})})}}),a.size&&(TD(a.values()),t.errors.push(function sK(n,e){return new f.vHH(3008,An)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ro(this,nw(e.animation),t);return{type:1,matchers:GK(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Fp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ro(this,r,t)),options:Fp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(l=>{t.currentTime=r;const d=ro(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:Fp(e.options)}}visitAnimate(e,t){const r=function XK(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Xx(CD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=Xx(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||CD(r,e),Xx(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:FV({});if(5==a.type)i=this.visitKeyframes(a,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};r.easing&&(y.easing=r.easing),l=FV(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(l,t);g.isEmptyStep=d,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==uc?r.push(l):t.errors.push(function oK(n){return new f.vHH(3002,An)}()):r.push(l)}):r.push(e.styles);let i=!1,a=null;return r.forEach(l=>{if(ND(l)){const d=l,g=d.easing;if(g&&(a=g,delete d.easing),!i)for(let y in d)if(d[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void t.unsupportedCSSPropertiesFound.add(d);const g=t.collectedStyles[t.currentQuerySelector],y=g[d];let b=!0;y&&(a!=i&&a>=y.startTime&&i<=y.endTime&&(t.errors.push(function aK(n,e,t,r,i){return new f.vHH(3010,An)}()),b=!1),a=y.startTime),b&&(g[d]={startTime:a,endTime:i}),t.options&&function FK(n,e,t){const r=e.params||{},i=eU(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function X6(n){return new f.vHH(3001,An)}())})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function uK(){return new f.vHH(3011,An)}()),r;let a=0;const l=[];let d=!1,g=!1,y=0;const b=e.steps.map(ft=>{const dt=this._makeStyleAst(ft,t);let yt=null!=dt.offset?dt.offset:function JK(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(ND(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(ND(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(dt.styles),lt=0;return null!=yt&&(a++,lt=dt.offset=yt),g=g||lt<0||lt>1,d=d||lt<y,y=lt,l.push(lt),dt});g&&t.errors.push(function lK(){return new f.vHH(3012,An)}()),d&&t.errors.push(function cK(){return new f.vHH(3200,An)}());const T=e.steps.length;let S=0;a>0&&a<T?t.errors.push(function dK(){return new f.vHH(3202,An)}()):0==a&&(S=1/(T-1));const P=T-1,B=t.currentTime,J=t.currentAnimateTimings,ye=J.duration;return b.forEach((ft,dt)=>{const yt=S>0?dt==P?1:S*dt:l[dt],lt=yt*ye;t.currentTime=B+J.delay+lt,J.duration=lt,this._validateStyleAst(ft,t),ft.offset=yt,r.styles.push(ft)}),r}visitReference(e,t){return{type:8,animation:ro(this,nw(e.animation),t),options:Fp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Fp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Fp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,l]=function ZK(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(qK,"")),n=n.replace(/@\*/g,ID).replace(/@\w+/g,t=>ID+"-"+t.substr(1)).replace(/:animating/g,Kx),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,no(t.collectedStyles,t.currentQuerySelector,{});const d=ro(this,nw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:Fp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function hK(){return new f.vHH(3013,An)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:CD(e.timings,t.errors,!0);return{type:12,animation:ro(this,nw(e.animation),t),timings:r,options:null}}}class QK{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ND(n){return!Array.isArray(n)&&"object"==typeof n}function Fp(n){return n?(n=P_(n)).params&&(n.params=function YK(n){return n?P_(n):null}(n.params)):n={},n}function Xx(n,e,t){return{duration:n,delay:e,easing:t}}function eP(n,e,t,r,i,a,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:l,subTimeline:d}}class xD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const n4=new RegExp(":enter","g"),i4=new RegExp(":leave","g");function tP(n,e,t,r,i,a={},l={},d,g,y=[]){return(new s4).buildKeyframes(n,e,t,r,i,a,l,d,g,y)}class s4{buildKeyframes(e,t,r,i,a,l,d,g,y,b=[]){y=y||new xD;const T=new nP(e,t,y,i,a,b,[]);T.options=g,T.currentTimeline.setStyles([l],null,T.errors,g),ro(this,r,T);const S=T.timelines.filter(P=>P.containsAnimation());if(Object.keys(d).length){let P;for(let B=S.length-1;B>=0;B--){const J=S[B];if(J.element===t){P=J;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([d],null,T.errors,g)}return S.length?S.map(P=>P.buildKeyframes()):[eP(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);a!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const l=null!=r.duration?Op(r.duration):null,d=null!=r.delay?Op(r.delay):null;return 0!==l&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,l,d);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),ro(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=PD);const l=Op(a.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ro(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Op(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),ro(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return CD(t.params?bD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*a),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Op(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=PD);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((y,b)=>{t.currentQueryIndex=b;const T=t.createSubContext(e.options,y);a&&T.delayNextStep(a),y===t.element&&(g=T.currentTimeline),ro(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,l=Math.abs(a.duration),d=l*(t.currentQueryTotal-1);let g=l*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":g=d-g;break;case"full":g=r.currentStaggerTime}const b=t.currentTimeline;g&&b.delayNextStep(g);const T=b.currentTime;ro(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const PD={};class nP{constructor(e,t,r,i,a,l,d,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=PD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new OD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Op(r.duration)),null!=r.delay&&(i.delay=Op(r.delay));const a=r.params;if(a){let l=i.params;l||(l=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=bD(a[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new nP(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=PD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new o4(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(n4,"."+this._enterClassName)).replace(i4,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!a&&0==d.length&&l.push(function fK(n){return new f.vHH(3014,An)}()),d}}class OD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new OD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||uc,this._currentKeyframe[t]=uc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},l=function a4(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=uc})):nh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const g=bD(l[d],a,r);this._pendingStyles[d]=g,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:uc),this._updateStyle(d,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,g)=>{const y=nh(d,!0);Object.keys(y).forEach(b=>{const T=y[b];"!"==T?e.add(b):T==uc&&t.add(b)}),r||(y.offset=g/this.duration),i.push(y)});const a=e.size?TD(e.values()):[],l=t.size?TD(t.values()):[];if(r){const d=i[0],g=P_(d);d.offset=0,g.offset=1,i=[d,g]}return eP(this.element,i,a,l,this.duration,this.startTime,this.easing,!1)}}class o4 extends OD{constructor(e,t,r,i,a,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],l=r+t,d=t/l,g=nh(e[0],!1);g.offset=0,a.push(g);const y=nh(e[0],!1);y.offset=sU(d),a.push(y);const b=e.length-1;for(let T=1;T<=b;T++){let S=nh(e[T],!1);S.offset=sU((t+S.offset*r)/l),a.push(S)}r=l,t=0,i="",e=a}return eP(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function sU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rP{}class u4 extends rP{normalizePropertyName(e,t){return Qx(e)}normalizeStyleValue(e,t,r,i){let a="";const l=r.toString().trim();if(l4[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function nK(n,e){return new f.vHH(3005,An)}())}return l+a}}const l4=(()=>function c4(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function oU(n,e,t,r,i,a,l,d,g,y,b,T,S){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:l,timelines:d,queriedElements:g,preStyleProps:y,postStyleProps:b,totalTime:T,errors:S}}const iP={};class aU{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function d4(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],l=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):l}build(e,t,r,i,a,l,d,g,y,b){const T=[],S=this.ast.options&&this.ast.options.params||iP,B=this.buildStyles(r,d&&d.params||iP,T),J=g&&g.params||iP,ye=this.buildStyles(i,J,T),ft=new Set,dt=new Map,yt=new Map,lt="void"===i,Zt={params:Object.assign(Object.assign({},S),J)},Xt=b?[]:tP(e,t,this.ast.animation,a,l,B,ye,Zt,y,T);let Rn=0;if(Xt.forEach(io=>{Rn=Math.max(io.duration+io.delay,Rn)}),T.length)return oU(t,this._triggerName,r,i,lt,B,ye,[],[],dt,yt,Rn,T);Xt.forEach(io=>{const lc=io.element,CU=no(dt,lc,{});io.preStyleProps.forEach(Lp=>CU[Lp]=!0);const iw=no(yt,lc,{});io.postStyleProps.forEach(Lp=>iw[Lp]=!0),lc!==t&&ft.add(lc)});const xr=TD(ft.values());return oU(t,this._triggerName,r,i,lt,B,ye,Xt,xr,dt,yt,Rn)}}class h4{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=P_(this.defaultParams);return Object.keys(e).forEach(a=>{const l=e[a];null!=l&&(i[a]=l)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const l=a;Object.keys(l).forEach(d=>{let g=l[d];g.length>1&&(g=bD(g,i,t));const y=this.normalizer.normalizePropertyName(d,t);g=this.normalizer.normalizeStyleValue(d,y,g,t),r[y]=g})}}),r}}class p4{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new h4(i.style,i.options&&i.options.params||{},r)}),uU(this.states,"true","1"),uU(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new aU(e,i,this.states))}),this.fallbackTransition=function g4(n,e,t){return new aU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function uU(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const m4=new xD;class _4{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=Jx(this._driver,t,r,[]);if(r.length)throw function EK(n){return new f.vHH(3503,An)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=BV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let l;const d=new Map;if(a?(l=tP(this._driver,t,a,qx,ED,{},{},r,m4,i),l.forEach(b=>{const T=no(d,b.element,{});b.postStyleProps.forEach(S=>T[S]=null)})):(i.push(function wK(){return new f.vHH(3300,An)}()),l=[]),i.length)throw function IK(n){return new f.vHH(3504,An)}();d.forEach((b,T)=>{Object.keys(b).forEach(S=>{b[S]=this._driver.computeStyle(T,S,uc)})});const y=th(l.map(b=>{const T=d.get(b.element);return this._buildPlayer(b,{},T)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function CK(n){return new f.vHH(3301,An)}();return t}listen(e,t,r,i){const a=Hx(t,"","","");return jx(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const lU="ng-animate-queued",sP="ng-animate-disabled",I4=[],cU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},C4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Oo="__ng_removed";class oP{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function S4(n){return null!=n?n:null}(r?e.value:e),r){const a=P_(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const rw="void",aP=new oP(rw);class b4{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ko(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function bK(n,e){return new f.vHH(3302,An)}();if(null==r||0==r.length)throw function TK(n){return new f.vHH(3303,An)}();if(!function A4(n){return"start"==n||"done"==n}(r))throw function DK(n,e){return new f.vHH(3400,An)}();const a=no(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};a.push(l);const d=no(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(ko(e,wD),ko(e,wD+"-"+t),d[t]=aP),()=>{this._engine.afterFlush(()=>{const g=a.indexOf(l);g>=0&&a.splice(g,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function SK(n){return new f.vHH(3401,An)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),l=new uP(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(ko(e,wD),ko(e,wD+"-"+t),this._engine.statesByElement.set(e,d={}));let g=d[t];const y=new oP(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),d[t]=y,g||(g=aP),y.value!==rw&&g.value===y.value){if(!function N4(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(g.params,y.params)){const J=[],ye=a.matchStyles(g.value,g.params,J),ft=a.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{kp(e,ye),Au(e,ft)})}return}const S=no(this._engine.playersByElement,e,[]);S.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let P=a.matchTransition(g.value,y.value,e,y.params),B=!1;if(!P){if(!i)return;P=a.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:P,fromState:g,toState:y,player:l,isFallbackTransition:B}),B||(ko(e,lU),l.onStart(()=>{O_(e,lU)})),l.onDone(()=>{let J=this.players.indexOf(l);J>=0&&this.players.splice(J,1);const ye=this._engine.playersByElement.get(e);if(ye){let ft=ye.indexOf(l);ft>=0&&ye.splice(ft,1)}}),this.players.push(l),S.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ID,!0);r.forEach(i=>{if(i[Oo])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),l=new Map;if(a){const d=[];if(Object.keys(a).forEach(g=>{if(l.set(g,a[g].value),this._triggers[g]){const y=this.trigger(e,g,rw,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&th(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const l=a.name;if(i.has(l))return;i.add(l);const g=this._triggers[l].fallbackTransition,y=r[l]||aP,b=new oP(rw),T=new uP(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:g,fromState:y,toState:b,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Oo];(!a||a===cU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ko(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,l=this._elementListeners.get(a);l&&l.forEach(d=>{if(d.name==r.triggerName){const g=Hx(a,r.triggerName,r.fromState.value,r.toState.value);g._data=e,jx(r.player,d.phase,g,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==a||0==l?a-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class T4{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new b4(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const g=i.get(d);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=a;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),l=!0;break}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const l=r[i[a]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(kD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!kD(t))return;const a=t[Oo];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ko(e,sP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),O_(e,sP))}removeNode(e,t,r,i){if(kD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Oo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return kD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,ID,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Kx,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return th(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Oo];if(r&&r.setForRemoval){if(e[Oo]=cU,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(sP))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ko(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?th(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function AK(n){return new f.vHH(3402,An)}()}_flushAnimations(e,t){const r=new xD,i=[],a=new Map,l=[],d=new Map,g=new Map,y=new Map,b=new Set;this.disabledNodes.forEach(xt=>{b.add(xt);const Ht=this.driver.query(xt,".ng-animate-queued",!0);for(let nn=0;nn<Ht.length;nn++)b.add(Ht[nn])});const T=this.bodyNode,S=Array.from(this.statesByElement.keys()),P=fU(S,this.collectedEnterElements),B=new Map;let J=0;P.forEach((xt,Ht)=>{const nn=qx+J++;B.set(Ht,nn),xt.forEach(Vn=>ko(Vn,nn))});const ye=[],ft=new Set,dt=new Set;for(let xt=0;xt<this.collectedLeaveElements.length;xt++){const Ht=this.collectedLeaveElements[xt],nn=Ht[Oo];nn&&nn.setForRemoval&&(ye.push(Ht),ft.add(Ht),nn.hasAnimation?this.driver.query(Ht,".ng-star-inserted",!0).forEach(Vn=>ft.add(Vn)):dt.add(Ht))}const yt=new Map,lt=fU(S,Array.from(ft));lt.forEach((xt,Ht)=>{const nn=ED+J++;yt.set(Ht,nn),xt.forEach(Vn=>ko(Vn,nn))}),e.push(()=>{P.forEach((xt,Ht)=>{const nn=B.get(Ht);xt.forEach(Vn=>O_(Vn,nn))}),lt.forEach((xt,Ht)=>{const nn=yt.get(Ht);xt.forEach(Vn=>O_(Vn,nn))}),ye.forEach(xt=>{this.processLeaveNode(xt)})});const Zt=[],Xt=[];for(let xt=this._namespaceList.length-1;xt>=0;xt--)this._namespaceList[xt].drainQueuedTransitions(t).forEach(nn=>{const Vn=nn.player,_i=nn.element;if(Zt.push(Vn),this.collectedEnterElements.length){const is=_i[Oo];if(is&&is.setForMove){if(is.previousTriggersValues&&is.previousTriggersValues.has(nn.triggerName)){const Vp=is.previousTriggersValues.get(nn.triggerName),ih=this.statesByElement.get(nn.element);ih&&ih[nn.triggerName]&&(ih[nn.triggerName].value=Vp)}return void Vn.destroy()}}const Ru=!T||!this.driver.containsElement(T,_i),so=yt.get(_i),rh=B.get(_i),Pr=this._buildInstruction(nn,r,rh,so,Ru);if(Pr.errors&&Pr.errors.length)return void Xt.push(Pr);if(Ru)return Vn.onStart(()=>kp(_i,Pr.fromStyles)),Vn.onDestroy(()=>Au(_i,Pr.toStyles)),void i.push(Vn);if(nn.isFallbackTransition)return Vn.onStart(()=>kp(_i,Pr.fromStyles)),Vn.onDestroy(()=>Au(_i,Pr.toStyles)),void i.push(Vn);const DU=[];Pr.timelines.forEach(is=>{is.stretchStartingKeyframe=!0,this.disabledNodes.has(is.element)||DU.push(is)}),Pr.timelines=DU,r.append(_i,Pr.timelines),l.push({instruction:Pr,player:Vn,element:_i}),Pr.queriedElements.forEach(is=>no(d,is,[]).push(Vn)),Pr.preStyleProps.forEach((is,Vp)=>{const ih=Object.keys(is);if(ih.length){let Up=g.get(Vp);Up||g.set(Vp,Up=new Set),ih.forEach(cP=>Up.add(cP))}}),Pr.postStyleProps.forEach((is,Vp)=>{const ih=Object.keys(is);let Up=y.get(Vp);Up||y.set(Vp,Up=new Set),ih.forEach(cP=>Up.add(cP))})});if(Xt.length){const xt=[];Xt.forEach(Ht=>{xt.push(function RK(n,e){return new f.vHH(3505,An)}())}),Zt.forEach(Ht=>Ht.destroy()),this.reportError(xt)}const Rn=new Map,xr=new Map;l.forEach(xt=>{const Ht=xt.element;r.has(Ht)&&(xr.set(Ht,Ht),this._beforeAnimationBuild(xt.player.namespaceId,xt.instruction,Rn))}),i.forEach(xt=>{const Ht=xt.element;this._getPreviousPlayers(Ht,!1,xt.namespaceId,xt.triggerName,null).forEach(Vn=>{no(Rn,Ht,[]).push(Vn),Vn.destroy()})});const io=ye.filter(xt=>gU(xt,g,y)),lc=new Map;hU(lc,this.driver,dt,y,uc).forEach(xt=>{gU(xt,g,y)&&io.push(xt)});const iw=new Map;P.forEach((xt,Ht)=>{hU(iw,this.driver,new Set(xt),g,"!")}),io.forEach(xt=>{const Ht=lc.get(xt),nn=iw.get(xt);lc.set(xt,Object.assign(Object.assign({},Ht),nn))});const Lp=[],bU=[],TU={};l.forEach(xt=>{const{element:Ht,player:nn,instruction:Vn}=xt;if(r.has(Ht)){if(b.has(Ht))return nn.onDestroy(()=>Au(Ht,Vn.toStyles)),nn.disabled=!0,nn.overrideTotalTime(Vn.totalTime),void i.push(nn);let _i=TU;if(xr.size>1){let so=Ht;const rh=[];for(;so=so.parentNode;){const Pr=xr.get(so);if(Pr){_i=Pr;break}rh.push(so)}rh.forEach(Pr=>xr.set(Pr,_i))}const Ru=this._buildAnimation(nn.namespaceId,Vn,Rn,a,iw,lc);if(nn.setRealPlayer(Ru),_i===TU)Lp.push(nn);else{const so=this.playersByElement.get(_i);so&&so.length&&(nn.parentPlayer=th(so)),i.push(nn)}}else kp(Ht,Vn.fromStyles),nn.onDestroy(()=>Au(Ht,Vn.toStyles)),bU.push(nn),b.has(Ht)&&i.push(nn)}),bU.forEach(xt=>{const Ht=a.get(xt.element);if(Ht&&Ht.length){const nn=th(Ht);xt.setRealPlayer(nn)}}),i.forEach(xt=>{xt.parentPlayer?xt.syncPlayerEvents(xt.parentPlayer):xt.destroy()});for(let xt=0;xt<ye.length;xt++){const Ht=ye[xt],nn=Ht[Oo];if(O_(Ht,ED),nn&&nn.hasAnimation)continue;let Vn=[];if(d.size){let Ru=d.get(Ht);Ru&&Ru.length&&Vn.push(...Ru);let so=this.driver.query(Ht,Kx,!0);for(let rh=0;rh<so.length;rh++){let Pr=d.get(so[rh]);Pr&&Pr.length&&Vn.push(...Pr)}}const _i=Vn.filter(Ru=>!Ru.destroyed);_i.length?R4(this,Ht,_i):this.processLeaveNode(Ht)}return ye.length=0,Lp.forEach(xt=>{this.players.push(xt),xt.onDone(()=>{xt.destroy();const Ht=this.players.indexOf(xt);this.players.splice(Ht,1)}),xt.play()}),Lp}elementContainsData(e,t){let r=!1;const i=t[Oo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const g=!a||a==rw;d.forEach(y=>{y.queued||!g&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const a=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,b=y!==a,T=no(r,y,[]);this._getPreviousPlayers(y,b,l,d,t.toState).forEach(P=>{const B=P.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),P.destroy(),T.push(P)})}kp(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,l){const d=t.triggerName,g=t.element,y=[],b=new Set,T=new Set,S=t.timelines.map(B=>{const J=B.element;b.add(J);const ye=J[Oo];if(ye&&ye.removedBeforeQueried)return new tw(B.duration,B.delay);const ft=J!==g,dt=function M4(n){const e=[];return pU(n,e),e}((r.get(J)||I4).map(Rn=>Rn.getRealPlayer())).filter(Rn=>!!Rn.element&&Rn.element===J),yt=a.get(J),lt=l.get(J),Zt=BV(0,this._normalizer,0,B.keyframes,yt,lt),Xt=this._buildPlayer(B,Zt,dt);if(B.subTimeline&&i&&T.add(J),ft){const Rn=new uP(e,d,J);Rn.setRealPlayer(Xt),y.push(Rn)}return Xt});y.forEach(B=>{no(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function D4(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,B.element,B))}),b.forEach(B=>ko(B,YV));const P=th(S);return P.onDestroy(()=>{b.forEach(B=>O_(B,YV)),Au(g,t.toStyles)}),T.forEach(B=>{no(i,B,[]).push(P)}),P}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new tw(e.duration,e.delay)}}class uP{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new tw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>jx(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){no(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function kD(n){return n&&1===n.nodeType}function dU(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function hU(n,e,t,r,i){const a=[];t.forEach(g=>a.push(dU(g)));const l=[];r.forEach((g,y)=>{const b={};g.forEach(T=>{const S=b[T]=e.computeStyle(y,T,i);(!S||0==S.length)&&(y[Oo]=C4,l.push(y))}),n.set(y,b)});let d=0;return t.forEach(g=>dU(g,a[d++])),l}function fU(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function l(d){if(!d)return 1;let g=a.get(d);if(g)return g;const y=d.parentNode;return g=t.has(y)?y:i.has(y)?1:l(y),a.set(d,g),g}return e.forEach(d=>{const g=l(d);1!==g&&t.get(g).push(d)}),t}function ko(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function O_(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function R4(n,e,t){th(t).onDone(()=>n.processLeaveNode(e))}function pU(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof VV?pU(r.players,e):e.push(r)}}function gU(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class FD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new T4(e,t,r),this._timelineEngine=new _4(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const g=[],b=Jx(this._driver,a,g,[]);if(g.length)throw function yK(n,e){return new f.vHH(3404,An)}();d=function f4(n,e,t){return new p4(n,e,t)}(i,b,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,l]=jV(r);this._timelineEngine.command(a,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[l,d]=jV(r);return this._timelineEngine.listen(l,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let P4=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Au(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Au(this._element,this._initialStyles),this._endStyles&&(Au(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(kp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kp(this._element,this._endStyles),this._endStyles=null),Au(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function lP(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];O4(i)&&(e=e||{},e[i]=n[i])}return e}function O4(n){return"display"===n||"position"===n}class mU{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:tU(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class k4{validateStyleProperty(e){return WV(e)}matchesElement(e,t){return!1}containsElement(e,t){return zV(e,t)}getParentElement(e){return Wx(e)}query(e,t,r){return qV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,l=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(g.easing=a);const y={},b=l.filter(S=>S instanceof mU);(function UK(n,e){return 0===n||0===e})(r,i)&&b.forEach(S=>{let P=S.currentSnapshot;Object.keys(P).forEach(B=>y[B]=P[B])}),t=function BK(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],l=[];if(r.forEach(d=>{a.hasOwnProperty(d)||l.push(d),a[d]=t[d]}),l.length)for(var i=1;i<e.length;i++){let d=e[i];l.forEach(function(g){d[g]=tU(n,g)})}}return e}(e,t=t.map(S=>nh(S,!1)),y);const T=function x4(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=lP(e[0]),e.length>1&&(r=lP(e[e.length-1]))):e&&(t=lP(e)),t||r?new P4(n,t,r):null}(e,t);return new mU(e,t,g,T)}}let F4=(()=>{class n extends OV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?kV(t):t;return _U(this._renderer,null,r,"register",[i]),new L4(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class L4 extends class Y6{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new V4(this._id,e,t||{},this._renderer)}}class V4{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return _U(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function _U(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const yU="@.disabled";let U4=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,l)=>{const d=null==l?void 0:l.parentNode(a);d&&l.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let b=this._rendererCache.get(a);return b||(b=new vU("",a,this.engine),this._rendererCache.set(a,b)),b}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=b=>{Array.isArray(b)?b.forEach(g):this.engine.registerTrigger(l,d,t,b.name,b)};return r.data.animation.forEach(g),new B4(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[l,d]=a;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(FD),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class vU{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==yU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class B4 extends vU{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==yU?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function j4(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),l="";return"@"!=a.charAt(0)&&([a,l]=function $4(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let H4=(()=>{class n extends FD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(zx),f.LFG(rP))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const EU=new f.OlP("AnimationModuleType"),wU=[{provide:OV,useClass:F4},{provide:rP,useFactory:function G4(){return new u4}},{provide:FD,useClass:H4},{provide:f.FYo,useFactory:function W4(n,e,t){return new U4(n,e,t)},deps:[er,FD,f.R0b]}],IU=[{provide:zx,useFactory:()=>new k4},{provide:EU,useValue:"BrowserAnimations"},...wU],z4=[{provide:zx,useClass:KV},{provide:EU,useValue:"NoopAnimations"},...wU];let q4=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?z4:IU}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:IU,imports:[Ta]}),n})(),K4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[o$]}),n.\u0275inj=f.cJS({providers:[b1,LM],imports:[[Ta,qh,vo,i$,Us.hO.initializeApp(OM_firebase),PB(()=>OB(OM_firebase)),j$(()=>v$()),g$(()=>_$()),fz(()=>pz()),wz(()=>Iz()),Wz(()=>zz()),e3(()=>t3()),lq(()=>cq()),yq(()=>vq()),K6(()=>Z6()),q4,PM]]}),n})();(0,f.G48)(),mh().bootstrapModule(K4).catch(n=>console.error(n))},6148:(Rt,xe,N)=>{N.d(xe,{IH:()=>Hn,Gb:()=>Wt,Kz:()=>Qt,Iv:()=>on});var f=N(5861),$=N(9681),O=N(1877),ne=N(2090),pe=N(4859);N(2833);const ae="analytics",le="firebase_id",G="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Z="https://www.googletagmanager.com/gtag/js",$e=new O.Yd("@firebase/analytics");function Oe(Y){return Promise.all(Y.map(ge=>ge.catch(De=>De)))}function Pe(Y,ge){const De=document.createElement("script");De.src=`${Z}?l=${Y}&id=${ge}`,De.async=!0,document.head.appendChild(De)}function me(Y,ge,De,U,x,H){return be.apply(this,arguments)}function be(){return(be=(0,f.Z)(function*(Y,ge,De,U,x,H){const X=U[x];try{if(X)yield ge[X];else{const k=(yield Oe(De)).find(j=>j.measurementId===x);k&&(yield ge[k.appId])}}catch(M){$e.error(M)}Y("config",x,H)})).apply(this,arguments)}function rt(Y,ge,De,U,x){return qe.apply(this,arguments)}function qe(){return(qe=(0,f.Z)(function*(Y,ge,De,U,x){try{let H=[];if(x&&x.send_to){let X=x.send_to;Array.isArray(X)||(X=[X]);const M=yield Oe(De);for(const k of X){const j=M.find(ze=>ze.measurementId===k),ce=j&&ge[j.appId];if(!ce){H=[];break}H.push(ce)}}0===H.length&&(H=Object.values(ge)),yield Promise.all(H),Y("event",U,x||{})}catch(H){$e.error(H)}})).apply(this,arguments)}function Ee(){const Y=window.document.getElementsByTagName("script");for(const ge of Object.values(Y))if(ge.src&&ge.src.includes(Z))return ge;return null}const Q=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ie=new class se{constructor(ge={},De=1e3){this.throttleMetadata=ge,this.intervalMillis=De}getThrottleMetadata(ge){return this.throttleMetadata[ge]}setThrottleMetadata(ge,De){this.throttleMetadata[ge]=De}deleteThrottleMetadata(ge){delete this.throttleMetadata[ge]}};function oe(Y){return new Headers({Accept:"application/json","x-goog-api-key":Y})}function Te(Y){return he.apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(Y){var ge;const{appId:De,apiKey:U}=Y,x={method:"GET",headers:oe(U)},H=G.replace("{app-id}",De),X=yield fetch(H,x);if(200!==X.status&&304!==X.status){let M="";try{const k=yield X.json();(null===(ge=k.error)||void 0===ge?void 0:ge.message)&&(M=k.error.message)}catch(k){}throw Q.create("config-fetch-failed",{httpStatus:X.status,responseMessage:M})}return X.json()})).apply(this,arguments)}function We(Y){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(Y,ge=ie,De){const{appId:U,apiKey:x,measurementId:H}=Y.options;if(!U)throw Q.create("no-app-id");if(!x){if(H)return{measurementId:H,appId:U};throw Q.create("no-api-key")}const X=ge.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},M=new $n;return setTimeout((0,f.Z)(function*(){M.abort()}),void 0!==De?De:6e4),Ut({appId:U,apiKey:x,measurementId:H},X,M,ge)})).apply(this,arguments)}function Ut(Y,ge,De){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(Y,{throttleEndTimeMillis:ge,backoffCount:De},U,x=ie){const{appId:H,measurementId:X}=Y;try{yield Be(U,ge)}catch(M){if(X)return $e.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${X} provided in the "measurementId" field in the local Firebase config. [${M.message}]`),{appId:H,measurementId:X};throw M}try{const M=yield Te(Y);return x.deleteThrottleMetadata(H),M}catch(M){if(!pn(M)){if(x.deleteThrottleMetadata(H),X)return $e.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${X} provided in the "measurementId" field in the local Firebase config. [${M.message}]`),{appId:H,measurementId:X};throw M}const k=503===Number(M.customData.httpStatus)?(0,ne.$s)(De,x.intervalMillis,30):(0,ne.$s)(De,x.intervalMillis),j={throttleEndTimeMillis:Date.now()+k,backoffCount:De+1};return x.setThrottleMetadata(H,j),$e.debug(`Calling attemptFetch again in ${k} millis`),Ut(Y,j,U,x)}})).apply(this,arguments)}function Be(Y,ge){return new Promise((De,U)=>{const x=Math.max(ge-Date.now(),0),H=setTimeout(De,x);Y.addEventListener(()=>{clearTimeout(H),U(Q.create("fetch-throttle",{throttleEndTimeMillis:ge}))})})}function pn(Y){if(!(Y instanceof ne.ZR&&Y.customData))return!1;const ge=Number(Y.customData.httpStatus);return 429===ge||500===ge||503===ge||504===ge}class $n{constructor(){this.listeners=[]}addEventListener(ge){this.listeners.push(ge)}abort(){this.listeners.forEach(ge=>ge())}}function Dn(){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(){if(!(0,ne.hl)())return $e.warn(Q.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(Y){return $e.warn(Q.create("indexeddb-unavailable",{errorInfo:Y}).message),!1}return!0})).apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(Y,ge,De,U,x,H,X){var M;const k=We(Y);k.then(Mt=>{De[Mt.measurementId]=Mt.appId,Y.options.measurementId&&Mt.measurementId!==Y.options.measurementId&&$e.warn(`The measurement ID in the local Firebase config (${Y.options.measurementId}) does not match the measurement ID fetched from the server (${Mt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mt=>$e.error(Mt)),ge.push(k);const j=Dn().then(Mt=>{if(Mt)return U.getId()}),[ce,ze]=yield Promise.all([k,j]);Ee()||Pe(H,ce.measurementId),x("js",new Date);const tt=null!==(M=null==X?void 0:X.config)&&void 0!==M?M:{};return tt.origin="firebase",tt.update=!0,null!=ze&&(tt[le]=ze),x("config",ce.measurementId,tt),ce.measurementId})).apply(this,arguments)}class ht{constructor(ge){this.app=ge}_delete(){return delete pt[this.app.options.appId],Promise.resolve()}}let pt={},Bt=[];const Yt={};let Nn,kn,dn="dataLayer",Qn=!1;function ke(Y,ge,De){!function ue(){const Y=[];if((0,ne.ru)()&&Y.push("This is a browser extension environment."),(0,ne.zI)()||Y.push("Cookies are not available."),Y.length>0){const ge=Y.map((U,x)=>`(${x+1}) ${U}`).join(" "),De=Q.create("invalid-analytics-context",{errorInfo:ge});$e.warn(De.message)}}();const U=Y.options.appId;if(!U)throw Q.create("no-app-id");if(!Y.options.apiKey){if(!Y.options.measurementId)throw Q.create("no-api-key");$e.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${Y.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pt[U])throw Q.create("already-exists",{id:U});if(!Qn){!function Le(Y){let ge=[];Array.isArray(window[Y])?ge=window[Y]:window[Y]=ge}(dn);const{wrappedGtag:H,gtagCore:X}=function Me(Y,ge,De,U,x){let H=function(...X){window[U].push(arguments)};return window[x]&&"function"==typeof window[x]&&(H=window[x]),window[x]=function Ne(Y,ge,De,U){function H(){return(H=(0,f.Z)(function*(X,M,k){try{"event"===X?yield rt(Y,ge,De,M,k):"config"===X?yield me(Y,ge,De,U,M,k):Y("set",M)}catch(j){$e.error(j)}})).apply(this,arguments)}return function x(X,M,k){return H.apply(this,arguments)}}(H,Y,ge,De),{gtagCore:H,wrappedGtag:window[x]}}(pt,Bt,Yt,dn,"gtag");kn=H,Nn=X,Qn=!0}return pt[U]=function Nt(Y,ge,De,U,x,H,X){return Ge.apply(this,arguments)}(Y,Bt,Yt,ge,Nn,dn,De),new ht(Y)}function wt(){return(wt=(0,f.Z)(function*(Y,ge,De,U,x){if(x&&x.global)Y("event",De,U);else{const H=yield ge;Y("event",De,Object.assign(Object.assign({},U),{send_to:H}))}})).apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(Y,ge,De,U){if(U&&U.global)return Y("set",{user_id:De}),Promise.resolve();Y("config",yield ge,{update:!0,user_id:De})})).apply(this,arguments)}function Hn(Y=(0,$.getApp)()){Y=(0,ne.m9)(Y);const ge=(0,$._getProvider)(Y,ae);return ge.isInitialized()?ge.getImmediate():function ar(Y,ge={}){const De=(0,$._getProvider)(Y,ae);if(De.isInitialized()){const x=De.getImmediate();if((0,ne.vZ)(ge,De.getOptions()))return x;throw Q.create("already-initialized")}return De.initialize({options:ge})}(Y)}function Wt(){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,f.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(Y){return!1}})).apply(this,arguments)}function on(Y,ge,De){Y=(0,ne.m9)(Y),function un(Y,ge,De,U){return _n.apply(this,arguments)}(kn,pt[Y.app.options.appId],ge,De).catch(U=>$e.error(U))}function Qt(Y,ge,De,U){Y=(0,ne.m9)(Y),function Ke(Y,ge,De,U,x){return wt.apply(this,arguments)}(kn,pt[Y.app.options.appId],ge,De,U).catch(x=>$e.error(x))}const Xe="@firebase/analytics";!function ct(){(0,$._registerComponent)(new pe.wA(ae,(ge,{options:De})=>ke(ge.getProvider("app").getImmediate(),ge.getProvider("installations-internal").getImmediate(),De),"PUBLIC")),(0,$._registerComponent)(new pe.wA("analytics-internal",function Y(ge){try{const De=ge.getProvider(ae).getImmediate();return{logEvent:(U,x,H)=>Qt(De,U,x,H)}}catch(De){throw Q.create("interop-component-reg-failed",{reason:De})}},"PRIVATE")),(0,$.registerVersion)(Xe,"0.7.8"),(0,$.registerVersion)(Xe,"0.7.8","esm2017")}()},5867:(Rt,xe,N)=>{N.d(xe,{Mq:()=>f.getApp,C6:()=>f.getApps,ZF:()=>f.initializeApp,KN:()=>f.registerVersion});var f=N(9681);(0,f.registerVersion)("firebase","9.6.11","app")},127:(Rt,xe,N)=>{N.d(xe,{Z:()=>f.Z});var f=N(3942);f.Z.registerVersion("firebase","9.6.11","app-compat")},5881:(Rt,xe,N)=>{N.r(xe);var f=N(5861),$=N(3942),O=N(573),ne=N(2090),ae=(N(9681),N(1877),N(4859));function le(){return window}function G(){return(G=(0,f.Z)(function*(M,k,j){var ce;const{BuildInfo:ze}=le();(0,O.ap)(k.sessionId,"AuthEvent did not contain a session ID");const tt=yield be(k.sessionId),Mt={};return(0,O.aq)()?Mt.ibi=ze.packageName:(0,O.ar)()?Mt.apn=ze.packageName:(0,O.as)(M,"operation-not-supported-in-this-environment"),ze.displayName&&(Mt.appDisplayName=ze.displayName),Mt.sessionId=tt,(0,O.at)(M,j,k.type,void 0,null!==(ce=k.eventId)&&void 0!==ce?ce:void 0,Mt)})).apply(this,arguments)}function $e(){return($e=(0,f.Z)(function*(M){const{BuildInfo:k}=le(),j={};(0,O.aq)()?j.iosBundleId=k.packageName:(0,O.ar)()?j.androidPackageName=k.packageName:(0,O.as)(M,"operation-not-supported-in-this-environment"),yield(0,O.au)(M,j)})).apply(this,arguments)}function Le(){return(Le=(0,f.Z)(function*(M,k,j){const{cordova:ce}=le();let ze=()=>{};try{yield new Promise((tt,Mt)=>{let mt=null;function zt(){var ln;tt();const q=null===(ln=ce.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof q&&q(),"function"==typeof(null==j?void 0:j.close)&&j.close()}function xn(){mt||(mt=window.setTimeout(()=>{Mt((0,O.av)(M,"redirect-cancelled-by-user"))},2e3))}function br(){"visible"===(null==document?void 0:document.visibilityState)&&xn()}k.addPassiveListener(zt),document.addEventListener("resume",xn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",br,!1),ze=()=>{k.removePassiveListener(zt),document.removeEventListener("resume",xn,!1),document.removeEventListener("visibilitychange",br,!1),mt&&window.clearTimeout(mt)}})}finally{ze()}})).apply(this,arguments)}function be(M){return rt.apply(this,arguments)}function rt(){return(rt=(0,f.Z)(function*(M){const k=qe(M),j=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(j)).map(ze=>ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qe(M){if((0,O.ap)(/[0-9a-zA-Z]+/.test(M),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(M);const k=new ArrayBuffer(M.length),j=new Uint8Array(k);for(let ce=0;ce<M.length;ce++)j[ce]=M.charCodeAt(ce);return j}class Me extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(j=>j(k)),super.onEvent(k)}initialized(){var k=this;return(0,f.Z)(function*(){yield k.initPromise})()}}function Q(M){return et.apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(M){const k=yield ie()._get(oe(M));return k&&(yield ie()._remove(oe(M))),k})).apply(this,arguments)}function se(){const M=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let j=0;j<20;j++){const ce=Math.floor(Math.random()*k.length);M.push(k.charAt(ce))}return M.join("")}function ie(){return(0,O.ax)(O.b)}function oe(M){return(0,O.ay)("authEvent",M.config.apiKey,M.name)}function We(M){if(!(null==M?void 0:M.includes("?")))return{};const[k,...j]=M.split("?");return(0,ne.zd)(j.join("?"))}function Be(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function Nt(){var M;return(null===(M=null==self?void 0:self.location)||void 0===M?void 0:M.protocol)||null}function ht(M=(0,ne.z$)()){return!("file:"!==Nt()&&"ionic:"!==Nt()||!M.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mn(){try{const M=self.localStorage,k=O.aG();if(M)return M.setItem(k,"1"),M.removeItem(k),!function dn(M=(0,ne.z$)()){return function Bt(){return(0,ne.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Yt(M=(0,ne.z$)()){return/Edge\/\d+/.test(M)}(M)}()||(0,ne.hl)()}catch(M){return Nn()&&(0,ne.hl)()}return!1}function Nn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function kn(){return(function Ge(){return"http:"===Nt()||"https:"===Nt()}()||(0,ne.ru)()||ht())&&!function pt(){return(0,ne.b$)()||(0,ne.UG)()}()&&Mn()&&!Nn()}function Qn(){return ht()&&"undefined"!=typeof document}function ue(){return(ue=(0,f.Z)(function*(){return!!Qn()&&new Promise(M=>{const k=setTimeout(()=>{M(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),M(!0)})})})).apply(this,arguments)}const Ke={LOCAL:"local",NONE:"none",SESSION:"session"},wt=O.aw,Gt="persistence";function un(M){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(M){yield M._initializationPromise;const k=vt(),j=O.ay(Gt,M.config.apiKey,M.name);k&&k.setItem(j,M._getPersistence())})).apply(this,arguments)}function vt(){var M;try{return(null===(M=function ke(){return"undefined"!=typeof window?window:null}())||void 0===M?void 0:M.sessionStorage)||null}catch(k){return null}}const gt=O.aw;class it{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class Ut{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(k){var j=this;return(0,f.Z)(function*(){const ce=k._key();let ze=j.eventManagers.get(ce);return ze||(ze=new Me(k),j.eventManagers.set(ce,ze),j.attachCallbackListeners(k,ze)),ze})()}_openPopup(k){(0,O.as)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,j,ce,ze){var tt=this;return(0,f.Z)(function*(){!function me(M){var k,j,ce,ze,tt,Mt,mt,zt,xn,br;const ln=le();(0,O.aw)("function"==typeof(null===(k=null==ln?void 0:ln.universalLinks)||void 0===k?void 0:k.subscribe),M,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(j=null==ln?void 0:ln.BuildInfo)||void 0===j?void 0:j.packageName),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(tt=null===(ze=null===(ce=null==ln?void 0:ln.cordova)||void 0===ce?void 0:ce.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===tt?void 0:tt.openUrl),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(zt=null===(mt=null===(Mt=null==ln?void 0:ln.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===zt?void 0:zt.isAvailable),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(br=null===(xn=null==ln?void 0:ln.cordova)||void 0===xn?void 0:xn.InAppBrowser)||void 0===br?void 0:br.open),M,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const Mt=yield tt._initialize(k);yield Mt.initialized(),Mt.resetRedirect(),(0,O.aB)(),yield tt._originValidation(k);const mt=function Ee(M,k,j=null){return{type:k,eventId:j,urlResponse:null,sessionId:se(),postBody:null,tenantId:M.tenantId,error:(0,O.av)(M,"no-auth-event")}}(k,ce,ze);yield function Ze(M,k){return ie()._set(oe(M),k)}(k,mt);const zt=yield function z(M,k,j){return G.apply(this,arguments)}(k,mt,j),xn=yield function Oe(M){const{cordova:k}=le();return new Promise(j=>{k.plugins.browsertab.isAvailable(ce=>{let ze=null;ce?k.plugins.browsertab.openUrl(M):ze=k.InAppBrowser.open(M,(0,O.ao)()?"_blank":"_system","location=yes"),j(ze)})})}(zt);return function Pe(M,k,j){return Le.apply(this,arguments)}(k,Mt,xn)})()}_isIframeWebStorageSupported(k,j){throw new Error("Method not implemented.")}_originValidation(k){const j=k._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function Z(M){return $e.apply(this,arguments)}(k)),this.originValidationPromises[j]}attachCallbackListeners(k,j){const{universalLinks:ce,handleOpenURL:ze,BuildInfo:tt}=le(),Mt=setTimeout((0,f.Z)(function*(){yield Q(k),j.onEvent(Be())}),500),mt=function(){var br=(0,f.Z)(function*(ln){clearTimeout(Mt);const q=yield Q(k);let fe=null;q&&(null==ln?void 0:ln.url)&&(fe=function st(M,k){var j,ce;const ze=function he(M){const k=We(M),j=k.link?decodeURIComponent(k.link):void 0,ce=We(j).link,ze=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return We(ze).link||ze||ce||j||M}(k);if(ze.includes("/__/auth/callback")){const tt=We(ze),Mt=tt.firebaseError?function Te(M){try{return JSON.parse(M)}catch(k){return null}}(decodeURIComponent(tt.firebaseError)):null,mt=null===(ce=null===(j=null==Mt?void 0:Mt.code)||void 0===j?void 0:j.split("auth/"))||void 0===ce?void 0:ce[1],zt=mt?(0,O.av)(mt):null;return zt?{type:M.type,eventId:M.eventId,tenantId:M.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:M.type,eventId:M.eventId,tenantId:M.tenantId,sessionId:M.sessionId,urlResponse:ze,postBody:null}}return null}(q,ln.url)),j.onEvent(fe||Be())});return function(q){return br.apply(this,arguments)}}();void 0!==ce&&"function"==typeof ce.subscribe&&ce.subscribe(null,mt);const zt=ze,xn=`${tt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var br=(0,f.Z)(function*(ln){if(ln.toLowerCase().startsWith(xn)&&mt({url:ln}),"function"==typeof zt)try{zt(ln)}catch(q){console.error(q)}});return function(ln){return br.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(k){var j=this;return(0,f.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,j,ce,ze){var tt=this;return(0,f.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openPopup(k,j,ce,ze)})()}_openRedirect(k,j,ce,ze){var tt=this;return(0,f.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openRedirect(k,j,ce,ze)})()}_isIframeWebStorageSupported(k,j){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,j)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return Qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,f.Z)(function*(){if(k.underlyingResolver)return;const j=yield function Se(){return ue.apply(this,arguments)}();k.underlyingResolver=j?k.cordovaResolver:k.browserResolver})()}}function Hn(M){return M.unwrap()}function Wt(M){return gn(M)}function gn(M){const{_tokenResponse:k}=M instanceof ne.ZR?M.customData:M;if(!k)return null;if(!(M instanceof ne.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return O.P.credentialFromResult(M);const j=k.providerId;if(!j||j===O.o.PASSWORD)return null;let ce;switch(j){case O.o.GOOGLE:ce=O.N;break;case O.o.FACEBOOK:ce=O.M;break;case O.o.GITHUB:ce=O.Q;break;case O.o.TWITTER:ce=O.V;break;default:const{oauthIdToken:ze,oauthAccessToken:tt,oauthTokenSecret:Mt,pendingToken:mt,nonce:zt}=k;return tt||Mt||ze||mt?mt?j.startsWith("saml.")?O.aJ._create(j,mt):O.I._fromParams({providerId:j,signInMethod:j,pendingToken:mt,idToken:ze,accessToken:tt}):new O.T(j).credential({idToken:ze,accessToken:tt,rawNonce:zt}):null}return M instanceof ne.ZR?ce.credentialFromError(M):ce.credentialFromResult(M)}function on(M,k){return k.catch(j=>{throw j instanceof ne.ZR&&function Kn(M,k){var j;const ce=null===(j=k.customData)||void 0===j?void 0:j._tokenResponse;if("auth/multi-factor-auth-required"===k.code)k.resolver=new Qt(M,O.am(M,k));else if(ce){const ze=gn(k),tt=k;ze&&(tt.credential=ze,tt.tenantId=ce.tenantId||void 0,tt.email=ce.email||void 0,tt.phoneNumber=ce.phoneNumber||void 0)}}(M,j),j}).then(j=>{const ze=j.user;return{operationType:j.operationType,credential:Wt(j),additionalUserInfo:O.ak(j),user:Xe.getOrCreate(ze)}})}function bt(M,k){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(M,k){const j=yield k;return{verificationId:j.verificationId,confirm:ce=>on(M,j.confirm(ce))}})).apply(this,arguments)}class Qt{constructor(k,j){this.resolver=j,this.auth=function ar(M){return M.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return on(Hn(this.auth),this.resolver.resolveSignIn(k))}}class Xe{constructor(k){this._delegate=k,this.multiFactor=O.an(k)}static getOrCreate(k){return Xe.USER_MAP.has(k)||Xe.USER_MAP.set(k,new Xe(k)),Xe.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var j=this;return(0,f.Z)(function*(){return on(j.auth,O.Y(j._delegate,k))})()}linkWithPhoneNumber(k,j){var ce=this;return(0,f.Z)(function*(){return bt(ce.auth,O.l(ce._delegate,k,j))})()}linkWithPopup(k){var j=this;return(0,f.Z)(function*(){return on(j.auth,O.d(j._delegate,k,it))})()}linkWithRedirect(k){var j=this;return(0,f.Z)(function*(){return yield un(O.aC(j.auth)),O.g(j._delegate,k,it)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var j=this;return(0,f.Z)(function*(){return on(j.auth,O.Z(j._delegate,k))})()}reauthenticateWithPhoneNumber(k,j){return bt(this.auth,O.r(this._delegate,k,j))}reauthenticateWithPopup(k){return on(this.auth,O.e(this._delegate,k,it))}reauthenticateWithRedirect(k){var j=this;return(0,f.Z)(function*(){return yield un(O.aC(j.auth)),O.h(j._delegate,k,it)})()}sendEmailVerification(k){return O.aa(this._delegate,k)}unlink(k){var j=this;return(0,f.Z)(function*(){return yield O.aj(j._delegate,k),j})()}updateEmail(k){return O.af(this._delegate,k)}updatePassword(k){return O.ag(this._delegate,k)}updatePhoneNumber(k){return O.u(this._delegate,k)}updateProfile(k){return O.ae(this._delegate,k)}verifyBeforeUpdateEmail(k,j){return O.ab(this._delegate,k,j)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xe.USER_MAP=new WeakMap;const Ae=O.aw;let ct=(()=>{class M{constructor(j,ce){if(this.app=j,ce.isInitialized())return this._delegate=ce.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ze}=j.options;Ae(ze,"invalid-api-key",{appName:j.name}),Ae(ze,"invalid-api-key",{appName:j.name});const tt="undefined"!=typeof window?it:void 0;this._delegate=ce.initialize({options:{persistence:ge(ze,j.name),popupRedirectResolver:tt}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xe.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(j){this._delegate.languageCode=j}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(j){this._delegate.tenantId=j}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(j,ce){O.E(this._delegate,j,ce)}applyActionCode(j){return O.a1(this._delegate,j)}checkActionCode(j){return O.a2(this._delegate,j)}confirmPasswordReset(j,ce){return O.a0(this._delegate,j,ce)}createUserWithEmailAndPassword(j,ce){var ze=this;return(0,f.Z)(function*(){return on(ze._delegate,O.a4(ze._delegate,j,ce))})()}fetchProvidersForEmail(j){return this.fetchSignInMethodsForEmail(j)}fetchSignInMethodsForEmail(j){return O.a9(this._delegate,j)}isSignInWithEmailLink(j){return O.a7(this._delegate,j)}getRedirectResult(){var j=this;return(0,f.Z)(function*(){Ae(kn(),j._delegate,"operation-not-supported-in-this-environment");const ce=yield O.j(j._delegate,it);return ce?on(j._delegate,Promise.resolve(ce)):{credential:null,user:null}})()}addFrameworkForLogging(j){!function pn(M,k){(0,O.aC)(M)._logFramework(k)}(this._delegate,j)}onAuthStateChanged(j,ce,ze){const{next:tt,error:Mt,complete:mt}=Y(j,ce,ze);return this._delegate.onAuthStateChanged(tt,Mt,mt)}onIdTokenChanged(j,ce,ze){const{next:tt,error:Mt,complete:mt}=Y(j,ce,ze);return this._delegate.onIdTokenChanged(tt,Mt,mt)}sendSignInLinkToEmail(j,ce){return O.a6(this._delegate,j,ce)}sendPasswordResetEmail(j,ce){return O.$(this._delegate,j,ce||void 0)}setPersistence(j){var ce=this;return(0,f.Z)(function*(){let ze;switch(function $t(M,k){wt(Object.values(Ke).includes(k),M,"invalid-persistence-type"),(0,ne.b$)()?wt(k!==Ke.SESSION,M,"unsupported-persistence-type"):(0,ne.UG)()?wt(k===Ke.NONE,M,"unsupported-persistence-type"):Nn()?wt(k===Ke.NONE||k===Ke.LOCAL&&(0,ne.hl)(),M,"unsupported-persistence-type"):wt(k===Ke.NONE||Mn(),M,"unsupported-persistence-type")}(ce._delegate,j),j){case Ke.SESSION:ze=O.a;break;case Ke.LOCAL:ze=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case Ke.NONE:ze=O.K;break;default:return O.as("argument-error",{appName:ce._delegate.name})}return ce._delegate.setPersistence(ze)})()}signInAndRetrieveDataWithCredential(j){return this.signInWithCredential(j)}signInAnonymously(){return on(this._delegate,O.W(this._delegate))}signInWithCredential(j){return on(this._delegate,O.X(this._delegate,j))}signInWithCustomToken(j){return on(this._delegate,O._(this._delegate,j))}signInWithEmailAndPassword(j,ce){return on(this._delegate,O.a5(this._delegate,j,ce))}signInWithEmailLink(j,ce){return on(this._delegate,O.a8(this._delegate,j,ce))}signInWithPhoneNumber(j,ce){return bt(this._delegate,O.s(this._delegate,j,ce))}signInWithPopup(j){var ce=this;return(0,f.Z)(function*(){return Ae(kn(),ce._delegate,"operation-not-supported-in-this-environment"),on(ce._delegate,O.c(ce._delegate,j,it))})()}signInWithRedirect(j){var ce=this;return(0,f.Z)(function*(){return Ae(kn(),ce._delegate,"operation-not-supported-in-this-environment"),yield un(ce._delegate),O.f(ce._delegate,j,it)})()}updateCurrentUser(j){return this._delegate.updateCurrentUser(j)}verifyPasswordResetCode(j){return O.a3(this._delegate,j)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return M.Persistence=Ke,M})();function Y(M,k,j){let ce=M;"function"!=typeof M&&({next:ce,error:k,complete:j}=M);const ze=ce;return{next:Mt=>ze(Mt&&Xe.getOrCreate(Mt)),error:k,complete:j}}function ge(M,k){const j=function Sn(M,k){const j=vt();if(!j)return[];const ce=O.ay(Gt,M,k);switch(j.getItem(ce)){case Ke.NONE:return[O.K];case Ke.LOCAL:return[O.i,O.a];case Ke.SESSION:return[O.a];default:return[]}}(M,k);if("undefined"!=typeof self&&!j.includes(O.i)&&j.push(O.i),"undefined"!=typeof window)for(const ce of[O.b,O.a])j.includes(ce)||j.push(ce);return j.includes(O.K)||j.push(O.K),j}class De{constructor(){this.providerId="phone",this._delegate=new O.P(Hn($.Z.auth()))}static credential(k,j){return O.P.credential(k,j)}verifyPhoneNumber(k,j){return this._delegate.verifyPhoneNumber(k,j)}unwrap(){return this._delegate}}De.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,De.PROVIDER_ID=O.P.PROVIDER_ID;const U=O.aw;class x{constructor(k,j,ce=$.Z.app()){var ze;U(null===(ze=ce.options)||void 0===ze?void 0:ze.apiKey,"invalid-api-key",{appName:ce.name}),this._delegate=new O.R(k,j,ce.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function X(M){M.INTERNAL.registerComponent(new ae.wA("auth-compat",k=>{const j=k.getProvider("app-compat").getImmediate(),ce=k.getProvider("auth");return new ct(j,ce)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:De,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:x,TwitterAuthProvider:O.V,Auth:ct,AuthCredential:O.G,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),M.registerVersion("@firebase/auth-compat","0.2.12")}($.Z)},2375:(Rt,xe,N)=>{N.d(xe,{KL:()=>mt,Gb:()=>j});var f=N(5861),O=(N(2833),N(4859)),ne=N(2090),pe=N(9681);const we="/firebase-messaging-sw.js",ae="/firebase-cloud-messaging-push-scope",le="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",z="google.c.a.c_id",G="google.c.a.c_l",Z="google.c.a.ts",$e="google.c.a.e";var Pe=(()=>{return(q=Pe||(Pe={})).PUSH_RECEIVED="push-received",q.NOTIFICATION_CLICKED="notification-clicked",Pe;var q})();function Le(q){const fe=new Uint8Array(q);return btoa(String.fromCharCode(...fe)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function me(q){const Ye=(q+"=".repeat((4-q.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Et=atob(Ye),Dt=new Uint8Array(Et.length);for(let V=0;V<Et.length;++V)Dt[V]=Et.charCodeAt(V);return Dt}const be="fcm_token_details_db",qe="fcm_token_object_Store";function Ne(q){return Me.apply(this,arguments)}function Me(){return Me=(0,f.Z)(function*(q){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(V=>V.name).includes(be))return null;let fe=null;return(yield(0,ne.X3)(be,5,function(){var Et=(0,f.Z)(function*(Dt,V,ee,Re){var _t;if(V<2||!Dt.objectStoreNames.contains(qe))return;const Tn=Re.objectStore(qe),qt=yield Tn.index("fcmSenderId").get(q);if(yield Tn.clear(),qt)if(2===V){const Pt=qt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;fe={token:Pt.fcmToken,createTime:null!==(_t=Pt.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Le(Pt.vapidKey)}}}else if(3===V){const Pt=qt;fe={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Le(Pt.auth),p256dh:Le(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Le(Pt.vapidKey)}}}else if(4===V){const Pt=qt;fe={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Le(Pt.auth),p256dh:Le(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Le(Pt.vapidKey)}}}});return function(Dt,V,ee,Re){return Et.apply(this,arguments)}}())).close(),yield(0,ne.Lj)(be),yield(0,ne.Lj)("fcm_vapid_details_db"),yield(0,ne.Lj)("undefined"),Ee(fe)?fe:null}),Me.apply(this,arguments)}function Ee(q){if(!q||!q.subscriptionOptions)return!1;const{subscriptionOptions:fe}=q;return"number"==typeof q.createTime&&q.createTime>0&&"string"==typeof q.token&&q.token.length>0&&"string"==typeof fe.auth&&fe.auth.length>0&&"string"==typeof fe.p256dh&&fe.p256dh.length>0&&"string"==typeof fe.endpoint&&fe.endpoint.length>0&&"string"==typeof fe.swScope&&fe.swScope.length>0&&"string"==typeof fe.vapidKey&&fe.vapidKey.length>0}const et="firebase-messaging-store";let st=null;function se(){return st||(st=(0,ne.X3)("firebase-messaging-database",1,(q,fe)=>{0===fe&&q.createObjectStore(et)})),st}function ie(q){return oe.apply(this,arguments)}function oe(){return(oe=(0,f.Z)(function*(q){const fe=Ut(q),Et=yield(yield se()).transaction(et).objectStore(et).get(fe);if(Et)return Et;{const Dt=yield Ne(q.appConfig.senderId);if(Dt)return yield Te(q,Dt),Dt}})).apply(this,arguments)}function Te(q,fe){return he.apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(q,fe){const Ye=Ut(q),Dt=(yield se()).transaction(et,"readwrite");return yield Dt.objectStore(et).put(fe,Ye),yield Dt.complete,fe})).apply(this,arguments)}function We(q){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(q){const fe=Ut(q),Et=(yield se()).transaction(et,"readwrite");yield Et.objectStore(et).delete(fe),yield Et.complete})).apply(this,arguments)}function Ut({appConfig:q}){return q.appId}const Be=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pn(q,fe){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(q,fe){const Ye=yield pt(q),Et=Yt(fe),Dt={method:"POST",headers:Ye,body:JSON.stringify(Et)};let V;try{V=yield(yield fetch(ht(q.appConfig),Dt)).json()}catch(ee){throw Be.create("token-subscribe-failed",{errorInfo:ee})}if(V.error)throw Be.create("token-subscribe-failed",{errorInfo:V.error.message});if(!V.token)throw Be.create("token-subscribe-no-token");return V.token})).apply(this,arguments)}function Dn(q,fe){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,f.Z)(function*(q,fe){const Ye=yield pt(q),Et=Yt(fe.subscriptionOptions),Dt={method:"PATCH",headers:Ye,body:JSON.stringify(Et)};let V;try{V=yield(yield fetch(`${ht(q.appConfig)}/${fe.token}`,Dt)).json()}catch(ee){throw Be.create("token-update-failed",{errorInfo:ee})}if(V.error)throw Be.create("token-update-failed",{errorInfo:V.error.message});if(!V.token)throw Be.create("token-update-no-token");return V.token})).apply(this,arguments)}function Nt(q,fe){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(q,fe){const Et={method:"DELETE",headers:yield pt(q)};try{const V=yield(yield fetch(`${ht(q.appConfig)}/${fe}`,Et)).json();if(V.error)throw Be.create("token-unsubscribe-failed",{errorInfo:V.error.message})}catch(Dt){throw Be.create("token-unsubscribe-failed",{errorInfo:Dt})}})).apply(this,arguments)}function ht({projectId:q}){return`https://fcmregistrations.googleapis.com/v1/projects/${q}/registrations`}function pt(q){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,f.Z)(function*({appConfig:q,installations:fe}){const Ye=yield fe.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q.apiKey,"x-goog-firebase-installations-auth":`FIS ${Ye}`})})).apply(this,arguments)}function Yt({p256dh:q,auth:fe,endpoint:Ye,vapidKey:Et}){const Dt={web:{endpoint:Ye,auth:fe,p256dh:q}};return Et!==le&&(Dt.web.applicationPubKey=Et),Dt}const dn=6048e5;function Mn(q){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(q){const fe=yield wt(q.swRegistration,q.vapidKey),Ye={vapidKey:q.vapidKey,swScope:q.swRegistration.scope,endpoint:fe.endpoint,auth:Le(fe.getKey("auth")),p256dh:Le(fe.getKey("p256dh"))},Et=yield ie(q.firebaseDependencies);if(Et){if($t(Et.subscriptionOptions,Ye))return Date.now()>=Et.createTime+dn?Se(q,{token:Et.token,createTime:Date.now(),subscriptionOptions:Ye}):Et.token;try{yield Nt(q.firebaseDependencies,Et.token)}catch(Dt){console.warn(Dt)}return ke(q.firebaseDependencies,Ye)}return ke(q.firebaseDependencies,Ye)})).apply(this,arguments)}function kn(q){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(q){const fe=yield ie(q.firebaseDependencies);fe&&(yield Nt(q.firebaseDependencies,fe.token),yield We(q.firebaseDependencies));const Ye=yield q.swRegistration.pushManager.getSubscription();return!Ye||Ye.unsubscribe()})).apply(this,arguments)}function Se(q,fe){return ue.apply(this,arguments)}function ue(){return(ue=(0,f.Z)(function*(q,fe){try{const Ye=yield Dn(q.firebaseDependencies,fe),Et=Object.assign(Object.assign({},fe),{token:Ye,createTime:Date.now()});return yield Te(q.firebaseDependencies,Et),Ye}catch(Ye){throw yield kn(q),Ye}})).apply(this,arguments)}function ke(q,fe){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,f.Z)(function*(q,fe){const Et={token:yield pn(q,fe),createTime:Date.now(),subscriptionOptions:fe};return yield Te(q,Et),Et.token})).apply(this,arguments)}function wt(q,fe){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,f.Z)(function*(q,fe){return(yield q.pushManager.getSubscription())||q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:me(fe)})})).apply(this,arguments)}function $t(q,fe){return fe.vapidKey===q.vapidKey&&fe.endpoint===q.endpoint&&fe.auth===q.auth&&fe.p256dh===q.p256dh}function un(q){const fe={from:q.from,collapseKey:q.collapse_key,messageId:q.fcmMessageId};return function _n(q,fe){if(!fe.notification)return;q.notification={};const Ye=fe.notification.title;Ye&&(q.notification.title=Ye);const Et=fe.notification.body;Et&&(q.notification.body=Et);const Dt=fe.notification.image;Dt&&(q.notification.image=Dt)}(fe,q),function Sn(q,fe){!fe.data||(q.data=fe.data)}(fe,q),function vt(q,fe){if(!fe.fcmOptions)return;q.fcmOptions={};const Ye=fe.fcmOptions.link;Ye&&(q.fcmOptions.link=Ye);const Et=fe.fcmOptions.analytics_label;Et&&(q.fcmOptions.analyticsLabel=Et)}(fe,q),fe}function gt(q){return"object"==typeof q&&!!q&&z in q}function it(q,fe){const Ye=[];for(let Et=0;Et<q.length;Et++)Ye.push(q.charAt(Et)),Et<fe.length&&Ye.push(fe.charAt(Et));return Ye.join("")}function ar(q){return Be.create("missing-app-config-values",{valueName:q})}it("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),it("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Wt{constructor(fe,Ye,Et){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Dt=function Hn(q){if(!q||!q.options)throw ar("App Configuration Object");if(!q.name)throw ar("App Name");const fe=["projectId","apiKey","appId","messagingSenderId"],{options:Ye}=q;for(const Et of fe)if(!Ye[Et])throw ar(Et);return{appName:q.name,projectId:Ye.projectId,apiKey:Ye.apiKey,appId:Ye.appId,senderId:Ye.messagingSenderId}}(fe);this.firebaseDependencies={app:fe,appConfig:Dt,installations:Ye,analyticsProvider:Et}}_delete(){return Promise.resolve()}}function Kn(q){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(q){try{q.swRegistration=yield navigator.serviceWorker.register(we,{scope:ae}),q.swRegistration.update().catch(()=>{})}catch(fe){throw Be.create("failed-service-worker-registration",{browserErrorMessage:fe.message})}})).apply(this,arguments)}function on(q,fe){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(q,fe){if(!fe&&!q.swRegistration&&(yield Kn(q)),fe||!q.swRegistration){if(!(fe instanceof ServiceWorkerRegistration))throw Be.create("invalid-sw-registration");q.swRegistration=fe}})).apply(this,arguments)}function Gn(q,fe){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,f.Z)(function*(q,fe){fe?q.vapidKey=fe:q.vapidKey||(q.vapidKey=le)})).apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(q,fe){if(!navigator)throw Be.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Be.create("permission-blocked");return yield Gn(q,null==fe?void 0:fe.vapidKey),yield on(q,null==fe?void 0:fe.serviceWorkerRegistration),Mn(q)})).apply(this,arguments)}function ct(q,fe,Ye){return Y.apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(q,fe,Ye){const Et=ge(fe);(yield q.firebaseDependencies.analyticsProvider.get()).logEvent(Et,{message_id:Ye[z],message_name:Ye[G],message_time:Ye[Z],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ge(q){switch(q){case Pe.NOTIFICATION_CLICKED:return"notification_open";case Pe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function U(){return(U=(0,f.Z)(function*(q,fe){const Ye=fe.data;if(!Ye.isFirebaseMessaging)return;q.onMessageHandler&&Ye.messageType===Pe.PUSH_RECEIVED&&("function"==typeof q.onMessageHandler?q.onMessageHandler(un(Ye)):q.onMessageHandler.next(un(Ye)));const Et=Ye.data;gt(Et)&&"1"===Et[$e]&&(yield ct(q,Ye.messageType,Et))})).apply(this,arguments)}const x="@firebase/messaging",H="0.9.12",X=q=>{const fe=new Wt(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),q.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Ye=>function De(q,fe){return U.apply(this,arguments)}(fe,Ye)),fe},M=q=>{const fe=q.getProvider("messaging").getImmediate();return{getToken:Et=>function Xe(q,fe){return Ae.apply(this,arguments)}(fe,Et)}};function j(){return ce.apply(this,arguments)}function ce(){return(ce=(0,f.Z)(function*(){try{yield(0,ne.eu)()}catch(q){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function mt(q=(0,pe.getApp)()){return j().then(fe=>{if(!fe)throw Be.create("unsupported-browser")},fe=>{throw Be.create("indexed-db-unsupported")}),(0,pe._getProvider)((0,ne.m9)(q),"messaging").getImmediate()}!function k(){(0,pe._registerComponent)(new O.wA("messaging",X,"PUBLIC")),(0,pe._registerComponent)(new O.wA("messaging-internal",M,"PRIVATE")),(0,pe.registerVersion)(x,H),(0,pe.registerVersion)(x,H,"esm2017")}()},3226:(Rt,xe,N)=>{N.d(xe,{sN:()=>rt,Gb:()=>kn});var f=N(5861),$=N(9681),O=N(2090),ne=N(4859),pe=N(1877);N(2833);const ae="@firebase/remote-config",z="remote-config",Z=new O.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function rt(Se=(0,$.getApp)()){return Se=(0,O.m9)(Se),(0,$._getProvider)(Se,z).getImmediate()}class he{constructor(ue,ke,Ke,wt){this.client=ue,this.storage=ke,this.storageCache=Ke,this.logger=wt}isCachedDataFresh(ue,ke){if(!ke)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ke=Date.now()-ke,wt=Ke<=ue;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ke}. Cache max age millis (minimumFetchIntervalMillis setting): ${ue}. Is cache hit: ${wt}.`),wt}fetch(ue){var ke=this;return(0,f.Z)(function*(){const[Ke,wt]=yield Promise.all([ke.storage.getLastSuccessfulFetchTimestampMillis(),ke.storage.getLastSuccessfulFetchResponse()]);if(wt&&ke.isCachedDataFresh(ue.cacheMaxAgeMillis,Ke))return wt;ue.eTag=wt&&wt.eTag;const Gt=yield ke.client.fetch(ue),$t=[ke.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Gt.status&&$t.push(ke.storage.setLastSuccessfulFetchResponse(Gt)),yield Promise.all($t),Gt})()}}function We(Se=navigator){return Se.languages&&Se.languages[0]||Se.language}class It{constructor(ue,ke,Ke,wt,Gt,$t){this.firebaseInstallations=ue,this.sdkVersion=ke,this.namespace=Ke,this.projectId=wt,this.apiKey=Gt,this.appId=$t}fetch(ue){var ke=this;return(0,f.Z)(function*(){const[Ke,wt]=yield Promise.all([ke.firebaseInstallations.getId(),ke.firebaseInstallations.getToken()]),$t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ke.projectId}/namespaces/${ke.namespace}:fetch?key=${ke.apiKey}`,un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":ue.eTag||"*"},_n={sdk_version:ke.sdkVersion,app_instance_id:Ke,app_instance_id_token:wt,app_id:ke.appId,language_code:We()},Sn={method:"POST",headers:un,body:JSON.stringify(_n)},vt=fetch($t,Sn),gt=new Promise((gn,on)=>{ue.signal.addEventListener(()=>{const bt=new Error("The operation was aborted.");bt.name="AbortError",on(bt)})});let it;try{yield Promise.race([vt,gt]),it=yield vt}catch(gn){let on="fetch-client-network";throw"AbortError"===gn.name&&(on="fetch-timeout"),Z.create(on,{originalErrorMessage:gn.message})}let Hn=it.status;const ar=it.headers.get("ETag")||void 0;let Wt,Kn;if(200===it.status){let gn;try{gn=yield it.json()}catch(on){throw Z.create("fetch-client-parse",{originalErrorMessage:on.message})}Wt=gn.entries,Kn=gn.state}if("INSTANCE_STATE_UNSPECIFIED"===Kn?Hn=500:"NO_CHANGE"===Kn?Hn=304:("NO_TEMPLATE"===Kn||"EMPTY_CONFIG"===Kn)&&(Wt={}),304!==Hn&&200!==Hn)throw Z.create("fetch-status",{httpStatus:Hn});return{status:Hn,eTag:ar,config:Wt}})()}}class Be{constructor(ue,ke){this.client=ue,this.storage=ke}fetch(ue){var ke=this;return(0,f.Z)(function*(){const Ke=(yield ke.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ke.attemptFetch(ue,Ke)})()}attemptFetch(ue,{throttleEndTimeMillis:ke,backoffCount:Ke}){var wt=this;return(0,f.Z)(function*(){yield function Ut(Se,ue){return new Promise((ke,Ke)=>{const wt=Math.max(ue-Date.now(),0),Gt=setTimeout(ke,wt);Se.addEventListener(()=>{clearTimeout(Gt),Ke(Z.create("fetch-throttle",{throttleEndTimeMillis:ue}))})})}(ue.signal,ke);try{const Gt=yield wt.client.fetch(ue);return yield wt.storage.deleteThrottleMetadata(),Gt}catch(Gt){if(!function Ft(Se){if(!(Se instanceof O.ZR&&Se.customData))return!1;const ue=Number(Se.customData.httpStatus);return 429===ue||500===ue||503===ue||504===ue}(Gt))throw Gt;const $t={throttleEndTimeMillis:Date.now()+(0,O.$s)(Ke),backoffCount:Ke+1};return yield wt.storage.setThrottleMetadata($t),wt.attemptFetch(ue,$t)}})()}}class Dn{constructor(ue,ke,Ke,wt,Gt){this.app=ue,this._client=ke,this._storageCache=Ke,this._storage=wt,this._logger=Gt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Vt(Se,ue){const ke=Se.target.error||void 0;return Z.create(ue,{originalErrorMessage:ke&&ke.message})}const Nt="app_namespace_store";class Bt{constructor(ue,ke,Ke,wt=function pt(){return new Promise((Se,ue)=>{try{const ke=indexedDB.open("firebase_remote_config",1);ke.onerror=Ke=>{ue(Vt(Ke,"storage-open"))},ke.onsuccess=Ke=>{Se(Ke.target.result)},ke.onupgradeneeded=Ke=>{0===Ke.oldVersion&&Ke.target.result.createObjectStore(Nt,{keyPath:"compositeKey"})}}catch(ke){ue(Z.create("storage-open",{originalErrorMessage:ke}))}})}()){this.appId=ue,this.appName=ke,this.namespace=Ke,this.openDbPromise=wt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(ue){return this.set("last_fetch_status",ue)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(ue){return this.set("last_successful_fetch_timestamp_millis",ue)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(ue){return this.set("last_successful_fetch_response",ue)}getActiveConfig(){return this.get("active_config")}setActiveConfig(ue){return this.set("active_config",ue)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(ue){return this.set("active_config_etag",ue)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(ue){return this.set("throttle_metadata",ue)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(ue){var ke=this;return(0,f.Z)(function*(){const Ke=yield ke.openDbPromise;return new Promise((wt,Gt)=>{const un=Ke.transaction([Nt],"readonly").objectStore(Nt),_n=ke.createCompositeKey(ue);try{const Sn=un.get(_n);Sn.onerror=vt=>{Gt(Vt(vt,"storage-get"))},Sn.onsuccess=vt=>{const gt=vt.target.result;wt(gt?gt.value:void 0)}}catch(Sn){Gt(Z.create("storage-get",{originalErrorMessage:Sn&&Sn.message}))}})})()}set(ue,ke){var Ke=this;return(0,f.Z)(function*(){const wt=yield Ke.openDbPromise;return new Promise((Gt,$t)=>{const _n=wt.transaction([Nt],"readwrite").objectStore(Nt),Sn=Ke.createCompositeKey(ue);try{const vt=_n.put({compositeKey:Sn,value:ke});vt.onerror=gt=>{$t(Vt(gt,"storage-set"))},vt.onsuccess=()=>{Gt()}}catch(vt){$t(Z.create("storage-set",{originalErrorMessage:vt&&vt.message}))}})})()}delete(ue){var ke=this;return(0,f.Z)(function*(){const Ke=yield ke.openDbPromise;return new Promise((wt,Gt)=>{const un=Ke.transaction([Nt],"readwrite").objectStore(Nt),_n=ke.createCompositeKey(ue);try{const Sn=un.delete(_n);Sn.onerror=vt=>{Gt(Vt(vt,"storage-delete"))},Sn.onsuccess=()=>{wt()}}catch(Sn){Gt(Z.create("storage-delete",{originalErrorMessage:Sn&&Sn.message}))}})})()}createCompositeKey(ue){return[this.appId,this.appName,this.namespace,ue].join()}}class Yt{constructor(ue){this.storage=ue}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var ue=this;return(0,f.Z)(function*(){const ke=ue.storage.getLastFetchStatus(),Ke=ue.storage.getLastSuccessfulFetchTimestampMillis(),wt=ue.storage.getActiveConfig(),Gt=yield ke;Gt&&(ue.lastFetchStatus=Gt);const $t=yield Ke;$t&&(ue.lastSuccessfulFetchTimestampMillis=$t);const un=yield wt;un&&(ue.activeConfig=un)})()}setLastFetchStatus(ue){return this.lastFetchStatus=ue,this.storage.setLastFetchStatus(ue)}setLastSuccessfulFetchTimestampMillis(ue){return this.lastSuccessfulFetchTimestampMillis=ue,this.storage.setLastSuccessfulFetchTimestampMillis(ue)}setActiveConfig(ue){return this.activeConfig=ue,this.storage.setActiveConfig(ue)}}function kn(){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(){if(!(0,O.hl)())return!1;try{return yield(0,O.eu)()}catch(Se){return!1}})).apply(this,arguments)}!function dn(){(0,$._registerComponent)(new ne.wA(z,function Se(ue,{instanceIdentifier:ke}){const Ke=ue.getProvider("app").getImmediate(),wt=ue.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Z.create("registration-window");if(!(0,O.hl)())throw Z.create("indexed-db-unavailable");const{projectId:Gt,apiKey:$t,appId:un}=Ke.options;if(!Gt)throw Z.create("registration-project-id");if(!$t)throw Z.create("registration-api-key");if(!un)throw Z.create("registration-app-id");const _n=new Bt(un,Ke.name,ke=ke||"firebase"),Sn=new Yt(_n),vt=new pe.Yd(ae);vt.logLevel=pe.in.ERROR;const gt=new It(wt,$.SDK_VERSION,ke,Gt,$t,un),it=new Be(gt,_n),Hn=new he(it,_n,Sn,vt),ar=new Dn(Ke,Hn,Sn,_n,vt);return function Me(Se){const ue=(0,O.m9)(Se);ue._initializePromise||(ue._initializePromise=ue._storageCache.loadFromStorage().then(()=>{ue._isInitializationComplete=!0}))}(ar),ar},"PUBLIC").setMultipleInstances(!0)),(0,$.registerVersion)(ae,"0.3.7"),(0,$.registerVersion)(ae,"0.3.7","esm2017")}()},8306:(Rt,xe,N)=>{N.d(xe,{y:()=>z});var f=N(2961),$=N(727),O=N(8822),ne=N(4671);var ae=N(2416),le=N(576),_e=N(2806);let z=(()=>{class Oe{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const me=new Oe;return me.source=this,me.operator=Le,me}subscribe(Le,me,be){const rt=function $e(Oe){return Oe&&Oe instanceof f.Lv||function Z(Oe){return Oe&&(0,le.m)(Oe.next)&&(0,le.m)(Oe.error)&&(0,le.m)(Oe.complete)}(Oe)&&(0,$.Nn)(Oe)}(Le)?Le:new f.Hp(Le,me,be);return(0,_e.x)(()=>{const{operator:qe,source:Ne}=this;rt.add(qe?qe.call(rt,Ne):Ne?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(Le){try{return this._subscribe(Le)}catch(me){Le.error(me)}}forEach(Le,me){return new(me=G(me))((be,rt)=>{const qe=new f.Hp({next:Ne=>{try{Le(Ne)}catch(Me){rt(Me),qe.unsubscribe()}},error:rt,complete:be});this.subscribe(qe)})}_subscribe(Le){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(Le)}[O.L](){return this}pipe(...Le){return function we(Oe){return 0===Oe.length?ne.y:1===Oe.length?Oe[0]:function(Le){return Oe.reduce((me,be)=>be(me),Le)}}(Le)(this)}toPromise(Le){return new(Le=G(Le))((me,be)=>{let rt;this.subscribe(qe=>rt=qe,qe=>be(qe),()=>me(rt))})}}return Oe.create=Pe=>new Oe(Pe),Oe})();function G(Oe){var Pe;return null!==(Pe=null!=Oe?Oe:ae.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(Rt,xe,N)=>{N.d(xe,{x:()=>ae});var f=N(8306),$=N(727);const ne=(0,N(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=N(8737),we=N(2806);let ae=(()=>{class _e extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Z=new le(this,this);return Z.operator=G,Z}_throwIfClosed(){if(this.closed)throw new ne}next(G){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(G)}})}error(G){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Z}=this;for(;Z.length;)Z.shift().error(G)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Z,isStopped:$e,observers:Oe}=this;return Z||$e?$.Lc:(this.currentObservers=null,Oe.push(G),new $.w0(()=>{this.currentObservers=null,(0,pe.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:Z,thrownError:$e,isStopped:Oe}=this;Z?G.error($e):Oe&&G.complete()}asObservable(){const G=new f.y;return G.source=this,G}}return _e.create=(z,G)=>new le(z,G),_e})();class le extends ae{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Z||Z.call(G,z)}error(z){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Z||Z.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,Z;return null!==(Z=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==Z?Z:$.Lc}}},2961:(Rt,xe,N)=>{N.d(xe,{Hp:()=>Le,Lv:()=>Z});var f=N(576),$=N(727),O=N(2416),ne=N(7849);function pe(){}const we=_e("C",void 0,void 0);function _e(Ne,Me,Ee){return{kind:Ne,value:Me,error:Ee}}var z=N(3410),G=N(2806);class Z extends $.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,$.Nn)(Me)&&Me.add(this)):this.destination=qe}static create(Me,Ee,Ze){return new Le(Me,Ee,Ze)}next(Me){this.isStopped?rt(function le(Ne){return _e("N",Ne,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?rt(function ae(Ne){return _e("E",void 0,Ne)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?rt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Oe(Ne,Me){return $e.call(Ne,Me)}class Pe{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Me)}catch(Ze){me(Ze)}}error(Me){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Me)}catch(Ze){me(Ze)}else me(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Ee){me(Ee)}}}class Le extends Z{constructor(Me,Ee,Ze){let Q;if(super(),(0,f.m)(Me)||!Me)Q={next:null!=Me?Me:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ze?Ze:void 0};else{let et;this&&O.v.useDeprecatedNextContext?(et=Object.create(Me),et.unsubscribe=()=>this.unsubscribe(),Q={next:Me.next&&Oe(Me.next,et),error:Me.error&&Oe(Me.error,et),complete:Me.complete&&Oe(Me.complete,et)}):Q=Me}this.destination=new Pe(Q)}}function me(Ne){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ne):(0,ne.h)(Ne)}function rt(Ne,Me){const{onStoppedNotification:Ee}=O.v;Ee&&z.z.setTimeout(()=>Ee(Ne,Me))}const qe={closed:!0,next:pe,error:function be(Ne){throw Ne},complete:pe}},727:(Rt,xe,N)=>{N.d(xe,{Lc:()=>we,w0:()=>pe,Nn:()=>ae});var f=N(576);const O=(0,N(3888).d)(_e=>function(G){_e(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Z,$e)=>`${$e+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ne=N(8737);class pe{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:Z}=this;if((0,f.m)(Z))try{Z()}catch(Oe){z=Oe instanceof O?Oe.errors:[Oe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Oe of $e)try{le(Oe)}catch(Pe){z=null!=z?z:[],Pe instanceof O?z=[...z,...Pe.errors]:z.push(Pe)}}if(z)throw new O(z)}}add(z){var G;if(z&&z!==this)if(this.closed)le(z);else{if(z instanceof pe){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,ne.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,ne.P)(G,z),z instanceof pe&&z._removeParent(this)}}pe.EMPTY=(()=>{const _e=new pe;return _e.closed=!0,_e})();const we=pe.EMPTY;function ae(_e){return _e instanceof pe||_e&&"closed"in _e&&(0,f.m)(_e.remove)&&(0,f.m)(_e.add)&&(0,f.m)(_e.unsubscribe)}function le(_e){(0,f.m)(_e)?_e():_e.unsubscribe()}},2416:(Rt,xe,N)=>{N.d(xe,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Rt,xe,N)=>{N.d(xe,{E:()=>$});const $=new(N(8306).y)(pe=>pe.complete())},8996:(Rt,xe,N)=>{N.d(xe,{D:()=>Me});var f=N(8421),$=N(5363),O=N(9468),we=N(8306),le=N(2202),_e=N(576),z=N(9672);function Z(Ee,Ze){if(!Ee)throw new Error("Iterable cannot be null");return new we.y(Q=>{(0,z.f)(Q,Ze,()=>{const et=Ee[Symbol.asyncIterator]();(0,z.f)(Q,Ze,()=>{et.next().then(st=>{st.done?Q.complete():Q.next(st.value)})},0,!0)})})}var $e=N(3670),Oe=N(8239),Pe=N(1144),Le=N(6495),me=N(2206),be=N(4532),rt=N(3260);function Me(Ee,Ze){return Ze?function Ne(Ee,Ze){if(null!=Ee){if((0,$e.c)(Ee))return function ne(Ee,Ze){return(0,f.Xf)(Ee).pipe((0,O.R)(Ze),(0,$.Q)(Ze))}(Ee,Ze);if((0,Pe.z)(Ee))return function ae(Ee,Ze){return new we.y(Q=>{let et=0;return Ze.schedule(function(){et===Ee.length?Q.complete():(Q.next(Ee[et++]),Q.closed||this.schedule())})})}(Ee,Ze);if((0,Oe.t)(Ee))return function pe(Ee,Ze){return(0,f.Xf)(Ee).pipe((0,O.R)(Ze),(0,$.Q)(Ze))}(Ee,Ze);if((0,me.D)(Ee))return Z(Ee,Ze);if((0,Le.T)(Ee))return function G(Ee,Ze){return new we.y(Q=>{let et;return(0,z.f)(Q,Ze,()=>{et=Ee[le.h](),(0,z.f)(Q,Ze,()=>{let st,se;try{({value:st,done:se}=et.next())}catch(ie){return void Q.error(ie)}se?Q.complete():Q.next(st)},0,!0)}),()=>(0,_e.m)(null==et?void 0:et.return)&&et.return()})}(Ee,Ze);if((0,rt.L)(Ee))return function qe(Ee,Ze){return Z((0,rt.Q)(Ee),Ze)}(Ee,Ze)}throw(0,be.z)(Ee)}(Ee,Ze):(0,f.Xf)(Ee)}},8421:(Rt,xe,N)=>{N.d(xe,{Xf:()=>$e});var f=N(655),$=N(1144),O=N(8239),ne=N(8306),pe=N(3670),we=N(2206),ae=N(4532),le=N(6495),_e=N(3260),z=N(576),G=N(7849),Z=N(8822);function $e(Ne){if(Ne instanceof ne.y)return Ne;if(null!=Ne){if((0,pe.c)(Ne))return function Oe(Ne){return new ne.y(Me=>{const Ee=Ne[Z.L]();if((0,z.m)(Ee.subscribe))return Ee.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,$.z)(Ne))return function Pe(Ne){return new ne.y(Me=>{for(let Ee=0;Ee<Ne.length&&!Me.closed;Ee++)Me.next(Ne[Ee]);Me.complete()})}(Ne);if((0,O.t)(Ne))return function Le(Ne){return new ne.y(Me=>{Ne.then(Ee=>{Me.closed||(Me.next(Ee),Me.complete())},Ee=>Me.error(Ee)).then(null,G.h)})}(Ne);if((0,we.D)(Ne))return be(Ne);if((0,le.T)(Ne))return function me(Ne){return new ne.y(Me=>{for(const Ee of Ne)if(Me.next(Ee),Me.closed)return;Me.complete()})}(Ne);if((0,_e.L)(Ne))return function rt(Ne){return be((0,_e.Q)(Ne))}(Ne)}throw(0,ae.z)(Ne)}function be(Ne){return new ne.y(Me=>{(function qe(Ne,Me){var Ee,Ze,Q,et;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(Ne);!(Ze=yield Ee.next()).done;)if(Me.next(Ze.value),Me.closed)return}catch(st){Q={error:st}}finally{try{Ze&&!Ze.done&&(et=Ee.return)&&(yield et.call(Ee))}finally{if(Q)throw Q.error}}Me.complete()})})(Ne,Me).catch(Ee=>Me.error(Ee))})}},6451:(Rt,xe,N)=>{N.d(xe,{T:()=>we});var f=N(8189),$=N(8421),O=N(515),ne=N(7669),pe=N(8996);function we(...ae){const le=(0,ne.yG)(ae),_e=(0,ne._6)(ae,1/0),z=ae;return z.length?1===z.length?(0,$.Xf)(z[0]):(0,f.J)(_e)((0,pe.D)(z,le)):O.E}},5403:(Rt,xe,N)=>{N.d(xe,{x:()=>$,Q:()=>O});var f=N(2961);function $(ne,pe,we,ae,le){return new O(ne,pe,we,ae,le)}class O extends f.Lv{constructor(pe,we,ae,le,_e,z){super(pe),this.onFinalize=_e,this.shouldUnsubscribe=z,this._next=we?function(G){try{we(G)}catch(Z){pe.error(Z)}}:super._next,this._error=le?function(G){try{le(G)}catch(Z){pe.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(G){pe.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},4004:(Rt,xe,N)=>{N.d(xe,{U:()=>O});var f=N(4482),$=N(5403);function O(ne,pe){return(0,f.e)((we,ae)=>{let le=0;we.subscribe((0,$.x)(ae,_e=>{ae.next(ne.call(pe,_e,le++))}))})}},8189:(Rt,xe,N)=>{N.d(xe,{J:()=>O});var f=N(5577),$=N(4671);function O(ne=1/0){return(0,f.z)($.y,ne)}},5577:(Rt,xe,N)=>{N.d(xe,{z:()=>le});var f=N(4004),$=N(8421),O=N(4482),ne=N(9672),pe=N(5403),ae=N(576);function le(_e,z,G=1/0){return(0,ae.m)(z)?le((Z,$e)=>(0,f.U)((Oe,Pe)=>z(Z,Oe,$e,Pe))((0,$.Xf)(_e(Z,$e))),G):("number"==typeof z&&(G=z),(0,O.e)((Z,$e)=>function we(_e,z,G,Z,$e,Oe,Pe,Le){const me=[];let be=0,rt=0,qe=!1;const Ne=()=>{qe&&!me.length&&!be&&z.complete()},Me=Ze=>be<Z?Ee(Ze):me.push(Ze),Ee=Ze=>{Oe&&z.next(Ze),be++;let Q=!1;(0,$.Xf)(G(Ze,rt++)).subscribe((0,pe.x)(z,et=>{null==$e||$e(et),Oe?Me(et):z.next(et)},()=>{Q=!0},void 0,()=>{if(Q)try{for(be--;me.length&&be<Z;){const et=me.shift();Pe?(0,ne.f)(z,Pe,()=>Ee(et)):Ee(et)}Ne()}catch(et){z.error(et)}}))};return _e.subscribe((0,pe.x)(z,Me,()=>{qe=!0,Ne()})),()=>{null==Le||Le()}}(Z,$e,_e,G)))}},5363:(Rt,xe,N)=>{N.d(xe,{Q:()=>ne});var f=N(9672),$=N(4482),O=N(5403);function ne(pe,we=0){return(0,$.e)((ae,le)=>{ae.subscribe((0,O.x)(le,_e=>(0,f.f)(le,pe,()=>le.next(_e),we),()=>(0,f.f)(le,pe,()=>le.complete(),we),_e=>(0,f.f)(le,pe,()=>le.error(_e),we)))})}},3099:(Rt,xe,N)=>{N.d(xe,{B:()=>we});var f=N(8996),$=N(5698),O=N(7579),ne=N(2961),pe=N(4482);function we(le={}){const{connector:_e=(()=>new O.x),resetOnError:z=!0,resetOnComplete:G=!0,resetOnRefCountZero:Z=!0}=le;return $e=>{let Oe=null,Pe=null,Le=null,me=0,be=!1,rt=!1;const qe=()=>{null==Pe||Pe.unsubscribe(),Pe=null},Ne=()=>{qe(),Oe=Le=null,be=rt=!1},Me=()=>{const Ee=Oe;Ne(),null==Ee||Ee.unsubscribe()};return(0,pe.e)((Ee,Ze)=>{me++,!rt&&!be&&qe();const Q=Le=null!=Le?Le:_e();Ze.add(()=>{me--,0===me&&!rt&&!be&&(Pe=ae(Me,Z))}),Q.subscribe(Ze),Oe||(Oe=new ne.Hp({next:et=>Q.next(et),error:et=>{rt=!0,qe(),Pe=ae(Ne,z,et),Q.error(et)},complete:()=>{be=!0,qe(),Pe=ae(Ne,G),Q.complete()}}),(0,f.D)(Ee).subscribe(Oe))})($e)}}function ae(le,_e,...z){return!0===_e?(le(),null):!1===_e?null:_e(...z).pipe((0,$.q)(1)).subscribe(()=>le())}},9468:(Rt,xe,N)=>{N.d(xe,{R:()=>$});var f=N(4482);function $(O,ne=0){return(0,f.e)((pe,we)=>{we.add(O.schedule(()=>pe.subscribe(we),ne))})}},5698:(Rt,xe,N)=>{N.d(xe,{q:()=>ne});var f=N(515),$=N(4482),O=N(5403);function ne(pe){return pe<=0?()=>f.E:(0,$.e)((we,ae)=>{let le=0;we.subscribe((0,O.x)(ae,_e=>{++le<=pe&&(ae.next(_e),pe<=le&&ae.complete())}))})}},8505:(Rt,xe,N)=>{N.d(xe,{b:()=>pe});var f=N(576),$=N(4482),O=N(5403),ne=N(4671);function pe(we,ae,le){const _e=(0,f.m)(we)||ae||le?{next:we,error:ae,complete:le}:we;return _e?(0,$.e)((z,G)=>{var Z;null===(Z=_e.subscribe)||void 0===Z||Z.call(_e);let $e=!0;z.subscribe((0,O.x)(G,Oe=>{var Pe;null===(Pe=_e.next)||void 0===Pe||Pe.call(_e,Oe),G.next(Oe)},()=>{var Oe;$e=!1,null===(Oe=_e.complete)||void 0===Oe||Oe.call(_e),G.complete()},Oe=>{var Pe;$e=!1,null===(Pe=_e.error)||void 0===Pe||Pe.call(_e,Oe),G.error(Oe)},()=>{var Oe,Pe;$e&&(null===(Oe=_e.unsubscribe)||void 0===Oe||Oe.call(_e)),null===(Pe=_e.finalize)||void 0===Pe||Pe.call(_e)}))}):ne.y}},4408:(Rt,xe,N)=>{N.d(xe,{o:()=>pe});var f=N(727);class $ extends f.w0{constructor(ae,le){super()}schedule(ae,le=0){return this}}const O={setInterval(we,ae,...le){const{delegate:_e}=O;return(null==_e?void 0:_e.setInterval)?_e.setInterval(we,ae,...le):setInterval(we,ae,...le)},clearInterval(we){const{delegate:ae}=O;return((null==ae?void 0:ae.clearInterval)||clearInterval)(we)},delegate:void 0};var ne=N(8737);class pe extends ${constructor(ae,le){super(ae,le),this.scheduler=ae,this.work=le,this.pending=!1}schedule(ae,le=0){if(this.closed)return this;this.state=ae;const _e=this.id,z=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(z,_e,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(z,this.id,le),this}requestAsyncId(ae,le,_e=0){return O.setInterval(ae.flush.bind(ae,this),_e)}recycleAsyncId(ae,le,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return le;O.clearInterval(le)}execute(ae,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ae,le);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,le){let z,_e=!1;try{this.work(ae)}catch(G){_e=!0,z=G||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ae,scheduler:le}=this,{actions:_e}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(_e,this),null!=ae&&(this.id=this.recycleAsyncId(le,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Rt,xe,N)=>{N.d(xe,{v:()=>O});var f=N(6063);class ${constructor(pe,we=$.now){this.schedulerActionCtor=pe,this.now=we}schedule(pe,we=0,ae){return new this.schedulerActionCtor(this,pe).schedule(ae,we)}}$.now=f.l.now;class O extends ${constructor(pe,we=$.now){super(pe,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:we}=this;if(this._active)return void we.push(pe);let ae;this._active=!0;do{if(ae=pe.execute(pe.state,pe.delay))break}while(pe=we.shift());if(this._active=!1,ae){for(;pe=we.shift();)pe.unsubscribe();throw ae}}}},4986:(Rt,xe,N)=>{N.d(xe,{z:()=>O});var f=N(4408);const O=new(N(7565).v)(f.o)},6063:(Rt,xe,N)=>{N.d(xe,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Rt,xe,N)=>{N.d(xe,{z:()=>f});const f={setTimeout($,O,...ne){const{delegate:pe}=f;return(null==pe?void 0:pe.setTimeout)?pe.setTimeout($,O,...ne):setTimeout($,O,...ne)},clearTimeout($){const{delegate:O}=f;return((null==O?void 0:O.clearTimeout)||clearTimeout)($)},delegate:void 0}},2202:(Rt,xe,N)=>{N.d(xe,{h:()=>$});const $=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Rt,xe,N)=>{N.d(xe,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Rt,xe,N)=>{N.d(xe,{_6:()=>we,jO:()=>ne,yG:()=>pe});var f=N(576);function O(ae){return ae[ae.length-1]}function ne(ae){return(0,f.m)(O(ae))?ae.pop():void 0}function pe(ae){return function $(ae){return ae&&(0,f.m)(ae.schedule)}(O(ae))?ae.pop():void 0}function we(ae,le){return"number"==typeof O(ae)?ae.pop():le}},8737:(Rt,xe,N)=>{function f($,O){if($){const ne=$.indexOf(O);0<=ne&&$.splice(ne,1)}}N.d(xe,{P:()=>f})},3888:(Rt,xe,N)=>{function f($){const ne=$(pe=>{Error.call(pe),pe.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}N.d(xe,{d:()=>f})},2806:(Rt,xe,N)=>{N.d(xe,{x:()=>O,O:()=>ne});var f=N(2416);let $=null;function O(pe){if(f.v.useDeprecatedSynchronousErrorHandling){const we=!$;if(we&&($={errorThrown:!1,error:null}),pe(),we){const{errorThrown:ae,error:le}=$;if($=null,ae)throw le}}else pe()}function ne(pe){f.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=pe)}},9672:(Rt,xe,N)=>{function f($,O,ne,pe=0,we=!1){const ae=O.schedule(function(){ne(),we?$.add(this.schedule(null,pe)):this.unsubscribe()},pe);if($.add(ae),!we)return ae}N.d(xe,{f:()=>f})},4671:(Rt,xe,N)=>{function f($){return $}N.d(xe,{y:()=>f})},1144:(Rt,xe,N)=>{N.d(xe,{z:()=>f});const f=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(Rt,xe,N)=>{N.d(xe,{D:()=>$});var f=N(576);function $(O){return Symbol.asyncIterator&&(0,f.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(Rt,xe,N)=>{function f($){return"function"==typeof $}N.d(xe,{m:()=>f})},3670:(Rt,xe,N)=>{N.d(xe,{c:()=>O});var f=N(8822),$=N(576);function O(ne){return(0,$.m)(ne[f.L])}},6495:(Rt,xe,N)=>{N.d(xe,{T:()=>O});var f=N(2202),$=N(576);function O(ne){return(0,$.m)(null==ne?void 0:ne[f.h])}},8239:(Rt,xe,N)=>{N.d(xe,{t:()=>$});var f=N(576);function $(O){return(0,f.m)(null==O?void 0:O.then)}},3260:(Rt,xe,N)=>{N.d(xe,{Q:()=>O,L:()=>ne});var f=N(655),$=N(576);function O(pe){return(0,f.FC)(this,arguments,function*(){const ae=pe.getReader();try{for(;;){const{value:le,done:_e}=yield(0,f.qq)(ae.read());if(_e)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(le)}}finally{ae.releaseLock()}})}function ne(pe){return(0,$.m)(null==pe?void 0:pe.getReader)}},4482:(Rt,xe,N)=>{N.d(xe,{A:()=>$,e:()=>O});var f=N(576);function $(ne){return(0,f.m)(null==ne?void 0:ne.lift)}function O(ne){return pe=>{if($(pe))return pe.lift(function(we){try{return ne(we,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Rt,xe,N)=>{N.d(xe,{h:()=>O});var f=N(2416),$=N(3410);function O(ne){$.z.setTimeout(()=>{const{onUnhandledError:pe}=f.v;if(!pe)throw ne;pe(ne)})}},4532:(Rt,xe,N)=>{function f($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(xe,{z:()=>f})},655:(Rt,xe,N)=>{function ne(se,ie){var oe={};for(var Te in se)Object.prototype.hasOwnProperty.call(se,Te)&&ie.indexOf(Te)<0&&(oe[Te]=se[Te]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(Te=Object.getOwnPropertySymbols(se);he<Te.length;he++)ie.indexOf(Te[he])<0&&Object.prototype.propertyIsEnumerable.call(se,Te[he])&&(oe[Te[he]]=se[Te[he]])}return oe}function pe(se,ie,oe,Te){var It,he=arguments.length,We=he<3?ie:null===Te?Te=Object.getOwnPropertyDescriptor(ie,oe):Te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)We=Reflect.decorate(se,ie,oe,Te);else for(var Ut=se.length-1;Ut>=0;Ut--)(It=se[Ut])&&(We=(he<3?It(We):he>3?It(ie,oe,We):It(ie,oe))||We);return he>3&&We&&Object.defineProperty(ie,oe,We),We}function ae(se,ie){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(se,ie)}function le(se,ie,oe,Te){return new(oe||(oe=Promise))(function(We,It){function Ut(pn){try{Be(Te.next(pn))}catch($n){It($n)}}function Ft(pn){try{Be(Te.throw(pn))}catch($n){It($n)}}function Be(pn){pn.done?We(pn.value):function he(We){return We instanceof oe?We:new oe(function(It){It(We)})}(pn.value).then(Ut,Ft)}Be((Te=Te.apply(se,ie||[])).next())})}function me(se){return this instanceof me?(this.v=se,this):new me(se)}function be(se,ie,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,Te=oe.apply(se,ie||[]),We=[];return he={},It("next"),It("throw"),It("return"),he[Symbol.asyncIterator]=function(){return this},he;function It(Dn){Te[Dn]&&(he[Dn]=function(Vt){return new Promise(function(Nt,Ge){We.push([Dn,Vt,Nt,Ge])>1||Ut(Dn,Vt)})})}function Ut(Dn,Vt){try{!function Ft(Dn){Dn.value instanceof me?Promise.resolve(Dn.value.v).then(Be,pn):$n(We[0][2],Dn)}(Te[Dn](Vt))}catch(Nt){$n(We[0][3],Nt)}}function Be(Dn){Ut("next",Dn)}function pn(Dn){Ut("throw",Dn)}function $n(Dn,Vt){Dn(Vt),We.shift(),We.length&&Ut(We[0][0],We[0][1])}}function qe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ie=se[Symbol.asyncIterator];return ie?ie.call(se):(se=function Z(se){var ie="function"==typeof Symbol&&Symbol.iterator,oe=ie&&se[ie],Te=0;if(oe)return oe.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Te>=se.length&&(se=void 0),{value:se&&se[Te++],done:!se}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),oe={},Te("next"),Te("throw"),Te("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function Te(We){oe[We]=se[We]&&function(It){return new Promise(function(Ut,Ft){!function he(We,It,Ut,Ft){Promise.resolve(Ft).then(function(Be){We({value:Be,done:Ut})},It)}(Ut,Ft,(It=se[We](It)).done,It.value)})}}}N.d(xe,{_T:()=>ne,gn:()=>pe,w6:()=>ae,mG:()=>le,qq:()=>me,FC:()=>be,KL:()=>qe})},5e3:(Rt,xe,N)=>{N.d(xe,{deG:()=>X_,tb:()=>Xm,AFp:()=>Qm,ip1:()=>TE,CZH:()=>DE,hGG:()=>Kb,z2F:()=>BE,sBO:()=>ER,Sil:()=>Sb,_Vd:()=>Gf,EJc:()=>Pd,SBq:()=>cu,qLn:()=>vg,vpe:()=>Fi,tBr:()=>go,XFs:()=>Se,OlP:()=>lr,zs3:()=>Hs,ZZ4:()=>d_,aQg:()=>lp,soG:()=>tp,YKP:()=>QC,h0i:()=>Kl,PXZ:()=>VE,R0b:()=>Ki,FiY:()=>qo,Lbi:()=>Tb,g9A:()=>Jm,Qsj:()=>Wf,FYo:()=>Wl,JOm:()=>yo,tp0:()=>Va,Rgc:()=>Yf,dDg:()=>OE,q4F:()=>KC,GfV:()=>Qv,s_b:()=>Ql,ifc:()=>vt,eFA:()=>n_,G48:()=>HE,Gpc:()=>G,X6Q:()=>$E,_c5:()=>t0,VLi:()=>Mb,c2e:()=>e_,zSh:()=>mf,wAp:()=>nt,vHH:()=>Pe,cg1:()=>hm,kL8:()=>pm,dqk:()=>Wt,sIi:()=>ud,CqO:()=>zI,QGY:()=>em,F4k:()=>dd,RDi:()=>qp,AaK:()=>le,qOj:()=>Er,TTD:()=>Pu,_Bn:()=>Cm,xp6:()=>Sg,uIk:()=>fv,Tol:()=>Af,ekj:()=>Nv,Suo:()=>hb,Xpm:()=>De,lG2:()=>ce,Yz7:()=>Vt,cJS:()=>Ge,oAB:()=>M,Yjl:()=>ze,Y36:()=>zs,_UZ:()=>Tv,qZA:()=>ra,TgZ:()=>Rr,EpF:()=>Xg,n5z:()=>Rh,LFG:()=>cr,$8M:()=>Zu,$Z:()=>bv,NdJ:()=>qs,CRH:()=>Fm,oxw:()=>Sv,ALo:()=>nb,lcZ:()=>rb,xi3:()=>ib,Hsn:()=>hd,F$t:()=>Ks,Q6J:()=>Nl,iGM:()=>db,CHM:()=>j_,LSH:()=>zc,YNc:()=>Ml,_uU:()=>Mf,hij:()=>pd});var f=N(7579),$=N(727),O=N(8306),ne=N(6451),pe=N(3099);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function ae(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=we({__forward_ref__:we});function G(s){return s.__forward_ref__=G,s.toString=function(){return le(this())},s}function Z(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}class Pe extends Error{constructor(o,u){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function Me(s,o){const u=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${be(s)} found${u}`)}function Ft(s,o){null==s&&function Be(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Vt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ge(s){return{providers:s.providers||[],imports:s.imports||[]}}function ht(s){return pt(s,Mn)||pt(s,kn)}function pt(s,o){return s.hasOwnProperty(o)?s[o]:null}function dn(s){return s&&(s.hasOwnProperty(Nn)||s.hasOwnProperty(Qn))?s[Nn]:null}const Mn=we({\u0275prov:we}),Nn=we({\u0275inj:we}),kn=we({ngInjectableDef:we}),Qn=we({ngInjectorDef:we});var Se=(()=>((Se=Se||{})[Se.Default=0]="Default",Se[Se.Host=1]="Host",Se[Se.Self=2]="Self",Se[Se.SkipSelf=4]="SkipSelf",Se[Se.Optional=8]="Optional",Se))();let ue;function Ke(s){const o=ue;return ue=s,o}function wt(s,o,u){const c=ht(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Se.Optional?null:void 0!==o?o:void Me(le(s),"Injector")}function $t(s){return{toString:s}.toString()}var un=(()=>((un=un||{})[un.OnPush=0]="OnPush",un[un.Default=1]="Default",un))(),vt=(()=>{return(s=vt||(vt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",vt;var s})();const gt="undefined"!=typeof globalThis&&globalThis,it="undefined"!=typeof window&&window,Hn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=gt||"undefined"!=typeof global&&global||it||Hn,on={},bt=[],Gn=we({\u0275cmp:we}),Qt=we({\u0275dir:we}),Xe=we({\u0275pipe:we}),Ae=we({\u0275mod:we}),ct=we({\u0275fac:we}),Y=we({__NG_ELEMENT_ID__:we});let ge=0;function De(s){return $t(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===un.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||vt.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,v=s.pipes;return c.id+=ge++,c.inputs=j(s.inputs,u),c.outputs=j(s.outputs),p&&p.forEach(w=>w(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(x):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(H):null,c})}function x(s){return tt(s)||function Mt(s){return s[Qt]||null}(s)}function H(s){return function mt(s){return s[Xe]||null}(s)}const X={};function M(s){return $t(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(X[s.id]=s.type),o})}function j(s,o){if(null==s)return on;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const ce=De;function ze(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function tt(s){return s[Gn]||null}function zt(s,o){const u=s[Ae]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function ii(s){return Array.isArray(s)&&"object"==typeof s[1]}function Vi(s){return Array.isArray(s)&&!0===s[1]}function Nu(s){return 0!=(8&s.flags)}function ah(s){return 2==(2&s.flags)}function Fo(s){return 1==(1&s.flags)}function Ui(s){return null!==s.template}function uh(s){return 0!=(512&s[2])}function Bi(s,o){return s.hasOwnProperty(ct)?s[ct]:null}class k_{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Pu(){return fc}function fc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ou),F_}function F_(){const s=Ea(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===on)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ou(s,o,u,c){const h=Ea(s)||function L_(s,o){return s[ss]=o}(s,{previous:on,current:null}),p=h.current||(h.current={}),v=h.previous,w=this.declaredInputs[u],C=v[w];p[w]=new k_(C&&C.currentValue,o,v===on),s[c]=o}Pu.ngInherit=!0;const ss="__ngSimpleChanges__";function Ea(s){return s[ss]||null}let mc;function qp(s){mc=s}function Xn(s){return!!s.listen}const Lu={createRenderer:(s,o)=>function Fu(){return void 0!==mc?mc:"undefined"!=typeof document?document:void 0}()};function Zn(s){for(;Array.isArray(s);)s=s[0];return s}function wa(s,o){return Zn(o[s])}function Zr(s,o){return Zn(o[s.index])}function yc(s,o){return s.data[o]}function os(s,o){return s[o]}function si(s,o){const u=o[s];return ii(u)?u:u[0]}function Lo(s){return 4==(4&s[2])}function Ia(s){return 128==(128&s[2])}function Ss(s,o){return null==o?null:s[o]}function lo(s){s[18]=0}function Vo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const jt={lFrame:vh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wc(){return jt.bindingsEnabled}function Ue(){return jt.lFrame.lView}function yn(){return jt.lFrame.tView}function j_(s){return jt.lFrame.contextLView=s,s[8]}function er(){let s=Ic();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ic(){return jt.lFrame.currentTNode}function ji(s,o){const u=jt.lFrame;u.currentTNode=s,u.isParent=o}function gh(){return jt.lFrame.isParent}function Bu(){jt.lFrame.isParent=!1}function Ca(){return jt.isInCheckNoChangesMode}function Cc(s){jt.isInCheckNoChangesMode=s}function Or(){const s=jt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function ba(){return jt.lFrame.bindingIndex++}function $i(s){const o=jt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function H_(s,o){const u=jt.lFrame;u.bindingIndex=u.bindingRootIndex=s,_h(o)}function _h(s){jt.lFrame.currentDirectiveIndex=s}function G_(){return jt.lFrame.currentQueryIndex}function yh(s){jt.lFrame.currentQueryIndex=s}function W_(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Dc(s,o,u){if(u&Se.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&Se.Host||(h=W_(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=jt.lFrame=Bo();return c.currentTNode=o,c.lView=s,!0}function ju(s){const o=Bo(),u=s[1];jt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Bo(){const s=jt.lFrame,o=null===s?null:s.child;return null===o?vh(s):o}function vh(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function z_(){const s=jt.lFrame;return jt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const q_=z_;function $u(){const s=z_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function oi(){return jt.lFrame.selectedIndex}function Rs(s){jt.lFrame.selectedIndex=s}function ir(){const s=jt.lFrame;return yc(s.tView,s.selectedIndex)}function Hu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:D,ngOnDestroy:R}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),w&&((s.contentHooks||(s.contentHooks=[])).push(u,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,w)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Eh(s,o,u){Z_(s,o,3,u)}function wh(s,o,u,c){(3&s[2])===u&&Z_(s,o,u,c)}function Ih(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Z_(s,o,u,c){const p=null!=c?c:-1,v=o.length-1;let w=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(w=o[C],null!=c&&w>=c)break}else o[C]<0&&(s[18]+=65536),(w<p||-1==p)&&(Qp(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Qp(s,o,u,c){const h=u[c]<0,p=u[c+1],w=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Sc{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ot(s,o,u){const c=Xn(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const v=u[h++],w=u[h++],C=u[h++];c?s.setAttribute(o,w,C,v):o.setAttributeNS(v,w,C)}else{const v=p,w=u[++h];ai(v)?c&&s.setProperty(o,v,w):c?s.setAttribute(o,v,w):o.setAttribute(v,w),h++}}return h}function as(s){return 3===s||4===s||6===s}function ai(s){return 64===s.charCodeAt(0)}function kr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Xp(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Xp(s,o,u,c,h){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function _r(s){return-1!==s}function Da(s){return 32767&s}function $o(s,o){let u=function bh(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Gu=!0;function ho(s){const o=Gu;return Gu=s,o}let Wu=0;function tr(s,o){const u=Sh(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Sa(c.data,s),Sa(o,null),Sa(c.blueprint,null));const h=Aa(s,o),p=s.injectorIndex;if(_r(h)){const v=Da(h),w=$o(h,o),C=w[1].data;for(let D=0;D<8;D++)o[p+D]=w[v+D]|C[v+D]}return o[p+8]=h,p}function Sa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Sh(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Aa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],v=p.type;if(c=2===v?p.declTNode:1===v?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Ra(s,o,u){!function Dh(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Y)&&(c=u[Y]),null==c&&(c=u[Y]=Wu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function qu(s,o,u){if(u&Se.Optional)return s;Me(o,"NodeInjector")}function Mc(s,o,u,c){if(u&Se.Optional&&void 0===c&&(c=null),0==(u&(Se.Self|Se.Host))){const h=s[9],p=Ke(void 0);try{return h?h.get(o,c,u&Se.Optional):wt(o,c,u&Se.Optional)}finally{Ke(p)}}return qu(c,o,u)}function Ma(s,o,u,c=Se.Default,h){if(null!==s){const p=function xa(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Y)?s[Y]:void 0;return"number"==typeof o?o>=0?255&o:J_:o}(u);if("function"==typeof p){if(!Dc(o,s,c))return c&Se.Host?qu(h,u,c):Mc(o,u,c,h);try{const v=p(c);if(null!=v||c&Se.Optional)return v;Me(u)}finally{q_()}}else if("number"==typeof p){let v=null,w=Sh(s,o),C=-1,D=c&Se.Host?o[16][6]:null;for((-1===w||c&Se.SkipSelf)&&(C=-1===w?Aa(s,o):o[w+8],-1!==C&&Br(c,!1)?(v=o[1],w=Da(C),o=$o(C,o)):w=-1);-1!==w;){const R=o[1];if(Ah(p,w,R.data)){const L=tg(w,o,u,v,c,D);if(L!==Ku)return L}C=o[w+8],-1!==C&&Br(c,o[1].data[w+8]===D)&&Ah(p,w,o)?(v=R,w=Da(C),o=$o(C,o)):w=-1}}}return Mc(o,u,c,h)}const Ku={};function J_(){return new Ho(er(),Ue())}function tg(s,o,u,c,h,p){const v=o[1],w=v.data[s+8],R=Ns(w,v,u,null==c?ah(w)&&Gu:c!=v&&0!=(3&w.type),h&Se.Host&&p===w);return null!==R?Na(o,v,R,w):Ku}function Ns(s,o,u,c,h){const p=s.providerIndexes,v=o.data,w=1048575&p,C=s.directiveStart,R=p>>20,W=h?w+R:s.directiveEnd;for(let te=c?w:w+R;te<W;te++){const de=v[te];if(te<C&&u===de||te>=C&&de.type===u)return te}if(h){const te=v[C];if(te&&Ui(te)&&te.type===u)return C}return null}function Na(s,o,u,c){let h=s[u];const p=o.data;if(function Ch(s){return s instanceof Sc}(h)){const v=h;v.resolving&&function rt(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(be(p[u]));const w=ho(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Ke(v.injectImpl):null;Dc(s,c,Se.Default);try{h=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function jo(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const v=fc(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&Ke(C),ho(w),v.resolving=!1,q_()}}return h}function Ah(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Br(s,o){return!(s&Se.Self||s&Se.Host&&o)}class Ho{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ma(this._tNode,this._lView,o,c,u)}}function Rh(s){return $t(()=>{const o=s.prototype.constructor,u=o[ct]||yr(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[ct]||yr(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function yr(s){return $e(s)?()=>{const o=yr(Z(s));return o&&o()}:Bi(s)}function Zu(s){return function zu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(as(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(er(),s)}const xs="__parameters__";function nr(s,o,u){return $t(()=>{const c=function cs(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const v=new h(...p);return w.annotation=v,w;function w(C,D,R){const L=C.hasOwnProperty(xs)?C[xs]:Object.defineProperty(C,xs,{value:[]})[xs];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class lr{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Vt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const X_=new lr("AnalyzeForEntryComponents");function ui(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),ui(c,o)):o!==s&&o.push(c)}return o}function hs(s,o){s.forEach(u=>Array.isArray(u)?hs(u,o):o(u))}function Ju(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Xu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Hi(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function Fr(s,o,u){let c=fs(s,o);return c>=0?s[1|c]=u:(c=~c,function rg(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Oc(s,o){const u=fs(s,o);if(u>=0)return s[1|u]}function fs(s,o){return function kc(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),v=s[p<<u];if(o===v)return p<<u;v>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const Wo={},Lc="__NG_DI_FLAG__",ka="ngTempTokenPath",ag=/\n/gm,tl="__source",ug=we({provide:String,useValue:we});let fo;function ps(s){const o=fo;return fo=s,o}function vn(s,o=Se.Default){if(void 0===fo)throw new Pe(203,"");return null===fo?wt(s,void 0,o):fo.get(s,o&Se.Optional?null:void 0,o)}function cr(s,o=Se.Default){return(function ke(){return ue}()||vn)(Z(s),o)}const zo=cr;function nl(s){const o=[];for(let u=0;u<s.length;u++){const c=Z(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Pe(900,"");let h,p=Se.Default;for(let v=0;v<c.length;v++){const w=c[v],C=Uc(w);"number"==typeof C?-1===C?h=w.token:p|=C:h=w}o.push(cr(h,p))}else o.push(cr(c))}return o}function po(s,o){return s[Lc]=o,s.prototype[Lc]=o,s}function Uc(s){return s[Lc]}const go=po(nr("Inject",s=>({token:s})),-1),qo=po(nr("Optional"),8),Va=po(nr("SkipSelf"),4);class $c{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function mo(s){return s instanceof $c?s.changingThisBreaksApplicationSecurity:s}const m=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function zc(s){const o=function Wa(){const s=Ue();return s&&s[12]}();return o?o.sanitize(Fn.URL,s)||"":function Fs(s,o){const u=function al(s){return s instanceof $c&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?mo(s):function A(s){return(s=String(s)).match(m)||s.match(I)?s:"unsafe:"+s}(me(s))}const Ew="__ngContext__";function ci(s,o){s[Ew]=o}function Iy(s){const o=function $h(s){return s[Ew]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function fl(s){return s.ngOriginalError}function eS(s,...o){s.error(...o)}class vg{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function XD(s){return s&&s.ngErrorLogger||eS}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&fl(o);for(;u&&fl(u);)u=fl(u);return u||null}}const lS=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function Vs(s){return s instanceof Function?s():s}var yo=(()=>((yo=yo||{})[yo.Important=1]="Important",yo[yo.DashCase=2]="DashCase",yo))();function Eg(s,o){return undefined(s,o)}function Gh(s){const o=s[3];return Vi(o)?o[3]:o}function Wh(s){return Mw(s[13])}function Ig(s){return Mw(s[4])}function Mw(s){for(;null!==s&&!Vi(s);)s=s[4];return s}function qc(s,o,u,c,h){if(null!=c){let p,v=!1;Vi(c)?p=c:ii(c)&&(v=!0,c=c[0]);const w=Zn(c);0===s&&null!==u?null==h?Ny(o,u,w):Gi(o,u,w,h||null,!0):1===s&&null!==u?Gi(o,u,w,h||null,!0):2===s?function ky(s,o,u){const c=vo(s,o);c&&function _S(s,o,u,c){Xn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,w,v):3===s&&o.destroyNode(w),null!=p&&function Ly(s,o,u,c,h){const p=u[7];p!==Zn(u)&&qc(o,s,c,p,h);for(let w=10;w<u.length;w++){const C=u[w];Dg(C[1],C,s,o,c,p)}}(o,s,p,u,h)}}function Sy(s,o,u){if(Xn(s))return s.createElement(o,u);{const c=null!==u?function zp(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function xw(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Vo(h,-1)),u.splice(c,1)}function Ay(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&xw(h,c),o>0&&(s[u-1][4]=c[4]);const p=Xu(s,10+o);!function Ei(s,o){Dg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Ry(s,o){if(!(256&o[2])){const u=o[11];Xn(u)&&u.destroyNode&&Dg(s,o,u,3,null,null),function Cg(s){let o=s[13];if(!o)return My(s[1],s);for(;o;){let u=null;if(ii(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ii(o)&&My(o[1],o),o=o[3];null===o&&(o=s),ii(o)&&My(o[1],o),u=o&&o[4]}o=u}}(o)}}function My(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Ow(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Sc)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=h[p[v]],C=p[v+1];try{C.call(w)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Pw(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],w="function"==typeof v?v(o):Zn(o[v]),C=c[h=u[p+2]],D=u[p+3];"boolean"==typeof D?w.removeEventListener(u[p],C,D):D>=0?c[h=D]():c[h=-D].unsubscribe(),p+=2}else{const v=c[h=u[p+1]];u[p].call(v)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Xn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Vi(o[3])){u!==o[3]&&xw(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function bg(s,o,u){return function mS(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===vt.None||h===vt.Emulated)return null}return Zr(c,u)}(s,o.parent,u)}function Gi(s,o,u,c,h){Xn(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function Ny(s,o,u){Xn(s)?s.appendChild(o,u):o.appendChild(u)}function kw(s,o,u,c,h){null!==c?Gi(s,o,u,c,h):Ny(s,o,u)}function vo(s,o){return Xn(s)?s.parentNode(o):o.parentNode}function Fw(s,o,u){return xy(s,o,u)}let xy=function Lw(s,o,u){return 40&s.type?Zr(s,u):null};function Tg(s,o,u,c){const h=bg(s,c,o),p=o[11],w=Fw(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)kw(p,h,u[C],w,!1);else kw(p,h,u,w,!1)}function Zc(s,o){if(null!==o){const u=o.type;if(3&u)return Zr(o,s);if(4&u)return Oy(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Zc(s,c);{const h=s[o.index];return Vi(h)?Oy(-1,h):Zn(h)}}if(32&u)return Eg(o,s)()||Zn(s[o.index]);{const c=Uw(s,o);return null!==c?Array.isArray(c)?c[0]:Zc(Gh(s[16]),c):Zc(s,o.next)}}return null}function Uw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Oy(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Zc(c,h)}return o[7]}function Fy(s,o,u,c,h,p,v){for(;null!=u;){const w=c[u.index],C=u.type;if(v&&0===o&&(w&&ci(Zn(w),c),u.flags|=4),64!=(64&u.flags))if(8&C)Fy(s,o,u.child,c,h,p,!1),qc(o,s,h,w,p);else if(32&C){const D=Eg(u,c);let R;for(;R=D();)qc(o,s,h,R,p);qc(o,s,h,w,p)}else 16&C?jw(s,o,c,u,h,p):qc(o,s,h,w,p);u=v?u.projectionNext:u.next}}function Dg(s,o,u,c,h,p){Fy(u,c,s.firstChild,o,h,p,!1)}function jw(s,o,u,c,h,p){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let D=0;D<C.length;D++)qc(o,s,h,C[D],p);else Fy(s,o,C,v[3],h,p,!0)}function qh(s,o,u){Xn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Kh(s,o,u){Xn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function $w(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const Zh="ng-template";function Hw(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==$w(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Gw(s){return 4===s.type&&s.value!==Zh}function Us(s,o,u){return o===(4!==s.type||u?s.value:Zh)}function pP(s,o,u){let c=4;const h=s.attrs||[],p=function gs(s){for(let o=0;o<s.length;o++)if(as(s[o]))return o;return s.length}(h);let v=!1;for(let w=0;w<o.length;w++){const C=o[w];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!Us(s,C,u)||""===C&&1===o.length){if(Bs(c))return!1;v=!0}}else{const D=8&c?C:o[++w];if(8&c&&null!==s.attrs){if(!Hw(s.attrs,D,u)){if(Bs(c))return!1;v=!0}continue}const L=Ce(8&c?"class":C,h,Gw(s),u);if(-1===L){if(Bs(c))return!1;v=!0;continue}if(""!==D){let W;W=L>p?"":h[L+1].toLowerCase();const te=8&c?W:null;if(te&&-1!==$w(te,D,0)||2&c&&D!==W){if(Bs(c))return!1;v=!0}}}}else{if(!v&&!Bs(c)&&!Bs(C))return!1;if(v&&Bs(C))continue;v=!1,c=C|1&c}}return Bs(c)||v}function Bs(s){return 0==(1&s)}function Ce(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)p=!0;else{if(1===v||2===v){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=p?1:2}return-1}return function K(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function On(s,o,u=!1){for(let c=0;c<o.length;c++)if(pP(s,o[c],u))return!0;return!1}function ES(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Eo(s,o){return s?":not("+o.trim()+")":o}function Tt(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const w=s[++u];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!Bs(v)&&(o+=Eo(p,h),h=""),c=v,p=p||!Bs(c);u++}return""!==h&&(o+=Eo(p,h)),o}const Jt={};function Sg(s){Yc(yn(),Ue(),oi()+s,Ca())}function Yc(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Eh(o,p,u)}else{const p=s.preOrderHooks;null!==p&&wh(o,p,0,u)}Rs(u)}function Qc(s,o){return s<<17|o<<2}function js(s){return s>>17&32767}function jr(s){return 2|s}function ms(s){return(131068&s)>>2}function $r(s,o){return-131069&s|o<<2}function Uy(s){return 1|s}function Pg(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];yh(h),v.contentQueries(2,o[p],p)}}}function ml(s,o,u,c,h,p,v,w,C,D){const R=o.blueprint.slice();return R[0]=h,R[2]=140|c,lo(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=w||s&&s[11],R[12]=C||s&&s[12]||null,R[9]=D||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function _l(s,o,u,c,h){let p=s.data[o];if(null===p)p=function Og(s,o,u,c,h){const p=Ic(),v=gh(),C=s.data[o]=function uI(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(v?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,u,c,h),function $_(){return jt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const v=function Uo(){const s=jt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ji(p,!0),p}function ed(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function td(s,o,u){ju(o);try{const c=s.viewQuery;null!==c&&ev(1,c,u);const h=s.template;null!==h&&qy(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Pg(s,o),s.staticViewQueries&&ev(2,s.viewQuery,u);const p=s.components;null!==p&&function Wy(s,o){for(let u=0;u<o.length;u++)Jy(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,$u()}}function yl(s,o,u,c){const h=o[2];if(256==(256&h))return;ju(o);const p=Ca();try{lo(o),function bc(s){return jt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&qy(s,o,u,2,c);const v=3==(3&h);if(!p)if(v){const D=s.preOrderCheckHooks;null!==D&&Eh(o,D,null)}else{const D=s.preOrderHooks;null!==D&&wh(o,D,0,null),Ih(o,0)}if(function af(s){for(let o=Wh(s);null!==o;o=Ig(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&Vo(p,1),h[2]|=1024}}}(o),function yI(s){for(let o=Wh(s);null!==o;o=Ig(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Ia(c)&&yl(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Pg(s,o),!p)if(v){const D=s.contentCheckHooks;null!==D&&Eh(o,D)}else{const D=s.contentHooks;null!==D&&wh(o,D,1),Ih(o,1)}!function xg(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Rs(~h);else{const p=h,v=u[++c],w=u[++c];H_(v,p),w(2,o[p])}}}finally{Rs(-1)}}(s,o);const w=s.components;null!==w&&function Gy(s,o){for(let u=0;u<o.length;u++)Vg(s,o[u])}(o,w);const C=s.viewQuery;if(null!==C&&ev(2,C,c),!p)if(v){const D=s.viewCheckHooks;null!==D&&Eh(o,D)}else{const D=s.viewHooks;null!==D&&wh(o,D,2),Ih(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Vo(o[3],-1))}finally{$u()}}function zy(s,o,u,c){const h=o[10],p=!Ca(),v=Lo(o);try{p&&!v&&h.begin&&h.begin(),v&&td(s,o,c),yl(s,o,u,c)}finally{p&&!v&&h.end&&h.end()}}function qy(s,o,u,c,h){const p=oi(),v=2&c;try{Rs(-1),v&&o.length>20&&Yc(s,o,20,Ca()),u(c,h)}finally{Rs(p)}}function Xh(s,o,u){!wc()||(function hI(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||tr(u,o),ci(c,o);const v=u.initialInputs;for(let w=h;w<p;w++){const C=s.data[w],D=Ui(C);D&&vl(o,u,C);const R=Na(o,s,w,u);ci(R,o),null!==v&&_I(0,w-h,R,C,0,v),D&&(si(u.index,o)[8]=R)}}(s,o,u,Zr(u,o)),128==(128&u.flags)&&function fI(s,o,u){const c=u.directiveStart,h=u.directiveEnd,v=u.index,w=function mh(){return jt.lFrame.currentDirectiveIndex}();try{Rs(v);for(let C=c;C<h;C++){const D=s.data[C],R=o[C];_h(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Qy(D,R)}}finally{Rs(-1),_h(w)}}(s,o,u))}function ef(s,o,u=Zr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],w=-1===v?u(o,s):s[v];s[h++]=w}}}function kg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ar(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ar(s,o,u,c,h,p,v,w,C,D){const R=20+c,L=R+h,W=function ni(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Jt);return u}(R,L),te="function"==typeof D?D():D;return W[1]={type:s,blueprint:W,template:u,queries:null,viewQuery:w,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function aI(s,o,u,c){const h=jg(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&tv(s).push(c,h.length-1))}function lI(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Fg(s,o,u,c){let h=!1;if(wc()){const p=function Lg(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];On(u,v.selectors,!1)&&(h||(h=[]),Ra(tr(u,o),s,v.type),Ui(v)?(pI(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==p){h=!0,gI(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const L=p[R];L.providersResolver&&L.providersResolver(L)}let w=!1,C=!1,D=ed(s,o,p.length,null);for(let R=0;R<p.length;R++){const L=p[R];u.mergedAttrs=kr(u.mergedAttrs,L.hostAttrs),mI(s,u,o,D,L),nd(D,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const W=L.type.prototype;!w&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),w=!0),!C&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),D++}!function NS(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,v=[];let w=null,C=null;for(let D=o.directiveStart;D<c;D++){const R=h[D],L=R.inputs,W=null===p||Gw(o)?null:sf(L,p);v.push(W),w=lI(L,D,w),C=lI(R.outputs,D,C)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=C}(s,u)}v&&function OS(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Pe(-301,!1);c.push(o[h],p)}}}(u,c,v)}return u.mergedAttrs=kr(u.mergedAttrs,u.attrs),h}function dI(s,o,u,c,h,p){const v=p.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const C=~o.index;(function rf(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(w)!=C&&w.push(C),w.push(c,h,v)}}function Qy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function pI(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function nd(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ui(o)&&(u[""]=s)}}function gI(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function mI(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=Bi(h.type)),v=new Sc(p,Ui(h),null);s.blueprint[c]=v,u[c]=v,dI(s,o,0,c,ed(s,u,h.hostVars,Jt),h)}function vl(s,o,u){const c=Zr(o,s),h=kg(u),p=s[10],v=uf(s,ml(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=v}function $s(s,o,u,c,h,p){const v=Zr(s,o);!function rd(s,o,u,c,h,p,v){if(null==p)Xn(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const w=null==v?me(p):v(p,c||"",h);Xn(s)?s.setAttribute(o,h,w,u):u?o.setAttributeNS(u,h,w):o.setAttribute(h,w)}}(o[11],v,p,s.value,u,c,h)}function _I(s,o,u,c,h,p){const v=p[o];if(null!==v){const w=c.setInput;for(let C=0;C<v.length;){const D=v[C++],R=v[C++],L=v[C++];null!==w?c.setInput(u,L,D,R):u[R]=L}}}function sf(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function di(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Vg(s,o){const u=si(o,s);if(Ia(u)){const c=u[1];80&u[2]?yl(c,u,c.template,u[8]):u[5]>0&&Ug(u)}}function Ug(s){for(let c=Wh(s);null!==c;c=Ig(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const v=p[1];yl(v,p,v.template,p[8])}else p[5]>0&&Ug(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=si(u[c],s);Ia(h)&&h[5]>0&&Ug(h)}}function Jy(s,o){const u=si(o,s),c=u[1];(function vI(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),td(c,u,u[8])}function uf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function El(s){for(;s;){s[2]|=64;const o=Gh(s);if(uh(s)&&!o)return s;s=o}return null}function cf(s,o,u){const c=o[10];c.begin&&c.begin();try{yl(s,o,s.template,u)}catch(h){throw rv(o,h),h}finally{c.end&&c.end()}}function df(s){!function lf(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Iy(u),h=c[1];zy(h,c,h.template,u)}}(s[8])}function ev(s,o,u){yh(0),o(s,u)}const Bg=(()=>Promise.resolve(null))();function jg(s){return s[7]||(s[7]=[])}function tv(s){return s.cleanup||(s.cleanup=[])}function rv(s,o){const u=s[9],c=u?u.get(vg,null):null;c&&c.handleError(o)}function II(s,o,u,c,h){for(let p=0;p<u.length;){const v=u[p++],w=u[p++],C=o[v],D=s.data[v];null!==D.setInput?D.setInput(C,h,c,w):C[w]=h}}function Wi(s,o,u){const c=wa(o,s);!function Dy(s,o,u){Xn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function ff(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?p=w:1==p?h=_e(h,w):2==p&&(c=_e(c,w+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const gf=new lr("INJECTOR",-1);class CI{get(o,u=Wo){if(u===Wo){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}const mf=new lr("Set Injector scope."),wo={},iv={};let Jo;function sv(){return void 0===Jo&&(Jo=new CI),Jo}function bI(s,o=null,u=null,c){const h=Za(s,o,u,c);return h._resolveInjectorDefTypes(),h}function Za(s,o=null,u=null,c){return new Xo(s,u,o||sv(),c)}class Xo{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&hs(u,w=>this.processProvider(w,o,u)),hs([o],w=>this.processInjectorType(w,[],p)),this.records.set(gf,jn(void 0,this));const v=this.records.get(mf);this.scope=null!=v?v.value:null,this.source=h||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Wo,c=Se.Default){this.assertNotDestroyed();const h=ps(this),p=Ke(void 0);try{if(!(c&Se.SkipSelf)){let w=this.records.get(o);if(void 0===w){const C=function US(s){return"function"==typeof s||"object"==typeof s&&s instanceof lr}(o)&&ht(o);w=C&&this.injectableDefInScope(C)?jn(sd(o),wo):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&Se.Self?sv():this.parent).get(o,u=c&Se.Optional&&u===Wo?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[ka]=v[ka]||[]).unshift(le(o)),h)throw v;return function lg(s,o,u,c){const h=s[ka];throw o[tl]&&h.unshift(o[tl]),s.message=function Fa(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):le(w)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(ag,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[ka]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Ke(p),ps(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(le(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(o,u,c){if(!(o=Z(o)))return!1;let h=dn(o);const p=null==h&&o.ngModule||void 0,v=void 0===p?o:p,w=-1!==c.indexOf(v);if(void 0!==p&&(h=dn(p)),null==h)return!1;if(null!=h.imports&&!w){let R;c.push(v);try{hs(h.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:W,providers:te}=R[L];hs(te,de=>this.processProvider(de,W,te||bt))}}this.injectorDefTypes.add(v);const C=Bi(v)||(()=>new v);this.records.set(v,jn(C,wo));const D=h.providers;if(null!=D&&!w){const R=o;hs(D,L=>this.processProvider(L,R,D))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=Io(o=Z(o))?o:Z(o&&o.provide);const p=function Gg(s,o,u){return _f(s)?jn(void 0,s.useValue):jn(ov(s),wo)}(o);if(Io(o)||!0!==o.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=jn(void 0,wo,!0),v.factory=()=>nl(v.multi),this.records.set(h,v)),h=o,v.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===wo&&(u.value=iv,u.value=u.factory()),"object"==typeof u.value&&u.value&&function TI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Z(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function sd(s){const o=ht(s),u=null!==o?o.factory:Bi(s);if(null!==u)return u;if(s instanceof lr)throw new Pe(204,!1);if(s instanceof Function)return function Hg(s){const o=s.length;if(o>0)throw Hi(o,"?"),new Pe(204,!1);const u=function Bt(s){const o=s&&(s[Mn]||s[kn]);if(o){const u=function Yt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Pe(204,!1)}function ov(s,o,u){let c;if(Io(s)){const h=Z(s);return Bi(h)||sd(h)}if(_f(s))c=()=>Z(s.useValue);else if(function LS(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...nl(s.deps||[]));else if(function FS(s){return!(!s||!s.useExisting)}(s))c=()=>cr(Z(s.useExisting));else{const h=Z(s&&(s.useClass||s.provide));if(!function VS(s){return!!s.deps}(s))return Bi(h)||sd(h);c=()=>new h(...nl(s.deps))}return c}function jn(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function _f(s){return null!==s&&"object"==typeof s&&ug in s}function Io(s){return"function"==typeof s}let Hs=(()=>{class s{static create(u,c){var h;if(Array.isArray(u))return bI({name:""},c,u,"");{const p=null!==(h=u.name)&&void 0!==h?h:"";return bI({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=Wo,s.NULL=new CI,s.\u0275prov=Vt({token:s,providedIn:"any",factory:()=>cr(gf)}),s.__NG_ELEMENT_ID__=-1,s})();function Ef(s,o){Hu(Iy(s)[1],er())}function Er(s){let o=function LI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Ui(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,"");h=o.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=dv(s.inputs),v.declaredInputs=dv(s.declaredInputs),v.outputs=dv(s.outputs);const w=h.hostBindings;w&&GS(s,w);const C=h.viewQuery,D=h.contentQueries;if(C&&$S(s,C),D&&HS(s,D),ae(s.inputs,h.inputs),ae(s.declaredInputs,h.declaredInputs),ae(s.outputs,h.outputs),Ui(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let v=0;v<p.length;v++){const w=p[v];w&&w.ngInherit&&w(s),w===Er&&(u=!1)}}o=Object.getPrototypeOf(o)}!function VI(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=kr(h.hostAttrs,u=kr(u,h.hostAttrs))}}(c)}function dv(s){return s===on?{}:s===bt?[]:s}function $S(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function HS(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function GS(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let wl=null;function Il(){if(!wl){const s=Wt.Symbol;if(s&&s.iterator)wl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(wl=c)}}}return wl}function ud(s){return!!Cl(s)&&(Array.isArray(s)||!(s instanceof Map)&&Il()in s)}function Cl(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ws(s,o,u){return s[o]=u}function Hr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function fv(s,o,u,c){const h=Ue();return Hr(h,ba(),o)&&(yn(),$s(ir(),h,s,o,u,c)),fv}function Ml(s,o,u,c,h,p,v,w){const C=Ue(),D=yn(),R=s+20,L=D.firstCreatePass?function $I(s,o,u,c,h,p,v,w,C){const D=o.consts,R=_l(o,s,4,v||null,Ss(D,w));Fg(o,u,R,Ss(D,C)),Hu(o,R);const L=R.tViews=Ar(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,D,C,o,u,c,h,p,v):D.data[R];ji(L,!1);const W=C[11].createComment("");Tg(D,C,W,L),ci(W,C),uf(C,C[R]=di(W,C,W,L)),Fo(L)&&Xh(D,C,L),null!=v&&ef(C,L,w)}function zs(s,o=Se.Default){const u=Ue();return null===u?cr(s,o):Ma(er(),u,Z(s),o)}function bv(){throw new Error("invalid")}function Nl(s,o,u){const c=Ue();return Hr(c,ba(),o)&&function Ii(s,o,u,c,h,p,v,w){const C=Zr(o,u);let R,D=o.inputs;!w&&null!=D&&(R=D[c])?(II(s,u,R,c,h),ah(o)&&function xS(s,o){const u=si(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function Ky(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,Xn(p)?p.setProperty(C,c,h):ai(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}(yn(),ir(),c,s,o,c[11],u,!1),Nl}function Cn(s,o,u,c,h){const v=h?"class":"style";II(s,u,o.inputs[v],v,c)}function Rr(s,o,u,c){const h=Ue(),p=yn(),v=20+s,w=h[11],C=h[v]=Sy(w,o,function Yp(){return jt.lFrame.currentNamespace}()),D=p.firstCreatePass?function aA(s,o,u,c,h,p,v){const w=o.consts,D=_l(o,s,2,h,Ss(w,p));return Fg(o,u,D,Ss(w,v)),null!==D.attrs&&ff(D,D.attrs,!1),null!==D.mergedAttrs&&ff(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(v,p,h,0,o,u,c):p.data[v];ji(D,!0);const R=D.mergedAttrs;null!==R&&Ot(w,C,R);const L=D.classes;null!==L&&Kh(w,C,L);const W=D.styles;return null!==W&&qh(w,C,W),64!=(64&D.flags)&&Tg(p,h,C,D),0===function Kp(){return jt.lFrame.elementDepthCount}()&&ci(C,h),function Ec(){jt.lFrame.elementDepthCount++}(),Fo(D)&&(Xh(p,h,D),function iI(s,o,u){if(Nu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,D,h)),null!==c&&ef(h,D),Rr}function ra(){let s=er();gh()?Bu():(s=s.parent,ji(s,!1));const o=s;!function U_(){jt.lFrame.elementDepthCount--}();const u=yn();return u.firstCreatePass&&(Hu(u,s),Nu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Q_(s){return 0!=(16&s.flags)}(o)&&Cn(u,o,Ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function jD(s){return 0!=(32&s.flags)}(o)&&Cn(u,o,Ue(),o.stylesWithoutHost,!1),ra}function Tv(s,o,u,c){return Rr(s,o,u,c),ra(),Tv}function Xg(){return Ue()}function em(s){return!!s&&"function"==typeof s.then}function dd(s){return!!s&&"function"==typeof s.subscribe}const zI=dd;function qs(s,o,u,c){const h=Ue(),p=yn(),v=er();return function Dv(s,o,u,c,h,p,v,w){const C=Fo(c),R=s.firstCreatePass&&tv(s),L=o[8],W=jg(o);let te=!0;if(3&c.type||w){const Je=Zr(c,o),Ct=w?w(Je):Je,Fe=W.length,kt=w?En=>w(Zn(En[c.index])):c.index;if(Xn(u)){let En=null;if(!w&&C&&(En=function bf(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const v=h[p];if(v===u&&h[p+1]===c){const w=o[7],C=h[p+2];return w.length>C?w[C]:null}"string"==typeof v&&(p+=2)}return null}(s,o,h,c.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=p,En.__ngLastListenerFn__=p,te=!1;else{p=tm(c,o,L,p,!1);const Ln=u.listen(Ct,h,p);W.push(p,Ln),R&&R.push(h,kt,Fe,Fe+1)}}else p=tm(c,o,L,p,!0),Ct.addEventListener(h,p,v),W.push(p),R&&R.push(h,kt,Fe,v)}else p=tm(c,o,L,p,!1);const de=c.outputs;let je;if(te&&null!==de&&(je=de[h])){const Je=je.length;if(Je)for(let Ct=0;Ct<Je;Ct+=2){const Zi=o[je[Ct]][je[Ct+1]].subscribe(p),da=W.length;W.push(p,Zi),R&&R.push(h,c.index,da,-(da+1))}}}(p,h,h[11],v,s,o,!!u,c),qs}function at(s,o,u,c){try{return!1!==u(c)}catch(h){return rv(s,h),!1}}function tm(s,o,u,c,h){return function p(v){if(v===Function)return c;const w=2&s.flags?si(s.index,o):o;0==(32&o[2])&&El(w);let C=at(o,0,c,v),D=p.__ngNextListenerFn__;for(;D;)C=at(o,0,D,v)&&C,D=D.__ngNextListenerFn__;return h&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Sv(s=1){return function co(s){return(jt.lFrame.contextLView=function K_(s,o){for(;s>0;)o=o[15],s--;return o}(s,jt.lFrame.contextLView))[8]}(s)}function xl(s,o){let u=null;const c=function za(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?On(s,p,!0):ES(c,p))return h}else u=h}return u}function Ks(s){const o=Ue()[16][6];if(!o.projection){const c=o.projection=Hi(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const v=s?xl(p,s):0;null!==v&&(h[v]?h[v].projectionNext=p:c[v]=p,h[v]=p),p=p.next}}}function hd(s,o=0,u){const c=Ue(),h=yn(),p=_l(h,20+s,16,null,u||null);null===p.projection&&(p.projection=o),Bu(),64!=(64&p.flags)&&function Bw(s,o,u){jw(o[11],0,o,u,bg(s,u,o),Fw(u.parent||o[6],u,o))}(h,c,p)}function KI(s,o,u,c,h){const p=s[u+1],v=null===o;let w=c?js(p):ms(p),C=!1;for(;0!==w&&(!1===C||v);){const R=s[w+1];ZI(s[w],o)&&(C=!0,s[w+1]=c?Uy(R):jr(R)),w=c?js(R):ms(R)}C&&(s[u+1]=c?jr(p):Uy(p))}function ZI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&fs(s,o)>=0}const Lr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ri(s){return s.substring(Lr.key,Lr.keyEnd)}function Df(s,o){const u=Lr.textEnd;return u===o?-1:(o=Lr.keyEnd=function QI(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Lr.key=o,u),Do(s,o,u))}function Do(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function Nv(s,o){return function ys(s,o,u,c){const h=Ue(),p=yn(),v=$i(2);p.firstUpdatePass&&eC(p,s,v,c),o!==Jt&&Hr(h,v,o)&&Pv(p,p.data[oi()],h,h[11],s,h[v+1]=function nC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(mo(s)))),s}(o,u),c,v)}(s,o,null,!0),Nv}function Af(s){!function Yn(s,o,u,c){const h=yn(),p=$i(2);h.firstUpdatePass&&eC(h,null,p,c);const v=Ue();if(u!==Jt&&Hr(v,p,u)){const w=h.data[oi()];if(kl(w,c)&&!XI(h,p)){let C=c?w.classesWithoutHost:w.stylesWithoutHost;null!==C&&(u=_e(C,u||"")),Cn(h,w,v,u,c)}else!function mA(s,o,u,c,h,p,v,w){h===Jt&&(h=bt);let C=0,D=0,R=0<h.length?h[0]:null,L=0<p.length?p[0]:null;for(;null!==R||null!==L;){const W=C<h.length?h[C+1]:void 0,te=D<p.length?p[D+1]:void 0;let je,de=null;R===L?(C+=2,D+=2,W!==te&&(de=L,je=te)):null===L||null!==R&&R<L?(C+=2,de=R):(D+=2,de=L,je=te),null!==de&&Pv(s,o,u,c,de,je,v,w),R=C<h.length?h[C]:null,L=D<p.length?p[D]:null}}(h,w,v,v[11],v[p+1],v[p+1]=function ou(s,o,u){if(null==u||""===u)return bt;const c=[],h=mo(u);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,p)}}(Fr,Zs,s,!0)}function Zs(s,o){for(let u=function sr(s){return function Sf(s){Lr.key=0,Lr.keyEnd=0,Lr.value=0,Lr.valueEnd=0,Lr.textEnd=s.length}(s),Df(s,Do(s,0,Lr.textEnd))}(o);u>=0;u=Df(o,u))Fr(s,ri(o),!0)}function XI(s,o){return o>=s.expandoStartIndex}function eC(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[oi()],v=XI(s,u);kl(p,c)&&null===o&&!v&&(o=!1),o=function fA(s,o,u,c){const h=function Ta(s){const o=jt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Rf(u=xv(null,s,o,u,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=xv(h,s,o,u,c),null===p){let C=function tC(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ms(c))return s[js(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=xv(null,s,o,C[1],c),C=Rf(C,o.attrs,c),function pA(s,o,u,c){s[js(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function gA(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Rf(c,s[p].hostAttrs,u);return Rf(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function qI(s,o,u,c,h,p){let v=p?o.classBindings:o.styleBindings,w=js(v),C=ms(v);s[c]=u;let R,D=!1;if(Array.isArray(u)){const L=u;R=L[1],(null===R||fs(L,R)>0)&&(D=!0)}else R=u;if(h)if(0!==C){const W=js(s[w+1]);s[c+1]=Qc(W,w),0!==W&&(s[W+1]=$r(s[W+1],c)),s[w+1]=function wS(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=Qc(w,0),0!==w&&(s[w+1]=$r(s[w+1],c)),w=c;else s[c+1]=Qc(C,0),0===w?w=c:s[C+1]=$r(s[C+1],c),C=c;D&&(s[c+1]=jr(s[c+1])),KI(s,R,c,!0),KI(s,R,c,!1),function lA(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&fs(p,o)>=0&&(u[c+1]=Uy(u[c+1]))}(o,R,s,c,p),v=Qc(w,C),p?o.classBindings=v:o.styleBindings=v}(h,p,o,u,v,c)}}function xv(s,o,u,c,h){let p=null;const v=u.directiveEnd;let w=u.directiveStylingLast;for(-1===w?w=u.directiveStart:w++;w<v&&(p=o[w],c=Rf(c,p.hostAttrs,h),p!==s);)w++;return null!==s&&(u.directiveStylingLast=w),c}function Rf(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Fr(s,v,!!u||o[++p]))}return void 0===s?null:s}function Pv(s,o,u,c,h,p,v,w){if(!(3&o.type))return;const C=s.data,D=C[w+1];vs(function Qo(s){return 1==(1&s)}(D)?Ov(C,o,u,h,ms(D),v):void 0)||(vs(p)||function zw(s){return 2==(2&s)}(D)&&(p=Ov(C,null,u,h,w,v)),function vS(s,o,u,c,h){const p=Xn(s);if(o)h?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:yo.DashCase;if(null==h)p?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),v|=yo.Important),p?s.setStyle(u,c,h,v):u.style.setProperty(c,h,w?"important":"")}}}(c,v,wa(oi(),u),h,p))}function Ov(s,o,u,c,h,p){const v=null===o;let w;for(;h>0;){const C=s[h],D=Array.isArray(C),R=D?C[1]:C,L=null===R;let W=u[h+1];W===Jt&&(W=L?bt:void 0);let te=L?Oc(W,c):R===c?W:void 0;if(D&&!vs(te)&&(te=Oc(C,c)),vs(te)&&(w=te,v))return w;const de=s[h+1];h=v?js(de):ms(de)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(w=Oc(C,c))}return w}function vs(s){return void 0!==s}function kl(s,o){return 0!=(s.flags&(o?16:32))}function Mf(s,o=""){const u=Ue(),c=yn(),h=s+20,p=c.firstCreatePass?_l(c,h,1,o,null):c.data[h],v=u[h]=function Ty(s,o){return Xn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Tg(c,u,v,p),ji(p,!1)}function pd(s,o,u){const c=Ue(),h=function Co(s,o,u,c){return Hr(s,ba(),u)?o+me(u)+c:Jt}(c,s,o,u);return h!==Jt&&Wi(c,oi(),h),pd}const au=void 0;var Ul=["en",[["a","p"],["AM","PM"],au],[["AM","PM"],au,au],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],au,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],au,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",au,"{1} 'at' {0}",au],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Of(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Bl={};function hm(s){const o=function _C(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=mC(o);if(u)return u;const c=o.split("-")[0];if(u=mC(c),u)return u;if("en"===c)return Ul;throw new Error(`Missing locale data for the locale "${s}".`)}function pm(s){return hm(s)[nt.PluralCase]}function mC(s){return s in Bl||(Bl[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),Bl[s]}var nt=(()=>((nt=nt||{})[nt.LocaleId=0]="LocaleId",nt[nt.DayPeriodsFormat=1]="DayPeriodsFormat",nt[nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",nt[nt.DaysFormat=3]="DaysFormat",nt[nt.DaysStandalone=4]="DaysStandalone",nt[nt.MonthsFormat=5]="MonthsFormat",nt[nt.MonthsStandalone=6]="MonthsStandalone",nt[nt.Eras=7]="Eras",nt[nt.FirstDayOfWeek=8]="FirstDayOfWeek",nt[nt.WeekendRange=9]="WeekendRange",nt[nt.DateFormat=10]="DateFormat",nt[nt.TimeFormat=11]="TimeFormat",nt[nt.DateTimeFormat=12]="DateTimeFormat",nt[nt.NumberSymbols=13]="NumberSymbols",nt[nt.NumberFormats=14]="NumberFormats",nt[nt.CurrencyCode=15]="CurrencyCode",nt[nt.CurrencySymbol=16]="CurrencySymbol",nt[nt.CurrencyName=17]="CurrencyName",nt[nt.Currencies=18]="Currencies",nt[nt.Directionality=19]="Directionality",nt[nt.PluralCase=20]="PluralCase",nt[nt.ExtraData=21]="ExtraData",nt))();const hr="en-US";let vC=hr;function Id(s,o,u,c,h){if(s=Z(s),Array.isArray(s))for(let p=0;p<s.length;p++)Id(s[p],o,u,c,h);else{const p=yn(),v=Ue();let w=Io(s)?s:Z(s.provide),C=ov(s);const D=er(),R=1048575&D.providerIndexes,L=D.directiveStart,W=D.providerIndexes>>20;if(Io(s)||!s.multi){const te=new Sc(C,h,zs),de=jl(w,o,h?R:R+W,L);-1===de?(Ra(tr(D,v),p,w),qi(p,s,o.length),o.push(w),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(te),v.push(te)):(u[de]=te,v[de]=te)}else{const te=jl(w,o,R+W,L),de=jl(w,o,R,R+W),je=te>=0&&u[te],Je=de>=0&&u[de];if(h&&!Je||!h&&!je){Ra(tr(D,v),p,w);const Ct=function GC(s,o,u,c,h){const p=new Sc(s,u,zs);return p.multi=[],p.index=o,p.componentProviders=0,HC(p,h,c&&!u),p}(h?WA:$l,u.length,h,c,C);!h&&Je&&(u[de].providerFactory=Ct),qi(p,s,o.length,0),o.push(w),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(Ct),v.push(Ct)}else qi(p,s,te>-1?te:de,HC(u[h?de:te],C,!h&&c));!h&&c&&Je&&u[de].componentProviders++}}}function qi(s,o,u,c){const h=Io(o),p=function yf(s){return!!s.useClass}(o);if(h||p){const C=(p?Z(o.useClass):o).prototype.ngOnDestroy;if(C){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=D.indexOf(u);-1===R?D.push(u,[c,C]):D[R+1].push(c,C)}else D.push(u,C)}}}function HC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function jl(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function $l(s,o,u,c){return oa(this.multi,[])}function WA(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Na(u,u[1],this.providerFactory.index,c);p=w.slice(0,v),oa(h,p);for(let C=v;C<w.length;C++)p.push(w[C])}else p=[],oa(h,p);return p}function oa(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Cm(s,o=[]){return u=>{u.providersResolver=(c,h)=>function Ie(s,o,u){const c=yn();if(c.firstCreatePass){const h=Ui(s);Id(u,c.data,c.blueprint,h,!0),Id(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class qr{}class lu{resolveComponentFactory(o){throw function Kv(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Gf=(()=>{class s{}return s.NULL=new lu,s})();function zA(){return Hl(er(),Ue())}function Hl(s,o){return new cu(Zr(s,o))}let cu=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=zA,s})();function Gl(s){return s instanceof cu?s.nativeElement:s}class Wl{}let Wf=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Zv(){const s=Ue(),u=si(er().index,s);return function qC(s){return s[11]}(ii(u)?u:s)}(),s})(),Yv=(()=>{class s{}return s.\u0275prov=Vt({token:s,providedIn:"root",factory:()=>null}),s})();class Qv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const KC=new Qv("13.2.7"),Tm={};function zf(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Zn(p)),Vi(p))for(let w=10;w<p.length;w++){const C=p[w],D=C[1].firstChild;null!==D&&zf(C[1],C,D,c)}const v=u.type;if(8&v)zf(s,o,u.child,c);else if(32&v){const w=Eg(u,o);let C;for(;C=w();)c.push(C)}else if(16&v){const w=Uw(o,u);if(Array.isArray(w))c.push(...w);else{const C=Gh(o[16]);zf(C[1],C,w,c,!0)}}u=h?u.projectionNext:u.next}return c}class zl{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return zf(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Ay(o,c),Xu(u,c))}this._attachedToViewContainer=!1}Ry(this._lView[1],this._lView)}onDestroy(o){aI(this._lView[1],this._lView,null,o)}markForCheck(){El(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function hf(s,o,u){Cc(!0);try{cf(s,o,u)}finally{Cc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nw(s,o){Dg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class qf extends zl{constructor(o){super(o),this._view=o}detectChanges(){df(this._view)}checkNoChanges(){!function EI(s){Cc(!0);try{df(s)}finally{Cc(!1)}}(this._view)}get context(){return null}}class du extends Gf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=tt(o);return new Jv(u,this.ngModule)}}function ZC(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Jv extends qr{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Vy(s){return s.map(Tt).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return ZC(this.componentDef.inputs)}get outputs(){return ZC(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function qA(s,o){return{get:(u,c,h)=>{const p=s.get(u,Tm,h);return p!==Tm||c===Tm?p:o.get(u,c,h)}}}(o,h.injector):o,v=p.get(Wl,Lu),w=p.get(Yv,null),C=v.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",R=c?function oI(s,o,u){if(Xn(s))return s.selectRootElement(o,u===vt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):Sy(v.createRenderer(null,this.componentDef),D,function YC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(D)),L=this.componentDef.onPush?576:528,W=function cv(s,o){return{components:[],scheduler:s||lS,clean:Bg,playerHandler:o||null,flags:0}}(),te=Ar(0,null,null,1,0,null,null,null,null,null),de=ml(null,te,W,L,null,null,v,C,w,p);let je,Je;ju(de);try{const Ct=function vf(s,o,u,c,h,p){const v=u[1];u[20]=s;const C=_l(v,20,2,"#host",null),D=C.mergedAttrs=o.hostAttrs;null!==D&&(ff(C,D,!0),null!==s&&(Ot(h,s,D),null!==C.classes&&Kh(h,s,C.classes),null!==C.styles&&qh(h,s,C.styles)));const R=c.createRenderer(s,o),L=ml(u,kg(o),null,o.onPush?64:16,u[20],C,c,R,p||null,null);return v.firstCreatePass&&(Ra(tr(C,u),v,o.type),pI(v,C),gI(C,u.length,1)),uf(u,L),u[20]=L}(R,this.componentDef,de,v,C);if(R)if(c)Ot(C,R,["ng-version",KC.full]);else{const{attrs:Fe,classes:kt}=function sn(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!Bs(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Fe&&Ot(C,R,Fe),kt&&kt.length>0&&Kh(C,R,kt.join(" "))}if(Je=yc(te,20),void 0!==u){const Fe=Je.projection=[];for(let kt=0;kt<this.ngContentSelectors.length;kt++){const En=u[kt];Fe.push(null!=En?Array.from(En):null)}}je=function Kg(s,o,u,c,h){const p=u[1],v=function Yy(s,o,u){const c=er();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),mI(s,c,o,ed(s,o,1,null),u));const h=Na(o,s,c.directiveStart,c);ci(h,o);const p=Zr(c,o);return p&&ci(p,o),h}(p,u,o);if(c.components.push(v),s[8]=v,h&&h.forEach(C=>C(v,o)),o.contentQueries){const C=er();o.contentQueries(1,v,C.directiveStart)}const w=er();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Rs(w.index),dI(u[1],w,0,w.directiveStart,w.directiveEnd,o),Qy(o,v)),v}(Ct,this.componentDef,de,W,[Ef]),td(te,de,null)}finally{$u()}return new hu(this.componentType,je,Hl(Je,de),de,Je)}}class hu extends class WC{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new qf(h),this.componentType=o}get injector(){return new Ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Kl{}class QC{}const bd=new Map;class Kf extends Kl{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new du(this);const c=zt(o);this._bootstrapComponents=Vs(c.bootstrap),this._r3Injector=Za(o,u,[{provide:Kl,useValue:this},{provide:Gf,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Hs.THROW_IF_NOT_FOUND,c=Se.Default){return o===Hs||o===Kl||o===gf?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Sm extends QC{constructor(o){super(),this.moduleType=o,null!==zt(o)&&function ZA(s){const o=new Set;!function u(c){const h=zt(c,!0),p=h.id;null!==p&&(function Zl(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(p,bd.get(p),c),bd.set(p,c));const v=Vs(h.imports);for(const w of v)o.has(w)||(o.add(w),u(w))}(s)}(o)}create(o){return new Kf(this.moduleType,o)}}function Ro(s,o){const u=s[o];return u===Jt?void 0:u}function aa(s,o,u,c,h,p,v){const w=o+u;return function Ya(s,o,u,c){const h=Hr(s,o,u);return Hr(s,o+1,c)||h}(s,w,h,p)?Ws(s,w+2,v?c.call(v,h,p):c(h,p)):Ro(s,w+2)}function nb(s,o){const u=yn();let c;const h=s+20;u.firstCreatePass?(c=function JA(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=Bi(c.type)),v=Ke(zs);try{const w=ho(!1),C=p();return ho(w),function zS(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Ue(),h,C),C}finally{Ke(v)}}function rb(s,o,u){const c=s+20,h=Ue(),p=os(h,c);return Zf(h,c)?function tE(s,o,u,c,h,p){const v=o+u;return Hr(s,v,h)?Ws(s,v+1,p?c.call(p,h):c(h)):Ro(s,v+1)}(h,Or(),o,p.transform,u,p):p.transform(u)}function ib(s,o,u,c){const h=s+20,p=Ue(),v=os(p,h);return Zf(p,h)?aa(p,Or(),o,v.transform,u,c,v):v.transform(u,c)}function Zf(s,o){return s[1].data[o].pure}function ua(s){return o=>{setTimeout(s,void 0,o)}}const Fi=class ob extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,v;let w=o,C=u||(()=>null),D=c;if(o&&"object"==typeof o){const L=o;w=null===(h=L.next)||void 0===h?void 0:h.bind(L),C=null===(p=L.error)||void 0===p?void 0:p.bind(L),D=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(C=ua(C),w&&(w=ua(w)),D&&(D=ua(D)));const R=super.subscribe({next:w,error:C,complete:D});return o instanceof $.w0&&o.add(R),R}};function ab(){return this._results[Il()]()}class Nm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Il(),c=Nm.prototype;c[u]||(c[u]=ab)}get changes(){return this._changes||(this._changes=new Fi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=ui(o);(this._changesDetected=!function xc(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Yf=(()=>{class s{}return s.__NG_ELEMENT_ID__=iE,s})();const ub=Yf,rE=class extends ub{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=ml(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),td(u,c,o),new zl(c)}};function iE(){return gu(er(),Ue())}function gu(s,o){return 4&s.type?new rE(o,s,Hl(s,o)):null}let Ql=(()=>{class s{}return s.__NG_ELEMENT_ID__=sE,s})();function sE(){return uE(er(),Ue())}const eR=Ql,xm=class extends eR{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Hl(this._hostTNode,this._hostLView)}get injector(){return new Ho(this._hostTNode,this._hostLView)}get parentInjector(){const o=Aa(this._hostTNode,this._hostLView);if(_r(o)){const u=$o(o,this._hostLView),c=Da(o);return new Ho(u[1].data[c+8],u)}return new Ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=oE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const v=o&&!function Qu(s){return"function"==typeof s}(o);let w;if(v)w=u;else{const L=u||{};w=L.index,c=L.injector,h=L.projectableNodes,p=L.ngModuleRef}const C=v?o:new Jv(tt(o)),D=c||this.parentInjector;if(!p&&null==C.ngModule){const W=(v?D:this.parentInjector).get(Kl,null);W&&(p=W)}const R=C.create(D,h,void 0,p);return this.insert(R.hostView,w),R}insert(o,u){const c=o._lView,h=c[1];if(function vc(s){return Vi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[3],W=new xm(L,L[6],L[3]);W.detach(W.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function zh(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Ju(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function Kc(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(h,c,v,p);const w=Oy(p,v),C=c[11],D=vo(C,v[7]);return null!==D&&function gS(s,o,u,c,h,p){c[0]=h,c[6]=o,Dg(s,c,u,1,h,p)}(h,v[6],C,c,D,w),o.attachToViewContainerRef(),Ju(aE(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=oE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Ay(this._lContainer,u);c&&(Xu(aE(this._lContainer),u),Ry(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Ay(this._lContainer,u);return c&&null!=Xu(aE(this._lContainer),u)?new zl(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function oE(s){return s[8]}function aE(s){return s[8]||(s[8]=[])}function uE(s,o){let u;const c=o[s.index];if(Vi(c))u=c;else{let h;if(8&s.type)h=Zn(c);else{const p=o[11];h=p.createComment("");const v=Zr(s,o);Gi(p,vo(p,v),h,function yS(s,o){return Xn(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=u=di(c,o,h,s),uf(o,u)}return new xm(u,s,o)}class Pm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Pm(this.queryList)}setDirty(){this.queryList.setDirty()}}class cE{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);h.push(this.queries[v.indexInDeclarationView].clone())}return new cE(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==pb(o,u).matches&&this.queries[u].setDirty()}}class dE{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class hE{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new hE(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class mu{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new mu(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,Sd(u,p)),this.matchTNodeWithReadOption(o,u,Ns(u,o,p,!1,!1))}else c===Yf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ns(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===cu||h===Ql||h===Yf&&4&u.type)this.addMatch(u.index,-2);else{const p=Ns(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Sd(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Om(s,o,u,c){return-1===u?function fE(s,o){return 11&s.type?Hl(s,o):4&s.type?gu(s,o):null}(o,s):-2===u?function cb(s,o,u){return u===cu?Hl(o,s):u===Yf?gu(o,s):u===Ql?uE(o,s):void 0}(s,o,c):Na(s,s[1],u,o)}function pE(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,v=u.matches,w=[];for(let C=0;C<v.length;C+=2){const D=v[C];w.push(D<0?null:Om(o,p[D],v[C+1],u.metadata.read))}h.matches=w}return h.matches}function km(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const v=pE(s,o,h,u);for(let w=0;w<p.length;w+=2){const C=p[w];if(C>0)c.push(v[w/2]);else{const D=p[w+1],R=o[-C];for(let L=10;L<R.length;L++){const W=R[L];W[17]===W[3]&&km(W[1],W,D,c)}if(null!==R[9]){const L=R[9];for(let W=0;W<L.length;W++){const te=L[W];km(te[1],te,D,c)}}}}}return c}function db(s){const o=Ue(),u=yn(),c=G_();yh(c+1);const h=pb(u,c);if(s.dirty&&Lo(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?km(u,o,c,[]):pE(u,o,h,c);s.reset(p,Gl),s.notifyOnChanges()}return!0}return!1}function hb(s,o,u,c){const h=yn();if(h.firstCreatePass){const p=er();(function Lm(s,o,u){null===s.queries&&(s.queries=new hE),s.queries.track(new mu(o,u))})(h,new dE(o,u,c),p.index),function Jr(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function fb(s,o,u){const c=new Nm(4==(4&u));aI(s,o,c,c.destroy),null===o[19]&&(o[19]=new cE),o[19].queries.push(new Pm(c))}(h,Ue(),u)}function Fm(){return function tR(s,o){return s[19].queries[o].queryList}(Ue(),G_())}function pb(s,o){return s.queries.getByIndex(o)}function Ym(...s){}const TE=new lr("Application Initializer");let DE=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Ym,this.reject=Ym,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(em(p))u.push(p);else if(zI(p)){const v=new Promise((w,C)=>{p.subscribe({complete:w,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(cr(TE,8))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Qm=new lr("AppId",{providedIn:"root",factory:function Cb(){return`${SE()}${SE()}${SE()}`}});function SE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Jm=new lr("Platform Initializer"),Tb=new lr("Platform ID"),Xm=new lr("appBootstrapListener");let e_=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();const tp=new lr("LocaleId",{providedIn:"root",factory:()=>zo(tp,Se.Optional|Se.SkipSelf)||function AE(){return"undefined"!=typeof $localize&&$localize.locale||hr}()}),Pd=new lr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Od{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Sb=(()=>{class s{compileModuleSync(u){return new Sm(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Vs(zt(u).declarations).reduce((v,w)=>{const C=tt(w);return C&&v.push(new Jv(C)),v},[]);return new Od(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const hR=(()=>Promise.resolve(0))();function rp(s){"undefined"==typeof Zone?hR.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ki{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fi(!1),this.onMicrotaskEmpty=new Fi(!1),this.onStable=new Fi(!1),this.onError=new Fi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function RE(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function xE(s){const o=()=>{!function fR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ip(s),s.isCheckStableRunning=!0,NE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ip(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,v,w)=>{try{return Ab(s),u.invokeTask(h,p,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),PE(s)}},onInvoke:(u,c,h,p,v,w,C)=>{try{return Ab(s),u.invoke(h,p,v,w,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),PE(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,ip(s),NE(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ki.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ki.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+h,o,ME,Ym,Ym);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const ME={};function NE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ip(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Ab(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function PE(s){s._nesting--,NE(s)}class pR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fi,this.onMicrotaskEmpty=new Fi,this.onStable=new Fi,this.onError=new Fi}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let OE=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ki.assertNotInAngularZone(),rp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rp(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(cr(Ki))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})(),kE=(()=>{class s{constructor(){this._applications=new Map,FE.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return FE.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();class Rb{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function Mb(s){FE=s}let Qs,FE=new Rb;const t_=new lr("AllowMultipleToken");class VE{constructor(o,u){this.name=o,this.token=u}}function n_(s,o,u=[]){const c=`Platform: ${o}`,h=new lr(c);return(p=[])=>{let v=UE();if(!v||v.injector.get(t_,!1))if(s)s(u.concat(p).concat({provide:h,useValue:!0}));else{const w=u.concat(p).concat({provide:h,useValue:!0},{provide:mf,useValue:"platform"});!function mR(s){if(Qs&&!Qs.destroyed&&!Qs.injector.get(t_,!1))throw new Pe(400,"");Qs=s.get(r_);const o=s.get(Jm,null);o&&o.forEach(u=>u())}(Hs.create({providers:w,name:c}))}return function _R(s){const o=UE();if(!o)throw new Pe(401,"");return o}()}}function UE(){return Qs&&!Qs.destroyed?Qs:null}let r_=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const w=function xb(s,o){let u;return u="noop"===s?new pR:("zone.js"===s?void 0:s)||new Ki({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:Ki,useValue:w}];return w.run(()=>{const D=Hs.create({providers:C,parent:this.injector,name:u.moduleType.name}),R=u.create(D),L=R.injector.get(vg,null);if(!L)throw new Pe(402,"");return w.runOutsideAngular(()=>{const W=w.onError.subscribe({next:te=>{L.handleError(te)}});R.onDestroy(()=>{sp(this._modules,R),W.unsubscribe()})}),function yR(s,o,u){try{const c=u();return em(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,w,()=>{const W=R.injector.get(DE);return W.runInitializers(),W.donePromise.then(()=>(function Es(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&(vC=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(tp,hr)||hr),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const h=i_({},c);return function gR(s,o,u){const c=new Sm(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(BE);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Pe(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(cr(Hs))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac}),s})();function i_(s,o){return Array.isArray(o)?o.reduce(i_,s):Object.assign(Object.assign({},s),o)}let BE=(()=>{class s{constructor(u,c,h,p,v){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),C=new O.y(D=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Ki.assertNotInAngularZone(),rp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{Ki.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{R.unsubscribe(),L.unsubscribe()}});this.isStable=(0,ne.T)(w,C.pipe((0,pe.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Pe(405,"");let h;h=u instanceof qr?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function LE(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Kl),w=h.create(Hs.NULL,[],c||h.selector,p),C=w.location.nativeElement,D=w.injector.get(OE,null),R=D&&w.injector.get(kE);return D&&R&&R.registerApplication(C,D),w.onDestroy(()=>{this.detachView(w.hostView),sp(this.components,w),R&&R.unregisterApplication(C)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;sp(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Xm,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(cr(Ki),cr(Hs),cr(vg),cr(Gf),cr(DE))},s.\u0275prov=Vt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function sp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Ob=!0,s_=!1;function $E(){return s_=!0,Ob}function HE(){if(s_)throw new Error("Cannot enable prod mode after platform setup.");Ob=!1}let ER=(()=>{class s{}return s.__NG_ELEMENT_ID__=GE,s})();function GE(s){return function ca(s,o,u){if(ah(s)&&!u){const c=si(s.index,o);return new zl(c,c)}return 47&s.type?new zl(o[16],o):null}(er(),Ue(),16==(16&s))}class jb{constructor(){}supports(o){return ud(o)}create(o){return new Hb(o)}}const $b=(s,o)=>o;class Hb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$b}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<up(c,h,p)?u:c,w=up(v,h,p),C=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{p||(p=[]);const D=w-h,R=C-h;if(D!=R){for(let W=0;W<D;W++){const te=W<p.length?p[W]:p[W]=0,de=te+W;R<=de&&de<D&&(p[W]=te+1)}p[v.previousIndex]=R-D}}w!==C&&o(v,w,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!ud(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],v=this._trackByFn(w,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,w)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,w),c=!0),u=u._next}else h=0,function hv(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Il()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,w=>{v=this._trackByFn(h,w),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,w,v,h)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new IR(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new YE),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new YE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class IR{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class YE{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new ZE,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function up(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class Gb{constructor(){}supports(o){return o instanceof Map||Cl(o)}create(){return new CR}}class CR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Cl(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,v=h._next;return p&&(p._next=v),v&&(v._prev=p),h._next=null,h._prev=null,h}const c=new bR(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class bR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wb(){return new d_([new jb])}let d_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Wb()),deps:[[s,new Va,new qo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Pe(901,"")}}return s.\u0275prov=Vt({token:s,providedIn:"root",factory:Wb}),s})();function QE(){return new lp([new Gb])}let lp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||QE()),deps:[[s,new Va,new qo]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Pe(901,"")}}return s.\u0275prov=Vt({token:s,providedIn:"root",factory:QE}),s})();const t0=n_(null,"core",[{provide:Tb,useValue:"unknown"},{provide:r_,deps:[Hs]},{provide:kE,deps:[]},{provide:e_,deps:[]}]);let Kb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(cr(BE))},s.\u0275mod=M({type:s}),s.\u0275inj=Ge({}),s})()},3942:(Rt,xe,N)=>{N.d(xe,{Z:()=>Pe});var f=N(2090),$=N(4859),O=N(9681),ne=N(1877);class pe{constructor(me,be){this._delegate=me,this.firebase=be,(0,O._addComponent)(me,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(me,be=O._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(me);return!qe.isInitialized()&&"EXPLICIT"===(null===(rt=qe.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:be})}_removeServiceInstance(me,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(be)}_addComponent(me){(0,O._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,O._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function _e(){const Le=function le(Le){const me={},be={__esModule:!0,initializeApp:function Ne(Q,et={}){const st=O.initializeApp(Q,et);if((0,f.r3)(me,st.name))return me[st.name];const se=new Le(st,be);return me[st.name]=se,se},app:qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Q){const et=Q.name,st=et.replace("-compat","");if(O._registerComponent(Q)&&"PUBLIC"===Q.type){const se=(ie=qe())=>{if("function"!=typeof ie[st])throw ae.create("invalid-app-argument",{appName:et});return ie[st]()};void 0!==Q.serviceProps&&(0,f.ZB)(se,Q.serviceProps),be[st]=se,Le.prototype[st]=function(...ie){return this._getService.bind(this,et).apply(this,Q.multipleInstances?ie:[])}}return"PUBLIC"===Q.type?be[st]:null},removeApp:function rt(Q){delete me[Q]},useAsService:function Ze(Q,et){return"serverAuth"===et?null:et},modularAPIs:O}};function qe(Q){if(!(0,f.r3)(me,Q=Q||O._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Q});return me[Q]}return be.default=be,Object.defineProperty(be,"apps",{get:function Me(){return Object.keys(me).map(Q=>me[Q])}}),qe.App=Le,be}(pe);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function me(be){(0,f.ZB)(Le,be)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),G=new ne.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=z;!function Oe(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Le)}()},9681:(Rt,xe,N)=>{N.r(xe),N.d(xe,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>dn,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>$n,_addOrOverwriteComponent:()=>Dn,_apps:()=>Be,_clearComponents:()=>ht,_components:()=>pn,_getProvider:()=>Nt,_registerComponent:()=>Vt,_removeServiceInstance:()=>Ge,deleteApp:()=>Qn,getApp:()=>Nn,getApps:()=>kn,initializeApp:()=>Mn,onLog:()=>ke,registerVersion:()=>ue,setLogLevel:()=>Ke});var f=N(5861),$=N(4859),O=N(1877),ne=N(2090);class pe{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(ct=>{if(function we(Xe){const Ae=Xe.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(ct)){const Y=ct.getImmediate();return`${Y.library}/${Y.version}`}return null}).filter(ct=>ct).join(" ")}}const ae="@firebase/app",_e=new O.Yd("@firebase/app"),Ut="[DEFAULT]",Ft={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Be=new Map,pn=new Map;function $n(Xe,Ae){try{Xe.container.addComponent(Ae)}catch(ct){_e.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Xe.name}`,ct)}}function Dn(Xe,Ae){Xe.container.addOrOverwriteComponent(Ae)}function Vt(Xe){const Ae=Xe.name;if(pn.has(Ae))return _e.debug(`There were multiple attempts to register component ${Ae}.`),!1;pn.set(Ae,Xe);for(const ct of Be.values())$n(ct,Xe);return!0}function Nt(Xe,Ae){const ct=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return ct&&ct.triggerHeartbeat(),Xe.container.getProvider(Ae)}function Ge(Xe,Ae,ct=Ut){Nt(Xe,Ae).clearInstance(ct)}function ht(){pn.clear()}const Bt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Yt{constructor(Ae,ct,Y){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},ct),this._name=ct.name,this._automaticDataCollectionEnabled=ct.automaticDataCollectionEnabled,this._container=Y,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const dn="9.6.11";function Mn(Xe,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const ct=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},Ae),Y=ct.name;if("string"!=typeof Y||!Y)throw Bt.create("bad-app-name",{appName:String(Y)});const ge=Be.get(Y);if(ge){if((0,ne.vZ)(Xe,ge.options)&&(0,ne.vZ)(ct,ge.config))return ge;throw Bt.create("duplicate-app",{appName:Y})}const De=new $.H0(Y);for(const x of pn.values())De.addComponent(x);const U=new Yt(Xe,ct,De);return Be.set(Y,U),U}function Nn(Xe=Ut){const Ae=Be.get(Xe);if(!Ae)throw Bt.create("no-app",{appName:Xe});return Ae}function kn(){return Array.from(Be.values())}function Qn(Xe){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(Xe){const Ae=Xe.name;Be.has(Ae)&&(Be.delete(Ae),yield Promise.all(Xe.container.getProviders().map(ct=>ct.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function ue(Xe,Ae,ct){var Y;let ge=null!==(Y=Ft[Xe])&&void 0!==Y?Y:Xe;ct&&(ge+=`-${ct}`);const De=ge.match(/\s|\//),U=Ae.match(/\s|\//);if(De||U){const x=[`Unable to register library "${ge}" with version "${Ae}":`];return De&&x.push(`library name "${ge}" contains illegal characters (whitespace or "/")`),De&&U&&x.push("and"),U&&x.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void _e.warn(x.join(" "))}Vt(new $.wA(`${ge}-version`,()=>({library:ge,version:Ae}),"VERSION"))}function ke(Xe,Ae){if(null!==Xe&&"function"!=typeof Xe)throw Bt.create("invalid-log-argument");(0,O.Am)(Xe,Ae)}function Ke(Xe){(0,O.Ub)(Xe)}const $t="firebase-heartbeat-store";let un=null;function _n(){return un||(un=(0,ne.X3)("firebase-heartbeat-database",1,(Xe,Ae)=>{0===Ae&&Xe.createObjectStore($t)}).catch(Xe=>{throw Bt.create("storage-open",{originalErrorMessage:Xe.message})})),un}function vt(){return(vt=(0,f.Z)(function*(Xe){try{return(yield _n()).transaction($t).objectStore($t).get(Hn(Xe))}catch(Ae){throw Bt.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function gt(Xe,Ae){return it.apply(this,arguments)}function it(){return(it=(0,f.Z)(function*(Xe,Ae){try{const Y=(yield _n()).transaction($t,"readwrite");return yield Y.objectStore($t).put(Ae,Hn(Xe)),Y.complete}catch(ct){throw Bt.create("storage-set",{originalErrorMessage:ct.message})}})).apply(this,arguments)}function Hn(Xe){return`${Xe.name}!${Xe.options.appId}`}class Kn{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const ct=this.container.getProvider("app").getImmediate();this._storage=new bt(ct),this._heartbeatsCachePromise=this._storage.read().then(Y=>(this._heartbeatsCache=Y,Y))}triggerHeartbeat(){var Ae=this;return(0,f.Z)(function*(){const Y=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ge=gn();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==ge&&!Ae._heartbeatsCache.heartbeats.some(De=>De.date===ge))return Ae._heartbeatsCache.heartbeats.push({date:ge,agent:Y}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(De=>{const U=new Date(De.date).valueOf();return Date.now()-U<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,f.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const ct=gn(),{heartbeatsToSend:Y,unsentEntries:ge}=function on(Xe,Ae=1024){const ct=[];let Y=Xe.slice();for(const ge of Xe){const De=ct.find(U=>U.agent===ge.agent);if(De){if(De.dates.push(ge.date),Gn(ct)>Ae){De.dates.pop();break}}else if(ct.push({agent:ge.agent,dates:[ge.date]}),Gn(ct)>Ae){ct.pop();break}Y=Y.slice(1)}return{heartbeatsToSend:ct,unsentEntries:Y}}(Ae._heartbeatsCache.heartbeats),De=(0,ne.L)(JSON.stringify({version:2,heartbeats:Y}));return Ae._heartbeatsCache.lastSentHeartbeatDate=ct,ge.length>0?(Ae._heartbeatsCache.heartbeats=ge,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),De})()}}function gn(){return(new Date).toISOString().substring(0,10)}class bt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,f.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function Sn(Xe){return vt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var ct=this;return(0,f.Z)(function*(){var Y;if(yield ct._canUseIndexedDBPromise){const De=yield ct.read();return gt(ct.app,{lastSentHeartbeatDate:null!==(Y=Ae.lastSentHeartbeatDate)&&void 0!==Y?Y:De.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var ct=this;return(0,f.Z)(function*(){var Y;if(yield ct._canUseIndexedDBPromise){const De=yield ct.read();return gt(ct.app,{lastSentHeartbeatDate:null!==(Y=Ae.lastSentHeartbeatDate)&&void 0!==Y?Y:De.lastSentHeartbeatDate,heartbeats:[...De.heartbeats,...Ae.heartbeats]})}})()}}function Gn(Xe){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Qt(Xe){Vt(new $.wA("platform-logger",Ae=>new pe(Ae),"PRIVATE")),Vt(new $.wA("heartbeat",Ae=>new Kn(Ae),"PRIVATE")),ue(ae,"0.7.21",Xe),ue(ae,"0.7.21","esm2017"),ue("fire-js","")}("")},4859:(Rt,xe,N)=>{N.d(xe,{wA:()=>O,H0:()=>le});var f=N(5861),$=N(2090);class O{constructor(z,G,Z){this.name=z,this.instanceFactory=G,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ne="[DEFAULT]";class pe{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const Z=new $.BH;if(this.instancesDeferred.set(G,Z),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&Z.resolve($e)}catch($e){}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const Z=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),$e=null!==(G=null==z?void 0:z.optional)&&void 0!==G&&G;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Oe){if($e)return null;throw Oe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ae(_e){return"EAGER"===_e.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(G){}for(const[G,Z]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:$e});Z.resolve(Oe)}catch(Oe){}}}}clearInstance(z=ne){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...G.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ne){return this.instances.has(z)}getOptions(z=ne){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,Z=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Z,options:G});for(const[Oe,Pe]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Oe)&&Pe.resolve($e);return $e}onInit(z,G){var Z;const $e=this.normalizeInstanceIdentifier(G),Oe=null!==(Z=this.onInitCallbacks.get($e))&&void 0!==Z?Z:new Set;Oe.add(z),this.onInitCallbacks.set($e,Oe);const Pe=this.instances.get($e);return Pe&&z(Pe,$e),()=>{Oe.delete(z)}}invokeOnInitCallbacks(z,G){const Z=this.onInitCallbacks.get(G);if(Z)for(const $e of Z)try{$e(z,G)}catch(Oe){}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let Z=this.instances.get(z);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=z,_e===ne?void 0:_e),options:G}),this.instances.set(z,Z),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(Z,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Z)}catch($e){}var _e;return Z||null}normalizeInstanceIdentifier(z=ne){return this.component?this.component.multipleInstances?z:ne:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new pe(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},2833:(Rt,xe,N)=>{var f=N(5861),$=N(9681),O=N(4859),ne=N(2090);const pe="@firebase/installations",le="w:0.5.8",_e="FIS_v2",Pe=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(V){return V instanceof ne.ZR&&V.code.includes("request-failed")}function me({projectId:V}){return`https://firebaseinstallations.googleapis.com/v1/projects/${V}/installations`}function be(V){return{token:V.token,requestStatus:2,expiresIn:Q(V.expiresIn),creationTime:Date.now()}}function rt(V,ee){return qe.apply(this,arguments)}function qe(){return(qe=(0,f.Z)(function*(V,ee){const _t=(yield ee.json()).error;return Pe.create("request-failed",{requestName:V,serverCode:_t.code,serverMessage:_t.message,serverStatus:_t.status})})).apply(this,arguments)}function Ne({apiKey:V}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":V})}function Me(V,{refreshToken:ee}){const Re=Ne(V);return Re.append("Authorization",function et(V){return`${_e} ${V}`}(ee)),Re}function Ee(V){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,f.Z)(function*(V){const ee=yield V();return ee.status>=500&&ee.status<600?V():ee})).apply(this,arguments)}function Q(V){return Number(V.replace("s","000"))}function st(V,ee){return se.apply(this,arguments)}function se(){return(se=(0,f.Z)(function*({appConfig:V,heartbeatServiceProvider:ee},{fid:Re}){const _t=me(V),Tn=Ne(V),qt=ee.getImmediate({optional:!0});if(qt){const Tr=yield qt.getHeartbeatsHeader();Tr&&Tn.append("x-firebase-client",Tr)}const mn={method:"POST",headers:Tn,body:JSON.stringify({fid:Re,authVersion:_e,appId:V.appId,sdkVersion:le})},Kr=yield Ee(()=>fetch(_t,mn));if(Kr.ok){const Tr=yield Kr.json();return{fid:Tr.fid||Re,registrationStatus:2,refreshToken:Tr.refreshToken,authToken:be(Tr.authToken)}}throw yield rt("Create Installation",Kr)})).apply(this,arguments)}function ie(V){return new Promise(ee=>{setTimeout(ee,V)})}const Te=/^[cdef][\w-]{21}$/;function We(){try{const V=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(V),V[0]=112+V[0]%16;const Re=function It(V){return function oe(V){return btoa(String.fromCharCode(...V)).replace(/\+/g,"-").replace(/\//g,"_")}(V).substr(0,22)}(V);return Te.test(Re)?Re:""}catch(V){return""}}function Ut(V){return`${V.appName}!${V.appId}`}const Ft=new Map;function Be(V,ee){const Re=Ut(V);Dn(Re,ee),function Vt(V,ee){const Re=function Ge(){return!Nt&&"BroadcastChannel"in self&&(Nt=new BroadcastChannel("[Firebase] FID Change"),Nt.onmessage=V=>{Dn(V.data.key,V.data.fid)}),Nt}();Re&&Re.postMessage({key:V,fid:ee}),function ht(){0===Ft.size&&Nt&&(Nt.close(),Nt=null)}()}(Re,ee)}function Dn(V,ee){const Re=Ft.get(V);if(Re)for(const _t of Re)_t(ee)}let Nt=null;const Yt="firebase-installations-store";let dn=null;function Mn(){return dn||(dn=(0,ne.X3)("firebase-installations-database",1,(V,ee)=>{0===ee&&V.createObjectStore(Yt)})),dn}function Nn(V,ee){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(V,ee){const Re=Ut(V),Tn=(yield Mn()).transaction(Yt,"readwrite"),qt=Tn.objectStore(Yt),Pt=yield qt.get(Re);return yield qt.put(ee,Re),yield Tn.complete,(!Pt||Pt.fid!==ee.fid)&&Be(V,ee.fid),ee})).apply(this,arguments)}function Qn(V){return Se.apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(V){const ee=Ut(V),_t=(yield Mn()).transaction(Yt,"readwrite");yield _t.objectStore(Yt).delete(ee),yield _t.complete})).apply(this,arguments)}function ue(V,ee){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(V,ee){const Re=Ut(V),Tn=(yield Mn()).transaction(Yt,"readwrite"),qt=Tn.objectStore(Yt),Pt=yield qt.get(Re),mn=ee(Pt);return void 0===mn?yield qt.delete(Re):yield qt.put(mn,Re),yield Tn.complete,mn&&(!Pt||Pt.fid!==mn.fid)&&Be(V,mn.fid),mn})).apply(this,arguments)}function Ke(V){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(V){let ee;const Re=yield ue(V.appConfig,_t=>{const Tn=Gt(_t),qt=$t(V,Tn);return ee=qt.registrationPromise,qt.installationEntry});return""===Re.fid?{installationEntry:yield ee}:{installationEntry:Re,registrationPromise:ee}})).apply(this,arguments)}function Gt(V){return it(V||{fid:We(),registrationStatus:0})}function $t(V,ee){if(0===ee.registrationStatus){if(!navigator.onLine)return{installationEntry:ee,registrationPromise:Promise.reject(Pe.create("app-offline"))};const Re={fid:ee.fid,registrationStatus:1,registrationTime:Date.now()},_t=function un(V,ee){return _n.apply(this,arguments)}(V,Re);return{installationEntry:Re,registrationPromise:_t}}return 1===ee.registrationStatus?{installationEntry:ee,registrationPromise:Sn(V)}:{installationEntry:ee}}function _n(){return(_n=(0,f.Z)(function*(V,ee){try{const Re=yield st(V,ee);return Nn(V.appConfig,Re)}catch(Re){throw Le(Re)&&409===Re.customData.serverCode?yield Qn(V.appConfig):yield Nn(V.appConfig,{fid:ee.fid,registrationStatus:0}),Re}})).apply(this,arguments)}function Sn(V){return vt.apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(V){let ee=yield gt(V.appConfig);for(;1===ee.registrationStatus;)yield ie(100),ee=yield gt(V.appConfig);if(0===ee.registrationStatus){const{installationEntry:Re,registrationPromise:_t}=yield Ke(V);return _t||Re}return ee})).apply(this,arguments)}function gt(V){return ue(V,ee=>{if(!ee)throw Pe.create("installation-not-found");return it(ee)})}function it(V){return function Hn(V){return 1===V.registrationStatus&&V.registrationTime+1e4<Date.now()}(V)?{fid:V.fid,registrationStatus:0}:V}function ar(V,ee){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*({appConfig:V,heartbeatServiceProvider:ee},Re){const _t=Kn(V,Re),Tn=Me(V,Re),qt=ee.getImmediate({optional:!0});if(qt){const Tr=yield qt.getHeartbeatsHeader();Tr&&Tn.append("x-firebase-client",Tr)}const mn={method:"POST",headers:Tn,body:JSON.stringify({installation:{sdkVersion:le,appId:V.appId}})},Kr=yield Ee(()=>fetch(_t,mn));if(Kr.ok)return be(yield Kr.json());throw yield rt("Generate Auth Token",Kr)})).apply(this,arguments)}function Kn(V,{fid:ee}){return`${me(V)}/${ee}/authTokens:generate`}function gn(V){return on.apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(V,ee=!1){let Re;const _t=yield ue(V.appConfig,qt=>{if(!ct(qt))throw Pe.create("not-registered");const Pt=qt.authToken;if(!ee&&Y(Pt))return qt;if(1===Pt.requestStatus)return Re=bt(V,ee),qt;{if(!navigator.onLine)throw Pe.create("app-offline");const mn=De(qt);return Re=Xe(V,mn),mn}});return Re?yield Re:_t.authToken})).apply(this,arguments)}function bt(V,ee){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(V,ee){let Re=yield Qt(V.appConfig);for(;1===Re.authToken.requestStatus;)yield ie(100),Re=yield Qt(V.appConfig);const _t=Re.authToken;return 0===_t.requestStatus?gn(V,ee):_t})).apply(this,arguments)}function Qt(V){return ue(V,ee=>{if(!ct(ee))throw Pe.create("not-registered");return function U(V){return 1===V.requestStatus&&V.requestTime+1e4<Date.now()}(ee.authToken)?Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}}):ee})}function Xe(V,ee){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(V,ee){try{const Re=yield ar(V,ee),_t=Object.assign(Object.assign({},ee),{authToken:Re});return yield Nn(V.appConfig,_t),Re}catch(Re){if(!Le(Re)||401!==Re.customData.serverCode&&404!==Re.customData.serverCode){const _t=Object.assign(Object.assign({},ee),{authToken:{requestStatus:0}});yield Nn(V.appConfig,_t)}else yield Qn(V.appConfig);throw Re}})).apply(this,arguments)}function ct(V){return void 0!==V&&2===V.registrationStatus}function Y(V){return 2===V.requestStatus&&!function ge(V){const ee=Date.now();return ee<V.creationTime||V.creationTime+V.expiresIn<ee+36e5}(V)}function De(V){const ee={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},V),{authToken:ee})}function H(){return(H=(0,f.Z)(function*(V){const ee=V,{installationEntry:Re,registrationPromise:_t}=yield Ke(ee);return _t?_t.catch(console.error):gn(ee).catch(console.error),Re.fid})).apply(this,arguments)}function M(){return(M=(0,f.Z)(function*(V,ee=!1){const Re=V;return yield k(Re),(yield gn(Re,ee)).token})).apply(this,arguments)}function k(V){return j.apply(this,arguments)}function j(){return(j=(0,f.Z)(function*(V){const{registrationPromise:ee}=yield Ke(V);ee&&(yield ee)})).apply(this,arguments)}function ln(V){return Pe.create("missing-app-config-values",{valueName:V})}const q="installations",Ye=V=>{const ee=V.getProvider("app").getImmediate(),Re=function br(V){if(!V||!V.options)throw ln("App Configuration");if(!V.name)throw ln("App Name");const ee=["projectId","apiKey","appId"];for(const Re of ee)if(!V.options[Re])throw ln(Re);return{appName:V.name,projectId:V.options.projectId,apiKey:V.options.apiKey,appId:V.options.appId}}(ee);return{app:ee,appConfig:Re,heartbeatServiceProvider:(0,$._getProvider)(ee,"heartbeat"),_delete:()=>Promise.resolve()}},Et=V=>{const ee=V.getProvider("app").getImmediate(),Re=(0,$._getProvider)(ee,q).getImmediate();return{getId:()=>function x(V){return H.apply(this,arguments)}(Re),getToken:Tn=>function X(V){return M.apply(this,arguments)}(Re,Tn)}};(function Dt(){(0,$._registerComponent)(new O.wA(q,Ye,"PUBLIC")),(0,$._registerComponent)(new O.wA("installations-internal",Et,"PRIVATE"))})(),(0,$.registerVersion)(pe,"0.5.8"),(0,$.registerVersion)(pe,"0.5.8","esm2017")},1877:(Rt,xe,N)=>{N.d(xe,{in:()=>$,Yd:()=>ae,Ub:()=>le,Am:()=>_e});const f=[];var $=(()=>{return(z=$||($={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",$;var z})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ne=$.INFO,pe={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},we=(z,G,...Z)=>{if(G<z.logLevel)return;const $e=(new Date).toISOString(),Oe=pe[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${$e}]  ${z.name}:`,...Z)};class ae{constructor(G){this.name=G,this._logLevel=ne,this._logHandler=we,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in $))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...G),this._logHandler(this,$.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...G),this._logHandler(this,$.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,$.INFO,...G),this._logHandler(this,$.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,$.WARN,...G),this._logHandler(this,$.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...G),this._logHandler(this,$.ERROR,...G)}}function le(z){f.forEach(G=>{G.setLogLevel(z)})}function _e(z,G){for(const Z of f){let $e=null;G&&G.level&&($e=O[G.level]),Z.userLogHandler=null===z?null:(Oe,Pe,...Le)=>{const me=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(rt){return null}}).filter(be=>be).join(" ");Pe>=(null!=$e?$e:Oe.logLevel)&&z({level:$[Pe].toLowerCase(),message:me,args:Le,type:Oe.name})}}}},5861:(Rt,xe,N)=>{function f(O,ne,pe,we,ae,le,_e){try{var z=O[le](_e),G=z.value}catch(Z){return void pe(Z)}z.done?ne(G):Promise.resolve(G).then(we,ae)}function $(O){return function(){var ne=this,pe=arguments;return new Promise(function(we,ae){var le=O.apply(ne,pe);function _e(G){f(le,we,ae,_e,z,"next",G)}function z(G){f(le,we,ae,_e,z,"throw",G)}_e(void 0)})}}N.d(xe,{Z:()=>$})}},Rt=>{Rt(Rt.s=1199)}]);